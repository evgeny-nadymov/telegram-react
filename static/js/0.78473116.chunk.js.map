{"version":3,"sources":["Components/Viewer/RLottie.js"],"names":["RLottie","this","props","options","eventListeners","loop","url","autoplay","animationData","stringData","rendererSettings","segments","container","el","renderer","Boolean","fileId","window","loadAnimation","anim","hasFirstFrame","forEach","eventName","callback","registerEvents","prevProps","prevState","snapshot","prevOptions","prevEventListeners","unregisterEvents","destroy","blob","play","forceFlag","playSegments","isPaused","pause","addEventListener","removeEventListener","width","height","ariaRole","ariaLabel","title","onClick","onMouseEnter","onMouseOut","lottieStyles","overflow","outline","style","role","aria-label","tabIndex","ref","c","className","React","Component"],"mappings":"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","file":"static/js/0.78473116.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './RLottie.css';\n\nclass RLottie extends React.Component {\n    componentDidMount() {\n        const { options, eventListeners } = this.props;\n\n        const {\n            url,\n            loop,\n            autoplay,\n            animationData,\n            stringData,\n            rendererSettings,\n            segments\n        } = options;\n\n        this.options = {\n            container: this.el,\n            renderer: 'canvas',\n            loop: Boolean(loop),\n            autoplay: Boolean(autoplay),\n            segments: Boolean(segments),\n            animationData,\n            stringData,\n            rendererSettings\n        };\n\n        this.options = { ...this.options, ...options };\n        const data = this.options.animationData;\n        const fileId = this.options.fileId;\n        // console.log('[RLottie] ctor loadAnimation start', [fileId, data]);\n        window.RLottie.loadAnimation(this.options, anim => {\n            this.anim = anim;\n\n            // console.log('[Rlottie] ctor loadAnimation', [this.anim, window.RLottie.hasFirstFrame(this.anim)])\n            if (window.RLottie.hasFirstFrame(this.anim)) {\n                if (!eventListeners) return;\n\n                eventListeners.forEach(({ eventName, callback }) => {\n                    if (eventName === 'firstFrame') {\n                        callback && callback();\n                    }\n                });\n            }\n        });\n        this.registerEvents(eventListeners);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { options, eventListeners } = this.props;\n        const { options: prevOptions, eventListeners: prevEventListeners } = prevProps\n\n        // const data = options.animationData;\n        // const prevData = prevOptions.animationData;\n        // const fileId = options.fileId;\n        // const prevFileId = prevOptions.fileId;\n        if (options.animationData !== prevOptions.animationData || options.fileId !== prevOptions.fileId) {\n            // console.log('[RLottie] update', [fileId, data], [prevFileId, prevData], [options.animationData !== prevOptions.animationData, options.fileId !== prevOptions.fileId])\n            this.unregisterEvents(prevEventListeners);\n            this.destroy();\n\n            this.options = { ...this.options, ...options };\n            // console.log('[RLottie] update loadAnimation start', [fileId, data]);\n            const url = this.props.options.url;\n            window.RLottie.loadAnimation(this.options, anim => {\n                this.anim = anim;\n                // console.log('[RLottie] update loadAnimation stop', anim, [fileId, data]);\n                // if (this.props.options.url === url) {\n                //     this.anim = anim;\n                // } else {\n                //     window.RLottie.destroy(anim);\n                // }\n                if (!eventListeners) return;\n\n                eventListeners.forEach(({ eventName, callback }) => {\n                    if (eventName === 'firstFrame') {\n                        callback && callback();\n                    }\n                });\n            });\n            this.registerEvents(eventListeners);\n        }\n    }\n\n    componentWillUnmount() {\n        this.unregisterEvents(this.props.eventListeners);\n        this.destroy();\n        this.options.blob = null;\n        this.options.container = null;\n        this.options = null;\n        this.anim = null;\n    }\n\n    play() {\n        // console.log('[Rlottie] play');\n        window.RLottie.play(this.anim);\n        // this.anim.play();\n    }\n\n    playSegments(segments, forceFlag) {\n        window.RLottie.playSegments(this.anim, segments, forceFlag);\n        // this.anim.playSegments(segments, forceFlag);\n    }\n\n    get isPaused() {\n        if (!this.anim) {\n            return false;\n        }\n\n        return window.RLottie.isPaused(this.anim);\n    }\n\n    pause() {\n        if (!window.RLottie.isPaused(this.anim)) {\n            window.RLottie.pause(this.anim);\n            return true;\n        }\n\n        return false;\n    }\n\n    destroy() {\n        // console.log('[RLottie] destroy', this.anim);\n        if (!this.anim) return;\n\n        window.RLottie.destroy(this.anim);\n        // this.anim.destroy();\n    }\n\n    registerEvents(eventListeners) {\n        // console.log('[Rlottie] registerEvents', [this.anim, eventListeners]);\n\n        if (!this.anim) return;\n\n        if (!eventListeners) return;\n\n        eventListeners.forEach(({ eventName, callback }) => {\n            window.RLottie.addEventListener(this.anim, eventName, callback);\n        });\n    }\n\n    unregisterEvents(eventListeners) {\n        if (!this.anim) return;\n\n        if (!eventListeners) return;\n\n        eventListeners.forEach(({ eventName, callback }) => {\n            window.RLottie.removeEventListener(this.anim, eventName, callback);\n        });\n    }\n\n    render() {\n        const {\n            width,\n            height,\n            ariaRole,\n            ariaLabel,\n            title,\n            onClick,\n            onMouseEnter,\n            onMouseOut\n        } = this.props;\n\n        const lottieStyles = {\n            width: width || '100%',\n            height: height || '100%',\n            overflow: 'hidden',\n            // margin: '0 auto',\n            outline: 'none',\n            ...this.props.style\n        };\n\n        return (\n            <div\n                style={lottieStyles}\n                title={title}\n                role={ariaRole}\n                aria-label={ariaLabel}\n                tabIndex='0'\n                onClick={onClick}\n                onMouseEnter={onMouseEnter}\n                onMouseOut={onMouseOut}\n            >\n                <picture\n                    ref={c => this.el = c}\n                    className='dev_page_tgsticker tl_main_card_animated js-tgsticker_image'>\n                </picture>\n            </div>\n        );\n    }\n}\n\nRLottie.propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number,\n    options: PropTypes.object\n};\n\nexport default RLottie;"],"sourceRoot":""}