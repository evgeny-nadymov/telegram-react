{"version":3,"sources":["Utils/InputTypingManager.js","Stores/ChatStore.js","Components/Theme.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js","Language.js","Theme.js","Utils/Common.js","Controllers/TdLibController.js","Constants.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Additional/AppInactiveControl.js","Components/InactivePage.js","Components/StubPage.js","TelegramApp.js","index.js","Components/ColumnMiddle/HeaderProgress.js","Stores/OptionStore.js","registerServiceWorker.js","Stores/UserStore.js","Utils/HOC.js","Stores/LocalizationStore.js","Components/Footer.js"],"names":["InputTypingManager","chatId","timeoutCallback","Object","classCallCheck","this","actions","Map","timerId","handleTimer","bind","addAction","clearAction","setActionsTimeout","now","Date","expiredActions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref3","value","_ref2","slicedToArray","key","expire","push","err","return","_arr","_i","length","delete","update","@type","chat_id","action","userId","setSeconds","getSeconds","TYPING_INPUT_INTERVAL_S","set","clearTimeout","timeout","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref6","_ref5","actionTimeout","setTimeout","store","ChatStore","_this","possibleConstructorReturn","getPrototypeOf","call","loadClientData","cookies","Cookies","clientData","data","get","keys","forEach","Number","_unused","saveClientData","obj","Array","from","entries","reduce","_ref","String","onUpdate","state","updating","skippedUpdates","TdLibController","parameters","fastUpdating","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","order","draft_message","chat","assign","is_marked_as_unread","is_pinned","is_sponsored","last_message","notification_settings","photo","type","user","UserStore","user_id","profile_photo","pinned_message_id","last_read_inbox_message_id","unread_count","last_read_outbox_message_id","reply_markup_message_id","title","unread_mention_count","typingManager","getTypingManager","setTypingManager","onClientUpdate","send","client_data","JSON","stringify","setClientData","emit","addTdLibListener","addListener","removeTdLibListener","removeListener","items","typingManagers","onlineMemberCount","setMaxListeners","Infinity","source1","source2","id","EventEmitter","window","__webpack_require__","d","__webpack_exports__","borderStyle","accentStyles","theme","borderColor","palette","divider","accentColorLight","color","primary","light","accentColorDark","dark","accentColorMain","main","accentBackgroundLight","background","accentBackgroundDark","ActionScheduler","actionCallback","cancelCallback","add","cancel","has","setMilliseconds","getMilliseconds","invoke","asyncToGenerator","regenerator_default","a","mark","_callee","item","wrap","_context","prev","abrupt","stop","_x","apply","arguments","remove","_ref4","expired","_ref7","ApplicationStore","addScheduledAction","actionScheduler","invokeScheduledAction","removeScheduledAction","handleScheduledAction","console","log","handleCancelScheduledAction","authorizationState","authorization_state","loggingOut","sendTdParameters","setPhoneNumberRequest","dialogsReady","init","document","connectionState","setNotificationSettings","scope","content","text","confirm","logOut","alert","extendedUpdate","nextChatId","nextMessageId","messageId","previousChatId","previousMessageId","mediaViewerContent","profileMediaViewerContent","phone","defaultPhone","setPhoneNumber","clientUpdate","dialogChatId","name","focused","inProgress","setChatId","phone_number","then","result","catch","error","onUpdateStatistics","statistics","count","addStatistics","getDragging","dragging","setDragging","scopeNotificationSettings","isChatDetailsVisible","visibility","notificationSettings","application","withLanguage","WrappedComponent","LanguageWrapper","_React$Component","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","i18n","LocalizationStore","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","react_i18next__WEBPACK_IMPORTED_MODULE_6__","props","React","Component","displayName","concat","getDisplayName","withTheme","ThemeWrapper","onClientUpdateThemeChanging","createMuiTheme","secondary","typography","useNextVariants","setState","blue","on","_material_ui_styles_StylesProvider__WEBPACK_IMPORTED_MODULE_9___default","injectFirst","_material_ui_core_styles_MuiThemeProvider__WEBPACK_IMPORTED_MODULE_8___default","cleanProgressStatus","isConnecting","getBrowser","getOSName","isValidPhoneNumber","stringToBoolean","orderCompare","getSize","getPhotoThumbnailSize","getPhotoSize","getFitSize","itemsInView","throttle","debounce","getLetters","readImageSize","formatPhoneNumber","arrayBufferToBase64","isAuthorizationReady","between","getDurationString","getRandomInt","isAppleDevice","libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__","_Constants__WEBPACK_IMPORTED_MODULE_1__","navigator","platform","indexOf","test","userAgent","MSStream","status","replace","OSName","isEdge","documentMode","StyleMedia","phoneNumber","isBad","match","string","toLowerCase","trim","Boolean","order1","order2","diff","sizes","PHOTO_THUMBNAIL_SIZE","PHOTO_SIZE","dimension","useWidth","width","height","Math","abs","index","i","local","is_downloading_completed","currDiff","size","max","increaseToMax","floor","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","children","child","offsetTop","offsetHeight","scrollTop","func","wait","options","context","args","previous","later","leading","remaining","trailing","immediate","callNow","getFirstLetter","str","toUpperCase","split","file","callback","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","src","readAsDataURL","number","unformattedNumber","startsWith","formatNumber","buffer","binary","bytes","Uint8Array","len","byteLength","fromCharCode","btoa","first","last","secondsTotal","hours","minutes","seconds","min","ceil","random","controller","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","location","setParameters","_this$parameters","verbosity","jsVerbosity","useTestDC","readOnly","useDatabase","mode","dbname","req","indexedDB","open","existed","onsuccess","close","deleteDatabase","onupgradeneeded","databaseExists","exists","logVerbosityLevel","jsLogVerbosityLevel","prefix","isBackground","wasmUrl","WASM_FILE_NAME","WASM_FILE_HASH","client","TdClient","disableLog","search","params","URLSearchParams","parseInt","VERBOSITY_MIN","VERBOSITY_MAX","VERBOSITY_JS_MIN","VERBOSITY_JS_MAX","tag","tagVerbosity","request","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","apiHash","version","process","packageJson","use_test_dc","api_id","api_hash","system_language_code","language","device_model","system_version","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","_this2","ANIMATION_DURATION_200MS","ANIMATION_DURATION_300MS","EMOJI_PICKER_TIMEOUT_MS","CHAT_SLICE_LIMIT","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","MEDIA_SLICE_LIMIT","MESSAGE_SLICE_LIMIT","MESSAGE_SPLIT_MAX_TIME_S","MUTED_VALUE_MAX","MUTED_VALUE_MIN","NOTIFICATIONS_DEBOUNCE_DELAY_MS","PHOTO_BIG_SIZE","PHOTO_DISPLAY_SIZE","PHOTO_DISPLAY_SMALL_SIZE","POLL_QUESTION_LENGTH","POLL_QUESTION_HINT_LENGTH","POLL_QUESTION_MAX_LENGTH","POLL_OPTION_LENGTH","POLL_OPTION_HINT_LENGTH","POLL_OPTION_MAX_LENGTH","POLL_OPTIONS_MAX_COUNT","SERVICE_NOTIFICATIONS_USER_ID","STICKER_DISPLAY_SIZE","STICKER_HINT_DISPLAY_SIZE","STICKER_PREVIEW_DISPLAY_SIZE","STICKER_SMALL_DISPLAY_SIZE","PROFILE_PHOTO_BIG_SIZE","PROFILE_PHOTO_SMALL_SIZE","TYPING_OUTPUT_INTERVAL_S","USERNAME_LENGTH_MIN","MAX_SNACK","NOTIFICATION_AUTO_HIDE_DURATION_MS","THUMBNAIL_BLURRED_SIZE","PRELOAD_AUDIO_SIZE","PRELOAD_ANIMATION_SIZE","PRELOAD_DOCUMENT_SIZE","PRELOAD_STICKER_SIZE","PRELOAD_VOICENOTE_SIZE","PRELOAD_VIDEO_SIZE","PRELOAD_VIDEONOTE_SIZE","THUMBNAIL_PRIORITY","FILE_PRIORITY","OPTIMIZATIONS_FIRST_START","PLAYER_VOLUME_NORMAL","PLAYER_STARTTIME","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_PLAYBACKRATE_FAST","PLAYER_PROGRESS_TIMEOUT_MS","SignInControl","connecting","loading","onUpdateConnectionState","onClientUpdateSetPhoneCanceled","onClientUpdateSetPhoneError","errorString","message","onClientUpdateSetPhoneResult","onUpdateOption","handleSuggestedLanguagePackId","languagePackId","OptionStore","loadLanguage","suggestedLanguage","handleNext","enteredPhone","openConfirmation","code","handleChange","event","target","handleKeyPress","preventDefault","handleDone","handleChangeLanguage","_this$props","classes","t","_this$state","react_default","FormControl_default","fullWidth","className","HeaderProgress","TextField_default","disabled","autoFocus","label","margin","onChange","onKeyPress","defaultValue","FormHelperText_default","Button_default","button","onClick","Typography_default","continueAtLanguage","Link_default","lng","enhance","compose","withTranslation","withStyles","fontWeight","textAlign","transform","position","cursor","left","right","bottom","ConfirmCodeControl","isValid","first_name","last_name","finally","handleBack","onChangePhone","e","codeLength","codeInfo","getPhoneNumber","getCodeLength","subtitle","getSubtitle","maxLength","FormHelperText_FormHelperText_default","buttonLeft","buttonRight","marginRight","marginTop","marginLeft","PasswordControl","password","showPassword","handleMouseDownPassword","handleClickShowPassword","passwordHint","classNames","textField","InputLabel_default","htmlFor","Input_default","endAdornment","InputAdornment_default","IconButton_default","aria-label","onMouseDown","VisibilityOff_default","Visibility_default","root","display","flexWrap","withoutLabel","spacing","unit","flexBasis","AuthErrorDialog","handleAuthError","assertThisInitialized","handleClose","handleKeyDown","Dialog_default","transitionDuration","onKeyDown","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","AuthFormControl","control","Components_Auth_SignInControl","terms_of_service","code_info","Components_Auth_ConfirmCodeControl","termsOfService","password_hint","has_recovery_email_address","recovery_email_address_pattern","Components_Auth_PasswordControl","hasRecoveryEmailAddress","recoveryEmailAddressPattern","authorizationFormContent","Auth_AuthErrorDialog","default","AppInactiveControl","handleReload","Button_Button_default","reload","InactivePage","Fragment","page","Components_Additional_AppInactiveControl","Footer","StubPage","page-third-column","dialogs-third-column","menuIconButton","Menu_default","headerIconButton","Search_default","dialog-details-third-column","objectSpread","grey","flex","MainPage","lazy","Promise","all","TelegramApp","onClientUpdateDatabaseExists","checkServiceWorker","cookieEnabled","registerServiceWorker","onUpdateFatalError","fatalError","onUpdateAuthorizationState","hasFocus","onClientUpdateAppInactive","inactive","handleChangePhone","handleDragOver","stopPropagation","handleDrop","handleRefresh","handleDestroy","Suspense","fallback","Components_StubPage","Components_InactivePage","Components_Auth_AuthFormControl","onDragOver","onDrop","aria-describedby","keyMap","openPinnedChat","_callee2","chats","pinnedIndex","_context2","offset_order","offset_chat_id","limit","sent","chat_ids","altKey","ctrlKey","t0","getMyId","force","_x2","onblur","clear","onfocus","history","pushState","href","onpopstate","go","@global","ReactDOM","render","react_router_dom","react_router","path","component","getElementById","option","isLocalhost","hostname","register","_register","swUrl","URL","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","_callee3","pushSubscription","endpoint","p256dh_base64url","auth_base64url","_context3","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","_callee4","response","_context4","fetch","headers","ready","unregister","setFullInfo","user_full_info","fullInfoItems","myId","fullInfo","withSaveRef","forwardRef","ref","react__WEBPACK_IMPORTED_MODULE_6___default","forwardedRef","withRestoreRef","_class","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","rest","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","defaultNamespace","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChatInfo","ChannelInfo","Stickers","Emoji","SelectChatToStartMessaging","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Connecting","ConnectingToProxy","Loading","Updating","WaitingForNetwork","ru","fallbackLng","interpolation","escapeValue","react","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","translationCurrentLng","addResourceBundle","only_local","info","_language","language_pack_id","processStrings","save","changeLanguage","languagePackStrings","strings","_x3","localization","PureComponent"],"mappings":"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","file":"static/js/main.45321d54.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\n\nclass InputTypingManager {\n    constructor(chatId, timeoutCallback) {\n        this.actions = new Map();\n        this.timerId = null;\n        this.chatId = chatId;\n        this.timeoutCallback = timeoutCallback;\n\n        this.handleTimer = this.handleTimer.bind(this);\n        this.addAction = this.addAction.bind(this);\n        this.clearAction = this.clearAction.bind(this);\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\n    }\n\n    handleTimer() {\n        let now = new Date();\n        let expiredActions = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expiredActions.push(key);\n        }\n\n        for (let key of expiredActions) {\n            this.actions.delete(key);\n        }\n\n        let update = {\n            '@type': 'updateUserChatAction',\n            chat_id: this.chatId,\n            action: { '@type': 'chatActionTimerUpdate' }\n        };\n\n        this.timeoutCallback(update);\n        // ChatStore.emit('updateUserChatAction', update);\n\n        this.setActionsTimeout();\n    }\n\n    addAction(userId, action) {\n        let expire = new Date();\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\n\n        this.actions.set(userId, { expire: expire, action: action });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n\n    setActionsTimeout() {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    }\n\n    clearAction(userId) {\n        this.actions.delete(userId);\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n}\n\nexport default InputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport InputTypingManager from '../Utils/InputTypingManager';\nimport UserStore from './UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass ChatStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.typingManagers = new Map();\n        this.onlineMemberCount = new Map();\n        this.skippedUpdates = [];\n        this.loadClientData();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    loadClientData = () => {\n        const cookies = new Cookies();\n        const clientData = new Map();\n        try {\n            const data = cookies.get('clientData');\n            Object.keys(data).forEach(key => {\n                clientData.set(Number(key), data[key]);\n            });\n        } catch {}\n\n        this.clientData = clientData;\n    };\n\n    saveClientData = () => {\n        const arr = Array.from(this.clientData.entries());\n        const obj = arr.reduce((obj, [key, value]) => {\n            if (value) {\n                obj[String(key)] = value;\n            }\n            return obj;\n        }, {});\n\n        const cookies = new Cookies();\n        cookies.set('clientData', obj);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateConnectionState': {\n                if (update.state['@type'] === 'connectionStateUpdating') {\n                    this.updating = true;\n                    this.skippedUpdates = [];\n                } else {\n                    this.updating = false;\n                    if (this.skippedUpdates.length > 0) {\n                        TdLibController.parameters.fastUpdating = false;\n                        this.emitUpdate({\n                            '@type': 'clientUpdateFastUpdatingComplete',\n                            updates: this.skippedUpdates\n                        });\n                        this.skippedUpdates = [];\n                    }\n                }\n                break;\n            }\n            case 'updateChatDefaultDisableNotification': {\n                //TODO: handle updateChatDefaultDisableNotification\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOnlineMemberCount': {\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatDraftMessage': {\n                const { chat_id, order, draft_message } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: order === '0' ? chat.order : order,\n                        draft_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsMarkedAsUnread': {\n                const { chat_id, is_marked_as_unread } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { is_marked_as_unread });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsPinned': {\n                const { chat_id, order, is_pinned } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: order === '0' ? chat.order : order,\n                        is_pinned\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsSponsored': {\n                const { chat_id, order, is_sponsored } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: order === '0' ? chat.order : order,\n                        is_sponsored\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatLastMessage': {\n                const { chat_id, order, last_message } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: order === '0' ? chat.order : order,\n                        last_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatNotificationSettings': {\n                const { chat_id, notification_settings } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { notification_settings });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOrder': {\n                const { chat_id, order } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { order });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPhoto': {\n                const { chat_id, photo } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { photo });\n\n                    switch (chat.type['@type']) {\n                        case 'chatTypeBasicGroup': {\n                            break;\n                        }\n                        case 'chatTypeSupergroup': {\n                            break;\n                        }\n                        case 'chatTypePrivate':\n                        case 'chatTypeSecret': {\n                            const user = UserStore.get(chat.type.user_id);\n                            if (user) {\n                                UserStore.assign(user, { profile_photo: update.photo });\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPinnedMessage': {\n                const { chat_id, pinned_message_id } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { pinned_message_id });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadInbox': {\n                const { chat_id, last_read_inbox_message_id, unread_count } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { last_read_inbox_message_id, unread_count });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadOutbox': {\n                const { chat_id, last_read_outbox_message_id } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { last_read_outbox_message_id });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReplyMarkup': {\n                const { chat_id, reply_markup_message_id } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { reply_markup_message_id });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatTitle': {\n                const { chat_id, title } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { title });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatUnreadMentionCount': {\n                const { chat_id, unread_mention_count } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { unread_mention_count });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateNewChat': {\n                this.set(update.chat);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateSecretChat': {\n                //TODO: handle updateSecretChat\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUnreadChatCount': {\n                //TODO: handle updateUnreadChatCount\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUserChatAction': {\n                let typingManager = this.getTypingManager(update.chat_id);\n                if (!typingManager) {\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\n                    this.setTypingManager(update.chat_id, typingManager);\n                }\n\n                const key = update.user_id;\n                if (update.action['@type'] === 'chatActionCancel') {\n                    typingManager.clearAction(key);\n                } else {\n                    typingManager.addAction(key, update.action);\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateMessageMentionRead': {\n                const { chat_id, unread_mention_count } = update;\n\n                const chat = this.get(chat_id);\n                if (chat) {\n                    this.assign(chat, { unread_mention_count });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateClearHistory': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateOpenChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateSetChatClientData': {\n                const { chatId, clientData } = update;\n\n                TdLibController.send({\n                    '@type': 'setChatClientData',\n                    chat_id: chatId,\n                    client_data: JSON.stringify(clientData)\n                });\n                this.setClientData(chatId, clientData);\n                this.saveClientData();\n\n                this.emitUpdate(update);\n                break;\n            }\n        }\n    };\n\n    emitUpdate = update => {\n        this.emit(update['@type'], update);\n    };\n\n    emitFastUpdate = update => {\n        if (this.updating && TdLibController.parameters.fastUpdating) {\n            this.skippedUpdates.push(update);\n            return;\n        }\n\n        this.emit(update['@type'], update);\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        //Object.assign(source1, source2);\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    get(chatId) {\n        return this.items.get(chatId);\n    }\n\n    set(chat) {\n        this.items.set(chat.id, chat);\n    }\n\n    getClientData(chatId) {\n        return this.clientData.get(chatId) || {};\n    }\n\n    setClientData(chatId, data) {\n        this.clientData.set(chatId, data);\n    }\n\n    setOnlineMemberCount(chatId, onlineMemberCount) {\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\n    }\n\n    getOnlineMemberCount(chatId) {\n        return this.onlineMemberCount.get(chatId) || 0;\n    }\n\n    getTypingManager(chatId) {\n        return this.typingManagers.get(chatId);\n    }\n\n    setTypingManager(chatId, typingManager) {\n        return this.typingManagers.set(chatId, typingManager);\n    }\n}\n\nconst store = new ChatStore();\nwindow.chat = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst borderStyle = theme => ({\n    borderColor: {\n        borderColor: theme.palette.divider\n    }\n});\n\nconst accentStyles = theme => ({\n    accentColorLight: {\n        color: theme.palette.primary.light\n    },\n    accentColorDark: {\n        color: theme.palette.primary.dark\n    },\n    accentColorMain: {\n        color: theme.palette.primary.main\n    },\n    accentBackgroundLight: {\n        background: theme.palette.primary.light\n    },\n    accentBackgroundDark: {\n        background: theme.palette.primary.dark\n    }\n});\n\nexport { borderStyle, accentStyles };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass ActionScheduler {\n    constructor(actionCallback, cancelCallback) {\n        this.actions = new Map();\n        this.actionCallback = actionCallback;\n        this.cancelCallback = cancelCallback;\n    }\n\n    add = (key, timeout, action, cancel) => {\n        if (this.actions.has(key)) {\n            return false;\n        }\n\n        let expire = new Date();\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\n\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n\n        return true;\n    };\n\n    invoke = async key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.action) await item.action();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    remove = key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.cancel) item.cancel();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    setTimeout = () => {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    };\n\n    handleTimer = () => {\n        let now = new Date();\n        let expired = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\n        }\n\n        for (let item of expired) {\n            this.actions.delete(item.key);\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\n            if (item.value.action) item.value.action();\n        }\n\n        this.setTimeout();\n    };\n}\n\nexport default ActionScheduler;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport ActionScheduler from '../Utils/ActionScheduler';\n\nclass ApplicationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.dialogsReady = false;\n        this.setPhoneNumberRequest = null;\n        this.chatId = 0;\n        this.dialogChatId = 0;\n        this.messageId = null;\n        this.statistics = new Map();\n        this.scopeNotificationSettings = new Map();\n        this.authorizationState = null;\n        this.defaultPhone = null;\n        this.connectionState = null;\n        this.isChatDetailsVisible = false;\n        this.mediaViewerContent = null;\n        this.profileMediaViewerContent = null;\n        this.dragging = false;\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\n\n        this.addTdLibListener();\n        this.addStatistics();\n        this.setMaxListeners(Infinity);\n    }\n\n    addScheduledAction = (key, timeout, action, cancel) => {\n        return this.actionScheduler.add(key, timeout, action, cancel);\n    };\n\n    invokeScheduledAction = async key => {\n        await this.actionScheduler.invoke(key);\n    };\n\n    removeScheduledAction = key => {\n        this.actionScheduler.remove(key);\n    };\n\n    handleScheduledAction = item => {\n        console.log('Invoked scheduled action key=', item.key);\n    };\n\n    handleCancelScheduledAction = item => {\n        console.log('Cancel scheduled action key=', item.key);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                this.authorizationState = update.authorization_state;\n\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateLoggingOut':\n                        this.loggingOut = true;\n                        break;\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.sendTdParameters();\n                        break;\n                    case 'authorizationStateWaitEncryptionKey':\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\n                        break;\n                    case 'authorizationStateWaitPhoneNumber': {\n                        if (this.setPhoneNumberRequest) {\n                            this.setPhoneNumberRequest();\n\n                            this.setPhoneNumberRequest = null;\n                        }\n\n                        break;\n                    }\n                    case 'authorizationStateWaitCode':\n                        break;\n                    case 'authorizationStateWaitPassword':\n                        break;\n                    case 'authorizationStateReady':\n                        this.loggingOut = false;\n                        this.setPhoneNumberRequest = null;\n                        this.dialogsReady = false;\n                        break;\n                    case 'authorizationStateClosing':\n                        break;\n                    case 'authorizationStateClosed':\n                        if (!this.loggingOut) {\n                            document.title += ': Zzz';\n                            this.emit('clientUpdateAppInactive');\n                        } else {\n                            TdLibController.init();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateConnectionState': {\n                this.connectionState = update.state;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateScopeNotificationSettings': {\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateFatalError': {\n                this.emit(update['@type'], update);\n\n                break;\n            }\n            case 'updateServiceNotification': {\n                const { type, content } = update;\n\n                if (!content) return;\n                if (content['@type'] === 'messageText') {\n                    const { text } = content;\n                    if (!text) return;\n\n                    if (text['@type'] === 'formattedText' && text.text) {\n                        switch (type) {\n                            case 'AUTH_KEY_DROP_DUPLICATE':\n                                let result = window.confirm(text.text);\n                                if (result) {\n                                    TdLibController.logOut();\n                                }\n                                break;\n                            default:\n                                alert(text.text);\n                                break;\n                        }\n                    }\n                }\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateChatId': {\n                const extendedUpdate = {\n                    '@type': 'clientUpdateChatId',\n                    nextChatId: update.chatId,\n                    nextMessageId: update.messageId,\n                    previousChatId: this.chatId,\n                    previousMessageId: this.messageId\n                };\n\n                this.chatId = update.chatId;\n                this.messageId = update.messageId;\n\n                this.emit('clientUpdateChatId', extendedUpdate);\n                break;\n            }\n            case 'clientUpdateDatabaseExists': {\n                this.emit('clientUpdateDatabaseExists', update);\n                break;\n            }\n            case 'clientUpdateDialogsReady': {\n                this.dialogsReady = true;\n                this.emit('clientUpdateDialogsReady', update);\n                break;\n            }\n            case 'clientUpdateMediaViewerContent': {\n                const { content } = update;\n                this.mediaViewerContent = content;\n\n                this.emit('clientUpdateMediaViewerContent', update);\n                break;\n            }\n            case 'clientUpdateProfileMediaViewerContent': {\n                const { content } = update;\n                this.profileMediaViewerContent = content;\n\n                this.emit('clientUpdateProfileMediaViewerContent', update);\n                break;\n            }\n            case 'clientUpdateSetPhone': {\n                const { phone } = update;\n\n                this.defaultPhone = phone;\n\n                if (!phone) {\n                    this.setPhoneNumberRequest = null;\n                    TdLibController.clientUpdate({\n                        '@type': 'clientUpdateSetPhoneCanceled'\n                    });\n                } else {\n                    if (\n                        this.authorizationState &&\n                        this.authorizationState['@type'] === 'authorizationStateWaitPhoneNumber'\n                    ) {\n                        this.setPhoneNumber(phone);\n                    } else {\n                        this.setPhoneNumberRequest = () => this.setPhoneNumber(phone);\n                    }\n                }\n\n                this.emit('clientUpdateSetPhone', update);\n                break;\n            }\n            case 'clientUpdateSetPhoneResult': {\n                this.emit('clientUpdateSetPhoneResult', update);\n                break;\n            }\n            case 'clientUpdateSetPhoneError': {\n                this.emit('clientUpdateSetPhoneError', update);\n                break;\n            }\n            case 'clientUpdateDialogChatId': {\n                const { chatId } = update;\n                this.dialogChatId = chatId;\n\n                this.emit('clientUpdateDialogChatId', update);\n                break;\n            }\n            case 'clientUpdateFocusWindow': {\n                TdLibController.send({\n                    '@type': 'setOption',\n                    name: 'online',\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\n                });\n\n                this.emit('clientUpdateFocusWindow', update);\n                break;\n            }\n            case 'clientUpdateForward': {\n                this.emit('clientUpdateForward', update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                if (update.inProgress && this.chatId === update.chatId) {\n                    TdLibController.setChatId(0);\n                }\n\n                break;\n            }\n        }\n    };\n\n    setPhoneNumber = phone => {\n        TdLibController.send({\n            '@type': 'setAuthenticationPhoneNumber',\n            phone_number: phone\n        })\n            .then(result => {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateSetPhoneResult',\n                    result\n                });\n            })\n            .catch(error => {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateSetPhoneError',\n                    error\n                });\n            });\n    };\n\n    onUpdateStatistics = update => {\n        if (!update) return;\n\n        if (this.statistics.has(update['@type'])) {\n            const count = this.statistics.get(update['@type']);\n\n            this.statistics.set(update['@type'], count + 1);\n        } else {\n            this.statistics.set(update['@type'], 1);\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    addStatistics = () => {\n        TdLibController.addListener('update', this.onUpdateStatistics);\n    };\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            nextChatId: chatId,\n            nextMessageId: messageId,\n            previousChatId: this.chatId,\n            previousMessageId: this.messageId\n        };\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n        this.emit(update['@type'], update);\n    };\n\n    getChatId() {\n        return this.chatId;\n    }\n\n    getMessageId() {\n        return this.messageId;\n    }\n\n    searchChat(chatId) {\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\n    }\n\n    changeChatDetailsVisibility(visibility) {\n        this.isChatDetailsVisible = visibility;\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\n    }\n\n    getConnectionState() {\n        return this.connectionState;\n    }\n\n    getAuthorizationState() {\n        return this.authorizationState;\n    }\n\n    getNotificationSettings(scope) {\n        return this.scopeNotificationSettings.get(scope);\n    }\n\n    setNotificationSettings(scope, notificationSettings) {\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\n    }\n\n    getDragging = () => {\n        return this.dragging;\n    };\n\n    setDragging = value => {\n        this.dragging = value;\n        this.emit('clientUpdateDragging', value);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new ApplicationStore();\nwindow.application = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { getDisplayName } from './Utils/HOC';\nimport LocalizationStore from './Stores/LocalizationStore';\n\nfunction withLanguage(WrappedComponent) {\n    class LanguageWrapper extends React.Component {\n        render() {\n            const i18n = LocalizationStore.i18n;\n\n            return (\n                <I18nextProvider i18n={i18n}>\n                    <WrappedComponent {...this.props} />\n                </I18nextProvider>\n            );\n        }\n    }\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\n\n    return LanguageWrapper;\n}\n\nexport default withLanguage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport blue from '@material-ui/core/colors/blue';\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport StylesProvider from '@material-ui/styles/StylesProvider';\nimport { getDisplayName } from './Utils/HOC';\nimport Cookies from 'universal-cookie';\nimport ApplicationStore from './Stores/ApplicationStore';\n\nfunction withTheme(WrappedComponent) {\n    class ThemeWrapper extends React.Component {\n        constructor(props) {\n            super(props);\n\n            const cookies = new Cookies();\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\n\n            let theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' }\n                },\n                typography: {\n                    useNextVariants: true\n                }\n            });\n\n            this.state = {\n                theme: theme\n            };\n        }\n\n        componentDidMount() {\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        componentWillUnmount() {\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        onClientUpdateThemeChanging = update => {\n            const { type, primary } = update;\n\n            const theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' },\n                    typography: {\n                        useNextVariants: true\n                    }\n                }\n            });\n\n            const cookies = new Cookies();\n            cookies.set('themeOptions', { type: type, primary: primary });\n\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\n        };\n\n        render() {\n            const { theme } = this.state;\n\n            return (\n                <StylesProvider injectFirst>\n                    <MuiThemeProvider theme={theme}>\n                        <WrappedComponent {...this.props} />\n                    </MuiThemeProvider>\n                </StylesProvider>\n            );\n        }\n    }\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\n\n    return ThemeWrapper;\n}\n\nexport default withTheme;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction isAppleDevice() {\n    const iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'MacIntel'];\n\n    if (!!navigator.platform) {\n        return iDevices.indexOf(navigator.platform) > -1;\n    }\n\n    return /iPad|iPhone|iPod|Mac\\sOS\\sX/.test(navigator.userAgent) && !window.MSStream;\n}\n\nfunction isConnecting(state) {\n    if (!state) return false;\n\n    switch (state['@type']) {\n        case 'connectionStateConnecting': {\n            return true;\n        }\n        case 'connectionStateConnectingToProxy': {\n            return true;\n        }\n        case 'connectionStateReady': {\n            return false;\n        }\n        case 'connectionStateUpdating': {\n            return false;\n        }\n        case 'connectionStateWaitingForNetwork': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanProgressStatus(status) {\n    if (!status) return status;\n\n    return status.replace('...', '').replace('', '');\n}\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n    return getSize(sizes, PHOTO_SIZE);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    const split = title.split(' ');\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +''+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n    return item > first && item < last;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport {\n    cleanProgressStatus,\n    isConnecting,\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    getDurationString,\n    getRandomInt,\n    isAppleDevice\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport packageJson from '../../package.json';\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\nimport {\n    VERBOSITY_JS_MAX,\n    VERBOSITY_JS_MIN,\n    VERBOSITY_MAX,\n    VERBOSITY_MIN,\n    WASM_FILE_HASH,\n    WASM_FILE_NAME\n} from '../Constants';\nimport TdClient from '@arseny30/tdweb/dist/tdweb';\n\nfunction databaseExists(dbname, callback) {\n    var req = indexedDB.open(dbname);\n    var existed = true;\n    req.onsuccess = function() {\n        req.result.close();\n        if (!existed) indexedDB.deleteDatabase(dbname);\n        callback(existed);\n    };\n    req.onupgradeneeded = function() {\n        existed = false;\n    };\n}\n\nclass TdLibController extends EventEmitter {\n    constructor() {\n        super();\n\n        this.parameters = {\n            useTestDC: false,\n            readOnly: false,\n            verbosity: 1,\n            jsVerbosity: 3,\n            fastUpdating: true,\n            useDatabase: false,\n            mode: 'wasm'\n        };\n\n        this.disableLog = false;\n\n        this.setMaxListeners(Infinity);\n    }\n\n    init = location => {\n        this.setParameters(location);\n\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\n        const dbName = useTestDC ? 'tdlib_test' : 'tdlib';\n\n        databaseExists(dbName, exists => {\n            this.clientUpdate({ '@type': 'clientUpdateDatabaseExists', exists });\n\n            let options = {\n                logVerbosityLevel: verbosity,\n                jsLogVerbosityLevel: jsVerbosity,\n                mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\n                prefix: useTestDC ? 'tdlib_test' : 'tdlib',\n                readOnly: readOnly,\n                isBackground: false,\n                useDatabase: useDatabase,\n                wasmUrl: `${WASM_FILE_NAME}?_sw-precache=${WASM_FILE_HASH}`\n                // onUpdate: update => this.emit('update', update)\n            };\n\n            console.log(\n                `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\n            );\n\n            this.client = new TdClient(options);\n            this.client.onUpdate = update => {\n                if (!this.disableLog) {\n                    if (update['@type'] === 'updateFile') {\n                        console.log('receive updateFile file_id=' + update.file.id, update);\n                    } else {\n                        console.log('receive update', update);\n                    }\n                }\n                this.emit('update', update);\n            };\n        });\n    };\n\n    clientUpdate = update => {\n        if (!this.disableLog) {\n            console.log('clientUpdate', update);\n        }\n        this.emit('clientUpdate', update);\n    };\n\n    setParameters = location => {\n        if (!location) return;\n\n        const { search } = location;\n        if (!search) return;\n\n        const params = new URLSearchParams(search.toLowerCase());\n\n        if (params.has('test')) {\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\n        }\n\n        if (params.has('verbosity')) {\n            const verbosity = parseInt(params.get('verbosity'), 10);\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\n                this.parameters.verbosity = verbosity;\n            }\n        }\n\n        if (params.has('jsverbosity')) {\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\n                this.parameters.jsVerbosity = jsVerbosity;\n            }\n        }\n\n        if (params.has('tag') && params.has('tagverbosity')) {\n            const tag = params\n                .get('tag')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            const tagVerbosity = params\n                .get('tagverbosity')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\n                this.parameters.tag = tag;\n                this.parameters.tagVerbosity = tagVerbosity;\n            }\n        }\n\n        if (params.has('readonly')) {\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\n        }\n\n        if (params.has('fastupdating')) {\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\n        }\n\n        if (params.has('db')) {\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\n        }\n        if (params.has('mode')) {\n            this.parameters.mode = params.get('mode');\n        }\n    };\n\n    send = request => {\n        if (!this.disableLog) {\n            console.log('send', request);\n            return this.client\n                .send(request)\n                .then(result => {\n                    console.log('receive', result);\n                    return result;\n                })\n                .catch(error => {\n                    console.error('catch', error);\n\n                    throw error;\n                });\n        } else {\n            return this.client.send(request);\n        }\n    };\n\n    sendTdParameters = async () => {\n        const apiId = process.env.REACT_APP_TELEGRAM_API_ID;\n        const apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\n        if (!apiId || !apiHash) {\n            if (\n                window.confirm(\n                    'API id is missing!\\n' +\n                        'In order to obtain an API id and develop your own application ' +\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\n                )\n            ) {\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\n            }\n        }\n\n        const { useTestDC } = this.parameters;\n        const { version } = packageJson;\n\n        this.send({\n            '@type': 'setTdlibParameters',\n            parameters: {\n                '@type': 'tdParameters',\n                use_test_dc: useTestDC,\n                api_id: apiId,\n                api_hash: apiHash,\n                system_language_code: navigator.language || 'en',\n                device_model: getBrowser(),\n                system_version: getOSName(),\n                application_version: version,\n                use_secret_chats: false,\n                use_message_database: true,\n                use_file_database: false,\n                database_directory: '/db',\n                files_directory: '/'\n            }\n            // ,\n            // extra: {\n            //     a: ['a', 'b'],\n            //     b: 123\n            // }\n        });\n\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\n            for (let i = 0; i < this.parameters.tag.length; i++) {\n                let tag = this.parameters.tag[i];\n                let tagVerbosity = this.parameters.tagVerbosity[i];\n\n                this.send({\n                    '@type': 'setLogTagVerbosityLevel',\n                    tag: tag,\n                    new_verbosity_level: tagVerbosity\n                });\n            }\n        }\n    };\n\n    logOut() {\n        this.send({ '@type': 'logOut' }).catch(error => {\n            this.emit('tdlib_auth_error', error);\n        });\n    }\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            chatId: chatId,\n            messageId: messageId\n        };\n\n        this.clientUpdate(update);\n    };\n\n    setMediaViewerContent(content) {\n        this.clientUpdate({\n            '@type': 'clientUpdateMediaViewerContent',\n            content: content\n        });\n    }\n}\n\nconst controller = new TdLibController();\n\nexport default controller;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const ANIMATION_FRAME_DURATION_MS = 40;\nexport const ANIMATION_DURATION_200MS = 200;\nexport const ANIMATION_DURATION_300MS = 300;\nexport const ANIMATION_DURATION_500MS = 500;\nexport const EMOJI_PICKER_TIMEOUT_MS = 100;\nexport const CHAT_SLICE_LIMIT = 25;\nexport const LOCATION_HEIGHT = 150;\nexport const LOCATION_SCALE = 2;\nexport const LOCATION_WIDTH = 300;\nexport const LOCATION_ZOOM = 16;\nexport const MEDIA_SLICE_LIMIT = 20;\nexport const MESSAGE_SLICE_LIMIT = 30;\nexport const MESSAGE_SPLIT_MAX_TIME_S = 600;\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\nexport const MUTED_VALUE_MIN = 0;\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\nexport const PHOTO_BIG_SIZE = 1280;\nexport const PHOTO_DISPLAY_SIZE = 260;\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\nexport const PHOTO_SIZE = 320;\nexport const PHOTO_THUMBNAIL_SIZE = 90;\nexport const POLL_QUESTION_LENGTH = 255;\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\nexport const POLL_OPTION_LENGTH = 100;\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\nexport const POLL_OPTIONS_MAX_COUNT = 10;\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\nexport const STICKER_DISPLAY_SIZE = 192;\nexport const STICKER_HINT_DISPLAY_SIZE = 76;\nexport const STICKER_PREVIEW_DISPLAY_SIZE = 256;\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\nexport const TYPING_INPUT_INTERVAL_S = 8;\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\nexport const VERBOSITY_JS_MAX = 20;\nexport const VERBOSITY_JS_MIN = 0;\nexport const VERBOSITY_MAX = 20;\nexport const VERBOSITY_MIN = 0;\nexport const USERNAME_LENGTH_MIN = 5;\nexport const MAX_SNACK = 10;\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\nexport const THUMBNAIL_BLURRED_SIZE = 320;\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const THUMBNAIL_PRIORITY = 32;\nexport const FILE_PRIORITY = 1;\nexport const OPTIMIZATIONS_FIRST_START = true;\nexport const PLAYER_VOLUME_NORMAL = 0.25;\nexport const PLAYER_STARTTIME = 0.0;\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\nexport const REPLACE_PREFIX = '/telegram-react';\nexport const WASM_FILE_NAME = '8bf9264e75149ea59dc582dc91902811.wasm';\nexport const WASM_FILE_HASH = '8bf9264e75149ea59dc582dc91902811';\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport HeaderProgress from '../ColumnMiddle/HeaderProgress';\nimport { cleanProgressStatus, isConnecting, isValidPhoneNumber } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport OptionStore from '../../Stores/OptionStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './SignInControl.css';\n\nconst styles = {\n    button: {\n        margin: '16px 0 0 0'\n    },\n    phone: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n    },\n    continueAtLanguage: {\n        transform: 'translateY(100px)',\n        textAlign: 'center',\n        position: 'absolute',\n        cursor: 'pointer',\n        left: 0,\n        right: 0,\n        bottom: 0\n    }\n};\n\nclass SignInControl extends React.Component {\n    state = {\n        connecting: isConnecting(ApplicationStore.connectionState),\n        error: null,\n        loading: false\n    };\n\n    componentDidMount() {\n        this.handleSuggestedLanguagePackId();\n\n        ApplicationStore.on('clientUpdateSetPhoneCanceled', this.onClientUpdateSetPhoneCanceled);\n        ApplicationStore.on('clientUpdateSetPhoneError', this.onClientUpdateSetPhoneError);\n        ApplicationStore.on('clientUpdateSetPhoneResult', this.onClientUpdateSetPhoneResult);\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        OptionStore.on('updateOption', this.onUpdateOption);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateSetPhoneCanceled', this.onClientUpdateSetPhoneCanceled);\n        ApplicationStore.removeListener('clientUpdateSetPhoneError', this.onClientUpdateSetPhoneError);\n        ApplicationStore.removeListener('clientUpdateSetPhoneResult', this.onClientUpdateSetPhoneResult);\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        OptionStore.removeListener('updateOption', this.onUpdateOption);\n    }\n\n    onUpdateConnectionState = update => {\n        const { state } = update;\n\n        this.setState({ connecting: isConnecting(state) });\n    };\n\n    onClientUpdateSetPhoneCanceled = update => {\n        this.setState({ loading: false });\n    };\n\n    onClientUpdateSetPhoneError = update => {\n        const { error } = update;\n\n        let errorString = null;\n        if (error && error['@type'] === 'error' && error.message) {\n            errorString = error.message;\n        } else {\n            errorString = JSON.stringify(error);\n        }\n\n        this.setState({ error: { string: errorString }, loading: false });\n    };\n\n    onClientUpdateSetPhoneResult = update => {\n        this.setState({ loading: false });\n    };\n\n    onUpdateOption = update => {\n        const { name } = update;\n\n        if (name === 'suggested_language_pack_id') {\n            this.handleSuggestedLanguagePackId();\n        }\n    };\n\n    handleSuggestedLanguagePackId = () => {\n        const { i18n } = this.props;\n        if (!i18n) return;\n\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\n        if (!languagePackId) return;\n\n        const { value } = languagePackId;\n        if (value === i18n.language) {\n            this.setState({ suggestedLanguage: null });\n            return;\n        }\n\n        LocalizationStore.loadLanguage(value).then(() => {\n            this.setState({ suggestedLanguage: value });\n        });\n    };\n\n    handleNext = () => {\n        const { defaultPhone } = this.props;\n\n        const phone = this.enteredPhone || defaultPhone;\n\n        if (isValidPhoneNumber(phone)) {\n            this.setState({ error: null, openConfirmation: true });\n        } else {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n        }\n    };\n\n    handleChange = event => {\n        this.enteredPhone = event.target.value;\n    };\n\n    handleKeyPress = event => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.handleDone();\n        }\n    };\n\n    handleDone = () => {\n        const { defaultPhone } = this.props;\n\n        const phone = this.enteredPhone || defaultPhone;\n        if (!isValidPhoneNumber(phone)) {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n            return;\n        }\n\n        this.setState({ error: null, loading: true });\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateSetPhone',\n            phone\n        });\n    };\n\n    handleChangeLanguage = () => {\n        const { i18n } = this.props;\n        const { suggestedLanguage } = this.state;\n\n        if (!i18n) return;\n        if (!suggestedLanguage) return;\n\n        this.setState({ suggestedLanguage: i18n.language });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\n    };\n\n    render() {\n        const { defaultPhone, classes, t } = this.props;\n        const { connecting, loading, error, suggestedLanguage } = this.state;\n\n        let errorString = '';\n        if (error) {\n            const { code, string } = error;\n            if (code) {\n                errorString = t(code);\n            } else {\n                errorString = string;\n            }\n        }\n\n        const title = connecting ? cleanProgressStatus(t('Connecting')) : t('YourPhone');\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                    {connecting && <HeaderProgress />}\n                </div>\n                <div>{t('StartText')}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(errorString)}\n                    fullWidth\n                    autoFocus\n                    id='phoneNumber'\n                    label=''\n                    margin='normal'\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                    defaultValue={defaultPhone}\n                />\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\n                <div className='sign-in-actions'>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        disabled={loading}\n                        className={classes.button}\n                        onClick={this.handleDone}>\n                        {t('Next')}\n                    </Button>\n                    <Typography className={classes.continueAtLanguage}>\n                        <Link onClick={this.handleChangeLanguage}>\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\n                        </Link>\n                    </Typography>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nSignInControl.propTypes = {\n    defaultPhone: PropTypes.string\n};\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(SignInControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TextField from '@material-ui/core/TextField';\nimport HeaderProgress from '../ColumnMiddle/HeaderProgress';\nimport { cleanProgressStatus, formatPhoneNumber, isConnecting } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ConfirmCodeControl.css';\n\nconst styles = {\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n};\n\nclass ConfirmCodeControl extends React.Component {\n    state = {\n        connecting: isConnecting(ApplicationStore.connectionState),\n        error: '',\n        loading: false\n    };\n\n    componentDidMount() {\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n    }\n\n    onUpdateConnectionState = update => {\n        const { state } = update;\n\n        this.setState({ connecting: isConnecting(state) });\n    };\n\n    handleNext = () => {\n        if (this.code && this.isValid(this.code)) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid code. Please try again.' });\n        }\n    };\n\n    handleDone = () => {\n        const code = this.code;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationCode',\n            code: code,\n            first_name: 'A',\n            last_name: 'B'\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleBack = () => {\n        this.props.onChangePhone();\n    };\n\n    isValid(code) {\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\n        if (!isBad) {\n            code = code.replace(/\\D/g, '');\n            if (code.length !== 5) {\n                isBad = true;\n            }\n        }\n\n        return !isBad;\n    }\n\n    handleChange = e => {\n        this.code = e.target.value;\n\n        if (this.code && this.codeLength > 0 && this.code.length === this.codeLength) {\n            this.handleNext();\n        }\n    };\n\n    handleKeyPress = e => {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    getPhoneNumber(codeInfo) {\n        if (!codeInfo) return null;\n        return codeInfo.phone_number;\n    }\n\n    getCodeLength(codeInfo) {\n        if (!codeInfo) return 0;\n        if (!codeInfo.type) return 0;\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 0;\n            }\n            case 'authenticationCodeTypeSms': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return codeInfo.type.length;\n            }\n        }\n\n        return 0;\n    }\n\n    getSubtitle(codeInfo) {\n        if (!codeInfo) return 'Subtitle';\n        if (!codeInfo.type) return 'Subtitle';\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeSms': {\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return \"Please enter the code you've just received in your previous Telegram app.\";\n            }\n        }\n\n        return 'Subtitle';\n    }\n\n    render() {\n        const { classes, codeInfo, t } = this.props;\n        const { connecting, loading, error } = this.state;\n\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\n        this.codeLength = this.getCodeLength(codeInfo);\n        const subtitle = this.getSubtitle(codeInfo);\n\n        let title = t('YourCode');\n        if (connecting) {\n            title = cleanProgressStatus(t('Connecting'));\n        } else if (this.phoneNumber) {\n            title = formatPhoneNumber(this.phoneNumber);\n        }\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                    {connecting && <HeaderProgress />}\n                </div>\n                <div>{subtitle}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(error)}\n                    fullWidth\n                    autoFocus\n                    label=''\n                    margin='normal'\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                />\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        {t('Back')}\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        {t('Next')}\n                    </Button>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(ConfirmCodeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport HeaderProgress from '../ColumnMiddle/HeaderProgress';\nimport { cleanProgressStatus, isConnecting } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './PasswordControl.css';\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    margin: {\n        margin: '16px 0 8px 0'\n    },\n    withoutLabel: {\n        marginTop: theme.spacing.unit * 3\n    },\n    textField: {\n        flexBasis: 200\n    },\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n});\n\nclass PasswordControl extends React.Component {\n    state = {\n        connecting: isConnecting(ApplicationStore.connectionState),\n        password: '',\n        showPassword: false,\n        error: ''\n    };\n\n    componentDidMount() {\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n    }\n\n    onUpdateConnectionState = update => {\n        const { state } = update;\n\n        this.setState({ connecting: isConnecting(state) });\n    };\n\n    handleNext = () => {\n        if (this.password) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid password. Please try again.' });\n        }\n    };\n\n    handleBack = () => {\n        this.props.onChangePhone();\n    };\n\n    handleDone = () => {\n        const password = this.password;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationPassword',\n            password: password\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleMouseDownPassword = event => {\n        event.preventDefault();\n    };\n\n    handleClickShowPassword = () => {\n        this.setState({ showPassword: !this.state.showPassword });\n    };\n\n    handleChange = e => {\n        this.password = e.target.value;\n    };\n\n    handleKeyPress = e => {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    render() {\n        const { classes, passwordHint, t } = this.props;\n        const { connecting, loading, error, showPassword } = this.state;\n\n        let title = t('YourPassword');\n        if (connecting) {\n            title = cleanProgressStatus(t('Connecting'));\n        }\n\n        return (\n            <div>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                    {connecting && <HeaderProgress />}\n                </div>\n                <div>Please enter your cloud password.</div>\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\n                    <InputLabel htmlFor='adornment-password' error={Boolean(error)}>\n                        Your cloud password\n                    </InputLabel>\n                    <Input\n                        fullWidth\n                        autoFocus\n                        id='adornment-password'\n                        type={showPassword ? 'text' : 'password'}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                        endAdornment={\n                            <InputAdornment position='end'>\n                                <IconButton\n                                    aria-label='Toggle password visibility'\n                                    onClick={this.handleClickShowPassword}\n                                    onMouseDown={this.handleMouseDownPassword}>\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n                {passwordHint && (\n                    <FormHelperText id='password-hint-text'>\n                        <span className='password-hint-label'>Hint: </span>\n                        {passwordHint}\n                    </FormHelperText>\n                )}\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        {t('Back')}\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        {t('Next')}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(PasswordControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass AuthErrorDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            error: null\n        };\n\n        this.handleAuthError = this.handleAuthError.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentDidMount() {\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\n    }\n\n    handleAuthError(error) {\n        this.setState({\n            open: true,\n            error: error\n        });\n    }\n\n    handleClose() {\n        this.setState({\n            open: false\n        });\n    }\n\n    handleKeyDown(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleClose();\n        }\n    }\n\n    render() {\n        let errorString = null;\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\n            errorString = this.state.error.message;\n        } else {\n            errorString = JSON.stringify(this.state.error);\n        }\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onKeyDown={this.handleKeyDown}\n                onClose={this.handleClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{errorString}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default AuthErrorDialog;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport SignInControl from './SignInControl';\nimport ConfirmCodeControl from './ConfirmCodeControl';\nimport PasswordControl from './PasswordControl';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './AuthFormControl.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '20px'\n    },\n    authorizationFormContent: {\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary\n    }\n});\n\nclass AuthFormControl extends React.Component {\n    render() {\n        const { classes, authorizationState } = this.props;\n        const { defaultPhone } = ApplicationStore;\n\n        let control = null;\n        switch (authorizationState['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n            case 'authorizationStateWaitEncryptionKey':\n            case 'authorizationStateWaitTdlibParameters':\n            case 'authorizationStateWaitTdlib': {\n                // control = (\n                //     <>\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\n                //         <SignUpControl/>\n                //     </>);\n                control = <SignInControl defaultPhone={defaultPhone} />;\n                break;\n            }\n            case 'authorizationStateWaitCode': {\n                const { onChangePhone } = this.props;\n                const { terms_of_service, code_info } = authorizationState;\n\n                control = (\n                    <ConfirmCodeControl\n                        termsOfService={terms_of_service}\n                        codeInfo={code_info}\n                        onChangePhone={onChangePhone}\n                    />\n                );\n                break;\n            }\n            case 'authorizationStateWaitPassword': {\n                const { onChangePhone } = this.props;\n                const {\n                    password_hint,\n                    has_recovery_email_address,\n                    recovery_email_address_pattern\n                } = authorizationState;\n\n                control = (\n                    <PasswordControl\n                        passwordHint={password_hint}\n                        hasRecoveryEmailAddress={has_recovery_email_address}\n                        recoveryEmailAddressPattern={recovery_email_address_pattern}\n                        onChangePhone={onChangePhone}\n                    />\n                );\n                break;\n            }\n            default:\n                break;\n        }\n\n        return (\n            <div className='sign-in-wrap'>\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default withStyles(styles)(AuthFormControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport './AppInactiveControl.css';\n\nclass AppInactiveControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static handleReload() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div className='app-inactive'>\n                <div className='app-inactive-wrapper'>\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\n                    <div className='app-inactive-description'>\n                        Telegram supports only one active tab with the app.\n                        <br />\n                        Please reload this page to continue using this tab or close it.\n                    </div>\n                    <div className='app-inactive-actions'>\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\n                            Reload app\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AppInactiveControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AppInactiveControl from './Additional/AppInactiveControl';\nimport Footer from './Footer';\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    }\n});\n\nclass InactivePage extends React.Component {\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <>\n                <div className='header-wrapper' />\n                <div className={classNames(classes.page, 'page')}>\n                    <AppInactiveControl />\n                </div>\n                <Footer />\n            </>\n        );\n    }\n}\n\nInactivePage.propTypes = {};\n\nexport default withStyles(styles)(InactivePage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { borderStyle } from './Theme';\nimport Footer from './Footer';\nimport HeaderProgress from './ColumnMiddle/HeaderProgress';\nimport './ColumnMiddle/Header.css';\nimport './ColumnLeft/Dialogs.css';\nimport './ColumnMiddle/DialogDetails.css';\nimport '../TelegramApp.css';\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    },\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    headerIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    background: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[900] : 'transparent',\n        flex: '1 1 auto'\n    },\n    ...borderStyle(theme)\n});\n\nclass StubPage extends React.Component {\n    render() {\n        const { classes, title, t } = this.props;\n        const isChatDetailsVisible = false;\n\n        return (\n            <>\n                <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\n                    <div\n                        className={classNames(classes.borderColor, 'dialogs', {\n                            'dialogs-third-column': isChatDetailsVisible\n                        })}>\n                        <div className='header-master'>\n                            <IconButton className={classes.menuIconButton} aria-label='Menu'>\n                                <MenuIcon />\n                            </IconButton>\n                            <div className='header-status grow cursor-pointer'>\n                                <span className='header-status-content'>{t('AppName')}</span>\n                            </div>\n                            <IconButton className={classes.headerIconButton} aria-label={t('Search')}>\n                                <SearchIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                    <div\n                        className={classNames('dialog-details', {\n                            'dialog-details-third-column': isChatDetailsVisible\n                        })}>\n                        <div className={classNames(classes.borderColor, 'header-details')}>\n                            <div className={classNames('header-status', 'grow', 'cursor-default')}>\n                                <span className='header-status-content'>{title}</span>\n                                {Boolean(title) && <HeaderProgress />}\n                            </div>\n                        </div>\n                        <div className={classes.background} />\n                    </div>\n                </div>\n                <Footer />\n            </>\n        );\n    }\n}\n\nStubPage.propTypes = {\n    title: PropTypes.string\n};\n\nconst enhance = compose(\n    withStyles(styles),\n    withTranslation()\n);\n\nexport default enhance(StubPage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport Cookies from 'universal-cookie';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport packageJson from '../package.json';\nimport withLanguage from './Language';\nimport withTheme from './Theme';\nimport AuthFormControl from './Components/Auth/AuthFormControl';\nimport InactivePage from './Components/InactivePage';\nimport StubPage from './Components/StubPage';\nimport registerServiceWorker from './registerServiceWorker';\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\nimport ChatStore from './Stores/ChatStore';\nimport UserStore from './Stores/UserStore';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\nimport './TelegramApp.css';\n\nconst MainPage = React.lazy(() => import('./Components/MainPage'));\n\nconst styles = theme => ({\n    '@global': {\n        a: {\n            color: theme.palette.primary.main\n        },\n        code: {\n            color: theme.palette.primary.dark\n        }\n    }\n});\n\nclass TelegramApp extends Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`Start Telegram Web ${packageJson.version}`);\n\n        this.state = {\n            authorizationState: null,\n            databaseExists: true,\n            inactive: false,\n            fatalError: false\n        };\n    }\n\n    componentWillMount() {\n        const { location } = this.props;\n\n        TdLibController.init(location);\n    }\n\n    componentDidMount() {\n        TdLibController.addListener('update', this.onUpdate);\n\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.on('clientUpdateDatabaseExists', this.onClientUpdateDatabaseExists);\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('update', this.onUpdate);\n\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.removeListener('clientUpdateDatabaseExists', this.onClientUpdateDatabaseExists);\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\n    }\n\n    onClientUpdateDatabaseExists = update => {\n        const { exists } = update;\n\n        if (!exists) {\n            this.setState({\n                authorizationState: {\n                    '@type': 'authorizationStateWaitTdlib'\n                },\n                databaseExists: exists\n            });\n        }\n    };\n\n    onUpdate = update => {\n        if (OPTIMIZATIONS_FIRST_START) {\n            if (!this.checkServiceWorker) {\n                this.checkServiceWorker = true;\n\n                const cookieEnabled = navigator.cookieEnabled;\n                if (cookieEnabled) {\n                    const cookies = new Cookies();\n                    const register = cookies.get('register');\n                    if (!register) {\n                        registerServiceWorker();\n                    }\n                }\n            }\n        }\n    };\n\n    onUpdateFatalError = update => {\n        this.setState({ fatalError: true });\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state: authorizationState } = update;\n\n        this.setState({ authorizationState });\n\n        if (!window.hasFocus) return;\n        if (!authorizationState) return;\n\n        TdLibController.send({\n            '@type': 'setOption',\n            name: 'online',\n            value: { '@type': 'optionValueBoolean', value: true }\n        });\n    };\n\n    onClientUpdateAppInactive = update => {\n        this.setState({ inactive: true });\n    };\n\n    handleChangePhone = () => {\n        this.setState({\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\n        });\n    };\n\n    handleDragOver = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleRefresh = () => {\n        this.setState({ fatalError: false });\n        window.location.reload();\n    };\n\n    handleDestroy = () => {\n        this.setState({ fatalError: false });\n        TdLibController.send({ '@type': 'destroy' });\n    };\n\n    handleKeyDown = event => {\n        //console.log('KeyDown', event);\n    };\n\n    render() {\n        const { t } = this.props;\n        const { inactive, authorizationState, databaseExists, fatalError } = this.state;\n\n        const loading = t('Loading').replace('...', '');\n        //let page = <StubPage title={loading} />;\n        let page = (\n            <React.Suspense fallback={<StubPage title='' />}>\n                <MainPage />\n            </React.Suspense>\n        );\n\n        if (inactive) {\n            page = <InactivePage />;\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed':\n                case 'authorizationStateClosing':\n                case 'authorizationStateLoggingOut':\n                case 'authorizationStateReady': {\n                    page = (\n                        <React.Suspense fallback={<StubPage title='' />}>\n                            <MainPage />\n                        </React.Suspense>\n                    );\n                    break;\n                }\n                case 'authorizationStateWaitCode':\n                case 'authorizationStateWaitPassword':\n                case 'authorizationStateWaitPhoneNumber':\n                case 'authorizationStateWaitTdlib':\n                    page = (\n                        <AuthFormControl\n                            authorizationState={authorizationState}\n                            onChangePhone={this.handleChangePhone}\n                        />\n                    );\n                    break;\n                case 'authorizationStateWaitEncryptionKey':\n                case 'authorizationStateWaitTdlibParameters': {\n                    if (!databaseExists) {\n                        page = (\n                            <AuthFormControl\n                                authorizationState={authorizationState}\n                                onChangePhone={this.handleChangePhone}\n                            />\n                        );\n                    }\n\n                    break;\n                }\n            }\n        }\n\n        return (\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\n                {page}\n                <Dialog\n                    transitionDuration={0}\n                    open={fatalError}\n                    onClose={this.handleRefresh}\n                    aria-labelledby='fatal-error-dialog-title'\n                    aria-describedby='fatal-error-dialog-description'>\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id='fatal-error-dialog-description'>\n                            Oops! Something went wrong. We need to refresh this page.\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleDestroy} color='primary'>\n                            Log out\n                        </Button>\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\n                            Refresh\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nconst keyMap = new Map();\nwindow.keyMap = keyMap;\n\nasync function openPinnedChat(index) {\n    const chats = await TdLibController.send({\n        '@type': 'getChats',\n        offset_order: '9223372036854775807',\n        offset_chat_id: 0,\n        limit: 10\n    });\n\n    if (chats) {\n        let pinnedIndex = -1;\n        for (let i = 0; i < chats.chat_ids.length; i++) {\n            const chat = ChatStore.get(chats.chat_ids[i]);\n            if (chat && chat.is_pinned) {\n                pinnedIndex++;\n            }\n\n            if (pinnedIndex === index) {\n                TdLibController.setChatId(chat.id);\n                return;\n            }\n        }\n    }\n}\n\ndocument.addEventListener('keyup', event => {\n    keyMap.delete(event.key);\n    //console.log('keyup key=' + event.key, keyMap);\n});\n\ndocument.addEventListener('keydown', async event => {\n    keyMap.set(event.key, event.key);\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\n\n    const { authorizationState } = ApplicationStore;\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n    if (keyMap.size > 3) return;\n\n    if (event.altKey && event.ctrlKey) {\n        switch (event.key) {\n            case '0': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                const chat = await TdLibController.send({\n                    '@type': 'createPrivateChat',\n                    user_id: UserStore.getMyId(),\n                    force: true\n                });\n\n                if (chat) {\n                    TdLibController.setChatId(chat.id);\n                }\n                break;\n            }\n            case '1': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(0);\n                break;\n            }\n            case '2': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(1);\n                break;\n            }\n            case '3': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(2);\n                break;\n            }\n            case '4': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(3);\n                break;\n            }\n            case '5': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(4);\n                break;\n            }\n        }\n    }\n});\n\nwindow.hasFocus = true;\n\n// set offline on page lost focus\nwindow.onblur = function() {\n    keyMap.clear();\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n\n    window.hasFocus = false;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: false\n    });\n};\n\n// set online on page get focus\nwindow.onfocus = function() {\n    keyMap.clear();\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n\n    window.hasFocus = true;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: true\n    });\n};\n\n// disable back navigation\nwindow.history.pushState(null, null, window.location.href);\nwindow.onpopstate = function() {\n    window.history.go(1);\n};\n\nconst enhance = compose(\n    withLanguage,\n    withTranslation(),\n    withTheme,\n    withStyles(styles)\n);\n\nexport default enhance(TelegramApp);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport TelegramApp from './TelegramApp';\nimport registerServiceWorker from './registerServiceWorker';\nimport Cookies from 'universal-cookie';\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\nimport './index.css';\n\nReactDOM.render(\n    <Router>\n        <Route path='' component={TelegramApp} />\n    </Router>,\n    document.getElementById('root')\n);\n\nif (OPTIMIZATIONS_FIRST_START) {\n    const cookieEnabled = navigator.cookieEnabled;\n    if (cookieEnabled) {\n        const cookies = new Cookies();\n        const register = cookies.get('register');\n        if (register) {\n            registerServiceWorker();\n        }\n    } else {\n        registerServiceWorker();\n    }\n} else {\n    registerServiceWorker();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport './HeaderProgress.css';\n\nclass HeaderProgress extends React.Component {\n    render() {\n        return (\n            <>\n                <span className='header-progress'>.</span>\n                <span className='header-progress'>.</span>\n                <span className='header-progress'>.</span>\n            </>\n        );\n    }\n}\n\nexport default HeaderProgress;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OptionStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateOption':\n                this.items.set(update.name, update.value);\n\n                this.emit('updateOption', update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(name) {\n        return this.items.get(name);\n    }\n}\n\nconst store = new OptionStore();\nwindow.option = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { arrayBufferToBase64 } from './Utils/Common';\nimport Cookies from 'universal-cookie';\nimport { OPTIMIZATIONS_FIRST_START } from './Constants';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost =\n    //false;\n    Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default async function register() {\n    console.log('[SW] Register');\n\n    if (OPTIMIZATIONS_FIRST_START) {\n        const cookies = new Cookies();\n        cookies.set('register', true);\n    }\n\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        const serviceWorkerName =\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\n        console.log(`[SW] Service worker url: ${swUrl}`);\n\n        if (!isLocalhost) {\n            // Is not local host. Just register service worker\n            await registerValidSW(swUrl);\n        } else {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            await checkValidServiceWorker(swUrl);\n        }\n    }\n}\n\nasync function registerValidSW(swUrl) {\n    console.log('[SW] RegisterValidSW');\n    try {\n        const registration = await navigator.serviceWorker.register(swUrl);\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        console.log('[SW] New content is available; please refresh.');\n\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\n                    } else {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        console.log('[SW] Content is cached for offline use.');\n                    }\n                }\n            };\n        };\n\n        await subscribeNotifications(registration);\n    } catch (error) {\n        console.error('[SW] Error during service worker registration: ', error);\n    }\n}\n\nasync function subscribeNotifications(registration) {\n    try {\n        let pushSubscription = await registration.pushManager.getSubscription();\n        if (pushSubscription) await pushSubscription.unsubscribe();\n\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\n\n        const { endpoint } = pushSubscription;\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\n\n        if (endpoint && p256dh_base64url && auth_base64url) {\n            const { authorizationState } = ApplicationStore;\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n                await TdLibController.send({\n                    '@type': 'registerDevice',\n                    device_token: {\n                        '@type': 'deviceTokenWebPush',\n                        endpoint: endpoint,\n                        p256dh_base64url: p256dh_base64url,\n                        auth_base64url: auth_base64url\n                    },\n                    other_user_ids: []\n                });\n            }\n        }\n    } catch (error) {\n        console.error('[SW] Error during service worker push subscription: ', error);\n    }\n}\n\nasync function checkValidServiceWorker(swUrl) {\n    console.log('[SW] CheckValidServiceWorker');\n    // Check if the service worker can be found. If it can't reload the page.\n    try {\n        const response = await fetch(swUrl);\n\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            const registration = await navigator.serviceWorker.ready;\n            await registration.unregister();\n\n            window.location.reload();\n        } else {\n            // Service worker found. Proceed as normal.\n            await registerValidSW(swUrl);\n        }\n    } catch (error) {\n        console.log('[SW] No internet connection found. App is running in offline mode.');\n    }\n}\n\nexport async function unregister() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.unregister();\n    }\n}\n\nexport async function update() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.update();\n    }\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport OptionStore from '../Stores/OptionStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass UserStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateUser': {\n                this.set(update.user);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateUserFullInfo':\n                this.setFullInfo(update.user_id, update.user_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateUserStatus': {\n                let user = this.get(update.user_id);\n                if (user) {\n                    this.assign(user, { status: update.status });\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateOpenUser': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n\n    getMyId() {\n        const myId = OptionStore.get('my_id');\n        if (!myId) return null;\n        if (!myId.value) return null;\n\n        return myId.value;\n    }\n\n    get(userId) {\n        return this.items.get(userId);\n    }\n\n    set(user) {\n        this.items.set(user.id, user);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new UserStore();\nwindow.user = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nexport function withSaveRef() {\n    return Component => {\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\n    };\n}\n\nexport function withRestoreRef() {\n    return Component => {\n        return class extends React.Component {\n            render() {\n                const { forwardedRef, ...rest } = this.props;\n\n                return <Component {...rest} ref={forwardedRef} />;\n            }\n        };\n    };\n}\n\nexport function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport LocalStorageBackend from 'i18next-localstorage-backend';\nimport { initReactI18next } from 'react-i18next';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst defaultLanguage = 'en';\nconst defaultNamespace = 'translation';\nconst cookies = new Cookies();\nconst language = cookies.get('i18next') || defaultLanguage;\n\n// const detection = {\n//     // order and from where user language should be detected\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n//\n//     // keys or params to lookup language from\n//     lookupQuerystring: 'lng',\n//     lookupCookie: 'i18next',\n//     lookupLocalStorage: 'i18nextLng',\n//     lookupFromPathIndex: 0,\n//     lookupFromSubdomainIndex: 0,\n//\n//     // cache user language on\n//     caches: ['localStorage', 'cookie']\n// };\n\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\n    .init({\n        //detection: detection,\n        ns: [defaultNamespace, 'local'],\n        defaultNS: defaultNamespace,\n        fallbackNS: ['local', 'emoji'],\n        resources: {\n            en: {\n                local: {\n                    DeletedMessage: 'Deleted message',\n                    YourPhone: 'Your Phone',\n                    StartText: 'Please confirm your country code and enter your phone number.',\n                    Next: 'Next',\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\n                    More: 'More',\n                    SendMessage: 'Send Message',\n                    ChatInfo: 'Chat Info',\n                    ChannelInfo: 'Channel Info',\n                    Stickers: 'STICKERS',\n                    Emoji: 'EMOJI',\n                    SelectChatToStartMessaging: 'Select a chat to start messaging'\n                },\n                emoji: {\n                    Search: 'Search',\n                    NotEmojiFound: 'No Emoji Found',\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\n                    SearchResults: 'Search Results',\n                    Recent: 'Frequently Used',\n                    SmileysPeople: 'Smileys & People',\n                    AnimalsNature: 'Animals & Nature',\n                    FoodDrink: 'Food & Drink',\n                    Activity: 'Activity',\n                    TravelPlaces: 'Travel & Places',\n                    Objects: 'Objects',\n                    Symbols: 'Symbols',\n                    Flags: 'Flags',\n                    Custom: 'Custom'\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Connecting: 'Connecting...',\n                    ConnectingToProxy: 'Connecting to proxy...',\n                    Loading: 'Loading...',\n                    Updating: 'Updating...',\n                    WaitingForNetwork: 'Waiting for network...'\n                }\n            },\n            ru: {\n                local: {\n                    DeletedMessage: ' ',\n                    YourPhone: ' ',\n                    StartText: ',       .',\n                    Next: '',\n                    InvalidPhoneNumber:\n                        '  . ,      .',\n                    More: '',\n                    SendMessage: ' ',\n                    ChatInfo: '  ',\n                    ChannelInfo: '  ',\n                    Stickers: '',\n                    Emoji: '',\n                    SelectChatToStartMessaging: ',    '\n                },\n                emoji: {\n                    Search: '',\n                    NotEmojiFound: '  ',\n                    ChooseDefaultSkinTone: '    ',\n                    SearchResults: ' ',\n                    Recent: ' ',\n                    SmileysPeople: '  ',\n                    AnimalsNature: '  ',\n                    FoodDrink: '  ',\n                    Activity: '',\n                    TravelPlaces: '  ',\n                    Objects: '',\n                    Symbols: '',\n                    Flags: '',\n                    Custom: ''\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Connecting: '...',\n                    ConnectingToProxy: '  ...',\n                    Loading: '...',\n                    Updating: '...',\n                    WaitingForNetwork: ' ...'\n                }\n            }\n        },\n        lng: language,\n        fallbackLng: defaultLanguage,\n        interpolation: {\n            escapeValue: false\n        },\n        react: {\n            wait: false\n        }\n    });\n\nconst cache = new LocalStorageBackend(null, {\n    enabled: true,\n    prefix: 'i18next_res_',\n    expirationTime: Infinity\n});\n\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\n    return data;\n});\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\n    return data;\n});\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\n\nclass LocalizationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.i18n = i18n;\n        this.cache = cache;\n\n        this.setMaxListeners(Infinity);\n        this.addTdLibListener();\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'localization_target',\n                            value: { '@type': 'optionValueString', value: 'android' }\n                        });\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'language_pack_id',\n                            value: { '@type': 'optionValueString', value: language }\n                        });\n                        TdLibController.send({\n                            '@type': 'getLocalizationTargetInfo',\n                            only_local: false\n                        }).then(result => {\n                            this.info = result;\n\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateLanguageChange',\n                                language: language\n                            });\n                        });\n                        break;\n                }\n                break;\n            }\n            case 'updateLanguagePackStrings': {\n                // add/remove new strings\n\n                this.emit('updateLanguagePackStrings', update);\n                break;\n            }\n        }\n    };\n\n    onClientUpdate = async update => {\n        switch (update['@type']) {\n            case 'clientUpdateLanguageChange': {\n                const { language } = update;\n\n                TdLibController.send({\n                    '@type': 'getLanguagePackStrings',\n                    language_pack_id: language,\n                    keys: []\n                }).then(async result => {\n                    const cookies = new Cookies();\n                    cookies.set('i18next', language);\n\n                    const resources = this.processStrings(language, result);\n\n                    this.cache.save(language, defaultNamespace, resources);\n\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\n\n                    await i18n.changeLanguage(language);\n\n                    TdLibController.send({\n                        '@type': 'setOption',\n                        name: 'language_pack_id',\n                        value: { '@type': 'optionValueString', value: language }\n                    });\n\n                    this.emit('clientUpdateLanguageChange', update);\n                });\n                break;\n            }\n        }\n    };\n\n    processStrings = (lng, languagePackStrings) => {\n        if (!languagePackStrings) return {};\n        const { strings } = languagePackStrings;\n        if (!strings) return {};\n\n        let result = {};\n        for (let i = 0; i < strings.length; i++) {\n            const { value } = strings[i];\n            switch (value['@type']) {\n                case 'languagePackStringValueOrdinary': {\n                    result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValuePluralized': {\n                    //result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValueDeleted': {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    loadLanguage = async language => {\n        const result = await TdLibController.send({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: language,\n            keys: []\n        });\n\n        const resources = this.processStrings(language, result);\n\n        this.cache.save(language, defaultNamespace, resources);\n\n        i18n.addResourceBundle(language, defaultNamespace, resources);\n    };\n}\n\nconst store = new LocalizationStore();\nwindow.localization = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport packageJson from '../../package.json';\nimport './Footer.css';\n\nclass Footer extends React.PureComponent {\n    render() {\n        return (\n            <div className='footer-wrapper'>\n                <span>{packageJson.version}</span>\n            </div>\n        );\n    }\n}\n\nexport default Footer;\n"],"sourceRoot":""}