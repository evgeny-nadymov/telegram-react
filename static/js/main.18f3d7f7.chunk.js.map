{"version":3,"sources":["Actions/Client.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js","Controllers/TdLibController.js","Constants.js","Utils/Common.js","Language.js","Theme.js","Notifications.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Footer.js","Components/Additional/AppInactiveControl.js","TelegramApp.js","index.js","Stores/UserStore.js","Utils/HOC.js","Stores/OptionStore.js","registerServiceWorker.js","Utils/InputTypingManager.js","Stores/ChatStore.js","Stores/LocalizationStore.js"],"names":["__webpack_require__","d","__webpack_exports__","openUser","openChat","highlightMessage","selectMessage","_Controllers_TdLibController__WEBPACK_IMPORTED_MODULE_0__","userId","popup","arguments","length","undefined","TdLibController","clientUpdate","@type","chatId","messageId","selected","ActionScheduler","actionCallback","cancelCallback","_this","this","Object","classCallCheck","add","key","timeout","action","cancel","actions","has","expire","Date","setMilliseconds","getMilliseconds","set","timerId","clearTimeout","setTimeout","invoke","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","item","wrap","_context","prev","next","get","abrupt","delete","stop","_x","apply","remove","now","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","_ref4","value","_ref3","slicedToArray","actionTimeout","err","return","handleTimer","expired","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref7","_ref6","push","_arr","_i","Map","store","ApplicationStore","possibleConstructorReturn","getPrototypeOf","call","addScheduledAction","actionScheduler","invokeScheduledAction","removeScheduledAction","handleScheduledAction","console","log","handleCancelScheduledAction","onUpdate","update","authorizationState","authorization_state","loggingOut","sendTdParameters","send","init","document","title","emit","connectionState","state","setNotificationSettings","scope","notification_settings","type","content","text","window","confirm","logOut","alert","onClientUpdate","extendedUpdate","nextChatId","nextMessageId","previousChatId","previousMessageId","dialogChatId","name","focused","inProgress","setChatId","onUpdateStatistics","statistics","count","addTdLibListener","addListener","removeTdLibListener","removeListener","addStatistics","getDragging","dragging","setDragging","scopeNotificationSettings","isChatDetailsVisible","mediaViewerContent","profileMediaViewerContent","setMaxListeners","Infinity","visibility","notificationSettings","source1","source2","assign","EventEmitter","application","controller","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","location","setParameters","_this$parameters","parameters","verbosity","jsVerbosity","useTestDC","readOnly","fastUpdating","useDatabase","options","logVerbosityLevel","jsLogVerbosityLevel","mode","prefix","isBackground","concat","JSON","stringify","client","TdClient","disableLog","file","id","search","params","URLSearchParams","toLowerCase","stringToBoolean","parseInt","VERBOSITY_MIN","VERBOSITY_MAX","VERBOSITY_JS_MIN","VERBOSITY_JS_MAX","tag","replace","split","tagVerbosity","request","then","result","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","apiHash","version","i","process","packageJson","use_test_dc","api_id","api_hash","system_language_code","navigator","language","device_model","getBrowser","system_version","getOSName","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","_this2","catch","error","ANIMATION_DURATION_200MS","ANIMATION_DURATION_300MS","CHAT_SLICE_LIMIT","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","MEDIA_SLICE_LIMIT","MESSAGE_SLICE_LIMIT","MUTED_VALUE_MAX","MUTED_VALUE_MIN","NOTIFICATIONS_DEBOUNCE_DELAY_MS","PHOTO_BIG_SIZE","PHOTO_DISPLAY_SIZE","PHOTO_DISPLAY_SMALL_SIZE","PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","POLL_QUESTION_LENGTH","POLL_QUESTION_HINT_LENGTH","POLL_QUESTION_MAX_LENGTH","POLL_OPTION_LENGTH","POLL_OPTION_HINT_LENGTH","POLL_OPTION_MAX_LENGTH","POLL_OPTIONS_MAX_COUNT","SERVICE_NOTIFICATIONS_USER_ID","STICKER_DISPLAY_SIZE","STICKER_PREVIEW_DISPLAY_SIZE","STICKER_SMALL_DISPLAY_SIZE","PROFILE_PHOTO_BIG_SIZE","PROFILE_PHOTO_SMALL_SIZE","TYPING_INPUT_INTERVAL_S","TYPING_OUTPUT_INTERVAL_S","USERNAME_LENGTH_MIN","MAX_SNACK","NOTIFICATION_AUTO_HIDE_DURATION_MS","THUMBNAIL_BLURRED_SIZE","PRELOAD_AUDIO_SIZE","PRELOAD_ANIMATION_SIZE","PRELOAD_DOCUMENT_SIZE","PRELOAD_STICKER_SIZE","PRELOAD_VOICENOTE_SIZE","PRELOAD_VIDEO_SIZE","PRELOAD_VIDEONOTE_SIZE","THUMBNAIL_PRIORITY","FILE_PRIORITY","FIRST_START_OPTIMIZATIONS","PLAYER_VOLUME_NORMAL","PLAYER_STARTTIME","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_PLAYBACKRATE_FAST","PLAYER_PROGRESS_TIMEOUT_MS","isValidPhoneNumber","orderCompare","getSize","getPhotoThumbnailSize","getPhotoSize","getFitSize","itemsInView","throttle","debounce","getLetters","readImageSize","formatPhoneNumber","arrayBufferToBase64","isAuthorizationReady","between","getDurationString","getRandomInt","libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__","_Constants__WEBPACK_IMPORTED_MODULE_1__","OSName","userAgent","indexOf","isEdge","documentMode","StyleMedia","phoneNumber","isBad","match","string","trim","Boolean","order1","order2","diff","sizes","dimension","useWidth","width","height","Math","abs","index","photo","local","is_downloading_completed","currDiff","size","max","increaseToMax","floor","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","items","children","child","offsetTop","offsetHeight","scrollTop","func","wait","context","args","previous","later","leading","remaining","trailing","immediate","callNow","getFirstLetter","str","toUpperCase","callback","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","src","readAsDataURL","number","unformattedNumber","startsWith","formatNumber","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","first","last","secondsTotal","hours","minutes","seconds","min","ceil","random","withLanguage","WrappedComponent","LanguageWrapper","_React$Component","inherits","createClass","i18n","LocalizationStore","react_default","createElement","es","props","React","Component","displayName","getDisplayName","withTheme","ThemeWrapper","onClientUpdateThemeChanging","primary","theme","createMuiTheme","palette","secondary","main","typography","useNextVariants","Cookies","setState","blue","on","MuiThemeProvider_default","withSnackbarNotifications","NotificationsWrapper","build","maxSnack","SignInControl","loading","handleUpdateOption","handleSuggestedLanguagePackId","languagePackId","OptionStore","loadLanguage","suggestedLanguage","handleNext","phone","openConfirmation","code","handleChange","event","target","handleKeyPress","preventDefault","handleDone","_this$props","onPhoneEnter","phone_number","errorString","message","finally","handleChangeLanguage","_this$props2","classes","t","_this$state","FormControl_default","fullWidth","className","TextField_default","color","disabled","autoFocus","label","margin","onChange","onKeyPress","defaultValue","FormHelperText_default","Button_default","button","onClick","Typography_default","continueAtLanguage","Link_default","lng","enhance","compose","withTranslation","withStyles","fontWeight","textAlign","transform","ConfirmCodeControl","bind","assertThisInitialized","handleBack","isValid","first_name","last_name","onChangePhone","e","codeLength","codeInfo","getPhoneNumber","getCodeLength","subtitle","getSubtitle","maxLength","FormHelperText_FormHelperText_default","buttonLeft","buttonRight","marginRight","marginTop","marginLeft","PasswordControl","handleMouseDownPassword","handleClickShowPassword","showPassword","password","passwordHint","classNames","textField","InputLabel_default","htmlFor","Input_default","endAdornment","InputAdornment_default","position","IconButton_default","aria-label","onMouseDown","VisibilityOff_default","Visibility_default","root","display","flexWrap","withoutLabel","spacing","unit","flexBasis","AuthErrorDialog","open","handleAuthError","handleClose","handleKeyDown","Dialog_default","transitionDuration","onKeyDown","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","AuthFormControl","handlePhoneEnter","control","Components_Auth_SignInControl","Components_Auth_ConfirmCodeControl","termsOfService","terms_of_service","code_info","Components_Auth_PasswordControl","password_hint","hasRecoveryEmailAddress","has_recovery_email_address","recoveryEmailAddressPattern","recovery_email_address_pattern","authorizationFormContent","Auth_AuthErrorDialog","background","default","Footer","PureComponent","AppInactiveControl","handleReload","Button_Button_default","reload","ForwardDialog","lazy","Promise","all","ChatInfo","Dialogs","DialogDetails","MediaViewer","ProfileMediaViewer","TelegramApp","onClientUpdateOpenChat","handleSelectChat","onClientUpdateOpenUser","handleSelectUser","checkServiceWorker","cookieEnabled","registerServiceWorker","onClientUpdateForward","info","forwardInfo","onUpdateFatalError","fatalError","onUpdateAuthorizationState","hasFocus","onClientUpdateChatDetailsVisibility","onClientUpdateMediaViewerContent","onClientUpdateProfileMediaViewerContent","onClientUpdateAppInactive","inactive","currentChatId","getChatId","currentDialogChatId","currentMessageId","getMessageId","dialogDetailsRef","scrollToMessage","chat","ChatStore","unread_count","scrollToStart","scrollToBottom","user_id","force","sent","_x2","handleChangePhone","handleDragOver","stopPropagation","handleDrop","handleRefresh","handleDestroy","createRef","UserStore","page","Fragment","Components_Additional_AppInactiveControl","src_Components_Footer","page-third-column","Suspense","fallback","onClearCache","clearCache","onSelectChat","ref","Components_Auth_AuthFormControl","onDragOver","onDrop","aria-describedby","keyMap","openPinnedChat","_callee3","chats","pinnedIndex","_context3","offset_order","offset_chat_id","limit","chat_ids","is_pinned","_ref2","_callee2","_context2","altKey","ctrlKey","t0","getMyId","_x4","onblur","clear","onfocus","history","pushState","href","onpopstate","go","@global","dark","ReactDOM","render","react_router_dom","react_router","path","component","getElementById","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","user","setFullInfo","user_full_info","status","fullInfoItems","myId","fullInfo","withSaveRef","forwardRef","react__WEBPACK_IMPORTED_MODULE_6___default","forwardedRef","withRestoreRef","_class","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","rest","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","option","isLocalhost","hostname","register","_register","swUrl","URL","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","pushSubscription","endpoint","p256dh_base64url","auth_base64url","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","_callee4","response","_context4","fetch","headers","ready","unregister","_update","_callee6","_context6","InputTypingManager","timeoutCallback","addAction","clearAction","setActionsTimeout","expiredActions","chat_id","setSeconds","getSeconds","_ref5","updating","skippedUpdates","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","order","draft_message","is_marked_as_unread","is_sponsored","last_message","profile_photo","last_read_inbox_message_id","last_read_outbox_message_id","reply_markup_message_id","unread_mention_count","typingManager","getTypingManager","setTypingManager","typingManagers","onlineMemberCount","defaultNamespace","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChannelInfo","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Loading","Connecting","Updating","ru","fallbackLng","interpolation","escapeValue","react","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","data","translationCurrentLng","addResourceBundle","only_local","_language","language_pack_id","keys","processStrings","save","changeLanguage","languagePackStrings","strings","_x3","localization"],"mappings":"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","file":"static/js/main.18f3d7f7.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function openUser(userId, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenUser',\n        userId,\n        popup\n    });\n}\n\nexport function openChat(chatId, messageId = null, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenChat',\n        chatId,\n        messageId,\n        popup\n    });\n}\n\nexport function highlightMessage(chatId, messageId) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageHighlighted',\n        chatId,\n        messageId\n    });\n}\n\nexport function selectMessage(chatId, messageId, selected) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageSelected',\n        chatId,\n        messageId,\n        selected\n    });\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass ActionScheduler {\n    constructor(actionCallback, cancelCallback) {\n        this.actions = new Map();\n        this.actionCallback = actionCallback;\n        this.cancelCallback = cancelCallback;\n    }\n\n    add = (key, timeout, action, cancel) => {\n        if (this.actions.has(key)) {\n            return false;\n        }\n\n        let expire = new Date();\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\n\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n\n        return true;\n    };\n\n    invoke = async key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.action) await item.action();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    remove = key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.cancel) item.cancel();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    setTimeout = () => {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    };\n\n    handleTimer = () => {\n        let now = new Date();\n        let expired = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\n        }\n\n        for (let item of expired) {\n            this.actions.delete(item.key);\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\n            if (item.value.action) item.value.action();\n        }\n\n        this.setTimeout();\n    };\n}\n\nexport default ActionScheduler;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport ActionScheduler from '../Utils/ActionScheduler';\n\nclass ApplicationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.chatId = 0;\n        this.dialogChatId = 0;\n        this.messageId = null;\n        this.statistics = new Map();\n        this.scopeNotificationSettings = new Map();\n        this.authorizationState = null;\n        this.connectionState = null;\n        this.isChatDetailsVisible = false;\n        this.mediaViewerContent = null;\n        this.profileMediaViewerContent = null;\n        this.dragging = false;\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\n\n        this.addTdLibListener();\n        this.addStatistics();\n        this.setMaxListeners(Infinity);\n    }\n\n    addScheduledAction = (key, timeout, action, cancel) => {\n        return this.actionScheduler.add(key, timeout, action, cancel);\n    };\n\n    invokeScheduledAction = async key => {\n        await this.actionScheduler.invoke(key);\n    };\n\n    removeScheduledAction = key => {\n        this.actionScheduler.remove(key);\n    };\n\n    handleScheduledAction = item => {\n        console.log('Invoked scheduled action key=', item.key);\n    };\n\n    handleCancelScheduledAction = item => {\n        console.log('Cancel scheduled action key=', item.key);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                this.authorizationState = update.authorization_state;\n\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateLoggingOut':\n                        this.loggingOut = true;\n                        break;\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.sendTdParameters();\n                        break;\n                    case 'authorizationStateWaitEncryptionKey':\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\n                        break;\n                    case 'authorizationStateWaitPhoneNumber':\n                        break;\n                    case 'authorizationStateWaitCode':\n                        break;\n                    case 'authorizationStateWaitPassword':\n                        break;\n                    case 'authorizationStateReady':\n                        this.loggingOut = false;\n                        break;\n                    case 'authorizationStateClosing':\n                        break;\n                    case 'authorizationStateClosed':\n                        if (!this.loggingOut) {\n                            document.title += ': Zzz';\n                            this.emit('clientUpdateAppInactive');\n                        } else {\n                            TdLibController.init();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateConnectionState': {\n                this.connectionState = update.state;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateScopeNotificationSettings': {\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateFatalError': {\n                this.emit(update['@type'], update);\n\n                break;\n            }\n            case 'updateServiceNotification': {\n                const { type, content } = update;\n\n                if (!content) return;\n                if (content['@type'] === 'messageText') {\n                    const { text } = content;\n                    if (!text) return;\n\n                    if (text['@type'] === 'formattedText' && text.text) {\n                        switch (type) {\n                            case 'AUTH_KEY_DROP_DUPLICATE':\n                                let result = window.confirm(text.text);\n                                if (result) {\n                                    TdLibController.logOut();\n                                }\n                                break;\n                            default:\n                                alert(text.text);\n                                break;\n                        }\n                    }\n                }\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateChatId': {\n                const extendedUpdate = {\n                    '@type': 'clientUpdateChatId',\n                    nextChatId: update.chatId,\n                    nextMessageId: update.messageId,\n                    previousChatId: this.chatId,\n                    previousMessageId: this.messageId\n                };\n\n                this.chatId = update.chatId;\n                this.messageId = update.messageId;\n\n                this.emit('clientUpdateChatId', extendedUpdate);\n                break;\n            }\n            case 'clientUpdateDialogChatId': {\n                const { chatId } = update;\n                this.dialogChatId = chatId;\n\n                this.emit('clientUpdateDialogChatId', update);\n                break;\n            }\n            case 'clientUpdateFocusWindow': {\n                TdLibController.send({\n                    '@type': 'setOption',\n                    name: 'online',\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\n                });\n\n                this.emit('clientUpdateFocusWindow', update);\n                break;\n            }\n            case 'clientUpdateForward': {\n                this.emit('clientUpdateForward', update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                if (update.inProgress && this.chatId === update.chatId) {\n                    TdLibController.setChatId(0);\n                }\n\n                break;\n            }\n        }\n    };\n\n    onUpdateStatistics = update => {\n        if (!update) return;\n\n        if (this.statistics.has(update['@type'])) {\n            const count = this.statistics.get(update['@type']);\n\n            this.statistics.set(update['@type'], count + 1);\n        } else {\n            this.statistics.set(update['@type'], 1);\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    addStatistics = () => {\n        TdLibController.addListener('update', this.onUpdateStatistics);\n    };\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            nextChatId: chatId,\n            nextMessageId: messageId,\n            previousChatId: this.chatId,\n            previousMessageId: this.messageId\n        };\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n        this.emit(update['@type'], update);\n    };\n\n    getChatId() {\n        return this.chatId;\n    }\n\n    getMessageId() {\n        return this.messageId;\n    }\n\n    searchChat(chatId) {\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\n    }\n\n    changeChatDetailsVisibility(visibility) {\n        this.isChatDetailsVisible = visibility;\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\n    }\n\n    setMediaViewerContent(content) {\n        this.mediaViewerContent = content;\n        this.emit('clientUpdateMediaViewerContent', content);\n    }\n\n    setProfileMediaViewerContent(content) {\n        this.profileMediaViewerContent = content;\n        this.emit('clientUpdateProfileMediaViewerContent', content);\n    }\n\n    getConnectionState() {\n        return this.connectionState;\n    }\n\n    getAuthorizationState() {\n        return this.authorizationState;\n    }\n\n    getNotificationSettings(scope) {\n        return this.scopeNotificationSettings.get(scope);\n    }\n\n    setNotificationSettings(scope, notificationSettings) {\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\n    }\n\n    getDragging = () => {\n        return this.dragging;\n    };\n\n    setDragging = value => {\n        this.dragging = value;\n        this.emit('clientUpdateDragging', value);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new ApplicationStore();\nwindow.application = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport packageJson from '../../package.json';\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\nimport { VERBOSITY_JS_MAX, VERBOSITY_JS_MIN, VERBOSITY_MAX, VERBOSITY_MIN } from '../Constants';\nimport TdClient from '@arseny30/tdweb/dist/tdweb';\n\nclass TdLibController extends EventEmitter {\n    constructor() {\n        super();\n\n        this.parameters = {\n            useTestDC: false,\n            readOnly: false,\n            verbosity: 1,\n            jsVerbosity: 3,\n            fastUpdating: true,\n            useDatabase: false,\n            mode: 'wasm'\n        };\n\n        this.disableLog = false;\n\n        this.setMaxListeners(Infinity);\n    }\n\n    init = location => {\n        this.setParameters(location);\n\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\n\n        let options = {\n            logVerbosityLevel: verbosity,\n            jsLogVerbosityLevel: jsVerbosity,\n            mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\n            prefix: useTestDC ? 'tdlib_test' : 'tdlib',\n            readOnly: readOnly,\n            isBackground: false,\n            useDatabase: useDatabase\n            // onUpdate: update => this.emit('update', update)\n        };\n\n        console.log(\n            `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\n        );\n\n        this.client = new TdClient(options);\n        this.client.onUpdate = update => {\n            if (!this.disableLog) {\n                if (update['@type'] === 'updateFile') {\n                    console.log('receive updateFile file_id=' + update.file.id, update);\n                } else {\n                    console.log('receive update', update);\n                }\n            }\n            this.emit('update', update);\n        };\n    };\n\n    clientUpdate = update => {\n        if (!this.disableLog) {\n            console.log('clientUpdate', update);\n        }\n        this.emit('clientUpdate', update);\n    };\n\n    setParameters = location => {\n        if (!location) return;\n\n        const { search } = location;\n        if (!search) return;\n\n        const params = new URLSearchParams(search.toLowerCase());\n\n        if (params.has('test')) {\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\n        }\n\n        if (params.has('verbosity')) {\n            const verbosity = parseInt(params.get('verbosity'), 10);\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\n                this.parameters.verbosity = verbosity;\n            }\n        }\n\n        if (params.has('jsverbosity')) {\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\n                this.parameters.jsVerbosity = jsVerbosity;\n            }\n        }\n\n        if (params.has('tag') && params.has('tagverbosity')) {\n            const tag = params\n                .get('tag')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            const tagVerbosity = params\n                .get('tagverbosity')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\n                this.parameters.tag = tag;\n                this.parameters.tagVerbosity = tagVerbosity;\n            }\n        }\n\n        if (params.has('readonly')) {\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\n        }\n\n        if (params.has('fastupdating')) {\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\n        }\n\n        if (params.has('db')) {\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\n        }\n        if (params.has('mode')) {\n            this.parameters.mode = params.get('mode');\n        }\n    };\n\n    send = request => {\n        if (!this.disableLog) {\n            console.log('send', request);\n            return this.client.send(request).then(result => {\n                console.log('receive', result);\n                return result;\n            });\n        } else {\n            return this.client.send(request);\n        }\n    };\n\n    sendTdParameters = async () => {\n        const apiId = process.env.REACT_APP_TELEGRAM_API_ID;\n        const apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\n        if (!apiId || !apiHash) {\n            if (\n                window.confirm(\n                    'API id is missing!\\n' +\n                        'In order to obtain an API id and develop your own application ' +\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\n                )\n            ) {\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\n            }\n        }\n\n        const { useTestDC } = this.parameters;\n        const { version } = packageJson;\n\n        this.send({\n            '@type': 'setTdlibParameters',\n            parameters: {\n                '@type': 'tdParameters',\n                use_test_dc: useTestDC,\n                api_id: apiId,\n                api_hash: apiHash,\n                system_language_code: navigator.language || 'en',\n                device_model: getBrowser(),\n                system_version: getOSName(),\n                application_version: version,\n                use_secret_chats: false,\n                use_message_database: true,\n                use_file_database: false,\n                database_directory: '/db',\n                files_directory: '/'\n            }\n            // ,\n            // extra: {\n            //     a: ['a', 'b'],\n            //     b: 123\n            // }\n        });\n\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\n            for (let i = 0; i < this.parameters.tag.length; i++) {\n                let tag = this.parameters.tag[i];\n                let tagVerbosity = this.parameters.tagVerbosity[i];\n\n                this.send({\n                    '@type': 'setLogTagVerbosityLevel',\n                    tag: tag,\n                    new_verbosity_level: tagVerbosity\n                });\n            }\n        }\n    };\n\n    logOut() {\n        this.send({ '@type': 'logOut' }).catch(error => {\n            this.emit('tdlib_auth_error', error);\n        });\n    }\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            chatId: chatId,\n            messageId: messageId\n        };\n\n        this.clientUpdate(update);\n    };\n\n    setMediaViewerContent(content) {\n        this.clientUpdate({\n            '@type': 'clientUpdateMediaViewerContent',\n            content: content\n        });\n    }\n}\n\nconst controller = new TdLibController();\n\nexport default controller;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const ANIMATION_FRAME_DURATION_MS = 40;\nexport const ANIMATION_DURATION_200MS = 200;\nexport const ANIMATION_DURATION_300MS = 300;\nexport const CHAT_SLICE_LIMIT = 25;\nexport const LOCATION_HEIGHT = 150;\nexport const LOCATION_SCALE = 2;\nexport const LOCATION_WIDTH = 300;\nexport const LOCATION_ZOOM = 16;\nexport const MEDIA_SLICE_LIMIT = 20;\nexport const MESSAGE_SLICE_LIMIT = 20;\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\nexport const MUTED_VALUE_MIN = 0;\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\nexport const PHOTO_BIG_SIZE = 1280;\nexport const PHOTO_DISPLAY_SIZE = 260;\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\nexport const PHOTO_SIZE = 320;\nexport const PHOTO_THUMBNAIL_SIZE = 90;\nexport const POLL_QUESTION_LENGTH = 255;\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\nexport const POLL_OPTION_LENGTH = 100;\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\nexport const POLL_OPTIONS_MAX_COUNT = 10;\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\nexport const STICKER_DISPLAY_SIZE = 192;\nexport const STICKER_PREVIEW_DISPLAY_SIZE = 256;\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\nexport const TYPING_INPUT_INTERVAL_S = 8;\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\nexport const VERBOSITY_JS_MAX = 20;\nexport const VERBOSITY_JS_MIN = 0;\nexport const VERBOSITY_MAX = 20;\nexport const VERBOSITY_MIN = 0;\nexport const USERNAME_LENGTH_MIN = 5;\nexport const MAX_SNACK = 10;\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\nexport const THUMBNAIL_BLURRED_SIZE = 320;\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const THUMBNAIL_PRIORITY = 32;\nexport const FILE_PRIORITY = 1;\nexport const FIRST_START_OPTIMIZATIONS = true;\nexport const PLAYER_VOLUME_NORMAL = 0.25;\nexport const PLAYER_STARTTIME = 0.0;\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n    return getSize(sizes, PHOTO_SIZE);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    let split = title.split(' ');\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +''+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n    return item > first && item < last;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport {\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    getDurationString,\n    getRandomInt\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { getDisplayName } from './Utils/HOC';\nimport LocalizationStore from './Stores/LocalizationStore';\n\nfunction withLanguage(WrappedComponent) {\n    class LanguageWrapper extends React.Component {\n        render() {\n            const i18n = LocalizationStore.i18n;\n\n            return (\n                <I18nextProvider i18n={i18n}>\n                    <WrappedComponent {...this.props} />\n                </I18nextProvider>\n            );\n        }\n    }\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\n\n    return LanguageWrapper;\n}\n\nexport default withLanguage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport blue from '@material-ui/core/colors/blue';\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport { getDisplayName } from './Utils/HOC';\nimport Cookies from 'universal-cookie';\nimport ApplicationStore from './Stores/ApplicationStore';\n\nfunction withTheme(WrappedComponent) {\n    class ThemeWrapper extends React.Component {\n        constructor(props) {\n            super(props);\n\n            const cookies = new Cookies();\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\n\n            let theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' }\n                },\n                typography: {\n                    useNextVariants: true\n                }\n            });\n\n            this.state = {\n                theme: theme\n            };\n        }\n\n        componentDidMount() {\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        componentWillUnmount() {\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        onClientUpdateThemeChanging = update => {\n            const { type, primary } = update;\n\n            const theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' },\n                    typography: {\n                        useNextVariants: true\n                    }\n                }\n            });\n\n            const cookies = new Cookies();\n            cookies.set('themeOptions', { type: type, primary: primary });\n\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\n        };\n\n        render() {\n            const { theme } = this.state;\n\n            return (\n                <MuiThemeProvider theme={theme}>\n                    <WrappedComponent {...this.props} />\n                </MuiThemeProvider>\n            );\n        }\n    }\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\n\n    return ThemeWrapper;\n}\n\nexport default withTheme;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { getDisplayName } from './Utils/HOC';\nimport { MAX_SNACK } from './Constants';\n\nfunction withSnackbarNotifications(WrappedComponent) {\n    class NotificationsWrapper extends React.Component {\n        render() {\n            return (\n                <SnackbarProvider maxSnack={MAX_SNACK}>\n                    <WrappedComponent {...this.props} />\n                </SnackbarProvider>\n            );\n        }\n    }\n    NotificationsWrapper.displayName = `WithSnackbarNotifications(${getDisplayName(WrappedComponent)})`;\n\n    return NotificationsWrapper;\n}\n\nexport default withSnackbarNotifications;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { isValidPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport OptionStore from '../../Stores/OptionStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './SignInControl.css';\n\nconst styles = {\n    button: {\n        margin: '16px 0 0 0'\n    },\n    phone: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n    },\n    continueAtLanguage: {\n        transform: 'translateY(100px)',\n        textAlign: 'center'\n    }\n};\n\nclass SignInControl extends React.Component {\n    state = {\n        error: null,\n        loading: false\n    };\n\n    componentDidMount() {\n        this.handleSuggestedLanguagePackId();\n\n        OptionStore.on('updateOption', this.handleUpdateOption);\n    }\n\n    componentWillUnmount() {\n        OptionStore.removeListener('updateOption', this.handleUpdateOption);\n    }\n\n    handleUpdateOption = update => {\n        const { name } = update;\n\n        if (name === 'suggested_language_pack_id') {\n            this.handleSuggestedLanguagePackId();\n        }\n    };\n\n    handleSuggestedLanguagePackId = () => {\n        const { i18n } = this.props;\n        if (!i18n) return;\n\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\n        if (!languagePackId) return;\n\n        const { value } = languagePackId;\n        if (value === i18n.language) {\n            this.setState({ suggestedLanguage: null });\n            return;\n        }\n\n        LocalizationStore.loadLanguage(value).then(() => {\n            this.setState({ suggestedLanguage: value });\n        });\n    };\n\n    handleNext = () => {\n        const { phone } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n\n        if (isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: null, openConfirmation: true });\n        } else {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n        }\n    };\n\n    handleChange = event => {\n        this.phoneNumber = event.target.value;\n    };\n\n    handleKeyPress = event => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    handleDone = () => {\n        const { phone, onPhoneEnter } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n        if (!isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n            return;\n        }\n\n        onPhoneEnter(phoneNumber);\n        this.setState({ error: null, loading: true });\n        TdLibController.send({\n            '@type': 'setAuthenticationPhoneNumber',\n            phone_number: phoneNumber\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: { string: errorString } });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleChangeLanguage = () => {\n        const { i18n } = this.props;\n        const { suggestedLanguage } = this.state;\n\n        if (!i18n) return;\n        if (!suggestedLanguage) return;\n\n        this.setState({ suggestedLanguage: i18n.language });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\n    };\n\n    render() {\n        const { phone, classes, t } = this.props;\n        const { loading, error, suggestedLanguage } = this.state;\n\n        let errorString = '';\n        if (error) {\n            const { code, string } = error;\n            if (code) {\n                errorString = t(code);\n            } else {\n                errorString = string;\n            }\n        }\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{t('YourPhone')}</span>\n                </div>\n                <div>{t('StartText')}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(errorString)}\n                    fullWidth\n                    autoFocus\n                    id='phoneNumber'\n                    label=''\n                    margin='normal'\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                    defaultValue={phone}\n                />\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\n                <div className='sign-in-actions'>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        disabled={loading}\n                        className={classes.button}\n                        onClick={this.handleDone}>\n                        {t('Next')}\n                    </Button>\n                    <Typography className={classes.continueAtLanguage}>\n                        <Link onClick={this.handleChangeLanguage}>\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\n                        </Link>\n                    </Typography>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(SignInControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport './ConfirmCodeControl.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n};\n\nclass ConfirmCodeControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            loading: false\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n    }\n\n    handleNext() {\n        if (this.code && this.isValid(this.code)) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid code. Please try again.' });\n        }\n    }\n\n    handleDone() {\n        const code = this.code;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationCode',\n            code: code,\n            first_name: 'A',\n            last_name: 'B'\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleBack() {\n        this.props.onChangePhone();\n    }\n\n    isValid(code) {\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\n        if (!isBad) {\n            code = code.replace(/\\D/g, '');\n            if (code.length !== 5) {\n                isBad = true;\n            }\n        }\n\n        return !isBad;\n    }\n\n    handleChange(e) {\n        this.code = e.target.value;\n\n        if (this.code && this.codeLength > 0 && this.code.length === this.codeLength) {\n            this.handleNext();\n        }\n    }\n\n    handleKeyPress(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    getPhoneNumber(codeInfo) {\n        if (!codeInfo) return null;\n        return codeInfo.phone_number;\n    }\n\n    getCodeLength(codeInfo) {\n        if (!codeInfo) return 0;\n        if (!codeInfo.type) return 0;\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 0;\n            }\n            case 'authenticationCodeTypeSms': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return codeInfo.type.length;\n            }\n        }\n\n        return 0;\n    }\n\n    getSubtitle(codeInfo) {\n        if (!codeInfo) return 'Subtitle';\n        if (!codeInfo.type) return 'Subtitle';\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeSms': {\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return \"Please enter the code you've just received in your previous Telegram app.\";\n            }\n        }\n\n        return 'Subtitle';\n    }\n\n    render() {\n        const { loading, error } = this.state;\n        const { classes, codeInfo } = this.props;\n\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\n        this.codeLength = this.getCodeLength(codeInfo);\n        const subtitle = this.getSubtitle(codeInfo);\n\n        const title = this.phoneNumber ? formatPhoneNumber(this.phoneNumber) : 'Your Code';\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                </div>\n                <div>{subtitle}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(error)}\n                    fullWidth\n                    autoFocus\n                    label='Your code'\n                    margin='normal'\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                />\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nexport default withStyles(styles)(ConfirmCodeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './PasswordControl.css';\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    margin: {\n        margin: '16px 0 8px 0'\n    },\n    withoutLabel: {\n        marginTop: theme.spacing.unit * 3\n    },\n    textField: {\n        flexBasis: 200\n    },\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n});\n\nclass PasswordControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            password: '',\n            showPassword: false,\n            error: ''\n        };\n\n        this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\n        this.handleMouseDownPassword = this.handleMouseDownPassword.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n    }\n\n    handleNext() {\n        if (this.password) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid password. Please try again.' });\n        }\n    }\n\n    handleBack() {\n        this.props.onChangePhone();\n    }\n\n    handleDone() {\n        const password = this.password;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationPassword',\n            password: password\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleMouseDownPassword = event => {\n        event.preventDefault();\n    };\n\n    handleClickShowPassword = () => {\n        this.setState({ showPassword: !this.state.showPassword });\n    };\n\n    handleChange(e) {\n        this.password = e.target.value;\n    }\n\n    handleKeyPress(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    render() {\n        const { loading, error, showPassword } = this.state;\n        const { passwordHint, classes } = this.props;\n\n        return (\n            <div>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>Cloud Password Check</span>\n                </div>\n                <div>Please enter your cloud password.</div>\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\n                    <InputLabel htmlFor='adornment-password' error={error}>\n                        Your cloud password\n                    </InputLabel>\n                    <Input\n                        fullWidth\n                        autoFocus\n                        id='adornment-password'\n                        type={showPassword ? 'text' : 'password'}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                        endAdornment={\n                            <InputAdornment position='end'>\n                                <IconButton\n                                    aria-label='Toggle password visibility'\n                                    onClick={this.handleClickShowPassword}\n                                    onMouseDown={this.handleMouseDownPassword}>\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n                {passwordHint && (\n                    <FormHelperText id='password-hint-text'>\n                        <span className='password-hint-label'>Hint: </span>\n                        {passwordHint}\n                    </FormHelperText>\n                )}\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(PasswordControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass AuthErrorDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            error: null\n        };\n\n        this.handleAuthError = this.handleAuthError.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentDidMount() {\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\n    }\n\n    handleAuthError(error) {\n        this.setState({\n            open: true,\n            error: error\n        });\n    }\n\n    handleClose() {\n        this.setState({\n            open: false\n        });\n    }\n\n    handleKeyDown(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleClose();\n        }\n    }\n\n    render() {\n        let errorString = null;\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\n            errorString = this.state.error.message;\n        } else {\n            errorString = JSON.stringify(this.state.error);\n        }\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onKeyDown={this.handleKeyDown}\n                onClose={this.handleClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{errorString}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default AuthErrorDialog;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classNames from 'classnames';\nimport SignInControl from './SignInControl';\nimport ConfirmCodeControl from './ConfirmCodeControl';\nimport PasswordControl from './PasswordControl';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport './AuthFormControl.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '20px'\n    },\n    authorizationFormContent: {\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary\n    }\n});\n\nclass AuthFormControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.phone = null;\n\n        this.handlePhoneEnter = this.handlePhoneEnter.bind(this);\n    }\n\n    handlePhoneEnter(phone) {\n        this.phone = phone;\n    }\n\n    render() {\n        const { classes, authorizationState } = this.props;\n\n        let control = null;\n        switch (authorizationState['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n                // control = (\n                //     <>\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\n                //         <SignUpControl/>\n                //     </>);\n                control = <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter} />;\n                break;\n            case 'authorizationStateWaitCode':\n                control = (\n                    <ConfirmCodeControl\n                        termsOfService={authorizationState.terms_of_service}\n                        codeInfo={authorizationState.code_info}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            case 'authorizationStateWaitPassword':\n                control = (\n                    <PasswordControl\n                        passwordHint={authorizationState.password_hint}\n                        hasRecoveryEmailAddress={authorizationState.has_recovery_email_address}\n                        recoveryEmailAddressPattern={authorizationState.recovery_email_address_pattern}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <div className='sign-in-wrap'>\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default withStyles(styles)(AuthFormControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport packageJson from '../../package.json';\nimport './Footer.css'\n\nclass Footer extends React.PureComponent {\n    render() {\n        return (\n            <div className='footer-wrapper'>\n                <span>\n                    {packageJson.version}\n                </span>\n            </div>\n        );\n    }\n}\n\nexport default Footer;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport './AppInactiveControl.css';\n\nclass AppInactiveControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static handleReload() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div className='app-inactive'>\n                <div className='app-inactive-wrapper'>\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\n                    <div className='app-inactive-description'>\n                        Telegram supports only one active tab with the app.\n                        <br />\n                        Please reload this page to continue using this tab or close it.\n                    </div>\n                    <div className='app-inactive-actions'>\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\n                            Reload app\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AppInactiveControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Cookies from 'universal-cookie';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport localForage from 'localforage';\nimport LocalForageWithGetItems from 'localforage-getitems';\nimport packageJson from '../package.json';\nimport withLanguage from './Language';\nimport withTheme from './Theme';\nimport withSnackbarNotifications from './Notifications';\n//import ForwardDialog from './Components/Dialog/ForwardDialog';\n//import ChatInfo from './Components/ColumnRight/ChatInfo';\n//import Dialogs from './Components/ColumnLeft/Dialogs';\n//import DialogDetails from './Components/ColumnMiddle/DialogDetails';\nimport AuthFormControl from './Components/Auth/AuthFormControl';\nimport Footer from './Components/Footer';\n//import MediaViewer from './Components/Viewer/MediaViewer';\n//import ProfileMediaViewer from './Components/Viewer/ProfileMediaViewer';\nimport AppInactiveControl from './Components/Additional/AppInactiveControl';\nimport registerServiceWorker from './registerServiceWorker';\nimport { highlightMessage } from './Actions/Client';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ChatStore from './Stores/ChatStore';\nimport UserStore from './Stores/UserStore';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\nimport './TelegramApp.css';\n\nconst ForwardDialog = React.lazy(() => import('./Components/Dialog/ForwardDialog'));\nconst ChatInfo = React.lazy(() => import('./Components/ColumnRight/ChatInfo'));\nconst Dialogs = React.lazy(() => import('./Components/ColumnLeft/Dialogs'));\nconst DialogDetails = React.lazy(() => import('./Components/ColumnMiddle/DialogDetails'));\nconst MediaViewer = React.lazy(() => import('./Components/Viewer/MediaViewer'));\nconst ProfileMediaViewer = React.lazy(() => import('./Components/Viewer/ProfileMediaViewer'));\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    },\n    '@global': {\n        a: {\n            color: theme.palette.primary.main\n        },\n        code: {\n            color: theme.palette.primary.dark\n        }\n    }\n});\n\nclass TelegramApp extends Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`Start Telegram Web ${packageJson.version}`);\n\n        this.dialogDetailsRef = React.createRef();\n\n        this.state = {\n            authorizationState: null,\n            inactive: false,\n            mediaViewerContent: ApplicationStore.mediaViewerContent,\n            fatalError: false,\n            forwardInfo: null\n        };\n\n        /*this.store = localForage.createInstance({\n                    name: 'tdlib'\n                });*/\n\n        //this.initDB();\n    }\n\n    componentWillMount() {\n        const { location } = this.props;\n\n        TdLibController.init(location);\n    }\n\n    componentDidMount() {\n        TdLibController.addListener('update', this.onUpdate);\n\n        UserStore.on('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.on('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.on('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('update', this.onUpdate);\n\n        UserStore.removeListener('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.removeListener('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.removeListener('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    onClientUpdateOpenChat = update => {\n        const { chatId, messageId, popup } = update;\n\n        this.handleSelectChat(chatId, messageId, popup);\n    };\n\n    onClientUpdateOpenUser = update => {\n        const { userId, popup } = update;\n\n        this.handleSelectUser(userId, popup);\n    };\n\n    onUpdate = update => {\n        if (FIRST_START_OPTIMIZATIONS) {\n            if (!this.checkServiceWorker) {\n                this.checkServiceWorker = true;\n\n                const cookieEnabled = navigator.cookieEnabled;\n                if (cookieEnabled) {\n                    const cookies = new Cookies();\n                    const register = cookies.get('register');\n                    if (!register) {\n                        registerServiceWorker();\n                    }\n                }\n            }\n        }\n    };\n\n    onClientUpdateForward = update => {\n        const { info } = update;\n\n        this.setState({ forwardInfo: info });\n    };\n\n    onUpdateFatalError = update => {\n        this.setState({ fatalError: true });\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state });\n\n        if (!window.hasFocus) return;\n        if (!authorization_state) return;\n        if (authorization_state['@type'] !== 'authorizationStateReady') return;\n\n        TdLibController.send({\n            '@type': 'setOption',\n            name: 'online',\n            value: { '@type': 'optionValueBoolean', value: true }\n        });\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.setState({ mediaViewerContent: ApplicationStore.mediaViewerContent });\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.setState({\n            profileMediaViewerContent: ApplicationStore.profileMediaViewerContent\n        });\n    };\n\n    onClientUpdateAppInactive = update => {\n        this.setState({ inactive: true });\n    };\n\n    handleSelectChat = (chatId, messageId = null, popup = false) => {\n        const currentChatId = ApplicationStore.getChatId();\n        const currentDialogChatId = ApplicationStore.dialogChatId;\n        const currentMessageId = ApplicationStore.getMessageId();\n\n        if (popup) {\n            if (currentDialogChatId !== chatId) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateDialogChatId',\n                    chatId\n                });\n            }\n\n            return;\n        }\n\n        if (currentChatId === chatId && messageId && currentMessageId === messageId) {\n            this.dialogDetailsRef.current.scrollToMessage();\n            if (messageId) {\n                highlightMessage(chatId, messageId);\n            }\n        } else if (currentChatId === chatId && !messageId) {\n            const chat = ChatStore.get(chatId);\n            if (chat && chat.unread_count > 0) {\n                this.dialogDetailsRef.current.scrollToStart();\n            } else {\n                this.dialogDetailsRef.current.scrollToBottom();\n            }\n        } else {\n            TdLibController.setChatId(chatId, messageId);\n        }\n    };\n\n    handleSelectUser = async (userId, popup) => {\n        if (!userId) return;\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: userId,\n            force: true\n        });\n\n        this.handleSelectChat(chat.id, null, popup);\n    };\n\n    handleChangePhone = () => {\n        this.setState({\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\n        });\n    };\n\n    handleDragOver = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleRefresh = () => {\n        this.setState({ fatalError: false });\n        window.location.reload();\n    };\n\n    handleDestroy = () => {\n        this.setState({ fatalError: false });\n        TdLibController.send({ '@type': 'destroy' });\n    };\n\n    handleKeyDown = event => {\n        //console.log('KeyDown', event);\n    };\n\n    render() {\n        const {\n            inactive,\n            authorizationState,\n            isChatDetailsVisible,\n            mediaViewerContent,\n            profileMediaViewerContent,\n            fatalError,\n            forwardInfo\n        } = this.state;\n        const { classes } = this.props;\n\n        let page = (\n            <div>Compiling...</div>\n        );\n\n        if (inactive) {\n            page = (\n                <>\n                    <div className='header-wrapper' />\n                    <div className={classNames(classes.page, 'page')}>\n                        <AppInactiveControl />\n                    </div>\n                    <Footer />\n                </>\n            );\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed': {\n                    break;\n                }\n                case 'authorizationStateClosing': {\n                    break;\n                }\n                case 'authorizationStateLoggingOut': {\n                    break;\n                }\n                case 'authorizationStateReady': {\n                    page = (\n                        <>\n                            <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\n                                <React.Suspense fallback={<div/>}>\n                                    <Dialogs onClearCache={this.clearCache} onSelectChat={this.handleSelectChat} />\n                                    <DialogDetails ref={this.dialogDetailsRef} />\n                                    {isChatDetailsVisible && <ChatInfo />}\n                                </React.Suspense>\n                            </div>\n                            <Footer />\n                            {mediaViewerContent && <React.Suspense fallback={<div/>}><MediaViewer {...mediaViewerContent} /></React.Suspense>}\n                            {profileMediaViewerContent && <React.Suspense fallback={<div/>}><ProfileMediaViewer {...profileMediaViewerContent} /></React.Suspense>}\n                            {forwardInfo && <React.Suspense fallback={<div/>}><ForwardDialog {...forwardInfo} /></React.Suspense>}\n                        </>\n                    );\n                    break;\n                }\n                case 'authorizationStateWaitCode':\n                case 'authorizationStateWaitPassword':\n                case 'authorizationStateWaitPhoneNumber':\n                    page = (\n                        <AuthFormControl\n                            authorizationState={authorizationState}\n                            onChangePhone={this.handleChangePhone}\n                        />\n                    );\n                    break;\n                case 'authorizationStateWaitEncryptionKey': {\n                    break;\n                }\n                case 'authorizationStateWaitTdlibParameters': {\n                    break;\n                }\n            }\n        }\n\n        return (\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\n                {page}\n                <Dialog\n                    transitionDuration={0}\n                    open={fatalError}\n                    onClose={this.handleRefresh}\n                    aria-labelledby='fatal-error-dialog-title'\n                    aria-describedby='fatal-error-dialog-description'>\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id='fatal-error-dialog-description'>\n                            Oops! Something went wrong. We need to refresh this page.\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleDestroy} color='primary'>\n                            Log out\n                        </Button>\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\n                            Refresh\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nconst keyMap = new Map();\nwindow.keyMap = keyMap;\n\nasync function openPinnedChat(index) {\n    const chats = await TdLibController.send({\n        '@type': 'getChats',\n        offset_order: '9223372036854775807',\n        offset_chat_id: 0,\n        limit: 10\n    });\n\n    if (chats) {\n        let pinnedIndex = -1;\n        for (let i = 0; i < chats.chat_ids.length; i++) {\n            const chat = ChatStore.get(chats.chat_ids[i]);\n            if (chat && chat.is_pinned) {\n                pinnedIndex++;\n            }\n\n            if (pinnedIndex === index) {\n                TdLibController.setChatId(chat.id);\n                return;\n            }\n        }\n    }\n}\n\ndocument.addEventListener('keyup', event => {\n    keyMap.delete(event.key);\n    //console.log('keyup key=' + event.key, keyMap);\n});\n\ndocument.addEventListener('keydown', async event => {\n    keyMap.set(event.key, event.key);\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\n\n    const { authorizationState } = ApplicationStore;\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n    if (keyMap.size > 3) return;\n\n    if (event.altKey && event.ctrlKey) {\n        switch (event.key) {\n            case '0': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                const chat = await TdLibController.send({\n                    '@type': 'createPrivateChat',\n                    user_id: UserStore.getMyId(),\n                    force: true\n                });\n\n                if (chat) {\n                    TdLibController.setChatId(chat.id);\n                }\n                break;\n            }\n            case '1': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(0);\n                break;\n            }\n            case '2': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(1);\n                break;\n            }\n            case '3': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(2);\n                break;\n            }\n            case '4': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(3);\n                break;\n            }\n            case '5': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(4);\n                break;\n            }\n        }\n    }\n});\n\nwindow.hasFocus = true;\n\n// set offline on page lost focus\nwindow.onblur = function() {\n    keyMap.clear();\n    //console.log('window.blur key', keyMap);\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = false;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: false\n    });\n};\n\n// set online on page get focus\nwindow.onfocus = function() {\n    keyMap.clear();\n    //console.log('window.focus key', keyMap);\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = true;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: true\n    });\n};\n\n// disable back navigation\nwindow.history.pushState(null, null, window.location.href);\nwindow.onpopstate = function() {\n    window.history.go(1);\n};\n\nconst enhance = compose(\n    withLanguage,\n    withTheme,\n    withStyles(styles),\n    withSnackbarNotifications\n);\n\nexport default enhance(TelegramApp);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport TelegramApp from './TelegramApp';\nimport registerServiceWorker from './registerServiceWorker';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport './index.css';\n\nReactDOM.render(\n    <Router>\n        <Route path='' component={TelegramApp} />\n    </Router>,\n    document.getElementById('root')\n);\n\nif (FIRST_START_OPTIMIZATIONS) {\n    const cookieEnabled = navigator.cookieEnabled;\n    if (cookieEnabled) {\n        const cookies = new Cookies();\n        const register = cookies.get('register');\n        if (register) {\n            registerServiceWorker();\n        }\n    } else {\n        registerServiceWorker();\n    }\n} else {\n    registerServiceWorker();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport OptionStore from '../Stores/OptionStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass UserStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateUser': {\n                this.set(update.user);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateUserFullInfo':\n                this.setFullInfo(update.user_id, update.user_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateUserStatus': {\n                let user = this.get(update.user_id);\n                if (user) {\n                    this.assign(user, { status: update.status });\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateOpenUser': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n\n    getMyId() {\n        const myId = OptionStore.get('my_id');\n        if (!myId) return null;\n        if (!myId.value) return null;\n\n        return myId.value;\n    }\n\n    get(userId) {\n        return this.items.get(userId);\n    }\n\n    set(user) {\n        this.items.set(user.id, user);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new UserStore();\nwindow.user = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nexport function withSaveRef() {\n    return Component => {\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\n    };\n}\n\nexport function withRestoreRef() {\n    return Component => {\n        return class extends React.Component {\n            render() {\n                const { forwardedRef, ...rest } = this.props;\n\n                return <Component {...rest} ref={forwardedRef} />;\n            }\n        };\n    };\n}\n\nexport function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OptionStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateOption':\n                this.items.set(update.name, update.value);\n\n                this.emit('updateOption', update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(name) {\n        return this.items.get(name);\n    }\n}\n\nconst store = new OptionStore();\nwindow.option = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { arrayBufferToBase64 } from './Utils/Common';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default async function register() {\n    console.log('[SW] Register');\n\n    if (FIRST_START_OPTIMIZATIONS) {\n        const cookies = new Cookies();\n        cookies.set('register', true);\n    }\n\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        const serviceWorkerName =\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\n        console.log(`[SW] Service worker url: ${swUrl}`);\n\n        if (!isLocalhost) {\n            // Is not local host. Just register service worker\n            await registerValidSW(swUrl);\n        } else {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            await checkValidServiceWorker(swUrl);\n        }\n    }\n}\n\nasync function registerValidSW(swUrl) {\n    console.log('[SW] RegisterValidSW');\n    try {\n        const registration = await navigator.serviceWorker.register(swUrl);\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        console.log('[SW] New content is available; please refresh.');\n\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\n                    } else {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        console.log('[SW] Content is cached for offline use.');\n                    }\n                }\n            };\n        };\n\n        await subscribeNotifications(registration);\n    } catch (error) {\n        console.error('[SW] Error during service worker registration: ', error);\n    }\n}\n\nasync function subscribeNotifications(registration) {\n    try {\n        let pushSubscription = await registration.pushManager.getSubscription();\n        if (pushSubscription) await pushSubscription.unsubscribe();\n\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\n\n        const { endpoint } = pushSubscription;\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\n\n        if (endpoint && p256dh_base64url && auth_base64url) {\n            const { authorizationState } = ApplicationStore;\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n                await TdLibController.send({\n                    '@type': 'registerDevice',\n                    device_token: {\n                        '@type': 'deviceTokenWebPush',\n                        endpoint: endpoint,\n                        p256dh_base64url: p256dh_base64url,\n                        auth_base64url: auth_base64url\n                    },\n                    other_user_ids: []\n                });\n            }\n        }\n    } catch (error) {\n        console.error('[SW] Error during service worker push subscription: ', error);\n    }\n}\n\nasync function checkValidServiceWorker(swUrl) {\n    console.log('[SW] CheckValidServiceWorker');\n    // Check if the service worker can be found. If it can't reload the page.\n    try {\n        const response = await fetch(swUrl);\n\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            const registration = await navigator.serviceWorker.ready;\n            await registration.unregister();\n\n            window.location.reload();\n        } else {\n            // Service worker found. Proceed as normal.\n            await registerValidSW(swUrl);\n        }\n    } catch (error) {\n        console.log('[SW] No internet connection found. App is running in offline mode.');\n    }\n}\n\nexport async function unregister() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.unregister();\n    }\n}\n\nexport async function update() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.update();\n    }\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\n\nclass InputTypingManager {\n    constructor(chatId, timeoutCallback) {\n        this.actions = new Map();\n        this.timerId = null;\n        this.chatId = chatId;\n        this.timeoutCallback = timeoutCallback;\n\n        this.handleTimer = this.handleTimer.bind(this);\n        this.addAction = this.addAction.bind(this);\n        this.clearAction = this.clearAction.bind(this);\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\n    }\n\n    handleTimer() {\n        let now = new Date();\n        let expiredActions = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expiredActions.push(key);\n        }\n\n        for (let key of expiredActions) {\n            this.actions.delete(key);\n        }\n\n        let update = {\n            '@type': 'updateUserChatAction',\n            chat_id: this.chatId,\n            action: { '@type': 'chatActionTimerUpdate' }\n        };\n\n        this.timeoutCallback(update);\n        // ChatStore.emit('updateUserChatAction', update);\n\n        this.setActionsTimeout();\n    }\n\n    addAction(userId, action) {\n        let expire = new Date();\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\n\n        this.actions.set(userId, { expire: expire, action: action });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n\n    setActionsTimeout() {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    }\n\n    clearAction(userId) {\n        this.actions.delete(userId);\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n}\n\nexport default InputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport InputTypingManager from '../Utils/InputTypingManager';\nimport UserStore from './UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass ChatStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.typingManagers = new Map();\n        this.onlineMemberCount = new Map();\n        this.skippedUpdates = [];\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateConnectionState': {\n                if (update.state['@type'] === 'connectionStateUpdating') {\n                    this.updating = true;\n                    this.skippedUpdates = [];\n                } else {\n                    this.updating = false;\n                    if (this.skippedUpdates.length > 0) {\n                        TdLibController.parameters.fastUpdating = false;\n                        this.emitUpdate({\n                            '@type': 'clientUpdateFastUpdatingComplete',\n                            updates: this.skippedUpdates\n                        });\n                        this.skippedUpdates = [];\n                    }\n                }\n                break;\n            }\n            case 'updateChatDefaultDisableNotification': {\n                //TODO: handle updateChatDefaultDisableNotification\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOnlineMemberCount': {\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatDraftMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        draft_message: update.draft_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsMarkedAsUnread': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        is_marked_as_unread: update.is_marked_as_unread\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsPinned': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_pinned: update.is_pinned\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsSponsored': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_sponsored: update.is_sponsored\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatLastMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        last_message: update.last_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatNotificationSettings': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        notification_settings: update.notification_settings\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOrder': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { order: update.order });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPhoto': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { photo: update.photo });\n\n                    switch (chat.type['@type']) {\n                        case 'chatTypeBasicGroup': {\n                            break;\n                        }\n                        case 'chatTypeSupergroup': {\n                            break;\n                        }\n                        case 'chatTypePrivate':\n                        case 'chatTypeSecret': {\n                            const user = UserStore.get(chat.type.user_id);\n                            if (user) {\n                                UserStore.assign(user, { profile_photo: update.photo });\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadInbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_inbox_message_id: update.last_read_inbox_message_id,\n                        unread_count: update.unread_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadOutbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_outbox_message_id: update.last_read_outbox_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReplyMarkup': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        reply_markup_message_id: update.reply_markup_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatTitle': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { title: update.title });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatUnreadMentionCount': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateNewChat': {\n                this.set(update.chat);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateSecretChat': {\n                //TODO: handle updateSecretChat\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUnreadChatCount': {\n                //TODO: handle updateUnreadChatCount\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUserChatAction': {\n                let typingManager = this.getTypingManager(update.chat_id);\n                if (!typingManager) {\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\n                    this.setTypingManager(update.chat_id, typingManager);\n                }\n\n                const key = update.user_id;\n                if (update.action['@type'] === 'chatActionCancel') {\n                    typingManager.clearAction(key);\n                } else {\n                    typingManager.addAction(key, update.action);\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateMessageMentionRead': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n\n                    //chat.unread_mention_count = update.unread_mention_count;\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateClearHistory': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateOpenChat': {\n                this.emitUpdate(update);\n                break;\n            }\n        }\n    };\n\n    emitUpdate = update => {\n        this.emit(update['@type'], update);\n    };\n\n    emitFastUpdate = update => {\n        if (this.updating && TdLibController.parameters.fastUpdating) {\n            this.skippedUpdates.push(update);\n            return;\n        }\n\n        this.emit(update['@type'], update);\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        //Object.assign(source1, source2);\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    get(chatId) {\n        return this.items.get(chatId);\n    }\n\n    set(chat) {\n        this.items.set(chat.id, chat);\n    }\n\n    setOnlineMemberCount(chatId, onlineMemberCount) {\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\n    }\n\n    getOnlineMemberCount(chatId) {\n        return this.onlineMemberCount.get(chatId) || 0;\n    }\n\n    getTypingManager(chatId) {\n        return this.typingManagers.get(chatId);\n    }\n\n    setTypingManager(chatId, typingManager) {\n        return this.typingManagers.set(chatId, typingManager);\n    }\n}\n\nconst store = new ChatStore();\nwindow.chat = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport LocalStorageBackend from 'i18next-localstorage-backend';\nimport { initReactI18next } from 'react-i18next';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst defaultLanguage = 'en';\nconst defaultNamespace = 'translation';\nconst cookies = new Cookies();\nconst language = cookies.get('i18next') || defaultLanguage;\n\n// const detection = {\n//     // order and from where user language should be detected\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n//\n//     // keys or params to lookup language from\n//     lookupQuerystring: 'lng',\n//     lookupCookie: 'i18next',\n//     lookupLocalStorage: 'i18nextLng',\n//     lookupFromPathIndex: 0,\n//     lookupFromSubdomainIndex: 0,\n//\n//     // cache user language on\n//     caches: ['localStorage', 'cookie']\n// };\n\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\n    .init({\n        //detection: detection,\n        ns: [defaultNamespace, 'local'],\n        defaultNS: defaultNamespace,\n        fallbackNS: ['local', 'emoji'],\n        resources: {\n            en: {\n                local: {\n                    DeletedMessage: 'Deleted message',\n                    YourPhone: 'Your Phone',\n                    StartText: 'Please confirm your country code and enter your phone number.',\n                    Next: 'Next',\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\n                    More: 'More',\n                    SendMessage: 'Send Message',\n                    ChatInfo: 'Chat Info',\n                    ChannelInfo: 'Channel Info'\n                },\n                emoji: {\n                    Search: 'Search',\n                    NotEmojiFound: 'No Emoji Found',\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\n                    SearchResults: 'Search Results',\n                    Recent: 'Frequently Used',\n                    SmileysPeople: 'Smileys & People',\n                    AnimalsNature: 'Animals & Nature',\n                    FoodDrink: 'Food & Drink',\n                    Activity: 'Activity',\n                    TravelPlaces: 'Travel & Places',\n                    Objects: 'Objects',\n                    Symbols: 'Symbols',\n                    Flags: 'Flags',\n                    Custom: 'Custom'\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Loading: 'Loading',\n                    Connecting: 'Connecting',\n                    Updating: 'Updating'\n                }\n            },\n            ru: {\n                local: {\n                    DeletedMessage: ' ',\n                    YourPhone: ' ',\n                    StartText: ',       .',\n                    Next: '',\n                    InvalidPhoneNumber:\n                        '  . ,      .',\n                    More: '',\n                    SendMessage: ' ',\n                    ChatInfo: '  ',\n                    ChannelInfo: '  '\n                },\n                emoji: {\n                    Search: '',\n                    NotEmojiFound: '  ',\n                    ChooseDefaultSkinTone: '    ',\n                    SearchResults: ' ',\n                    Recent: ' ',\n                    SmileysPeople: '  ',\n                    AnimalsNature: '  ',\n                    FoodDrink: '  ',\n                    Activity: '',\n                    TravelPlaces: '  ',\n                    Objects: '',\n                    Symbols: '',\n                    Flags: '',\n                    Custom: ''\n                },\n                translation: {\n                    AppName: '',\n                    Loading: '',\n                    Connecting: '',\n                    Updating: ''\n                }\n            }\n        },\n        lng: language,\n        fallbackLng: defaultLanguage,\n        interpolation: {\n            escapeValue: false\n        },\n        react: {\n            wait: false\n        }\n    });\n\nconst cache = new LocalStorageBackend(null, {\n    enabled: true,\n    prefix: 'i18next_res_',\n    expirationTime: Infinity\n});\n\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\n    return data;\n});\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\n    return data;\n});\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\n\nclass LocalizationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.i18n = i18n;\n        this.cache = cache;\n\n        this.setMaxListeners(Infinity);\n        this.addTdLibListener();\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'localization_target',\n                            value: { '@type': 'optionValueString', value: 'android' }\n                        });\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'language_pack_id',\n                            value: { '@type': 'optionValueString', value: language }\n                        });\n                        TdLibController.send({\n                            '@type': 'getLocalizationTargetInfo',\n                            only_local: false\n                        }).then(result => {\n                            this.info = result;\n\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateLanguageChange',\n                                language: language\n                            });\n                        });\n                        break;\n                }\n                break;\n            }\n            case 'updateLanguagePackStrings': {\n                // add/remove new strings\n\n                this.emit('updateLanguagePackStrings', update);\n                break;\n            }\n        }\n    };\n\n    onClientUpdate = async update => {\n        switch (update['@type']) {\n            case 'clientUpdateLanguageChange': {\n                const { language } = update;\n\n                TdLibController.send({\n                    '@type': 'getLanguagePackStrings',\n                    language_pack_id: language,\n                    keys: []\n                }).then(async result => {\n                    const cookies = new Cookies();\n                    cookies.set('i18next', language);\n\n                    const resources = this.processStrings(language, result);\n\n                    this.cache.save(language, defaultNamespace, resources);\n\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\n\n                    await i18n.changeLanguage(language);\n\n                    TdLibController.send({\n                        '@type': 'setOption',\n                        name: 'language_pack_id',\n                        value: { '@type': 'optionValueString', value: language }\n                    });\n\n                    this.emit('clientUpdateLanguageChange', update);\n                });\n                break;\n            }\n        }\n    };\n\n    processStrings = (lng, languagePackStrings) => {\n        if (!languagePackStrings) return {};\n        const { strings } = languagePackStrings;\n        if (!strings) return {};\n\n        let result = {};\n        for (let i = 0; i < strings.length; i++) {\n            const { value } = strings[i];\n            switch (value['@type']) {\n                case 'languagePackStringValueOrdinary': {\n                    result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValuePluralized': {\n                    //result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValueDeleted': {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    loadLanguage = async language => {\n        const result = await TdLibController.send({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: language,\n            keys: []\n        });\n\n        const resources = this.processStrings(language, result);\n\n        this.cache.save(language, defaultNamespace, resources);\n\n        i18n.addResourceBundle(language, defaultNamespace, resources);\n    };\n}\n\nconst store = new LocalizationStore();\nwindow.localization = store;\nexport default store;\n"],"sourceRoot":""}