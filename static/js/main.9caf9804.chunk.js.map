{"version":3,"sources":["Utils/HOC.js","Constants.js","Utils/Common.js","Controllers/TdLibController.js","Stores/LocalizationStore.js","Language.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js","Theme.js","Notifications.js","Stores/OptionStore.js","Stores/UserStore.js","Utils/User.js","Stores/SupergroupStore.js","Utils/InputTypingManager.js","Stores/ChatStore.js","Stores/FileStore.js","Components/Viewer/FileProgress.js","Stores/MessageStore.js","Utils/File.js","Components/Tile/DocumentTile.js","Stores/PlayerStore.js","Components/Message/Media/AudioAction.js","Utils/Media.js","Components/Message/Media/DocumentAction.js","Components/Message/Media/Document.js","Components/Message/Media/Audio.js","Components/Message/Media/Animation.js","Components/Tile/UserTileControl.js","Components/Message/Media/Contact.js","Components/Message/Media/Photo.js","Components/Theme.js","Components/Message/Media/Game.js","Components/Message/Media/Location.js","Components/Message/Media/PollRadio.js","Components/Message/Media/PollPercentage.js","Components/Message/Media/PollOption.js","Components/Message/Media/Poll.js","Actions/Poll.js","Components/Message/Media/Sticker.js","Components/Message/Media/Venue.js","Components/Message/Media/Video.js","Components/Message/Media/MediaStatus.js","Components/Message/Media/VideoNote.js","Components/Message/Media/VoiceNoteSlider.js","Components/Message/Media/VoiceNote.js","Actions/Client.js","Utils/Currency.js","Components/Message/MessageAuthor.js","Utils/ServiceMessage.js","Utils/Message.js","Stores/BasicGroupStore.js","Components/ColumnMiddle/AttachButton.js","Utils/Component.js","Utils/Key.js","Components/Dialog/CreatePollOption.js","Utils/Poll.js","Stores/PollStore.js","Components/Dialog/CreatePollDialog.js","Components/ColumnMiddle/EmojiPickerButton.js","Components/Tile/ReplyTile.js","Components/Message/Reply.js","Components/ColumnMiddle/InputBoxHeader.js","Utils/OutputTypingManager.js","Stores/StickerStore.js","Components/ColumnMiddle/InputBoxControl.js","Components/ColumnMiddle/FooterCommand.js","Components/ColumnMiddle/NotificationsControl.js","Components/ColumnMiddle/NotificationsCommandControl.js","Components/ColumnMiddle/Footer.js","Utils/Chat.js","Utils/BasicGroup.js","Utils/Supergroup.js","Components/Tile/ChatStatus.js","Components/Tile/ChatTileControl.js","Components/Tile/ForwardTargetChat.js","Utils/Language.js","Components/Dialog/ForwardDialog.js","Components/Additional/NotificationTimer.js","Components/ColumnMiddle/MainMenuButton.js","Components/Tile/UserStatusControl.js","Components/Tile/UserControl.js","Components/Tile/DialogTitleControl.js","Components/Tile/DialogStatusControl.js","Components/Tile/ChatControl.js","Components/ColumnRight/ChatDetailsHeader.js","Components/ColumnRight/NotificationsListItem.js","Components/ColumnRight/MoreListItem.js","Components/ColumnRight/ChatDetails.js","Components/ColumnRight/GroupsInCommonHeader.js","Components/ColumnRight/GroupsInCommon.js","Components/ColumnRight/SharedMediaHeaderControl.js","Components/ColumnRight/SharedMedia.js","Components/ColumnRight/ChatInfo.js","Components/Tile/TopChat.js","Components/Tile/RecentlyFoundChat.js","Components/Tile/FoundPublicChat.js","Components/Tile/FoundMessage.js","Components/ColumnLeft/Search/SearchCaption.js","Components/ColumnLeft/Search/Search.js","Components/ColumnLeft/ThemePicker.js","Components/ColumnLeft/LanguagePicker.js","registerServiceWorker.js","Components/ColumnLeft/MainMenuButton.js","Components/ColumnLeft/DialogsHeader.js","Components/Tile/DialogContentControl.js","Components/Tile/DialogBadgeControl.js","Components/Tile/DialogMetaControl.js","Components/Tile/DialogControl.js","Components/ColumnLeft/DialogsList.js","Components/ColumnLeft/UpdatePanel.js","Components/ColumnLeft/Dialogs.js","Components/ColumnMiddle/HeaderCommand.js","Components/ColumnMiddle/Header.js","Components/Player/VolumeButton.js","Components/Player/RepeatButton.js","Components/Player/ShuffleButton.js","Components/Player/PlaybackRateButton.js","Components/Player/Time.js","Components/Player/Playlist.js","Components/Player/HeaderPlayer.js","Components/ColumnMiddle/FilesDropTarget.js","Components/Message/Forward.js","Components/Message/MessageStatus.js","Components/Message/UnreadSeparator.js","Components/Message/Media/WebPage.js","Components/Message/Message.js","Components/Message/ServiceMessage.js","Components/Dialog/ShareStickerSetButton.js","Components/Dialog/StickerSetDialog.js","Components/ColumnMiddle/StickersHint.js","Components/ColumnMiddle/MessagesList.js","Components/Dialog/ChatInfoDialog.js","Components/ColumnMiddle/DialogDetails.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Footer.js","Components/Tile/MediaViewerControl.js","Components/Viewer/Lottie.js","Components/Viewer/MediaCaption.js","Components/Viewer/MediaViewerContent.js","Components/Viewer/MediaViewerButton.js","Components/Viewer/MediaViewerFooterText.js","Components/Viewer/MediaViewerFooterButton.js","Components/Viewer/MediaViewerDownloadButton.js","Components/Viewer/MediaViewer.js","Components/Viewer/ProfileMediaViewerContent.js","Components/Tile/ProfileMediaViewerControl.js","Components/Viewer/ProfileMediaViewer.js","Components/Additional/AppInactiveControl.js","TelegramApp.js","index.js"],"names":["withSaveRef","Component","React","forwardRef","props","ref","react_default","a","createElement","Object","assign","forwardedRef","withRestoreRef","_React$Component","_class","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this$props","rest","objectWithoutProperties","getDisplayName","WrappedComponent","displayName","name","ANIMATION_DURATION_200MS","ANIMATION_DURATION_300MS","CHAT_SLICE_LIMIT","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","MEDIA_SLICE_LIMIT","MESSAGE_SLICE_LIMIT","MUTED_VALUE_MAX","MUTED_VALUE_MIN","NOTIFICATIONS_DEBOUNCE_DELAY_MS","PHOTO_BIG_SIZE","PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","POLL_QUESTION_LENGTH","POLL_QUESTION_HINT_LENGTH","POLL_QUESTION_MAX_LENGTH","POLL_OPTION_LENGTH","POLL_OPTION_HINT_LENGTH","POLL_OPTION_MAX_LENGTH","POLL_OPTIONS_MAX_COUNT","SERVICE_NOTIFICATIONS_USER_ID","PROFILE_PHOTO_BIG_SIZE","PROFILE_PHOTO_SMALL_SIZE","VERBOSITY_JS_MAX","VERBOSITY_JS_MIN","VERBOSITY_MAX","VERBOSITY_MIN","USERNAME_LENGTH_MIN","MAX_SNACK","NOTIFICATION_AUTO_HIDE_DURATION_MS","THUMBNAIL_BLURRED_SIZE","PRELOAD_AUDIO_SIZE","PRELOAD_ANIMATION_SIZE","PRELOAD_DOCUMENT_SIZE","PRELOAD_STICKER_SIZE","PRELOAD_VOICENOTE_SIZE","PRELOAD_VIDEO_SIZE","PRELOAD_VIDEONOTE_SIZE","THUMBNAIL_PRIORITY","FILE_PRIORITY","FIRST_START_OPTIMIZATIONS","PLAYER_VOLUME_NORMAL","PLAYER_STARTTIME","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_PLAYBACKRATE_FAST","PLAYER_PROGRESS_TIMEOUT_MS","getOSName","OSName","window","navigator","userAgent","indexOf","getBrowser","isEdge","document","documentMode","StyleMedia","isValidPhoneNumber","phoneNumber","isBad","match","replace","length","stringToBoolean","string","toLowerCase","trim","Boolean","orderCompare","order1","order2","diff","getPhotoSize","sizes","getSize","dimension","useWidth","width","height","Math","abs","index","i","type","photo","local","is_downloading_completed","currDiff","getFitSize","size","max","increaseToMax","undefined","floor","debounce","func","wait","immediate","timeout","context","args","callNow","clearTimeout","setTimeout","getFirstLetter","str","toUpperCase","getLetters","title","split","formatPhoneNumber","number","unformattedNumber","startsWith","formatNumber","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","isAuthorizationReady","state","getDurationString","secondsTotal","hours","minutes","seconds","getRandomInt","min","ceil","random","controller","TdLibController","_this","call","init","location","setParameters","_this$parameters","parameters","verbosity","jsVerbosity","useTestDC","readOnly","fastUpdating","useDatabase","options","logVerbosityLevel","jsLogVerbosityLevel","mode","prefix","isBackground","console","log","concat","JSON","stringify","client","TdClient","onUpdate","update","disableLog","file","id","emit","clientUpdate","search","params","URLSearchParams","has","get","parseInt","tag","tagVerbosity","send","request","then","result","sendTdParameters","asyncToGenerator","regenerator_default","mark","_callee","apiHash","version","wrap","_context","prev","next","process","packageJson","@type","use_test_dc","api_id","api_hash","system_language_code","language","device_model","system_version","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","stop","setChatId","chatId","messageId","setMaxListeners","Infinity","_this2","catch","error","content","EventEmitter","defaultNamespace","Cookies","i18n","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChatInfo","ChannelInfo","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Loading","Connecting","Updating","ru","lng","fallbackLng","interpolation","escapeValue","react","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","err","data","translationCurrentLng","addResourceBundle","store","LocalizationStore","addTdLibListener","addListener","onClientUpdate","removeTdLibListener","removeListener","authorization_state","only_local","info","_ref","_callee2","_language","_context2","t0","language_pack_id","keys","_ref2","set","processStrings","save","changeLanguage","_x2","abrupt","_x","languagePackStrings","strings","loadLanguage","_ref3","_callee3","_context3","sent","_x3","localization","withLanguage","LanguageWrapper","es","ActionScheduler","actionCallback","cancelCallback","add","action","cancel","actions","expire","Date","setMilliseconds","getMilliseconds","timerId","invoke","item","delete","remove","now","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","_ref4","slicedToArray","actionTimeout","return","handleTimer","expired","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref7","_ref6","push","_arr","_i","Map","ApplicationStore","addScheduledAction","actionScheduler","invokeScheduledAction","removeScheduledAction","handleScheduledAction","handleCancelScheduledAction","authorizationState","loggingOut","connectionState","setNotificationSettings","scope","notification_settings","text","confirm","logOut","alert","extendedUpdate","nextChatId","nextMessageId","previousChatId","previousMessageId","dialogChatId","focused","inProgress","onUpdateStatistics","statistics","count","addStatistics","getDragging","dragging","setDragging","scopeNotificationSettings","isChatDetailsVisible","mediaViewerContent","profileMediaViewerContent","visibility","notificationSettings","source1","source2","application","withTheme","ThemeWrapper","onClientUpdateThemeChanging","primary","theme","createMuiTheme","palette","secondary","main","typography","useNextVariants","setState","blue","on","core_styles","withSnackbarNotifications","NotificationsWrapper","build","maxSnack","OptionStore","items","option","UserStore","user","setFullInfo","user_id","user_full_info","status","fullInfoItems","myId","userId","fullInfo","getUserStatus","was_online","wasOnline","getTime","today","setHours","dateFormat","yesterday","setDate","getDate","isUserOnline","getUserFullName","first_name","last_name","getUserShortName","isUserBlocked","getFullInfo","is_blocked","getUserStatusOrder","expires","getProfilePhoto","userProfilePhoto","smallPhotoSize","bigPhotoSize","small","big","getProfilePhotoDateHint","added_date","date","SupergroupStore","supergroup","supergroup_id","supergroup_full_info","InputTypingManager","timeoutCallback","bind","addAction","clearAction","setActionsTimeout","expiredActions","chat_id","setSeconds","getSeconds","_ref5","ChatStore","updating","skippedUpdates","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","chat","order","draft_message","is_marked_as_unread","is_pinned","is_sponsored","last_message","profile_photo","last_read_inbox_message_id","unread_count","last_read_outbox_message_id","reply_markup_message_id","unread_mention_count","typingManager","getTypingManager","setTypingManager","typingManagers","onlineMemberCount","useReadFile","FileStore","onUpdateFile","onUpdateAuthorizationState","initDB","handleDownloads","handleUploads","arr","idb_key","downloads","getStore","forEach","handleChat","handleMessage","handleSticker","handleUser","remote","uploads","is_uploading_completed","getLocalFile","updateChatPhotoBlob","getRemoteFile","updateUserPhotoBlob","message","animation","handleAnimation","audio","handleAudio","handlePhoto","handleDocument","game","handleGame","handleLocation","sticker","web_page","video","video_note","voice_note","handleVideo","handleVoiceNote","handleVideoNote","venue","obj","photoSize","source","updatePhotoBlob","album_cover_thumbnail","updateAudioThumbnailBlob","updateAudioBlob","thumbnail","updateDocumentThumbnailBlob","updateDocumentBlob","locationId","getLocationId","getLocationFile","updateLocationBlob","updateStickerThumbnailBlob","updateStickerBlob","voiceNote","voice","updateVoiceNoteBlob","videoNote","updateVideoNoteThumbnailBlob","updateVideoNoteBlob","updateVideoThumbnailBlob","updateVideoBlob","updateAnimationThumbnailBlob","updateAnimationBlob","deleteLocalFile","fileId","getBlob","blobItems","setBlob","blob","deleteBlob","locationItems","setLocationFile","getBlobUrl","urls","url","URL","createObjectURL","deleteBlobUrl","callbacks","db","WeakMap","callback","initiatingDB","openDB","Promise","resolve","reject","indexedDB","open","onsuccess","onerror","transaction","objectStore","faultCallback","_callee4","response","_context4","file_id","_x4","Blob","event","target","priority","some","x","filter","only_if_pending","message_ids","revoke","circleStyle","circle","FileProgress","currentFile","nextFile","prevFile","isDownloading","download","wasActive","is_downloading_active","isActive","isUploading","upload","is_uploading_active","getProgressParams","isCompleted","progressSize","downloaded_size","uploaded_size","completeAnimation","prevPropsFile","nextProps","nextState","icon","thumbnailSrc","nextLocal","nextIdbKey","prevLocal","prevIdbKey","isDownloadingCompleted","receiveIdbKey","mount","_this$props2","cancelButton","zIndex","completeIcon","_this$state","_this$getProgressPara","_this$getProgressPara2","progress","style","background","className","CircularProgress_default","classes","variant","thickness","Close_default","defaultProps","MessageStore","message_id","reply_markup","edit_date","views","old_content","new_content","is_listened","is_viewed","old_message_id","sending_state","error_code","error_message","selected","selectedItems","clear","deletedMessage","messages","getSizeString","toFixed","getFileSize","saveBlob","filename","msSaveBlob","blobURL","tempLink","display","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","loadReplies","messageIds","map","setItems","loadReplyContents","loadAnimationThumbnailContent","loadAudioThumbnailContent","loadPhotoContent","loadDocumentThumbnailContent","loadGameThumbnailContent","loadStickerThumbnailContent","loadVideoThumbnailContent","loadVideoNoteThumbnailContent","loadAudioContent","useFileSize","_file","loadAnimationContent","_file3","loadContactContent","contact","loadUserContent","loadDocumentContent","_file5","loadGameContent","loadLocationContent","zoom","scale","loadBigPhotoContent","loadPhotoThumbnailContent","loadStickerContent","_file10","loadVideoContent","_file12","loadVideoNoteContent","_file14","loadVoiceNoteContent","_file16","loadMessageContents","users","replies","sender_user_id","reply_to_message_id","loadPhoto","loadUsersContent","toConsumableArray","saveOrDownload","fileName","mime","saveData","can_be_downloaded","getMediaPreviewFile","getMediaFile","cancelLoadMediaViewerContent","cancelGetRemoteFile","loadMediaViewerContent","useSizeLimit","preloadMediaViewerContent","history","loadUserFileContent","loadChatFileContent","loadProfileMediaViewerContent","photos","_photo9","getChatUserId","_photo10","_photo11","preloadProfileMediaViewerContent","ids","loadChatContent","loadChatsContent","loadDraftContent","loadStickersContent","stickers","getSrc","getDownloadedSize","getUploadedSize","getExtension","parts","pop","DocumentTile","onClientUpdateDocumentThumbnailBlob","forceUpdate","openMedia","classNames","document-tile-background","onClick","src","draggable","alt","Components_Viewer_FileProgress","withStyles","borderRadius","RepeatEnum","freeze","NONE","REPEAT","REPEAT_ONE","PlayerStore","close","playlist","time","videoStream","getPlaylist","volume","repeat","shuffle","playbackRate","playing","moveToNextMedia","moveToPrevMedia","moveNext","duration","currentTime","timestamp","stream","_this$message","findIndex","useRepeatShuffle","_this$message2","nextIndex","_assertThisInitialize","currentPlaylist","_messages","total_count","assertThisInitialized","getSearchMessagesFilter","totalCount","query","from_message_id","offset","limit","cookies","Number","player","AudioAction","onClientUpdateMediaEnd","active","timeString","getTimeString","onClientUpdateMediaTime","_this$state2","onClientUpdateMediaActive","_this$props3","_this$state3","durationString","currentTimeString","_this$props4","audioDuration","_this$state4","_this$state5","isDownloadingActive","isUploadingActive","sizeString","isBlurredThumbnail","getAudioTitle","file_name","performer","trimmedTitle","trimmedPerformer","DocumentAction","Document","Components_Tile_DocumentTile","ArrowDownward_default","InsertDriveFile_default","data-name","data-ext","Message_Media_DocumentAction","Audio","onClientUpdateMediaPlay","onClientUpdateMediaPause","nextContext","_this$props5","Pause_default","PlayArrow_default","Message_Media_AudioAction","Animation","startStopPlayer","videoRef","current","inView","openMediaViewer","openProfileMediaViewer","play","pause","onClientUpdateProfileMediaViewerContent","onClientUpdateMediaViewerContent","onClientUpdateFocusWindow","onClientUpdateMessagesInView","onClientUpdateAnimationBlob","onClientUpdateAnimationThumbnailBlob","createRef","hasFocus","displaySize","t","_this$props$animation","mime_type","fitPhotoSize","mimeType","isBlurred","isGif","poster","muted","autoPlay","loop","playsInline","Fragment","media-blurred","withTranslation","UserTileControl","onClientUpdateUserBlob","onClientUpdateChatBlob","onUpdateChatPhoto","onUpdateChatTitle","handleSelect","onSelect","stopPropagation","letters","charAt","getUserLetters","tileColor","defineProperty","pointer","Contact","phone_number","fullName","Components_Tile_UserTileControl","Photo","onClientUpdatePhotoBlob","thumbnailSize","showProgress","photoStyle","objectSpread","borderStyle","borderColor","divider","accentStyles","accentColorDark","color","accentBackgroundLight","light","Game","getContent","Message_Media_Animation","Message_Media_Photo","description","formattedText","getFormattedText","Location","onClientUpdateLocationBlob","longitude","latitude","rel","Room_default","fontSize","PollRadio","chosen","beingChosen","hidden","onChange","poll-radio-hidden","Radio_default","root","radioRoot","checked","checkedIcon","RadioButtonChecked_default","progressRoot","position","top","left","pointerEvents","padding","PollPercentage","updateAnimation","stopAnimation","handle","requestAnimationFrame","onAnimationFrame","cancelAnimationFrame","startTime","from","to","timePassed","animated","prevPropsValue","closed","prevProps","prevState","snapshot","poll-percentage-subtitle","PollOption","getTitleString","canBeSelected","handleClick","onVote","handleCancel","onUnvote","maxVoterCount","voter_count","vote_percentage","is_chosen","is_being_chosen","Message_Media_PollPercentage","Message_Media_PollRadio","LinearProgress_default","bar","progressBar","enhance","compose","backgroundColor","margin","right","bottom","transition","Poll","dialog","contextMenu","getTotalVoterCountString","handleVote","optionIds","option_ids","setPollAnswer","handleUnvote","poll","handleCloseContextMenu","is_closed","cancelPollAnswer","handleStopPoll","stopPoll","handleDialog","handleCloseDialog","handleContextMenu","preventDefault","clientX","clientY","question","total_voter_count","canUnvote","canStopPoll","can_be_edited","every","onContextMenu","Message_Media_PollOption","Popover_default","onClose","anchorReference","anchorPosition","anchorOrigin","vertical","horizontal","transformOrigin","MenuList_default","e","MenuItem_default","Dialog_default","transitionDuration","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","Button_default","Sticker","onClientUpdateStickerBlob","onClientUpdateStickerThumbnailBlob","blur","fitSize","stickerStyle","Venue","address","Message_Media_Location","Video","onClientUpdateVideoThumbnailBlob","_this$props$video","MediaStatus","onUpdateMessageContentOpened","isOpened","isContentOpened","openedIcon","VideoNote","onClientUpdateMediaCaptureStream","srcObject","updateVideoSrc","videoDuration","onClientUpdateVideoNoteBlob","onClientUpdateVideoNoteThumbnailBlob","handleCanPlay","getTracks","track","_this$props6","_this$props$videoNote","video-note-playing","onCanPlay","Media_MediaStatus","VolumeOff_default","VoiceNoteSlider","reset","getValue","Slider_default","slider","thumbWrapper","thumb","maxWidth","VoiceNote","Message_Media_VoiceNoteSlider","openUser","popup","openChat","highlightMessage","currency","Currency","list","symbol","includes","totalAmount","amount","pow","getPow","MessageAuthor","openUserCommand","openChatCommand","isPrivateChat","getChatTitle","serviceMap","isServiceMessage","ttl","getServiceMessageContent","isOutgoing","getMyId","isChannel","is_channel","Components_Message_MessageAuthor","members","member_user_ids","reduce","accumulator","array","separator","ttlString","days","getTTLString","messageGame","game_message_id","score","passportElementTypes","types","getPassportElementTypeString","messageInvoice","invoice_message_id","invoice","getString","total_amount","author","getMessageAuthor","pinnedMessage","pinnedContent","substring","domain_name","getTitle","start","end","entities","beforeEntityText","entityText","decodedUrl","decodeURI","hashtag","command","afterEntityText","getText","caption","getDateHint","getMedia","Message_Media_Audio","Message_Media_Contact","Message_Media_Document","Message_Media_Game","Message_Media_Poll","Message_Media_Sticker","Message_Media_Venue","Message_Media_Video","Message_Media_VideoNote","Message_Media_VoiceNote","getSenderUserId","filterMessages","isMediaContent","isVideoMessage","isLottieMessage","endsWith","isAnimationMessage","getMediaTitle","forward_info","getAuthor","hasAudio","openAnimation","fileCancel","cancelUploadFile","setMediaViewerContent","openAudio","openDocument","openPhoto","openSticker","set_id","stickerSet","openVideo","openVideoNote","openVoiceNote","openChatPhoto","openContact","openGame","isDeletedMessage","BasicGroupStore","basic_group","basic_group_id","basic_group_full_info","groupId","group","basicgroup","AttachButton","anchorEl","handleMenuClick","currentTarget","handleMenuClose","handleAttachPhoto","onAttachPhoto","handleAttachDocument","onAttachDocument","handleAttachPoll","onAttachPoll","IconButton_default","iconButton","aria-label","AttachFile_default","Menu_default","getContentAnchorEl","disableAutoFocusItem","disableRestoreFocus","disabled","canSendPhotos","ListItemIcon_default","icons_Photo_default","ListItemText_default","inset","canSendDocuments","icons_Poll_default","focusNode","node","toEnd","childNodes","lastNode","range","createRange","setStart","collapse","selection","getSelection","removeAllRanges","addRange","scrollTop","scrollHeight","focus","utils","special","navigational","isSpecial","keyCode","isNavigational","CreatePollOption","optionTextRef","innerText","handleDelete","onDelete","handleInput","dataset","maxLength","remainLength","handleKeyDown","hasSelection","toString","onFocusNext","isCollapsed","firstChild","anchorNode","anchorOffset","onFocusPrev","lastChild","handlePaste","selectionString","pasteText","clipboardData","getData","substr","execCommand","contentEditable","suppressContentEditableWarning","placeholder","data-length","data-max-length","onInput","onKeyDown","onPaste","Typography_Typography","align","counterRoot","minWidth","userSelect","isValidPoll","isValidQuestion","noneEmptyOptions","isValidOption","PollStore","_this$poll","CreatePollDialog","handleClientUpdateNewPoll","handleClientUpdatePollQuestion","questionRef","handleClientUpdatePoll","handleClientUpdateNewPollOption","optionsRefMap","shiftKey","handleFocusNextOption","innerHTML","handleAddOption","handleDeleteOption","handleDeleteByBackspace","prevIndex","deleteOption","prevNode","handleFocusPrevOption","nextNode","getHint","addCount","handleClose","hasPollData","handleConfirmationDone","handleSend","onSend","inputMessagePoll","getInputMessagePoll","handleConfirmationClose","_this3","Components_Dialog_CreatePollOption","el","canAddOption","hint","dialogRoot","contentRoot","Typography_default","flexGrow","Divider_default","dividerRoot","List_default","listRoot","ListItem_default","listItem","button","disableTypography","typographyRoot","EmojiPickerButton","onClientUpdateChange","picker","updateAnchorEl","switchPopover","notfound","skintext","categories","recent","people","nature","foods","activity","places","objects","symbols","flags","custom","emoji_mart_dist_es","showPreview","showSkinTones","dark","InsertEmoticon_default","ReplyTile","isVideoNote","hasVideoNote","reply-tile-photo-round","reply-tile-photo-loading","Reply","onGetMessageResult","handleOpen","getReplyPhotoSize","onMouseDown","Components_Tile_ReplyTile","InputBoxHeader","Reply_default","replyIcon","Components_Message_Reply","closeIconButton","OutputTypingManager","lastAction","lastTypingDate","StickerStore","sticker_set_ids","_this$stickerSet","is_installed","InputBoxControl","onClientUpdateStickerSend","newMessageRef","textContent","thumbnailWidth","thumbnailHeight","onSendInternal","onClientUpdateReply","currentChatId","replyToMessageId","setInputFocus","onClientUpdateChatId","getChatDraftReplyToMessageId","openPasteDialog","setDraft","element","draft","getChatDraft","setChatDraftMessage","chatDraftMessage","draftMessage","getNewChatDraftMessage","newDraft","getInputText","previousDraft","previousReplyToMessageId","input_message_text","disable_web_page_preview","clear_draft","handleSubmit","attachPhotoRef","handleAttachPhotoComplete","files","Array","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","readAsDataURL","readImageSize","handleSendPhoto","attachDocumentRef","handleAttachDocumentComplete","handleSendDocument","handleKeyUp","isMeChat","setTyping","cachedMessage","handleSendingMessage","uploadFile","handleSendPoll","originalEvent","kind","getAsFile","plainText","handlePasteContinue","handleClosePaste","clearDraft","input_message_content","newChatDraftMessage","handleEmojiSelect","native","regex","t1","performance","emojiRegex","exec","getChatId","Components_ColumnMiddle_InputBoxHeader","Components_ColumnMiddle_EmojiPickerButton","onKeyUp","multiple","accept","ColumnMiddle_AttachButton","Send_default","Components_Dialog_CreatePollDialog","FooterCommand","onCommand","Button_Button_default","NotificationsControl","onUpdateChatNotificationSettings","isMuted","isChatMuted","onUpdateScopeNotificationSettings","handleSetChatNotifications","debouncedSetChatNotificationSettings","setChatNotificationSettings","muteFor","newNotificationSettings","use_default_mute_for","mute_for","prevChatId","NotificationsCommandControl","Components_ColumnMiddle_FooterCommand","Footer","onUpdateBasicGroup","basicGroupId","hasBasicGroupId","onUpdateSupergroup","supergroupId","isSupergroup","hasSupergroupId","handleJoin","handleDeleteAndExit","remove_from_chat_list","basicGroup","Components_ColumnMiddle_InputBoxControl","is_member","can_send_messages","ColumnMiddle_NotificationsCommandControl","getChatTypingString","typingString","inputTypingManager","values","getPrivateChatTypingString","firstUser","secondUser","second_name","getGroupChatTypingString","getMessageSenderName","getNotificationSettings","getChatMuteFor","getMessageDate","dayStart","day","getDay","weekStart","getChatSubtitleWithoutTyping","member_count","onlineCount","getOnlineMemberCount","getBasicGroupStatus","getSupergroupStatus","isAccentChatSubtitleWithoutTyping","getChatUsername","username","getChatPhoneNumber","isGroupChat","isChannelChat","showSavedMessages","getGroupChatMembers","fallbackValue","getChatFullInfo","getSupergroupId","getPhotoFromChat","getChatShortTitle","can_send_media_messages","canSendMessages","showChatDraft","ChatStatus","onUpdateUserStatus","online","borderSize","iconIndicator","default","overflow","boxSizing","ChatTileControl","onFastUpdatingComplete","showOnline","BookmarkBorder_default","getChatLetters","Components_Tile_ChatStatus","statusRoot","statusIcon","ForwardTargetChat","shortTitle","forward-target-chat-selected","Components_Tile_ChatTileControl","border","markSelected","markUnselected","boxShadow","paper","cyrillicInput","getCyrillicInput","input","output","latinInput","getLatinInput","ForwardDialog","loadContent","promises","getChatsPromise","savedMessagesPromise","chats","savedMessages","getPublicMessageLink","offset_order","offset_chat_id","force","all","chatIds","chat_ids","for_album","publicMessageLink","handleCopyLink","link","copy","enqueueSnackbar","autoHideDuration","getForwardPhotoSize","can_be_forwarded","getInnerText","messageRef","targetChats","targetChatId","disable_notifications","from_background","added_sticker_file_ids","from_chat_id","as_album","handleChangeSelection","div","handleSearchKeyDown","handleSearchKeyUp","searchRef","latinText","cyrillicText","searchResults","hasSearchText","searchText","handleSearchPaste","handleMessageKeyUp","handleMessagePaste","toLocaleLowerCase","setSearchFocus","Components_Tile_ForwardTargetChat","foundChats","aria-describedby","searchList","autoFocus","spacing","unit","dialogContent","withSnackbar","NotificationTimer","clearInterval","setInterval","menuAnchorOrigin","menuTransformOrigin","LeaveChatDialog","getDeleteDialogText","other","ClearHistoryDialog","MainMenuButton","handleButtonClick","handleChatInfo","openChatDetails","handleClearHistory","openClearHistory","handleClearHistoryContinue","handleLeave","openDelete","handleLeaveContinue","getLeaveChatNotification","clientUpdateType","finish","_this2$props","Components_Additional_NotificationTimer","getLeaveChatTitle","clearHistory","canClearHistory","deleteChat","canDeleteChat","leaveChatTitle","aria-owns","aria-haspopup","menuIconButton","MoreVert_default","MainMenuButton_LeaveChatDialog","MainMenuButton_ClearHistoryDialog","UserStatusControl","isAccent","prevUserId","userStatusSubtitle","accent-color","userStatusAccentSubtitle","UserControl","Components_Tile_UserStatusControl","DialogTitleControl","DialogStatusControl","updateSubtitle","find","subtitle","onUpdateUserFullInfo","onUpdateBasicGroupFullInfo","onUpdateSupergroupFullInfo","statusAccentSubtitle","statusSubtitle","ChatControl","onTileSelect","showStatus","Components_Tile_DialogTitleControl","Components_Tile_DialogStatusControl","ChatDetailsHeader","backButton","index_es","leftIconButton","ArrowBack_default","rightIconButton","NotificationsListItem","Notifications_default","NotificationsActive_default","noWrap","ListItemSecondaryAction_default","Switch_default","MoreListItem","handleMoreClick","openMore","handleSendMessage","handleBlock","isGroup","isBlocked","isMember","isChatMember","MoreHoriz_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","unmountOnExit","component","disablePadding","ChatDetails","handleSelectChat","getGroupsInCommon","loadChatContents","hasGroupsInCommon","handleUsernameHint","telegramUrlOption","usernameLink","handlePhoneHint","handleHeaderClick","chatDetailsListRef","handleOpenViewer","setProfileMediaViewerContent","handleOpenChat","getContentHeight","clientHeight","offsetHeight","onOpenSharedMedia","onOpenGroupsInCommon","Components_ColumnRight_ChatDetailsHeader","bio","getChatBio","isMe","member","sort","y","Components_Tile_UserControl","handleSelectUser","Components_Tile_ChatControl","AlternateEmail_default","Call_default","ErrorOutline_default","whiteSpace","wordWrap","ColumnRight_NotificationsListItem","ColumnRight_MoreListItem","nested","GroupsInCommonHeader","backIconButton","GroupsInCommon","minHeight","Components_ColumnRight_GroupsInCommonHeader","SharedMediaHeaderControl","SharedMedia","handleChange","Components_ColumnRight_SharedMediaHeaderControl","Tabs_default","indicatorColor","textColor","scrollable","scrollButtons","fullWidth","Tab_default","label","userChatId","openSharedMedia","openGroupsInCommon","handelOpenSharedMedia","handleCloseSharedMedia","handleOpenGroupsInCommon","handleCloseGroupsInCommon","handleCloseChatDetails","changeChatDetailsVisibility","detailsRef","Components_ColumnRight_SharedMedia","Components_ColumnRight_GroupsInCommon","Components_ColumnRight_ChatDetails","right-column","TopChat","PureComponent","userStatusRoot","RecentlyFoundChat","FoundPublicChat","_classNames","selectedChatId","membersCount","getGroupChatMembersCount","subscribersString","listItemSelected","foundPublicChatSubtitle","FoundMessage","getMessageId","chatSearch","selectedMessageId","senderName","senderFullName","getMessageSenderFullName","tile","accentBackground","accent-background","foundMessageSubtitle","searchCaption","grey","searchCaptionCommand","onClientUpdateSearchText","trimmedText","concatSearchResults","results","j","b","sessionId","localPromise","latinLocalPromise","cyrillicLocalPromise","savedMessagesStrings","globalPromises","globalPromise","globalLatinPromise","globalResults","global","splice","recentlyFound","offset_date","offset_message_id","topPromise","recentlyFoundPromise","category","handleRecentlyFound","handleClearRecentlyFound","handleSelectMessage","addToRecent","keepOpen","onSelectMessage","handleScroll","listRef","onLoadPrevious","getOffset","concatMessages","loading","handleTopChatsScroll","prevPropsChatId","prevPropsText","topChats","Components_Tile_TopChat","recentlyFoundChats","Components_Tile_RecentlyFoundChat","localChats","globalChats","Components_Tile_FoundPublicChat","globalMessages","Components_Tile_FoundMessage","messagesCaption","onScroll","Search_SearchCaption","closeSearchIconButton","ThemePicker","getColor","handleAccentChange","getColorString","red","orange","amber","green","indigo","deepPurple","FormControl_default","formControl","FormLabel_default","RadioGroup_default","FormControlLabel_default","control","redRoot","orangeRoot","amberRoot","greenRoot","blueRoot","indigoRoot","deepPurpleRoot","&$checked","LanguagePicker","languages","language_packs","native_name","isLocalhost","hostname","register","_register","swUrl","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","pushSubscription","endpoint","p256dh_base64url","auth_base64url","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","fetch","headers","ready","unregister","reload","_update","_callee6","_context6","handleMenuOpen","handleLogOut","onLogOut","handleCheckUpdates","handleAppearance","themePicker","handleLanguage","languagePicker","setRef","getAuthorizationState","mainMenuControl","icons_Menu_default","ColumnLeft_ThemePicker","innerRef","ColumnLeft_LanguagePicker","searchIconButton","DialogsHeader","handleDone","handleSearch","onSearch","openSearch","searchInput","confirmLogoutDialog","dialogText","ColumnLeft_MainMenuButton","headerIconButton","SpeedDialIcon_default","icons_Search_default","openIcon","DialogContentControl","onClientUpdateClearHistory","contentControl","getLastMessageContent","getLastMessageSenderName","DialogBadgeControl","unreadMessageIcon","is_outgoing","getChatUnreadMessageIcon","unreadCount","getChatUnreadCount","unreadMentionCount","getChatUnreadMentionCount","showUnreadCount","showDraftChat","muteClassName","dialogBadge","DialogMetaControl","getLastMessageDate","DialogControl","isSelected","dialogActive","Components_Tile_DialogMetaControl","Components_Tile_DialogContentControl","Components_Tile_DialogBadgeControl","cursor","& $statusRoot","&:hover","& $statusIcon","DialogsList","onClientUpdateLeaveChat","hiddenChats","loadFirstSlice","onLoadNext","onUpdateConnectionState","newConnectionState","onUpdateChatOrder","reorderChats","newChatIds","offsetOrder","offsetChatId","_args2","finally","shift","replaceChats","appendChats","getConnectionState","orderedChatIds","isDifferentOrder","dialogs","Components_Tile_DialogControl","oldChatIds","UpdatePanel","onClientUpdateNewContentAvailable","newContentAvailable","handleUpdate","handled","maxHeight","Dialogs","onClientUpdateThemeChange","onClientUpdateChatDetailsVisibility","onClientUpdateSearchChat","searchChatId","dialogsList","scrollToTop","visible","onSelectChat","handleSearchTextChange","dialogs-third-column","ColumnLeft_DialogsHeader","onSearchTextChange","Components_ColumnLeft_DialogsList","ColumnLeft_Search_Search","ColumnLeft_UpdatePanel","HeaderCommand","canBeDeletedForAllUsers","can_be_deleted_for_all_users","openDeleteDialog","handleDeleteContinue","handleRevokeChange","handleCloseDelete","handleForward","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","handleReply","_MessageStore$selecte","canBeDeleted","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref9","can_be_deleted_only_for_self","canBeForwarded","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref10","canBeReplied","buttonLeft","buttonRight","Checkbox_default","Header","onUpdateChatOnlineMemberCount","onClientUpdateMessageSelected","selectionCount","onUpdateUserChatAction","handleSearchChat","searchChat","localize","Components_ColumnMiddle_HeaderCommand","isAccentSubtitle","isAccentChatSubtitle","chatTypingString","getChatSubtitle","showProgressAnimation","headerStatusAccentTitle","messageSearchIconButton","Components_ColumnMiddle_MainMenuButton","moreIconButton","VolumeButton","prevValue","buttonOver","popupOver","onClientUpdateMediaVolume","prevVolume","handlePopoverOpen","handlePopoverClose","handleMouseEnter","openPopover","handleMouseLeave","handlePopupMouseLeave","handleVoiceClick","nextValue","handleDragStart","handleDragEnd","getVolumeIcon","VolumeMute_default","VolumeDown_default","VolumeUp_default","onMouseEnter","onMouseLeave","marginTop","borderWidth","container","onDragStart","onDragEnd","RepeatButton","onClientUpdateMediaRepeat","handleRepeat","nextRepeat","getIcon","Repeat_default","RepeatOne_default","ShuffleButton","onClientUpdateMediaShuffle","handleShuffle","Shuffle_default","PlaybackRateButton","onClientUpdateMediaPlaybackRate","handlePlaybackRate","nextPlaybackRate","Time","Playlist","scrollToActive","itemRefMap","ReactDOM","offsetTop","onClientUpdateMediaTitleMouseOver","over","playlistMouseOver","tryOpen","tryClose","onClientUpdateMediaPlaylistLoading","_assertThisInitialize2","onClientUpdateMediaPlaylist","_assertThisInitialize3","openTimeout","titleMouseOver","slice","reverse","HeaderPlayer","playingMediaViewer","onClientUpdateMediaViewerEnded","onClientUpdateMediaViewerPause","onClientUpdateMediaViewerPlay","startPlayingFile","getMediaSrc","onClientUpdateMediaBlob","onClientUpdateMediaClose","paused","handlePrev","handlePlay","handleNext","handleEnded","handleVideoEnded","handleTimeUpdate","captureStream","mozCaptureStream","handleVideoPlay","handleVideoPause","hasPrev","hasNext","handleTitleMouseEnter","handleTitleMouseLeave","handleTitleClick","dateHint","showDate","showPlaybackRate","showRepeat","showShuffle","controls","onPlay","onPause","onTimeUpdate","onEnded","SkipPrevious_default","SkipNext_default","Components_Player_Playlist","Player_Time","Components_Player_VolumeButton","Player_PlaybackRateButton","Player_RepeatButton","Player_ShuffleButton","FilesDropTarget","onClientUpdateDragging","handleDragEnter","handleDrop","dataTransfer","handleDragLeave","onDragEnter","onDragLeave","onDrop","Forward","arrowRef","handleArrowRef","openForward","forwardInfo","sender_name","author_signature","getForwardTitle","tooltip","isForwardOriginHidden","arrow","forwardColor","Tooltip_default","popper","arrowPopper","PopperProps","popperOptions","modifiers","placement","&[x-placement*=\"bottom\"] $arrow","&::before","&[x-placement*=\"top\"] $arrow","marginBottom","&[x-placement*=\"right\"] $arrow","marginLeft","&[x-placement*=\"left\"] $arrow","marginRight","MessageStatus","handleUpdateMessageSend","handleUpdateChatReadOutbox","sendingState","unread","payload","newMessageId","stateClassName","unreadSeparator","WebPage","displaySmallSize","site_name","smallPhoto","float","Message","onClientUpdateClearSelection","onClientUpdateMessageHighlighted","highlighted","onUpdateMessageEdited","onUpdateMessageViews","onUpdateMessageContent","handleSelection","mouseDown","selectMessage","handleDateClick","_this$props7","_this$props8","handleAnimationEnd","handleMouseDown","handleMouseOver","handleMouseOut","mouseOut","_this$props10","showUnreadSeparator","_this$props11","webPage","getWebPage","media","getUnread","senderUserId","messageClassName","message-selected","messageSelected","messageHighlighted","onMouseOver","onMouseOut","onAnimationEnd","Message_UnreadSeparator","Components_Message_MessageStatus","Components_Message_Forward","Message_Media_WebPage","messageAuthorColor","@keyframes highlighted","chatPhotoStyle","ServiceMessage","ShareStickerSetButton","getStickersLink","handleShare","Link_default","Share_default","StickerSetDialog","handleUpdateInstalledStickerSets","handleClientUpdateStickerSet","loadStickerSetContent","loadPreviewContent","stickerId","getNeighborStickers","indexes","row","column","prevRow","nextRow","prevColumn","nextColumn","handleMouseUp","removeEventListener","emojis","data-sticker-id","stickerIndex","join","paperRoot","dialogTitleRoot","disablePointerEvents","Dialog_ShareStickerSetButton","shareButtonRoot","flexWrap","flexDirection","alignItems","flexShrink","StickersHint","onClientUpdateStickersHint","mouseDownStickerId","stickersPerRow","ScrollBehaviorEnum","SCROLL_TO_BOTTOM","SCROLL_TO_UNREAD","SCROLL_TO_MESSAGE","KEEP_SCROLL_POSITION","MessagesList","prevOffsetHeight","prevScrollTop","playerOpened","onClientUpdateMediaEnding","udpate","onClientUpdateSelection","selectionActive","scrollBehavior","onUpdateChatLastMessage","onUpdateMessageSendSucceeded","handleSendSucceeded","replaceMessage","viewMessages","onUpdateNewMessage","completed","insertAfter","onUpdateDeleteMessages","is_permanent","deleteHistory","updateItemsInView","scrollContainerRef","itemsContainerRef","scrollContainer","itemsContainer","children","child","itemsInView","itemsRef","_message$props","loadIncompleteHistory","MAX_ITERATIONS","incomplete","fromMessageId","loadMigratedHistory","onLoadMigratedHistory","insertBefore","basicGroupChat","upgraded_from_basic_group_id","suppressHandleScroll","suppressHandleScrollOnSelectChat","handleScrollBehavior","scrollToBottom","scrollToMessage","scrolled","itemComponent","itemsMap","scrollToStart","_callee5","_context5","handleListDragEnter","canSendFiles","prevMessageId","separatorMessageId","previous","later","leading","remaining","trailing","throttle","previousChat","MAX_VALUE","_this$getMessagePhoto","getMessagePhoto","_this$getMessagePhoto2","_this$getMessageStick","getMessageSticker","_this$getMessageStick2","oldMessageId","Components_Message_ServiceMessage","Components_Message_Message","showTitle","messages-list-selection-active","Components_ColumnMiddle_FilesDropTarget","Components_ColumnMiddle_StickersHint","ChatInfoDialog","handleClientUpdateDialogChatId","containerRoot","Components_ColumnRight_ChatInfo","chatInfoRoot","DialogDetails","onUpdateChatDetailsVisibility","messagesList","selectedCount","dialog-details-third-column","Components_Player_HeaderPlayer","Components_ColumnMiddle_Header","Components_ColumnMiddle_MessagesList","Components_ColumnMiddle_Footer","Components_Dialog_StickerSetDialog","Components_Dialog_ChatInfoDialog","SignInControl","handleUpdateOption","handleSuggestedLanguagePackId","languagePackId","suggestedLanguage","phone","openConfirmation","code","handleKeyPress","onPhoneEnter","errorString","handleChangeLanguage","TextField_default","onKeyPress","defaultValue","FormHelperText_default","continueAtLanguage","core_Link_default","fontWeight","textAlign","transform","ConfirmCodeControl","handleBack","isValid","onChangePhone","codeLength","codeInfo","getPhoneNumber","getCodeLength","getSubtitle","FormHelperText_FormHelperText_default","PasswordControl","handleMouseDownPassword","handleClickShowPassword","showPassword","password","passwordHint","textField","htmlFor","Input_default","endAdornment","VisibilityOff_default","Visibility_default","withoutLabel","flexBasis","AuthErrorDialog","handleAuthError","AuthFormControl","handlePhoneEnter","Components_Auth_SignInControl","Components_Auth_ConfirmCodeControl","termsOfService","terms_of_service","code_info","Components_Auth_PasswordControl","password_hint","hasRecoveryEmailAddress","has_recovery_email_address","recoveryEmailAddressPattern","recovery_email_address_pattern","authorizationFormContent","Auth_AuthErrorDialog","MediaViewerControl","tileControl","Lottie","handleClickToPause","anim","isPaused","eventListeners","autoplay","animationData","rendererSettings","segments","renderer","lottie","loadAnimation","registerEvents","path","deRegisterEvents","destroy","isStopped","playSegments","setSpeed","setDirection","speed","direction","eventListener","eventName","_this4","ariaRole","ariaLabel","isClickToPauseDisabled","initial","lottieStyles","outline","onClickHandler","c","role","tabIndex","MediaCaption","MediaViewerContent","onClientUpdateDocumentBlob","updateAnimationData","_getMediaFile","_getMediaFile2","getAnimationData","fileReader","onload","parse","onabort","readAsText","_getMediaFile3","_getMediaFile4","onClientUpdateMediaThumbnailBlob","_getMediaPreviewFile","_getMediaPreviewFile2","_getMediaFile5","_getMediaFile6","handleContentClick","changeSpeed","lottieRef","_getMediaFile7","_getMediaFile8","_getMediaPreviewFile3","_getMediaPreviewFile4","isPlaying","thumbnailBlob","isVideo","isAnimation","isLottie","videoWidth","videoHeight","onVolumeChange","defaultOptions","preserveAspectRatio","Components_Viewer_Lottie","Components_Viewer_MediaCaption","_getMediaFile9","_getMediaFile10","_getMediaPreviewFile5","_getMediaPreviewFile6","MediaViewerButton","grow","MediaViewerFooterText","MediaViewerFooterButton","iconStyle","MediaViewerDownloadButton","saveDisabled","prevPropsFileId","Components_Viewer_MediaViewerFooterButton","GetApp_default","forwardIconStyle","navigationIconStyle","MediaViewer","deleteConfirmationOpened","handlePrevious","currentMessageId","first","last","firstSliceLoaded","inserted","hasNextMedia","hasPreviousMedia","oldHistory","filterMap","currentId","deletedCount","getFilter","loadHistory","_filter","maxCount","_loop","delegateYield","cancelPreloadMediaViewerContent","saveAnimation","saveDocument","saveVideo","savePhoto","handleSave","handleDialogOpen","loadMedia","loadPrevious","loadNext","nextId","handleDialogClose","deleteForAll","handleChangeDeleteForAll","handleInvertColors","nextBackground","handleChangeSpeed","contentRef","nextSpeed","hasPrevousMedia","_this$state6","deleteConfirmationContent","deleteConfirmation","Components_Viewer_MediaViewerButton","NavigateBefore_default","Components_Viewer_MediaViewerContent","NavigateNext_default","Components_Tile_MediaViewerControl","Components_Viewer_MediaViewerFooterText","SlowMotionVideo_default","InvertColors_default","Viewer_MediaViewerDownloadButton","Delete_default","ProfileMediaViewerContent","prevPhoto","ProfileMediaViewerControl","deleteIconStyle","ProfileMediaViewer","currentIndex","getReadWriteStore","prevFileId","currentFileId","inHistory","Viewer_ProfileMediaViewerContent","Tile_ProfileMediaViewerControl","AppInactiveControl","handleReload","TelegramApp","onClientUpdateOpenChat","onClientUpdateOpenUser","checkServiceWorker","cookieEnabled","registerServiceWorker","onClientUpdateForward","onUpdateFatalError","fatalError","onClientUpdateAppInactive","inactive","currentDialogChatId","dialogDetailsRef","handleChangePhone","handleDragOver","handleRefresh","handleDestroy","page","page-third-column","Components_ColumnLeft_Dialogs","onClearCache","clearCache","Components_ColumnMiddle_DialogDetails","src_Components_Footer","Components_Additional_AppInactiveControl","Components_Auth_AuthFormControl","onDragOver","Components_Viewer_MediaViewer","Components_Viewer_ProfileMediaViewer","Components_Dialog_ForwardDialog","keyMap","openPinnedChat","pinnedIndex","altKey","ctrlKey","onblur","onfocus","pushState","onpopstate","go","@global","render","react_router_dom","react_router","getElementById"],"mappings":"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","file":"static/js/main.9caf9804.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nexport function withSaveRef() {\n    return Component => {\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\n    };\n}\n\nexport function withRestoreRef() {\n    return Component => {\n        return class extends React.Component {\n            render() {\n                const { forwardedRef, ...rest } = this.props;\n\n                return <Component {...rest} ref={forwardedRef} />;\n            }\n        };\n    };\n}\n\nexport function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const ANIMATION_FRAME_DURATION_MS = 40;\nexport const ANIMATION_DURATION_200MS = 200;\nexport const ANIMATION_DURATION_300MS = 300;\nexport const CHAT_SLICE_LIMIT = 25;\nexport const LOCATION_HEIGHT = 150;\nexport const LOCATION_SCALE = 2;\nexport const LOCATION_WIDTH = 300;\nexport const LOCATION_ZOOM = 16;\nexport const MEDIA_SLICE_LIMIT = 20;\nexport const MESSAGE_SLICE_LIMIT = 20;\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\nexport const MUTED_VALUE_MIN = 0;\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\nexport const PHOTO_BIG_SIZE = 1280;\nexport const PHOTO_DISPLAY_SIZE = 260;\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\nexport const PHOTO_SIZE = 320;\nexport const PHOTO_THUMBNAIL_SIZE = 90;\nexport const POLL_QUESTION_LENGTH = 255;\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\nexport const POLL_OPTION_LENGTH = 100;\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\nexport const POLL_OPTIONS_MAX_COUNT = 10;\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\nexport const STICKER_DISPLAY_SIZE = 192;\nexport const STICKER_PREVIEW_DISPLAY_SIZE = 256;\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\nexport const TYPING_INPUT_INTERVAL_S = 8;\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\nexport const VERBOSITY_JS_MAX = 20;\nexport const VERBOSITY_JS_MIN = 0;\nexport const VERBOSITY_MAX = 20;\nexport const VERBOSITY_MIN = 0;\nexport const USERNAME_LENGTH_MIN = 5;\nexport const MAX_SNACK = 10;\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\nexport const THUMBNAIL_BLURRED_SIZE = 320;\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const THUMBNAIL_PRIORITY = 32;\nexport const FILE_PRIORITY = 1;\nexport const FIRST_START_OPTIMIZATIONS = true;\nexport const PLAYER_VOLUME_NORMAL = 0.25;\nexport const PLAYER_STARTTIME = 0.0;\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n    return getSize(sizes, PHOTO_SIZE);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    let split = title.split(' ');\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +''+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n    return item > first && item < last;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport {\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    getDurationString,\n    getRandomInt\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport packageJson from '../../package.json';\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\nimport { VERBOSITY_JS_MAX, VERBOSITY_JS_MIN, VERBOSITY_MAX, VERBOSITY_MIN } from '../Constants';\nimport TdClient from '@arseny30/tdweb/dist/tdweb';\n\nclass TdLibController extends EventEmitter {\n    constructor() {\n        super();\n\n        this.parameters = {\n            useTestDC: false,\n            readOnly: false,\n            verbosity: 1,\n            jsVerbosity: 3,\n            fastUpdating: true,\n            useDatabase: false,\n            mode: 'wasm'\n        };\n\n        this.disableLog = false;\n\n        this.setMaxListeners(Infinity);\n    }\n\n    init = location => {\n        this.setParameters(location);\n\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\n\n        let options = {\n            logVerbosityLevel: verbosity,\n            jsLogVerbosityLevel: jsVerbosity,\n            mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\n            prefix: useTestDC ? 'tdlib_test' : 'tdlib',\n            readOnly: readOnly,\n            isBackground: false,\n            useDatabase: useDatabase\n            // onUpdate: update => this.emit('update', update)\n        };\n\n        console.log(\n            `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\n        );\n\n        this.client = new TdClient(options);\n        this.client.onUpdate = update => {\n            if (!this.disableLog) {\n                if (update['@type'] === 'updateFile') {\n                    console.log('receive updateFile file_id=' + update.file.id, update);\n                } else {\n                    console.log('receive update', update);\n                }\n            }\n            this.emit('update', update);\n        };\n    };\n\n    clientUpdate = update => {\n        if (!this.disableLog) {\n            console.log('clientUpdate', update);\n        }\n        this.emit('clientUpdate', update);\n    };\n\n    setParameters = location => {\n        if (!location) return;\n\n        const { search } = location;\n        if (!search) return;\n\n        const params = new URLSearchParams(search.toLowerCase());\n\n        if (params.has('test')) {\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\n        }\n\n        if (params.has('verbosity')) {\n            const verbosity = parseInt(params.get('verbosity'), 10);\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\n                this.parameters.verbosity = verbosity;\n            }\n        }\n\n        if (params.has('jsverbosity')) {\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\n                this.parameters.jsVerbosity = jsVerbosity;\n            }\n        }\n\n        if (params.has('tag') && params.has('tagverbosity')) {\n            const tag = params\n                .get('tag')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            const tagVerbosity = params\n                .get('tagverbosity')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\n                this.parameters.tag = tag;\n                this.parameters.tagVerbosity = tagVerbosity;\n            }\n        }\n\n        if (params.has('readonly')) {\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\n        }\n\n        if (params.has('fastupdating')) {\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\n        }\n\n        if (params.has('db')) {\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\n        }\n        if (params.has('mode')) {\n            this.parameters.mode = params.get('mode');\n        }\n    };\n\n    send = request => {\n        if (!this.disableLog) {\n            console.log('send', request);\n            return this.client.send(request).then(result => {\n                console.log('receive', result);\n                return result;\n            });\n        } else {\n            return this.client.send(request);\n        }\n    };\n\n    sendTdParameters = async () => {\n        const apiId = process.env.REACT_APP_TELEGRAM_API_ID;\n        const apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\n        if (!apiId || !apiHash) {\n            if (\n                window.confirm(\n                    'API id is missing!\\n' +\n                        'In order to obtain an API id and develop your own application ' +\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\n                )\n            ) {\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\n            }\n        }\n\n        const { useTestDC } = this.parameters;\n        const { version } = packageJson;\n\n        this.send({\n            '@type': 'setTdlibParameters',\n            parameters: {\n                '@type': 'tdParameters',\n                use_test_dc: useTestDC,\n                api_id: apiId,\n                api_hash: apiHash,\n                system_language_code: navigator.language || 'en',\n                device_model: getBrowser(),\n                system_version: getOSName(),\n                application_version: version,\n                use_secret_chats: false,\n                use_message_database: true,\n                use_file_database: false,\n                database_directory: '/db',\n                files_directory: '/'\n            }\n            // ,\n            // extra: {\n            //     a: ['a', 'b'],\n            //     b: 123\n            // }\n        });\n\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\n            for (let i = 0; i < this.parameters.tag.length; i++) {\n                let tag = this.parameters.tag[i];\n                let tagVerbosity = this.parameters.tagVerbosity[i];\n\n                this.send({\n                    '@type': 'setLogTagVerbosityLevel',\n                    tag: tag,\n                    new_verbosity_level: tagVerbosity\n                });\n            }\n        }\n    };\n\n    logOut() {\n        this.send({ '@type': 'logOut' }).catch(error => {\n            this.emit('tdlib_auth_error', error);\n        });\n    }\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            chatId: chatId,\n            messageId: messageId\n        };\n\n        this.clientUpdate(update);\n    };\n\n    setMediaViewerContent(content) {\n        this.clientUpdate({\n            '@type': 'clientUpdateMediaViewerContent',\n            content: content\n        });\n    }\n}\n\nconst controller = new TdLibController();\n\nexport default controller;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport LocalStorageBackend from 'i18next-localstorage-backend';\nimport { initReactI18next } from 'react-i18next';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst defaultLanguage = 'en';\nconst defaultNamespace = 'translation';\nconst cookies = new Cookies();\nconst language = cookies.get('i18next') || defaultLanguage;\n\n// const detection = {\n//     // order and from where user language should be detected\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n//\n//     // keys or params to lookup language from\n//     lookupQuerystring: 'lng',\n//     lookupCookie: 'i18next',\n//     lookupLocalStorage: 'i18nextLng',\n//     lookupFromPathIndex: 0,\n//     lookupFromSubdomainIndex: 0,\n//\n//     // cache user language on\n//     caches: ['localStorage', 'cookie']\n// };\n\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\n    .init({\n        //detection: detection,\n        ns: [defaultNamespace, 'local'],\n        defaultNS: defaultNamespace,\n        fallbackNS: ['local', 'emoji'],\n        resources: {\n            en: {\n                local: {\n                    DeletedMessage: 'Deleted message',\n                    YourPhone: 'Your Phone',\n                    StartText: 'Please confirm your country code and enter your phone number.',\n                    Next: 'Next',\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\n                    More: 'More',\n                    SendMessage: 'Send Message',\n                    ChatInfo: 'Chat Info',\n                    ChannelInfo: 'Channel Info'\n                },\n                emoji: {\n                    Search: 'Search',\n                    NotEmojiFound: 'No Emoji Found',\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\n                    SearchResults: 'Search Results',\n                    Recent: 'Frequently Used',\n                    SmileysPeople: 'Smileys & People',\n                    AnimalsNature: 'Animals & Nature',\n                    FoodDrink: 'Food & Drink',\n                    Activity: 'Activity',\n                    TravelPlaces: 'Travel & Places',\n                    Objects: 'Objects',\n                    Symbols: 'Symbols',\n                    Flags: 'Flags',\n                    Custom: 'Custom'\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Loading: 'Loading',\n                    Connecting: 'Connecting',\n                    Updating: 'Updating'\n                }\n            },\n            ru: {\n                local: {\n                    DeletedMessage: ' ',\n                    YourPhone: ' ',\n                    StartText: ',       .',\n                    Next: '',\n                    InvalidPhoneNumber:\n                        '  . ,      .',\n                    More: '',\n                    SendMessage: ' ',\n                    ChatInfo: '  ',\n                    ChannelInfo: '  '\n                },\n                emoji: {\n                    Search: '',\n                    NotEmojiFound: '  ',\n                    ChooseDefaultSkinTone: '    ',\n                    SearchResults: ' ',\n                    Recent: ' ',\n                    SmileysPeople: '  ',\n                    AnimalsNature: '  ',\n                    FoodDrink: '  ',\n                    Activity: '',\n                    TravelPlaces: '  ',\n                    Objects: '',\n                    Symbols: '',\n                    Flags: '',\n                    Custom: ''\n                },\n                translation: {\n                    AppName: '',\n                    Loading: '',\n                    Connecting: '',\n                    Updating: ''\n                }\n            }\n        },\n        lng: language,\n        fallbackLng: defaultLanguage,\n        interpolation: {\n            escapeValue: false\n        },\n        react: {\n            wait: false\n        }\n    });\n\nconst cache = new LocalStorageBackend(null, {\n    enabled: true,\n    prefix: 'i18next_res_',\n    expirationTime: Infinity\n});\n\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\n    return data;\n});\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\n    return data;\n});\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\n\nclass LocalizationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.i18n = i18n;\n        this.cache = cache;\n\n        this.setMaxListeners(Infinity);\n        this.addTdLibListener();\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'localization_target',\n                            value: { '@type': 'optionValueString', value: 'android' }\n                        });\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'language_pack_id',\n                            value: { '@type': 'optionValueString', value: language }\n                        });\n                        TdLibController.send({\n                            '@type': 'getLocalizationTargetInfo',\n                            only_local: false\n                        }).then(result => {\n                            this.info = result;\n\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateLanguageChange',\n                                language: language\n                            });\n                        });\n                        break;\n                }\n                break;\n            }\n            case 'updateLanguagePackStrings': {\n                // add/remove new strings\n\n                this.emit('updateLanguagePackStrings', update);\n                break;\n            }\n        }\n    };\n\n    onClientUpdate = async update => {\n        switch (update['@type']) {\n            case 'clientUpdateLanguageChange': {\n                const { language } = update;\n\n                TdLibController.send({\n                    '@type': 'getLanguagePackStrings',\n                    language_pack_id: language,\n                    keys: []\n                }).then(async result => {\n                    const cookies = new Cookies();\n                    cookies.set('i18next', language);\n\n                    const resources = this.processStrings(language, result);\n\n                    this.cache.save(language, defaultNamespace, resources);\n\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\n\n                    await i18n.changeLanguage(language);\n\n                    TdLibController.send({\n                        '@type': 'setOption',\n                        name: 'language_pack_id',\n                        value: { '@type': 'optionValueString', value: language }\n                    });\n\n                    this.emit('clientUpdateLanguageChange', update);\n                });\n                break;\n            }\n        }\n    };\n\n    processStrings = (lng, languagePackStrings) => {\n        if (!languagePackStrings) return {};\n        const { strings } = languagePackStrings;\n        if (!strings) return {};\n\n        let result = {};\n        for (let i = 0; i < strings.length; i++) {\n            const { value } = strings[i];\n            switch (value['@type']) {\n                case 'languagePackStringValueOrdinary': {\n                    result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValuePluralized': {\n                    //result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValueDeleted': {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    loadLanguage = async language => {\n        const result = await TdLibController.send({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: language,\n            keys: []\n        });\n\n        const resources = this.processStrings(language, result);\n\n        this.cache.save(language, defaultNamespace, resources);\n\n        i18n.addResourceBundle(language, defaultNamespace, resources);\n    };\n}\n\nconst store = new LocalizationStore();\nwindow.localization = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { getDisplayName } from './Utils/HOC';\nimport LocalizationStore from './Stores/LocalizationStore';\n\nfunction withLanguage(WrappedComponent) {\n    class LanguageWrapper extends React.Component {\n        render() {\n            const i18n = LocalizationStore.i18n;\n\n            return (\n                <I18nextProvider i18n={i18n}>\n                    <WrappedComponent {...this.props} />\n                </I18nextProvider>\n            );\n        }\n    }\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\n\n    return LanguageWrapper;\n}\n\nexport default withLanguage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass ActionScheduler {\n    constructor(actionCallback, cancelCallback) {\n        this.actions = new Map();\n        this.actionCallback = actionCallback;\n        this.cancelCallback = cancelCallback;\n    }\n\n    add = (key, timeout, action, cancel) => {\n        if (this.actions.has(key)) {\n            return false;\n        }\n\n        let expire = new Date();\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\n\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n\n        return true;\n    };\n\n    invoke = async key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.action) await item.action();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    remove = key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.cancel) item.cancel();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    setTimeout = () => {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    };\n\n    handleTimer = () => {\n        let now = new Date();\n        let expired = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\n        }\n\n        for (let item of expired) {\n            this.actions.delete(item.key);\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\n            if (item.value.action) item.value.action();\n        }\n\n        this.setTimeout();\n    };\n}\n\nexport default ActionScheduler;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport ActionScheduler from '../Utils/ActionScheduler';\n\nclass ApplicationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.chatId = 0;\n        this.dialogChatId = 0;\n        this.messageId = null;\n        this.statistics = new Map();\n        this.scopeNotificationSettings = new Map();\n        this.authorizationState = null;\n        this.connectionState = null;\n        this.isChatDetailsVisible = false;\n        this.mediaViewerContent = null;\n        this.profileMediaViewerContent = null;\n        this.dragging = false;\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\n\n        this.addTdLibListener();\n        this.addStatistics();\n        this.setMaxListeners(Infinity);\n    }\n\n    addScheduledAction = (key, timeout, action, cancel) => {\n        return this.actionScheduler.add(key, timeout, action, cancel);\n    };\n\n    invokeScheduledAction = async key => {\n        await this.actionScheduler.invoke(key);\n    };\n\n    removeScheduledAction = key => {\n        this.actionScheduler.remove(key);\n    };\n\n    handleScheduledAction = item => {\n        console.log('Invoked scheduled action key=', item.key);\n    };\n\n    handleCancelScheduledAction = item => {\n        console.log('Cancel scheduled action key=', item.key);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                this.authorizationState = update.authorization_state;\n\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateLoggingOut':\n                        this.loggingOut = true;\n                        break;\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.sendTdParameters();\n                        break;\n                    case 'authorizationStateWaitEncryptionKey':\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\n                        break;\n                    case 'authorizationStateWaitPhoneNumber':\n                        break;\n                    case 'authorizationStateWaitCode':\n                        break;\n                    case 'authorizationStateWaitPassword':\n                        break;\n                    case 'authorizationStateReady':\n                        this.loggingOut = false;\n                        break;\n                    case 'authorizationStateClosing':\n                        break;\n                    case 'authorizationStateClosed':\n                        if (!this.loggingOut) {\n                            document.title += ': Zzz';\n                            this.emit('clientUpdateAppInactive');\n                        } else {\n                            TdLibController.init();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateConnectionState': {\n                this.connectionState = update.state;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateScopeNotificationSettings': {\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateFatalError': {\n                this.emit(update['@type'], update);\n\n                break;\n            }\n            case 'updateServiceNotification': {\n                const { type, content } = update;\n\n                if (!content) return;\n                if (content['@type'] === 'messageText') {\n                    const { text } = content;\n                    if (!text) return;\n\n                    if (text['@type'] === 'formattedText' && text.text) {\n                        switch (type) {\n                            case 'AUTH_KEY_DROP_DUPLICATE':\n                                let result = window.confirm(text.text);\n                                if (result) {\n                                    TdLibController.logOut();\n                                }\n                                break;\n                            default:\n                                alert(text.text);\n                                break;\n                        }\n                    }\n                }\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateChatId': {\n                const extendedUpdate = {\n                    '@type': 'clientUpdateChatId',\n                    nextChatId: update.chatId,\n                    nextMessageId: update.messageId,\n                    previousChatId: this.chatId,\n                    previousMessageId: this.messageId\n                };\n\n                this.chatId = update.chatId;\n                this.messageId = update.messageId;\n\n                this.emit('clientUpdateChatId', extendedUpdate);\n                break;\n            }\n            case 'clientUpdateDialogChatId': {\n                const { chatId } = update;\n                this.dialogChatId = chatId;\n\n                this.emit('clientUpdateDialogChatId', update);\n                break;\n            }\n            case 'clientUpdateFocusWindow': {\n                TdLibController.send({\n                    '@type': 'setOption',\n                    name: 'online',\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\n                });\n\n                this.emit('clientUpdateFocusWindow', update);\n                break;\n            }\n            case 'clientUpdateForward': {\n                this.emit('clientUpdateForward', update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                if (update.inProgress && this.chatId === update.chatId) {\n                    TdLibController.setChatId(0);\n                }\n\n                break;\n            }\n        }\n    };\n\n    onUpdateStatistics = update => {\n        if (!update) return;\n\n        if (this.statistics.has(update['@type'])) {\n            const count = this.statistics.get(update['@type']);\n\n            this.statistics.set(update['@type'], count + 1);\n        } else {\n            this.statistics.set(update['@type'], 1);\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    addStatistics = () => {\n        TdLibController.addListener('update', this.onUpdateStatistics);\n    };\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            nextChatId: chatId,\n            nextMessageId: messageId,\n            previousChatId: this.chatId,\n            previousMessageId: this.messageId\n        };\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n        this.emit(update['@type'], update);\n    };\n\n    getChatId() {\n        return this.chatId;\n    }\n\n    getMessageId() {\n        return this.messageId;\n    }\n\n    searchChat(chatId) {\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\n    }\n\n    changeChatDetailsVisibility(visibility) {\n        this.isChatDetailsVisible = visibility;\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\n    }\n\n    setMediaViewerContent(content) {\n        this.mediaViewerContent = content;\n        this.emit('clientUpdateMediaViewerContent', content);\n    }\n\n    setProfileMediaViewerContent(content) {\n        this.profileMediaViewerContent = content;\n        this.emit('clientUpdateProfileMediaViewerContent', content);\n    }\n\n    getConnectionState() {\n        return this.connectionState;\n    }\n\n    getAuthorizationState() {\n        return this.authorizationState;\n    }\n\n    getNotificationSettings(scope) {\n        return this.scopeNotificationSettings.get(scope);\n    }\n\n    setNotificationSettings(scope, notificationSettings) {\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\n    }\n\n    getDragging = () => {\n        return this.dragging;\n    };\n\n    setDragging = value => {\n        this.dragging = value;\n        this.emit('clientUpdateDragging', value);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new ApplicationStore();\nwindow.application = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core';\nimport { getDisplayName } from './Utils/HOC';\nimport blue from '@material-ui/core/colors/blue';\nimport Cookies from 'universal-cookie';\nimport ApplicationStore from './Stores/ApplicationStore';\n\nfunction withTheme(WrappedComponent) {\n    class ThemeWrapper extends React.Component {\n        constructor(props) {\n            super(props);\n\n            const cookies = new Cookies();\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\n\n            let theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' }\n                },\n                typography: {\n                    useNextVariants: true\n                }\n            });\n\n            this.state = {\n                theme: theme\n            };\n        }\n\n        componentDidMount() {\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        componentWillUnmount() {\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        onClientUpdateThemeChanging = update => {\n            const { type, primary } = update;\n\n            const theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' },\n                    typography: {\n                        useNextVariants: true\n                    }\n                }\n            });\n\n            const cookies = new Cookies();\n            cookies.set('themeOptions', { type: type, primary: primary });\n\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\n        };\n\n        render() {\n            const { theme } = this.state;\n\n            return (\n                <MuiThemeProvider theme={theme}>\n                    <WrappedComponent {...this.props} />\n                </MuiThemeProvider>\n            );\n        }\n    }\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\n\n    return ThemeWrapper;\n}\n\nexport default withTheme;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { getDisplayName } from './Utils/HOC';\nimport { MAX_SNACK } from './Constants';\n\nfunction withSnackbarNotifications(WrappedComponent) {\n    class NotificationsWrapper extends React.Component {\n        render() {\n            return (\n                <SnackbarProvider maxSnack={MAX_SNACK}>\n                    <WrappedComponent {...this.props} />\n                </SnackbarProvider>\n            );\n        }\n    }\n    NotificationsWrapper.displayName = `WithSnackbarNotifications(${getDisplayName(WrappedComponent)})`;\n\n    return NotificationsWrapper;\n}\n\nexport default withSnackbarNotifications;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OptionStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateOption':\n                this.items.set(update.name, update.value);\n\n                this.emit('updateOption', update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(name) {\n        return this.items.get(name);\n    }\n}\n\nconst store = new OptionStore();\nwindow.option = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport OptionStore from '../Stores/OptionStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass UserStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateUser': {\n                this.set(update.user);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateUserFullInfo':\n                this.setFullInfo(update.user_id, update.user_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateUserStatus': {\n                let user = this.get(update.user_id);\n                if (user) {\n                    this.assign(user, { status: update.status });\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateOpenUser': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n\n    getMyId() {\n        const myId = OptionStore.get('my_id');\n        if (!myId) return null;\n        if (!myId.value) return null;\n\n        return myId.value;\n    }\n\n    get(userId) {\n        return this.items.get(userId);\n    }\n\n    set(user) {\n        this.items.set(user.id, user);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new UserStore();\nwindow.user = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport dateFormat from 'dateformat';\nimport { getLetters, getSize } from './Common';\nimport { PROFILE_PHOTO_BIG_SIZE, PROFILE_PHOTO_SMALL_SIZE, SERVICE_NOTIFICATIONS_USER_ID } from '../Constants';\nimport UserStore from '../Stores/UserStore';\n\nfunction getUserStatus(user) {\n    if (!user) return null;\n    if (!user.status) return null;\n\n    if (user.id === SERVICE_NOTIFICATIONS_USER_ID) {\n        return 'service notifications';\n    }\n\n    if (user.type && user.type['@type'] === 'userTypeBot') {\n        return 'bot';\n    }\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 'last seen a long time ago';\n        }\n        case 'userStatusLastMonth': {\n            return 'last seen within a month';\n        }\n        case 'userStatusLastWeek': {\n            return 'last seen within a week';\n        }\n        case 'userStatusOffline': {\n            let { was_online } = user.status;\n            if (!was_online) return 'offline';\n\n            const now = new Date();\n            const wasOnline = new Date(was_online * 1000);\n            if (wasOnline > now) {\n                return 'last seen just now';\n            }\n\n            let diff = new Date(now - wasOnline);\n\n            // within a minute\n            if (diff.getTime() / 1000 < 60) {\n                return 'last seen just now';\n            }\n\n            // within an hour\n            if (diff.getTime() / 1000 < 60 * 60) {\n                const minutes = Math.floor(diff.getTime() / 1000 / 60);\n                return `last seen ${minutes === 1 ? '1 minute' : minutes + ' minutes'} ago`;\n            }\n\n            // today\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > today) {\n                // up to 6 hours ago\n                if (diff.getTime() / 1000 < 6 * 60 * 60) {\n                    const hours = Math.floor(diff.getTime() / 1000 / 60 / 60);\n                    return `last seen ${hours === 1 ? '1 hour' : hours + ' hours'} ago`;\n                }\n\n                // other\n                return `last seen today at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            // yesterday\n            let yesterday = new Date();\n            yesterday.setDate(now.getDate() - 1);\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > yesterday) {\n                return `last seen yesterday at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            return `last seen ${dateFormat(wasOnline, 'dd.mm.yyyy')}`;\n        }\n        case 'userStatusOnline': {\n            return 'online';\n        }\n        case 'userStatusRecently': {\n            return 'last seen recently';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserOnline(user) {\n    if (!user) return false;\n\n    const { id, status, type } = user;\n    if (!status) return false;\n    if (!type) return false;\n    if (id === SERVICE_NOTIFICATIONS_USER_ID) return false;\n\n    return status['@type'] === 'userStatusOnline' && type['@type'] !== 'userTypeBot';\n}\n\nfunction getUserFullName(user) {\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name && user.last_name) return `${user.first_name} ${user.last_name}`;\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction getUserShortName(userId) {\n    const user = UserStore.get(userId);\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserBlocked(userId) {\n    const fullInfo = UserStore.getFullInfo(userId);\n    if (fullInfo) {\n        return fullInfo.is_blocked;\n    }\n\n    return false;\n}\n\nfunction getUserLetters(user) {\n    if (!user) return null;\n\n    let title = getUserFullName(user);\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return user.first_name ? user.first_name.charAt(0) : user.last_name ? user.last_name.charAt(0) : '';\n}\n\nfunction getUserStatusOrder(user) {\n    if (!user) return 0;\n    if (!user.status) return 0;\n    if (user.type['@type'] === 'userTypeBot') return 0;\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 1;\n        }\n        case 'userStatusLastMonth': {\n            return 10;\n        }\n        case 'userStatusLastWeek': {\n            return 100;\n        }\n        case 'userStatusOffline': {\n            return user.status.was_online;\n        }\n        case 'userStatusOnline': {\n            return user.status.expires;\n        }\n        case 'userStatusRecently': {\n            return 1000;\n        }\n    }\n}\n\nfunction getProfilePhoto(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { id, sizes } = userProfilePhoto;\n    if (!sizes) return null;\n    if (!sizes.length) return null;\n\n    const smallPhotoSize = getSize(sizes, PROFILE_PHOTO_SMALL_SIZE);\n    const bigPhotoSize = getSize(sizes, PROFILE_PHOTO_BIG_SIZE);\n\n    return {\n        '@type': 'profilePhoto',\n        id: id,\n        small: smallPhotoSize.photo,\n        big: bigPhotoSize.photo\n    };\n}\n\nfunction getProfilePhotoDateHint(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { added_date } = userProfilePhoto;\n    if (!added_date) return null;\n\n    const date = new Date(added_date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy');\n}\n\nexport {\n    getUserStatus,\n    isUserOnline,\n    getUserFullName,\n    isUserBlocked,\n    getUserLetters,\n    getUserStatusOrder,\n    getProfilePhoto,\n    getProfilePhotoDateHint,\n    getUserShortName\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass SupergroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateSupergroup':\n                this.set(update.supergroup);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateSupergroupFullInfo':\n                this.setFullInfo(update.supergroup_id, update.supergroup_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(id) {\n        return this.items.get(id);\n    }\n\n    set(supergroup) {\n        this.items.set(supergroup.id, supergroup);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new SupergroupStore();\nwindow.supergroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\n\nclass InputTypingManager {\n    constructor(chatId, timeoutCallback) {\n        this.actions = new Map();\n        this.timerId = null;\n        this.chatId = chatId;\n        this.timeoutCallback = timeoutCallback;\n\n        this.handleTimer = this.handleTimer.bind(this);\n        this.addAction = this.addAction.bind(this);\n        this.clearAction = this.clearAction.bind(this);\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\n    }\n\n    handleTimer() {\n        let now = new Date();\n        let expiredActions = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expiredActions.push(key);\n        }\n\n        for (let key of expiredActions) {\n            this.actions.delete(key);\n        }\n\n        let update = {\n            '@type': 'updateUserChatAction',\n            chat_id: this.chatId,\n            action: { '@type': 'chatActionTimerUpdate' }\n        };\n\n        this.timeoutCallback(update);\n        // ChatStore.emit('updateUserChatAction', update);\n\n        this.setActionsTimeout();\n    }\n\n    addAction(userId, action) {\n        let expire = new Date();\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\n\n        this.actions.set(userId, { expire: expire, action: action });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n\n    setActionsTimeout() {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    }\n\n    clearAction(userId) {\n        this.actions.delete(userId);\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n}\n\nexport default InputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport InputTypingManager from '../Utils/InputTypingManager';\nimport UserStore from './UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass ChatStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.typingManagers = new Map();\n        this.onlineMemberCount = new Map();\n        this.skippedUpdates = [];\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateConnectionState': {\n                if (update.state['@type'] === 'connectionStateUpdating') {\n                    this.updating = true;\n                    this.skippedUpdates = [];\n                } else {\n                    this.updating = false;\n                    if (this.skippedUpdates.length > 0) {\n                        TdLibController.parameters.fastUpdating = false;\n                        this.emitUpdate({\n                            '@type': 'clientUpdateFastUpdatingComplete',\n                            updates: this.skippedUpdates\n                        });\n                        this.skippedUpdates = [];\n                    }\n                }\n                break;\n            }\n            case 'updateChatDefaultDisableNotification': {\n                //TODO: handle updateChatDefaultDisableNotification\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOnlineMemberCount': {\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatDraftMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        draft_message: update.draft_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsMarkedAsUnread': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        is_marked_as_unread: update.is_marked_as_unread\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsPinned': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_pinned: update.is_pinned\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsSponsored': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_sponsored: update.is_sponsored\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatLastMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        last_message: update.last_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatNotificationSettings': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        notification_settings: update.notification_settings\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOrder': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { order: update.order });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPhoto': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { photo: update.photo });\n\n                    switch (chat.type['@type']) {\n                        case 'chatTypeBasicGroup': {\n                            break;\n                        }\n                        case 'chatTypeSupergroup': {\n                            break;\n                        }\n                        case 'chatTypePrivate':\n                        case 'chatTypeSecret': {\n                            const user = UserStore.get(chat.type.user_id);\n                            if (user) {\n                                UserStore.assign(user, { profile_photo: update.photo });\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadInbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_inbox_message_id: update.last_read_inbox_message_id,\n                        unread_count: update.unread_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadOutbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_outbox_message_id: update.last_read_outbox_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReplyMarkup': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        reply_markup_message_id: update.reply_markup_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatTitle': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { title: update.title });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatUnreadMentionCount': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateNewChat': {\n                this.set(update.chat);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateSecretChat': {\n                //TODO: handle updateSecretChat\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUnreadChatCount': {\n                //TODO: handle updateUnreadChatCount\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUserChatAction': {\n                let typingManager = this.getTypingManager(update.chat_id);\n                if (!typingManager) {\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\n                    this.setTypingManager(update.chat_id, typingManager);\n                }\n\n                const key = update.user_id;\n                if (update.action['@type'] === 'chatActionCancel') {\n                    typingManager.clearAction(key);\n                } else {\n                    typingManager.addAction(key, update.action);\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateMessageMentionRead': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n\n                    //chat.unread_mention_count = update.unread_mention_count;\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateClearHistory': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateOpenChat': {\n                this.emitUpdate(update);\n                break;\n            }\n        }\n    };\n\n    emitUpdate = update => {\n        this.emit(update['@type'], update);\n    };\n\n    emitFastUpdate = update => {\n        if (this.updating && TdLibController.parameters.fastUpdating) {\n            this.skippedUpdates.push(update);\n            return;\n        }\n\n        this.emit(update['@type'], update);\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        //Object.assign(source1, source2);\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    get(chatId) {\n        return this.items.get(chatId);\n    }\n\n    set(chat) {\n        this.items.set(chat.id, chat);\n    }\n\n    setOnlineMemberCount(chatId, onlineMemberCount) {\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\n    }\n\n    getOnlineMemberCount(chatId) {\n        return this.onlineMemberCount.get(chatId) || 0;\n    }\n\n    getTypingManager(chatId) {\n        return this.typingManagers.get(chatId);\n    }\n\n    setTypingManager(chatId, typingManager) {\n        return this.typingManagers.set(chatId, typingManager);\n    }\n}\n\nconst store = new ChatStore();\nwindow.chat = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport { getLocationId } from '../Utils/Message';\nimport { FILE_PRIORITY, THUMBNAIL_PRIORITY } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst useReadFile = true;\n\nclass FileStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.callbacks = [];\n\n        this.db = null;\n        this.urls = new WeakMap();\n        this.items = new Map();\n        this.blobItems = new Map();\n        this.locationItems = new Map();\n\n        this.downloads = new Map();\n        this.uploads = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            case 'updateFile': {\n                this.set(update.file);\n\n                this.onUpdateFile(update);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateAuthorizationState': {\n                await this.onUpdateAuthorizationState(update);\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateAudioThumbnailBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateAudioBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateDocumentBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdateAuthorizationState = async update => {\n        if (!update) return;\n        if (!update.authorization_state) return;\n\n        if (update.authorization_state['@type'] === 'authorizationStateWaitTdlibParameters') {\n            await this.initDB();\n        }\n    };\n\n    onUpdateFile = update => {\n        if (!update) return;\n\n        const { file } = update;\n        if (!file) return;\n\n        this.handleDownloads(file);\n        this.handleUploads(file);\n    };\n\n    handleDownloads = file => {\n        const { arr, id, idb_key, local } = file;\n        delete file.arr;\n\n        if (!this.downloads.has(id)) return;\n        if (!local.is_downloading_completed) return;\n        if (!useReadFile && !idb_key && !arr) return;\n\n        const items = this.downloads.get(id);\n        if (!items) return;\n\n        this.downloads.delete(id);\n\n        const store = this.getStore();\n\n        items.forEach(item => {\n            switch (item['@type']) {\n                case 'chat': {\n                    this.handleChat(store, item, file, arr);\n                    break;\n                }\n                case 'message': {\n                    this.handleMessage(store, item, file, arr);\n                    break;\n                }\n                case 'sticker': {\n                    this.handleSticker(store, item, file, arr, null);\n                    break;\n                }\n                case 'user': {\n                    this.handleUser(store, item, file, arr);\n                    break;\n                }\n                default:\n                    console.error('FileStore.onUpdateFile unhandled item', item);\n                    break;\n            }\n        });\n    };\n\n    handleUploads = file => {\n        const { id, remote } = file;\n        delete file.arr;\n\n        if (!this.uploads.has(id)) return;\n        if (remote.is_uploading_completed) return;\n\n        this.uploads.delete(id);\n    };\n\n    handleChat = (store, chat, file, arr) => {\n        if (!chat) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateChatPhotoBlob(chat.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, chat)\n        );\n    };\n\n    handleUser = (store, user, file, arr) => {\n        if (!user) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateUserPhotoBlob(user.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, user)\n        );\n    };\n\n    handleMessage = (store, message, file, arr) => {\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.handleAnimation(store, animation, file, arr, message);\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n\n                this.handleAudio(store, audio, file, arr, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.handleDocument(store, document, file, arr, message);\n                break;\n            }\n            case 'messageGame': {\n                const { game } = content;\n\n                this.handleGame(store, game, file, arr, message);\n                break;\n            }\n            case 'messageLocation': {\n                const { location } = content;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageSticker': {\n                const { sticker } = content;\n\n                this.handleSticker(store, sticker, file, arr, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) break;\n\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    this.handleAnimation(store, animation, file, arr, message);\n                }\n\n                if (audio) {\n                    this.handleAudio(store, audio, file, arr, message);\n                }\n\n                if (document) {\n                    this.handleDocument(store, document, file, arr, message);\n                }\n\n                if (photo) {\n                    this.handlePhoto(store, photo, file, arr, message);\n                }\n\n                if (sticker) {\n                    this.handleSticker(store, sticker, file, arr, message);\n                }\n\n                if (video) {\n                    this.handleVideo(store, video, file, arr, message);\n                }\n\n                if (voice_note) {\n                    this.handleVoiceNote(store, voice_note, file, arr, message);\n                }\n\n                if (video_note) {\n                    this.handleVideoNote(store, video_note, file, arr, message);\n                }\n\n                break;\n            }\n            case 'messageVenue': {\n                const { venue } = content;\n                const { location } = venue;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.handleVideo(store, video, file, arr, message);\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n\n                this.handleVideoNote(store, video_note, file, arr, message);\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n\n                this.handleVoiceNote(store, voice_note, file, arr, message);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    handleGame = (store, game, file, arr, message) => {\n        if (!game) return;\n\n        const { animation, photo } = game;\n        if (photo) {\n            this.handlePhoto(store, photo, file, arr, message);\n        }\n\n        if (animation) {\n            this.handleAnimation(store, animation, file, arr, message);\n        }\n    };\n\n    handlePhoto = (store, photo, file, arr, obj) => {\n        if (photo) {\n            for (let i = 0; i < photo.sizes.length; i++) {\n                const photoSize = photo.sizes[i];\n                if (photoSize) {\n                    const source = photoSize.photo;\n                    if (source && source.id === file.id) {\n                        this.getLocalFile(\n                            store,\n                            source,\n                            arr,\n                            () => this.updatePhotoBlob(obj.chat_id, obj.id, file.id),\n                            () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                        );\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n    handleAudio = (store, audio, file, arr, obj) => {\n        if (audio.album_cover_thumbnail) {\n            const source = audio.album_cover_thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (audio.audio) {\n            const source = audio.audio;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleDocument = (store, document, file, arr, obj) => {\n        if (document.thumbnail) {\n            const { photo: source } = document.thumbnail;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (document.document) {\n            const { document: source } = document;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleLocation = (store, location, file, arr, obj) => {\n        const locationId = getLocationId(location);\n        if (locationId) {\n            const source = this.getLocationFile(locationId);\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateLocationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleSticker = (store, sticker, file, arr, obj) => {\n        if (sticker.thumbnail) {\n            const source = sticker.thumbnail.photo;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerThumbnailBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj || sticker)\n                );\n            }\n        }\n\n        if (sticker.sticker) {\n            const source = sticker.sticker;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj || sticker)\n                );\n            }\n        }\n    };\n\n    handleVoiceNote = (store, voiceNote, file, arr, obj) => {\n        if (voiceNote.voice) {\n            const source = voiceNote.voice;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVoiceNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideoNote = (store, videoNote, file, arr, obj) => {\n        if (videoNote.thumbnail) {\n            const source = videoNote.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (videoNote.video) {\n            const source = videoNote.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideo = (store, video, file, arr, obj) => {\n        if (video.thumbnail) {\n            const source = video.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (video.video) {\n            const source = video.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleAnimation = (store, animation, file, arr, obj) => {\n        if (animation.thumbnail) {\n            const source = animation.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (animation.animation) {\n            const source = animation.animation;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    async initDB(callback) {\n        /*if (this.store) return;\n            if (this.initiatingDB) return;\n\n            this.initiatingDB = true;\n            this.store = localForage.createInstance({\n                name: 'tdlib'\n            });\n            this.initiatingDB = false;\n\n            return;*/\n        if (this.db) {\n            console.log('[FileStore] db exists');\n            if (callback) callback();\n            return;\n        }\n\n        if (this.initiatingDB) {\n            console.log('[FileStore] add callback');\n            if (callback) this.callbacks.push(callback);\n            return;\n        }\n\n        console.log('[FileStore] start initDB');\n\n        this.initiatingDB = true;\n        this.db = await this.openDB().catch(error => console.log('[FileStore] initDB error', error));\n        this.initiatingDB = false;\n\n        console.log('[FileStore] stop initDB');\n\n        if (this.callbacks.length) {\n            console.log('[FileStore] invoke callbacks count=' + this.callbacks.length);\n            for (let i = 0; i < this.callbacks.length; i++) {\n                this.callbacks[i]();\n            }\n            this.callbacks = [];\n        }\n    }\n\n    openDB() {\n        return new Promise((resolve, reject) => {\n            const request = window.indexedDB.open('tdlib');\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n        });\n    }\n\n    getStore() {\n        return this.db.transaction(['keyvaluepairs'], 'readonly').objectStore('keyvaluepairs');\n    }\n\n    getReadWriteStore() {\n        if (useReadFile) {\n            return undefined;\n        }\n        return this.db.transaction(['keyvaluepairs'], 'readwrite').objectStore('keyvaluepairs');\n    }\n\n    deleteLocalFile = (store, file) => {};\n\n    getLocalFile(store, file, arr, callback, faultCallback) {\n        if (useReadFile) {\n            (async file => {\n                const response = await TdLibController.send({\n                    '@type': 'readFile',\n                    file_id: file.id\n                });\n                console.log(`readFile file_id=${file.id} result`, response);\n                this.setBlob(file.id, response.data);\n            })(file).then(callback, faultCallback);\n            return;\n        }\n\n        let idb_key = file.idb_key;\n        if (!idb_key) {\n            file = this.get(file.id) || file;\n            idb_key = file.idb_key;\n        }\n\n        if (!idb_key && !arr) {\n            faultCallback();\n            return;\n        }\n\n        if (arr) {\n            file.blob = new Blob([arr]);\n            this.setBlob(file.id, file.blob);\n            callback();\n            return;\n        }\n\n        if (file.blob) {\n            //callback();\n            return;\n        }\n\n        // if (this.getBlob(file.id)){\n        //     return;\n        // }\n\n        const request = store.get(idb_key);\n        request.onsuccess = event => {\n            const blob = event.target.result;\n\n            if (blob) {\n                file.blob = blob;\n                this.setBlob(file.id, file.blob);\n                callback();\n            } else {\n                faultCallback();\n            }\n        };\n        request.onerror = () => {\n            faultCallback();\n        };\n    }\n\n    getRemoteFile(fileId, priority, obj) {\n        const items = this.downloads.get(fileId) || [];\n        if (items.some(x => x === obj)) return;\n\n        items.push(obj);\n        this.downloads.set(fileId, items);\n\n        TdLibController.send({\n            '@type': 'downloadFile',\n            file_id: fileId,\n            priority: priority\n        });\n    }\n\n    cancelGetRemoteFile(fileId, obj) {\n        if (!this.downloads.has(fileId)) return;\n\n        if (!obj) {\n            this.downloads.delete(fileId);\n        } else {\n            const items = this.downloads.get(fileId).filter(x => x !== obj);\n            this.downloads.set(fileId, items);\n        }\n\n        TdLibController.send({\n            '@type': 'cancelDownloadFile',\n            file_id: fileId,\n            only_if_pending: false\n        });\n    }\n\n    uploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            let items = this.uploads.get(fileId);\n            items.push(obj);\n        } else {\n            this.uploads.set(fileId, [obj]);\n        }\n\n        console.log('[perf] uploadFile file_id=' + fileId);\n    }\n\n    cancelUploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            this.uploads.delete(fileId);\n            console.log('cancel_upload_message id=' + obj.id);\n            TdLibController.send({\n                '@type': 'deleteMessages',\n                chat_id: obj.chat_id,\n                message_ids: [obj.id],\n                revoke: true\n            });\n        }\n    }\n\n    get = fileId => {\n        return this.items.get(fileId);\n    };\n\n    set = file => {\n        this.items.set(file.id, file);\n    };\n\n    getBlob = fileId => {\n        return this.blobItems.get(fileId);\n    };\n\n    setBlob = (fileId, blob) => {\n        this.blobItems.set(fileId, blob);\n    };\n\n    deleteBlob = fileId => {\n        this.blobItems.delete(fileId);\n    };\n\n    getLocationFile = locationId => {\n        const fileId = this.locationItems.get(locationId);\n\n        return this.get(fileId);\n    };\n\n    setLocationFile = (locationId, file) => {\n        this.locationItems.set(locationId, file.id);\n\n        this.set(file);\n    };\n\n    getBlobUrl = blob => {\n        if (!blob) {\n            return null;\n        }\n\n        if (this.urls.has(blob)) {\n            return this.urls.get(blob);\n        }\n\n        const url = URL.createObjectURL(blob);\n        this.urls.set(blob, url);\n\n        return url;\n    };\n\n    deleteBlobUrl = blob => {\n        if (this.urls.has(blob)) {\n            this.urls.delete(blob);\n        }\n    };\n\n    updatePhotoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdatePhotoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioThumbnailBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioThumbnailBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVoiceNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVoiceNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDocumentBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateLocationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateLocationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateDocumentThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateUserPhotoBlob(userId, fileId) {\n        this.emit('clientUpdateUserBlob', {\n            userId: userId,\n            fileId: fileId\n        });\n    }\n\n    updateChatPhotoBlob(chatId, fileId) {\n        this.emit('clientUpdateChatBlob', {\n            chatId: chatId,\n            fileId: fileId\n        });\n    }\n}\n\nconst store = new FileStore();\nwindow.file = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './FileProgress.css';\n\nconst circleStyle = { circle: 'file-progress-circle' };\n\nclass FileProgress extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.completeAnimation = false;\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { download, upload, icon, thumbnailSrc } = this.props;\n\n        if (nextProps.thumbnailSrc !== thumbnailSrc) {\n            return true;\n        }\n\n        if (nextProps.icon !== icon) {\n            return true;\n        }\n\n        if (this.isDownloading(nextState.file, nextState.prevFile) && !download) {\n            return false;\n        }\n\n        if (this.isUploading(nextState.file, nextState.prevFile) && !upload) {\n            return false;\n        }\n\n        const nextLocal = nextState.file ? nextState.file.local : null;\n        const nextIdbKey = nextState.file ? nextState.file.idb_key : null;\n        const prevLocal = this.state.prevFile ? this.state.prevFile.local : null;\n        const prevIdbKey = this.state.prevFile ? this.state.prevFile.idb_key : null;\n        const isDownloadingCompleted =\n            prevLocal && nextLocal && !prevLocal.is_downloading_completed && nextLocal.is_downloading_completed;\n        const receiveIdbKey = nextIdbKey && !prevIdbKey;\n\n        if (nextState.file.id === this.state.file.id && isDownloadingCompleted && receiveIdbKey) {\n            return false;\n        }\n\n        if (nextState.file !== this.state.file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== this.state.prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.mount = true;\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        this.mount = false;\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    isDownloading = (file, prevFile) => {\n        if (!this.props.download) return false;\n\n        const wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n        const isActive = file && file.local && file.local.is_downloading_active;\n\n        return wasActive || isActive;\n    };\n\n    isUploading = (file, prevFile) => {\n        if (!this.props.upload) return false;\n\n        const wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n        const isActive = file && file.remote && file.remote.is_uploading_active;\n\n        return wasActive || isActive;\n    };\n\n    getProgressParams = (file, prevFile) => {\n        const { local, remote } = file;\n\n        let wasActive = false;\n        let isActive = false;\n        let isCompleted = false;\n        let progressSize = 0;\n        let size = 0;\n        if (this.isDownloading(file, prevFile)) {\n            wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n            isActive = local.is_downloading_active;\n            isCompleted = local.is_downloading_completed;\n            progressSize = local.downloaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isDownloading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else if (this.isUploading(file, prevFile)) {\n            wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n            isActive = remote.is_uploading_active;\n            isCompleted = remote.is_uploading_completed;\n            progressSize = remote.uploaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isUploading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else {\n            // console.log(\n            //     `FileProgress.getProgressParams none id=${file.id} download=${this.props.download} upload=${\n            //         this.props.upload\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        }\n\n        return [wasActive, isActive, isCompleted, progressSize, size];\n    };\n\n    render() {\n        let { thumbnailSrc, cancelButton, zIndex, icon, completeIcon } = this.props;\n        const { file, prevFile } = this.state;\n        if (!file) return null;\n\n        const [wasActive, isActive, isCompleted, progressSize, size] = this.getProgressParams(file, prevFile);\n\n        let inProgress = isActive;\n        let progress = 0;\n        if (isActive) {\n            progress = progressSize && size ? 100 - ((size - progressSize) / size) * 100 : 1;\n        }\n\n        const startCompleteAnimation = wasActive && !isActive;\n        if (startCompleteAnimation) {\n            this.completeAnimation = true;\n            // console.log('FileProgress.render animationComplete=true');\n            progress = isCompleted ? 100 : 0;\n            inProgress = true;\n            setTimeout(() => {\n                this.completeAnimation = false;\n                if (!this.mount) return;\n                // console.log('FileProgress.render animationComplete=false');\n\n                this.setState({ prevFile: null });\n            }, ANIMATION_DURATION_300MS);\n        }\n\n        const style = {\n            zIndex: zIndex,\n            background: !thumbnailSrc && typeof thumbnailSrc !== 'undefined' ? null : 'rgba(0, 0, 0, 0.25)'\n        };\n\n        const isDownloadingCompleted =\n            file &&\n            file.local &&\n            (file.local.is_downloading_completed || file.idb_key || file.local.is_uploading_completed) &&\n            !this.completeAnimation &&\n            !isActive;\n\n        // console.log(\n        //     `FileProgress.render \\\\\n        //     id=${file.id} showProgress=${inProgress} progress=${progress} \\\\\n        //     was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} \\\\\n        //     progress_size=${progressSize} size=${size} complete_animation=${this.completeAnimation} \\\\\n        //     is_downloading_completed=${isDownloadingCompleted}\n        //     completeIcon=${completeIcon}`,\n        //     file,\n        //     prevFile\n        // );\n        //cancelButton = true;\n        //inProgress = true;\n\n        if (isDownloadingCompleted) {\n            // console.log('FileProgress.render completeIcon');\n            if (completeIcon) {\n                return (\n                    <div className='file-progress' style={style}>\n                        <div className='file-progress-icon'>{completeIcon}</div>\n                    </div>\n                );\n            }\n\n            return null;\n        }\n\n        if (inProgress || this.completeAnimation) {\n            // console.log('FileProgress.render inProgressIcon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-indicator'>\n                        <CircularProgress\n                            classes={circleStyle}\n                            variant='static'\n                            value={progress}\n                            size={42}\n                            thickness={2}\n                        />\n                    </div>\n                    {cancelButton && (\n                        <div className='file-progress-icon'>\n                            <CloseIcon />\n                        </div>\n                    )}\n                </div>\n            );\n        }\n\n        if (icon) {\n            // console.log('FileProgress.render icon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-icon'>{icon}</div>\n                </div>\n            );\n        }\n\n        return null;\n    }\n}\n\nFileProgress.propTypes = {\n    file: PropTypes.object.isRequired,\n    thumbnailSrc: PropTypes.object,\n    cancelButton: PropTypes.bool,\n    download: PropTypes.bool,\n    upload: PropTypes.bool,\n    zIndex: PropTypes.number,\n\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nFileProgress.defaultProps = {\n    cancelButton: false,\n    download: true,\n    upload: false\n};\n\nexport default FileProgress;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass MessageStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.selectedItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateNewMessage':\n                this.set(update.message);\n                this.emit('updateNewMessage', update);\n                break;\n            case 'updateDeleteMessages':\n                this.emit('updateDeleteMessages', update);\n                break;\n            case 'updateMessageEdited': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        message.reply_markup = update.reply_markup;\n                        message.edit_date = update.edit_date;\n                    }\n                }\n                this.emit('updateMessageEdited', update);\n                break;\n            }\n            case 'updateMessageViews': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message && update.views > message.views) {\n                        message.views = update.views;\n                    }\n                }\n                this.emit('updateMessageViews', update);\n                break;\n            }\n            case 'updateMessageContent': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        update.old_content = message.content;\n                        message.content = update.new_content;\n                    }\n                }\n                this.emit('updateMessageContent', update);\n                break;\n            }\n            case 'updateMessageContentOpened': {\n                const { chat_id, message_id } = update;\n\n                const message = this.get(chat_id, message_id);\n                if (message) {\n                    const { content } = message;\n                    switch (content['@type']) {\n                        case 'messageVoiceNote': {\n                            message.content.is_listened = true;\n                            break;\n                        }\n                        case 'messageVideoNote': {\n                            message.content.is_viewed = true;\n                            break;\n                        }\n                    }\n                }\n\n                this.emit('updateMessageContentOpened', update);\n                break;\n            }\n            case 'updateMessageSendSucceeded': {\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n\n                this.set(update.message);\n                this.emit('updateMessageSendSucceeded', update);\n                break;\n            }\n            case 'updateMessageSendFailed': {\n                if (update.message.sending_state) {\n                    update.message.sending_state.error_code = update.error_code;\n                    update.message.sending_state.error_message = update.error_message;\n                }\n\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                        if (message.sending_state) {\n                            message.sending_state.error_code = update.error_code;\n                            message.sending_state.error_message = update.error_message;\n                        }\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n                this.emit('updateMessageSendFailed', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMessageHighlighted': {\n                this.emit('clientUpdateMessageHighlighted', update);\n                break;\n            }\n            case 'clientUpdateMessageSelected': {\n                if (update.selected) {\n                    this.selectedItems.set(`chatId=${update.chatId}_messageId=${update.messageId}`, {\n                        chatId: update.chatId,\n                        messageId: update.messageId\n                    });\n                } else {\n                    this.selectedItems.delete(`chatId=${update.chatId}_messageId=${update.messageId}`);\n                }\n\n                this.emit('clientUpdateMessageSelected', update);\n                break;\n            }\n            case 'clientUpdateClearSelection': {\n                this.selectedItems.clear();\n\n                this.emit('clientUpdateClearSelection', update);\n                break;\n            }\n            case 'clientUpdateChatId': {\n                if (this.selectedItems.size > 0) {\n                    this.selectedItems.clear();\n\n                    this.emit('clientUpdateClearSelection', { '@type': 'clientUpdateClearSelection' });\n                }\n\n                break;\n            }\n            case 'clientUpdateReply': {\n                this.emit('clientUpdateReply', update);\n                break;\n            }\n            case 'clientUpdateMessagesInView': {\n                this.emit('clientUpdateMessagesInView', update);\n                break;\n            }\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    load(chatId, messageId) {\n        TdLibController.send({\n            '@type': 'getMessage',\n            chat_id: chatId,\n            message_id: messageId\n        })\n            .then(message => {\n                this.set(message);\n                this.emit('getMessageResult', message);\n            })\n            .catch(error => {\n                const deletedMessage = {\n                    '@type': 'deletedMessage',\n                    chat_id: chatId,\n                    id: messageId,\n                    content: null\n                };\n                this.set(deletedMessage);\n                this.emit('getMessageResult', deletedMessage);\n            });\n    }\n\n    get(chatId, messageId) {\n        let chat = this.items.get(chatId);\n        if (!chat) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        let message = chat.get(messageId);\n        if (!message) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        return message;\n    }\n\n    set(message) {\n        let chat = this.items.get(message.chat_id);\n        if (!chat) {\n            chat = new Map();\n            this.items.set(message.chat_id, chat);\n        }\n\n        chat.set(message.id, message);\n    }\n\n    setItems(messages) {\n        for (let i = 0; i < messages.length; i++) {\n            this.set(messages[i]);\n        }\n    }\n}\n\nconst store = new MessageStore();\nwindow.message = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { getPhotoSize, getPhotoThumbnailSize, getSize } from './Common';\nimport { getChatUserId } from './Chat';\nimport { getProfilePhoto } from './User';\nimport { getLocationId } from './Message';\nimport {\n    FILE_PRIORITY,\n    LOCATION_HEIGHT,\n    LOCATION_SCALE,\n    LOCATION_WIDTH,\n    LOCATION_ZOOM,\n    PHOTO_BIG_SIZE,\n    PHOTO_SIZE,\n    PRELOAD_ANIMATION_SIZE,\n    PRELOAD_AUDIO_SIZE,\n    PRELOAD_DOCUMENT_SIZE,\n    PRELOAD_STICKER_SIZE,\n    PRELOAD_VIDEO_SIZE,\n    PRELOAD_VIDEONOTE_SIZE,\n    PRELOAD_VOICENOTE_SIZE,\n    THUMBNAIL_PRIORITY\n} from '../Constants';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getSizeString(size) {\n    if (!size) return `0 B`;\n\n    if (size < 1024) {\n        return `${size} B`;\n    }\n\n    if (size < 1024 * 1024) {\n        return `${(size / 1024).toFixed(1)} KB`;\n    }\n\n    if (size < 1024 * 1024 * 1024) {\n        return `${(size / 1024 / 1024).toFixed(1)} MB`;\n    }\n\n    return `${(size / 1024 / 1024 / 1024).toFixed(1)} GB`;\n}\n\nfunction getFileSize(file) {\n    if (!file) return null;\n\n    let size = file.size;\n    if (!size) return null;\n\n    return getSizeString(size);\n}\n\nfunction getBigPhoto(photo) {\n    if (!photo) return null;\n\n    return photo.big;\n}\n\nfunction saveData(data, filename, mime) {\n    let blob = new Blob([data], { type: mime || 'application/octet-stream' });\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nfunction saveBlob(blob, filename) {\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nasync function loadReplies(store, chatId, messageIds) {\n    if (!chatId) return;\n    if (!messageIds) return;\n    if (!messageIds.length) return;\n\n    const result = await TdLibController.send({\n        '@type': 'getMessages',\n        chat_id: chatId,\n        message_ids: messageIds\n    });\n\n    result.messages = result.messages.map((message, i) => {\n        return (\n            message || {\n                '@type': 'deletedMessage',\n                chat_id: chatId,\n                id: messageIds[i],\n                content: null\n            }\n        );\n    });\n\n    MessageStore.setItems(result.messages);\n\n    for (let i = messageIds.length - 1; i >= 0; i--) {\n        MessageStore.emit('getMessageResult', MessageStore.get(chatId, messageIds[i]));\n    }\n\n    store = FileStore.getStore();\n\n    loadReplyContents(store, result.messages);\n}\n\nfunction loadReplyContents(store, messages) {\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) break;\n\n                    const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n\n                    if (photo) {\n                        loadPhotoContent(store, photo, message);\n                        break;\n                    }\n\n                    if (animation) {\n                        loadAnimationThumbnailContent(store, animation, message);\n                        break;\n                    }\n\n                    if (audio) {\n                        loadAudioThumbnailContent(store, audio, message);\n                        break;\n                    }\n\n                    if (document) {\n                        loadDocumentThumbnailContent(store, document, message);\n                        break;\n                    }\n\n                    if (sticker) {\n                        loadStickerThumbnailContent(store, sticker, message);\n                        break;\n                    }\n\n                    if (video) {\n                        loadVideoThumbnailContent(store, video, message);\n                        break;\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteThumbnailContent(store, video_note, message);\n                        break;\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadAudioContent(store, audio, message, useFileSize = true) {\n    if (!audio) return;\n    if (!message) return;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_AUDIO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAudioThumbnailContent(store, audio, message) {\n    if (!audio) return false;\n    if (!message) return false;\n\n    const { album_cover_thumbnail: photoSize } = audio;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadAnimationContent(store, animation, message, useFileSize = true) {\n    if (!animation) return;\n    if (!message) return;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_ANIMATION_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAnimationThumbnailContent(store, animation, message) {\n    if (!animation) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = animation;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadContactContent(store, contact, message) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { user_id } = contact;\n    const user = UserStore.get(user_id);\n    if (!user) return;\n\n    loadUserContent(store, user);\n}\n\nfunction loadDocumentContent(store, document, message, useFileSize = true) {\n    if (!document) return;\n    if (!message) return;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_DOCUMENT_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadDocumentThumbnailContent(store, document, message) {\n    if (!document) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = document;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadGameContent(store, game, message, useFileSize = true) {\n    if (!game) return;\n    if (!message) return;\n\n    const { animation } = game;\n\n    loadAnimationContent(store, animation, message, useFileSize);\n}\n\nfunction loadGameThumbnailContent(store, game, message) {\n    if (!game) return false;\n    if (!message) return false;\n\n    const { photo, animation } = game;\n    if (loadAnimationThumbnailContent(store, animation, message)) {\n        return true;\n    }\n\n    loadPhotoContent(store, photo, message);\n    return true;\n}\n\nasync function loadLocationContent(store, location, message) {\n    if (!location) return;\n    if (!message) return;\n\n    const locationId = getLocationId(location);\n    if (!locationId) return;\n\n    let file = FileStore.getLocationFile(locationId);\n    if (!file) {\n        file = await TdLibController.send({\n            '@type': 'getMapThumbnailFile',\n            location: location,\n            zoom: LOCATION_ZOOM,\n            width: LOCATION_WIDTH,\n            height: LOCATION_HEIGHT,\n            scale: LOCATION_SCALE,\n            chat_id: message.chat_id\n        });\n        FileStore.setLocationFile(locationId, file);\n\n        store = FileStore.getStore();\n    }\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateLocationBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadBigPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getSize(sizes, PHOTO_BIG_SIZE);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getPhotoSize(sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoThumbnailContent(store, photo, message) {\n    if (!photo) return false;\n    if (!message) return false;\n\n    const photoSize = getPhotoThumbnailSize(photo.sizes);\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadStickerContent(store, sticker, message, useFileSize = true) {\n    if (!sticker) return;\n\n    let { sticker: file } = sticker;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    const chatId = message ? message.chat_id : 0;\n    const messageId = message ? message.id : 0;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerBlob(chatId, messageId, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_STICKER_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message || sticker);\n            }\n        }\n    );\n}\n\nfunction loadStickerThumbnailContent(store, sticker, message) {\n    if (!sticker) return false;\n\n    const { thumbnail: photoSize } = sticker;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    const chatId = message ? message.chat_id : 0;\n    const messageId = message ? message.id : 0;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerThumbnailBlob(chatId, messageId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message || sticker)\n    );\n\n    return true;\n}\n\nfunction loadVideoContent(store, video, message, useFileSize = true) {\n    if (!video) return;\n    if (!message) return;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoThumbnailContent(store, video, message) {\n    if (!video) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = video;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVideoNoteContent(store, videoNote, message, useFileSize = true) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEONOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoNoteThumbnailContent(store, videoNote, message) {\n    if (!videoNote) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = videoNote;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVoiceNoteContent(store, voiceNote, message, useFileSize = true) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVoiceNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VOICENOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadMessageContents(store, messages) {\n    const users = new Map();\n    let chatId = 0;\n    const replies = new Map();\n\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { chat_id, content, sender_user_id, reply_to_message_id } = message;\n\n        if (sender_user_id) {\n            users.set(sender_user_id, sender_user_id);\n        }\n\n        if (reply_to_message_id) {\n            chatId = chat_id;\n            replies.set(reply_to_message_id, reply_to_message_id);\n        }\n\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioContent(store, audio, message);\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageContact': {\n                    const { contact } = content;\n\n                    loadContactContent(store, contact, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message);\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameContent(store, game, message);\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messageLocation': {\n                    const { location } = content;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (audio) {\n                        loadAudioContent(store, audio, message);\n                        loadPhoto = !loadAudioThumbnailContent(store, audio, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message);\n                        loadPhoto = !loadDocumentThumbnailContent(store, document, message);\n                    }\n\n                    if (sticker) {\n                        loadStickerContent(store, sticker, message);\n                        loadPhoto = !loadStickerThumbnailContent(store, sticker, message);\n                    }\n\n                    if (video) {\n                        // loadVideoContent(store, video, message); // start loading only on video click event\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteContent(store, video_note, message);\n                        loadPhoto = !loadVideoNoteThumbnailContent(store, video_note, message);\n                    }\n\n                    if (voice_note) {\n                        loadVoiceNoteContent(store, voice_note, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                        loadPhotoContent(store, photo, message);\n                        loadPhotoThumbnailContent(store, photo, message);\n                    }\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    loadPhotoContent(store, photo, message);\n                    loadPhotoThumbnailContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerContent(store, sticker, message);\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageVenue': {\n                    const { venue } = content;\n                    const { location } = venue;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    // loadVideoContent(store, video, message); // start loading only on video click event\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteContent(store, video_note, message);\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n                case 'messageVoiceNote': {\n                    const { voice_note } = content;\n\n                    loadVoiceNoteContent(store, voice_note, message);\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        }\n    }\n\n    loadUsersContent(store, [...users.keys()]);\n    loadReplies(store, chatId, [...replies.keys()]);\n}\n\nfunction saveOrDownload(file, fileName, obj, callback) {\n    if (!file) return;\n    if (!fileName) return;\n\n    if (file.arr) {\n        saveData(file.arr, fileName);\n        return;\n    }\n\n    let blob = FileStore.getBlob(file.id) || file.blob;\n    if (blob) {\n        saveBlob(blob, fileName);\n        return;\n    }\n\n    download(file, obj, () => {\n        if (callback) callback();\n\n        blob = FileStore.getBlob(file.id) || file.blob;\n        if (blob) {\n            saveBlob(blob, fileName);\n        }\n    });\n}\n\nfunction download(file, obj, callback) {\n    if (!file) return;\n    const { id, local } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) {\n        return;\n    }\n\n    if (local.is_downloading_completed) {\n        const store = FileStore.getStore();\n\n        FileStore.getLocalFile(store, file, null, callback, () => {\n            if (local.can_be_downloaded) {\n                FileStore.getRemoteFile(file.id, FILE_PRIORITY, obj);\n            }\n        });\n        return;\n    }\n\n    if (local.can_be_downloaded) {\n        FileStore.getRemoteFile(id, FILE_PRIORITY, obj);\n    }\n}\n\nfunction getMediaPreviewFile(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation && animation.thumbnail) {\n                return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, video, photo } = web_page;\n\n                if (animation && animation.thumbnail) {\n                    return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (video && video.thumbnail) {\n                    return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n                }\n\n                if (photo) {\n                    return getMediaFile(chatId, messageId, PHOTO_SIZE);\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video.thumbnail) {\n                return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n            }\n            break;\n        }\n        default: {\n            return [0, 0, null];\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction getMediaFile(chatId, messageId, size) {\n    if (!size) return [0, 0, null];\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                return [animation.width, animation.height, animation.animation];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, photo, video } = web_page;\n                if (animation) {\n                    return [animation.width, animation.height, animation.animation];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (photo) {\n                    const photoSize = getSize(photo.sizes, size);\n                    if (photoSize) {\n                        return [photoSize.width, photoSize.height, photoSize.photo];\n                    }\n                    break;\n                }\n\n                if (video) {\n                    return [video.width, video.height, video.video];\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                return [video.width, video.height, video.video];\n            }\n            break;\n        }\n        default: {\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction cancelLoadMediaViewerContent(messages) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messagePhoto': {\n                    const { photo } = content;\n                    if (!photo) break;\n\n                    // preview\n                    /*let [previewId, previewPid, previewIdbKey] = getPhotoPreviewFile(message);\n                    if (previewPid) {\n                        let preview = this.getPreviewPhotoSize(message.content.photo.sizes);\n                        if (!preview.blob){\n                            FileStore.getLocalFile(store, preview, null,\n                                () => MessageStore.updateMessagePhoto(message.id),\n                                () => { if (loadRemote)  FileStore.getRemoteFile(previewId, 2, message); },\n                                'load_contents_preview_',\n                                message.id);\n\n                        }\n                    }*/\n\n                    const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n                    if (!photoSize) break;\n\n                    const { photo: file } = photoSize;\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) return;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n                    if (!video) break;\n\n                    if (video.thumbnail) {\n                        const { photo: file } = video.thumbnail;\n                        const blob = file.blob || FileStore.getBlob(file.id);\n                        if (blob) break;\n\n                        FileStore.cancelGetRemoteFile(file.id);\n                    }\n\n                    const { video: file } = video;\n                    if (!file) break;\n\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) break;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (web_page) {\n                        const { video } = web_page;\n\n                        if (video) {\n                            if (video.thumbnail) {\n                                const { photo: file } = video.thumbnail;\n                                const blob = file.blob || FileStore.getBlob(file.id);\n                                if (blob) break;\n\n                                FileStore.cancelGetRemoteFile(file.id);\n                            }\n\n                            const { video: file } = video;\n                            if (!file) break;\n\n                            const blob = file.blob || FileStore.getBlob(file.id);\n                            if (blob) break;\n\n                            FileStore.cancelGetRemoteFile(file.id);\n                        }\n                    }\n\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadMediaViewerContent(messages, useSizeLimit = false) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    const store = FileStore.getStore();\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message, useSizeLimit);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message, useSizeLimit);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, document, photo, video } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message, useSizeLimit);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message, useSizeLimit);\n                        loadPhoto = false;\n                    }\n\n                    if (video) {\n                        loadVideoContent(store, video, message, useSizeLimit);\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    loadVideoContent(store, video, message, useSizeLimit);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction cancelPreloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    cancelLoadMediaViewerContent([history[index]]);\n    cancelLoadMediaViewerContent(messages);\n}\n\nfunction preloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    loadMediaViewerContent([history[index]], false);\n    loadMediaViewerContent(messages, true);\n}\n\nfunction loadUserFileContent(store, file, userId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateUserPhotoBlob(userId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, user)\n    );\n}\n\nfunction loadChatFileContent(store, file, chatId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateChatPhotoBlob(chatId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, chat)\n    );\n}\n\nfunction loadProfileMediaViewerContent(chatId, photos) {\n    if (!photos) return;\n\n    const store = FileStore.getStore();\n\n    photos.forEach(photo => {\n        switch (photo['@type']) {\n            case 'chatPhoto': {\n                const { small, big } = photo;\n\n                loadChatFileContent(store, small, chatId);\n                loadChatFileContent(store, big, chatId);\n                break;\n            }\n            case 'profilePhoto': {\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n            case 'userProfilePhoto': {\n                photo = getProfilePhoto(photo);\n                if (!photo) break;\n\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n        }\n    });\n}\n\nfunction preloadProfileMediaViewerContent(chatId, index, history) {\n    if (!history.length) return;\n\n    const items = [];\n    if (index > 0) {\n        items.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        items.push(history[index + 1]);\n    }\n    if (index >= 0 && index < history.length) {\n        items.push(history[index]);\n    }\n\n    loadProfileMediaViewerContent(chatId, items);\n}\n\nfunction loadUserContent(store, userId) {\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const { profile_photo } = user;\n    if (!profile_photo) return;\n\n    const { small: file } = profile_photo;\n\n    loadUserFileContent(store, file, userId);\n}\n\nfunction loadUsersContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadUserContent(store, id));\n}\n\nfunction loadChatContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { photo } = chat;\n    if (!photo) return;\n\n    const { small: file } = photo;\n\n    loadChatFileContent(store, file, chatId);\n}\n\nfunction loadChatsContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadChatContent(store, id));\n}\n\nfunction loadDraftContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { draft_message } = chat;\n    if (!draft_message) return;\n\n    const { reply_to_message_id } = draft_message;\n    if (!reply_to_message_id) return;\n\n    loadReplies(store, chatId, [reply_to_message_id]);\n}\n\nfunction loadStickerSetContent(store, stickerSet) {\n    if (!stickerSet) return;\n\n    const { stickers } = stickerSet;\n    loadStickersContent(store, stickers);\n}\n\nfunction loadStickersContent(store, stickers) {\n    if (!stickers) return;\n\n    stickers.forEach(sticker => {\n        loadStickerThumbnailContent(store, sticker, null);\n    });\n}\n\nfunction isGifMimeType(mimeType) {\n    return mimeType && mimeType.toLowerCase() === 'image/gif';\n}\n\nfunction getSrc(file) {\n    const blob = getBlob(file);\n\n    return FileStore.getBlobUrl(blob) || '';\n}\n\nfunction getBlob(file) {\n    return file ? FileStore.getBlob(file.id) || file.blob : null;\n}\n\nfunction getDownloadedSize(file) {\n    if (!file) return '0';\n    if (!file.local) return '0';\n    if (!file.local.is_downloading_active) return '0';\n\n    return getSizeString(file.local.downloaded_size);\n}\n\nfunction getUploadedSize(file) {\n    if (!file) return '0';\n    if (!file.remote) return '0';\n    if (!file.remote.is_uploading_active) return '0';\n\n    return getSizeString(file.remote.uploaded_size);\n}\n\nfunction getExtension(fileName) {\n    if (!fileName) {\n        return '';\n    }\n\n    const parts = fileName.split('.');\n    if (parts.length === 1 || (parts[0] === '' && parts.length === 2)) {\n        return '';\n    }\n    return parts.pop().toLowerCase();\n}\n\nexport {\n    getFileSize,\n    getSizeString,\n    saveData,\n    saveBlob,\n    loadMessageContents,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    cancelLoadMediaViewerContent,\n    cancelPreloadMediaViewerContent,\n    loadProfileMediaViewerContent,\n    preloadProfileMediaViewerContent,\n    loadDraftContent,\n    loadUserContent,\n    loadChatContent,\n    loadChatsContent,\n    loadUsersContent,\n    loadStickerContent,\n    loadStickersContent,\n    loadStickerSetContent,\n    saveOrDownload,\n    download,\n    getMediaFile,\n    getMediaPreviewFile,\n    isGifMimeType,\n    getSrc,\n    getBlob,\n    getDownloadedSize,\n    getUploadedSize,\n    getExtension\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport FileProgress from '../../Components/Viewer/FileProgress';\nimport { getSrc } from '../../Utils/File';\nimport FileStore from '../../Stores/FileStore';\nimport './DocumentTile.css';\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.primary.main,\n        borderRadius: '50%',\n        width: 48,\n        height: 48\n    }\n});\n\nclass DocumentTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    onClientUpdateDocumentThumbnailBlob = update => {\n        const { thumbnail } = this.props;\n        if (!thumbnail) return;\n\n        const file = thumbnail.photo;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { classes, thumbnail, file, icon, completeIcon, openMedia } = this.props;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const className = classNames('tile-photo', { 'document-tile-background': !thumbnailSrc });\n\n        return (\n            <div className='document-tile' onClick={openMedia}>\n                {thumbnailSrc ? (\n                    <img className={className} src={thumbnailSrc} draggable={false} alt='' />\n                ) : (\n                    <div className={classes.background} />\n                )}\n                {file && (\n                    <FileProgress\n                        file={file}\n                        thumbnailSrc={thumbnailSrc}\n                        download\n                        upload\n                        cancelButton\n                        zIndex={1}\n                        icon={icon}\n                        completeIcon={completeIcon}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nDocumentTile.propTypes = {\n    thumbnail: PropTypes.object,\n    file: PropTypes.object,\n    openMedia: PropTypes.func,\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nexport default withStyles(styles, { withTheme: true })(DocumentTile);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport { getSearchMessagesFilter, openMedia } from '../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_NORMAL, PLAYER_VOLUME_NORMAL } from '../Constants';\nimport MessageStore from './MessageStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport { getRandomInt } from '../Utils/Common';\n\nconst RepeatEnum = Object.freeze({\n    NONE: 'NONE',\n    REPEAT: 'REPEAT',\n    REPEAT_ONE: 'REPEAT_ONE'\n});\n\nexport { RepeatEnum };\n\nclass PlayerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        const cookies = new Cookies();\n        let playbackRate = cookies.get('playbackRate');\n        let volume = cookies.get('volume');\n        playbackRate =\n            playbackRate && Number(playbackRate) >= 1 && Number(playbackRate) <= 2\n                ? Number(playbackRate)\n                : PLAYER_PLAYBACKRATE_NORMAL;\n        volume = volume && Number(volume) >= 0 && Number(volume) <= 1 ? Number(volume) : PLAYER_VOLUME_NORMAL;\n\n        this.playbackRate = playbackRate;\n        this.volume = volume;\n        this.repeat = RepeatEnum.NONE;\n        this.shuffle = false;\n\n        this.playlist = null;\n        this.message = null;\n        this.time = null;\n        this.videoStream = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            default:\n                break;\n        }\n    };\n\n    close = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaClose'\n        });\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMediaClose': {\n                this.playlist = null;\n                this.message = null;\n                this.time = null;\n                this.videoStream = null;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaActive': {\n                const { chatId, messageId } = update;\n\n                const message = MessageStore.get(chatId, messageId);\n                if (!message) return;\n\n                this.message = message;\n\n                this.emit(update['@type'], update);\n\n                this.getPlaylist(chatId, messageId);\n                break;\n            }\n            case 'clientUpdateMediaVolume': {\n                const { volume } = update;\n\n                this.volume = volume;\n\n                const cookies = new Cookies();\n                cookies.set('volume', volume);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaRepeat': {\n                const { repeat } = update;\n\n                this.repeat = repeat;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaShuffle': {\n                const { shuffle } = update;\n\n                this.shuffle = shuffle;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaybackRate': {\n                const { playbackRate } = update;\n\n                this.playbackRate = playbackRate;\n\n                const cookies = new Cookies();\n                cookies.set('playbackRate', playbackRate);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlay': {\n                this.playing = true;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaTitleMouseOver': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPause': {\n                this.playing = false;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaStop': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaNext': {\n                this.emit(update['@type'], update);\n\n                this.moveToNextMedia(false);\n                break;\n            }\n            case 'clientUpdateMediaPrev': {\n                this.emit(update['@type'], update);\n\n                this.moveToPrevMedia();\n                break;\n            }\n            case 'clientUpdateMediaEnding': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaEnd': {\n                this.emit(update['@type'], update);\n\n                if (update.moveNext) {\n                    if (this.moveToNextMedia(true)) {\n                    } else {\n                        this.close();\n                    }\n                } else {\n                    this.close();\n                }\n                break;\n            }\n            case 'clientUpdateMediaTime': {\n                const { duration, currentTime, timestamp } = update;\n\n                this.time = {\n                    currentTime: currentTime,\n                    duration: duration,\n                    timestamp: timestamp\n                };\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaCaptureStream': {\n                this.videoStream = update.stream;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPlay': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPause': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerEnded': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistLoading': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistPrev': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylist': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistNext': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    moveToPrevMedia = () => {\n        if (!this.playlist) return;\n        if (!this.message) return;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return;\n\n        if (index + 1 < messages.length) {\n            const message = messages[index + 1];\n\n            openMedia(message.chat_id, message.id, false);\n        }\n    };\n\n    moveToNextMedia = useRepeatShuffle => {\n        if (!this.playlist) return false;\n        if (!this.message) return false;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return false;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        let nextIndex = -1;\n        if (!useRepeatShuffle) {\n            nextIndex = index - 1;\n        } else {\n            switch (this.repeat) {\n                case RepeatEnum.NONE: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1;\n                    }\n                    break;\n                }\n                case RepeatEnum.REPEAT_ONE: {\n                    nextIndex = index;\n                    break;\n                }\n                case RepeatEnum.REPEAT: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1 >= 0 ? index - 1 : messages.length - 1;\n                    }\n                    break;\n                }\n            }\n        }\n\n        if (nextIndex >= 0) {\n            const message = messages[nextIndex];\n\n            openMedia(message.chat_id, message.id, false);\n            return true;\n        }\n\n        return false;\n    };\n\n    getPlaylist = async (chatId, messageId) => {\n        const { playlist: currentPlaylist } = this;\n\n        if (currentPlaylist) {\n            const { messages } = currentPlaylist;\n            if (messages && messages.findIndex(x => x.chat_id === chatId && x.id === messageId) !== -1) {\n                return;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylistLoading',\n            chatId: chatId,\n            messageId: messageId\n        });\n\n        const filter = getSearchMessagesFilter(chatId, messageId);\n        if (!filter) {\n            this.playlist = {\n                chatId: chatId,\n                messageId: messageId,\n                totalCount: 1,\n                messages: [MessageStore.get(chatId, messageId)]\n            };\n\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylist',\n                playlist: this.playlist\n            });\n\n            return;\n        }\n\n        const result = await TdLibController.send({\n            '@type': 'searchChatMessages',\n            chat_id: chatId,\n            query: '',\n            sender_user_id: 0,\n            from_message_id: messageId,\n            offset: -50,\n            limit: 100,\n            filter: filter\n        });\n\n        MessageStore.setItems(result.messages);\n\n        const { total_count, messages } = result;\n\n        this.playlist = {\n            chatId: chatId,\n            messageId: messageId,\n            totalCount: total_count,\n            messages: messages\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylist',\n            playlist: this.playlist\n        });\n    };\n}\n\nconst store = new PlayerStore();\nwindow.player = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport { getDurationString } from '../../../Utils/Common';\nimport FileStore from '../../../Stores/FileStore';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './AudioAction.css';\n\nclass AudioAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration, file } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n        const currentFile = FileStore.get(file.id) || file;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            timeString: this.getTimeString(currentTime, duration, active, currentFile),\n\n            prevFile: null,\n            file: currentFile\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, timeString, file, prevFile } = this.state;\n\n        if (nextState.timeString !== timeString) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                timeString: this.getTimeString(update.currentTime, update.duration || duration, active, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                timeString: this.getTimeString(active ? currentTime : 0, duration, true, file)\n            });\n        } else if (active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    getTimeString = (currentTime, duration, active, file) => {\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        return active && isDownloadingCompleted ? `${currentTimeString}/${durationString}` : `${durationString}`;\n    };\n\n    render() {\n        const { file, timeString } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='audio-action'>\n                {!isDownloadingCompleted && <span>{`${sizeString}, `}</span>}\n                <span>{timeString}</span>\n            </div>\n        );\n    }\n}\n\nAudioAction.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired,\n    file: PropTypes.object.isRequired\n};\n\nexport default AudioAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { THUMBNAIL_BLURRED_SIZE } from '../Constants';\n\nfunction isBlurredThumbnail(thumbnail) {\n    if (!thumbnail) return false;\n\n    return Math.max(thumbnail.width, thumbnail.height) < THUMBNAIL_BLURRED_SIZE;\n}\n\nfunction getAudioTitle(audio) {\n    if (!audio) return null;\n\n    const { file_name, title, performer } = audio;\n    const trimmedTitle = title ? title.trim() : '';\n    const trimmedPerformer = performer ? performer.trim() : '';\n\n    return trimmedTitle || trimmedPerformer\n        ? `${trimmedPerformer || 'Unknown Artist'}  ${trimmedTitle || 'Unknown Track'}`\n        : file_name;\n}\n\nexport { isBlurredThumbnail, getAudioTitle };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './DocumentAction.css';\n\nclass DocumentAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { file, prevFile } = this.state;\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    render() {\n        const { file } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='document-action'>\n                <span>{sizeString}</span>\n            </div>\n        );\n    }\n}\n\nDocumentAction.propTypes = {\n    file: PropTypes.object.isRequired\n};\n\nexport default DocumentAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport DocumentAction from './DocumentAction';\nimport { getExtension } from '../../../Utils/File';\nimport './Document.css';\n\nclass Document extends React.Component {\n    render() {\n        const { document, openMedia } = this.props;\n        if (!document) return null;\n\n        const { thumbnail, file_name } = document;\n        const file = document.document;\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={<InsertDriveFileIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a\n                            className='document-name'\n                            onClick={openMedia}\n                            title={file_name}\n                            data-name={file_name}\n                            data-ext={'.' + getExtension(file_name)}>\n                            {file_name}\n                        </a>\n                    </div>\n                    <DocumentAction file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nDocument.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    document: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Document;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getAudioTitle } from '../../../Utils/Media';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './Audio.css';\nimport InsertDriveFileIcon from './Document';\n\nclass Audio extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, audio, openMedia } = this.props;\n        const { playing } = this.state;\n        if (!audio) return null;\n\n        const { album_cover_thumbnail, duration, audio: file } = audio;\n\n        const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={album_cover_thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a className='document-name' onClick={openMedia} title={title}>\n                            {title}\n                        </a>\n                    </div>\n                    <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nAudio.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    audio: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Audio;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getFitSize } from '../../../Utils/Common';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFileSize, getSrc, isGifMimeType } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './Animation.css';\n\nclass Animation extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateAnimationBlob = update => {\n        const { animation } = this.props.animation;\n        const { fileId } = update;\n\n        if (!animation) return;\n\n        if (animation.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateAnimationThumbnailBlob = update => {\n        const { thumbnail } = this.props.animation;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, t } = this.props;\n        const { thumbnail, animation, mime_type, width, height } = this.props.animation;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(animation);\n\n        const isBlurred = isBlurredThumbnail(thumbnail);\n        const isGif = isGifMimeType(mime_type);\n\n        return (\n            <div className='animation' style={style} onClick={openMedia}>\n                {src ? (\n                    isGif ? (\n                        <img className='media-viewer-content-image' style={style} src={src} alt='' />\n                    ) : (\n                        <video\n                            ref={this.videoRef}\n                            className='media-viewer-content-image'\n                            src={src}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                        />\n                    )\n                ) : (\n                    <>\n                        <img\n                            className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                            style={style}\n                            src={thumbnailSrc}\n                            alt=''\n                        />\n                        <div className='animation-meta'>{getFileSize(animation)}</div>\n                    </>\n                )}\n                <FileProgress\n                    file={animation}\n                    download\n                    upload\n                    cancelButton\n                    icon={<div className='animation-play'>{t('AttachGif')}</div>}\n                />\n            </div>\n        );\n    }\n}\n\nAnimation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    animation: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nAnimation.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withTranslation()(Animation);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getUserLetters } from '../../Utils/User';\nimport { loadChatContent } from '../../Utils/File';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './UserTileControl.css';\n\nclass UserTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.userId !== this.props.userId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onClientUpdateUserBlob = update => {\n        const { userId } = this.props;\n\n        if (userId === update.userId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    //console.log('UserTileControl.onClientUpdateChatBlob user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    if (!update.photo) {\n                        //console.log('UserTileControl.onUpdateChatPhoto user_id=' + userId);\n                        this.forceUpdate();\n                    } else {\n                        const store = FileStore.getStore();\n                        loadChatContent(store, chat);\n                    }\n                }\n            }\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId && !chat.photo) {\n                    //console.log('UserTileControl.onUpdateChatTitle user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    handleSelect = event => {\n        const { userId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(userId);\n    };\n\n    render() {\n        const { userId, onSelect } = this.props;\n        let { user } = this.props;\n        if (!userId && !user) return null;\n\n        user = UserStore.get(userId) || user;\n        if (!user) return null;\n\n        const { profile_photo } = user;\n\n        const letters = getUserLetters(user);\n        const blob = profile_photo && profile_photo.small ? FileStore.getBlob(profile_photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n        const tileColor = `tile_color_${(Math.abs(userId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return src ? (\n            <img className={className} src={src} draggable={false} alt='' onClick={this.handleSelect} />\n        ) : (\n            <div className={className} onClick={this.handleSelect}>\n                <span className='tile-text'>{letters}</span>\n            </div>\n        );\n    }\n}\n\nUserTileControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    user: PropTypes.object,\n    onSelect: PropTypes.func\n};\n\nexport default UserTileControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from '../../Tile/UserTileControl';\nimport { formatPhoneNumber } from '../../../Utils/Common';\nimport { getUserFullName } from '../../../Utils/User';\nimport UserStore from '../../../Stores/UserStore';\nimport './Contact.css';\n\nclass Contact extends React.Component {\n    render() {\n        const { contact, openMedia } = this.props;\n        if (!contact) return null;\n\n        const { user_id, first_name, last_name, phone_number } = contact;\n\n        const user = UserStore.get(user_id) || {\n            '@type': 'user',\n            type: { '@type': 'userTypeRegular' },\n            id: user_id,\n            first_name: first_name,\n            last_name: last_name\n        };\n\n        const fullName = getUserFullName(user);\n        const number = formatPhoneNumber(phone_number);\n\n        return (\n            <div className='contact'>\n                <div className='contact-tile'>\n                    <UserTileControl userId={user_id} user={user} />\n                </div>\n                <div className='contact-content'>\n                    <div className='contact-name'>\n                        {user_id > 0 ? <a onClick={openMedia}>{fullName}</a> : <span>{fullName}</span>}\n                    </div>\n                    <div className='contact-phone'>{number}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nContact.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    contact: PropTypes.object.isRequired,\n    openMedia: PropTypes.func\n};\n\nexport default Contact;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getSize, getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_SIZE, PHOTO_DISPLAY_SIZE, PHOTO_THUMBNAIL_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Photo.css';\n\nclass Photo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { photo, size, thumbnailSize } = props;\n        const photoSize = getSize(photo.sizes, size);\n        const thumbnail = getSize(photo.sizes, thumbnailSize);\n\n        this.state = {\n            photoSize: photoSize,\n            thumbnail: thumbnail\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { photoSize } = this.state;\n        const { fileId } = update;\n\n        if (!photoSize) return;\n\n        if (photoSize.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, showProgress, style } = this.props;\n        const { thumbnail, photoSize } = this.state;\n\n        if (!photoSize) return null;\n\n        const src = getSrc(photoSize.photo);\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitPhotoSize = getFitSize(photoSize, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const photoStyle = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height,\n            ...style\n        };\n\n        return (\n            <div className='photo' style={photoStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='photo-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('photo-image', { 'media-blurred': isBlurred })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n                {showProgress && <FileProgress file={photoSize.photo} download upload cancelButton />}\n            </div>\n        );\n    }\n}\n\nPhoto.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n    showProgress: PropTypes.bool,\n\n    size: PropTypes.number,\n    thumbnailSize: PropTypes.number,\n    displaySize: PropTypes.number,\n    style: PropTypes.object\n};\n\nPhoto.defaultProps = {\n    size: PHOTO_SIZE,\n    thumbnailSize: PHOTO_THUMBNAIL_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    showProgress: true\n};\n\nexport default Photo;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst borderStyle = theme => ({\n    borderColor: {\n        borderColor: theme.palette.divider\n    }\n});\n\nconst accentStyles = theme => ({\n    accentColorDark: {\n        color: theme.palette.primary.main\n    },\n    accentBackgroundLight: {\n        background: theme.palette.primary.light\n    }\n});\n\nexport { borderStyle, accentStyles };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport Photo from './Photo';\nimport Animation from './Animation';\nimport { accentStyles } from '../../Theme';\nimport { getFormattedText } from '../../../Utils/Message';\nimport { getFitSize, getSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Game.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Game extends React.Component {\n    getContent = () => {\n        const { chatId, messageId, game, size, displaySize, openMedia } = this.props;\n        if (!game) return null;\n\n        const { photo, animation } = game;\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />;\n            }\n        }\n\n        if (photo) {\n            let style = {\n                width: 0,\n                height: 0\n            };\n            const photoSize = getSize(photo.sizes, size);\n            if (photoSize) {\n                const fitPhotoSize = getFitSize(photoSize, displaySize);\n                if (fitPhotoSize) {\n                    style.width = fitPhotoSize.width;\n                    style.height = fitPhotoSize.height;\n                }\n            }\n\n            return <Photo chatId={chatId} messageId={messageId} photo={photo} style={style} openMedia={openMedia} />;\n        }\n\n        return null;\n    };\n\n    render() {\n        const { classes, game } = this.props;\n        if (!game) return null;\n\n        const { title, text, description } = game;\n        const formattedText = getFormattedText(text);\n\n        return (\n            <div className='game'>\n                <div className={classNames('game-border', classes.accentBackgroundLight)} />\n                <div className='game-wrapper'>\n                    {title && <div className={classNames('game-title', classes.accentColorDark)}>{title}</div>}\n                    {formattedText && <div className='game-text'>{formattedText}</div>}\n                    {description && <div className='game-description'>{description}</div>}\n                    {this.getContent()}\n                </div>\n            </div>\n        );\n    }\n}\n\nGame.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    game: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nGame.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withStyles(styles)(Game);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { getLocationId } from '../../../Utils/Message';\nimport { getSrc } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './Location.css';\n\nclass Location extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    onClientUpdateLocationBlob = update => {\n        const { fileId } = update;\n        const { location } = this.props;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        if (!file) return;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { location } = this.props;\n        if (!location) return null;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        const src = getSrc(file);\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <a href={source} target='_blank' rel='noopener noreferrer'>\n                <div className='location-wrapper'>\n                    <img className='location-image' draggable={false} alt={source} src={src} />\n                    <div className='location-icon'>\n                        <RoomIcon fontSize='large' color='primary' />\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n\nLocation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    location: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Location;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport Radio from '@material-ui/core/Radio';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport './PollRadio.css';\n\nconst styles = {\n    progressRoot: {\n        position: 'absolute',\n        top: 8,\n        left: 8,\n        pointerEvents: 'none'\n    },\n    radioRoot: {\n        padding: 6\n    },\n    icon: {\n        color: 'transparent'\n    }\n};\n\nclass PollRadio extends React.Component {\n    render() {\n        const { classes, chosen, beingChosen, hidden, onChange } = this.props;\n\n        return (\n            <div className={classNames('poll-radio', { 'poll-radio-hidden': hidden })}>\n                <Radio\n                    classes={{ root: classes.radioRoot }}\n                    color='primary'\n                    checked={chosen || beingChosen}\n                    onChange={onChange}\n                    checkedIcon={<RadioButtonCheckedIcon classes={{ root: beingChosen ? classes.icon : null }} />}\n                />\n                {beingChosen && <CircularProgress size={20} thickness={4.4} classes={{ root: classes.progressRoot }} />}\n            </div>\n        );\n    }\n}\n\nPollRadio.propTypes = {\n    chosen: PropTypes.bool.isRequired,\n    beingChosen: PropTypes.bool.isRequired,\n    hidden: PropTypes.bool\n};\n\nexport default withStyles(styles)(PollRadio);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ANIMATION_DURATION_200MS } from './../../../Constants';\nimport './PollPercentage.css';\n\nclass PollPercentage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handle = null;\n\n        const { value } = props;\n\n        this.state = {\n            from: value,\n            to: value,\n            animated: value,\n\n            prevPropsValue: value\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { closed, value } = this.props;\n        const { animated } = this.state;\n\n        if (closed !== nextProps.closed) {\n            return true;\n        }\n\n        if (value !== nextProps.value) {\n            return true;\n        }\n\n        if (animated !== nextState.animated) {\n            return true;\n        }\n\n        return false;\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.value !== state.prevPropsValue) {\n            return {\n                startTime: Date.now(),\n                from: state.animated,\n                to: props.value,\n\n                prevPropsValue: props.value\n            };\n        }\n\n        return null;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevProps.value !== this.props.value) {\n            this.updateAnimation();\n        }\n    }\n\n    componentWillUnmount() {\n        this.stopAnimation();\n    }\n\n    updateAnimation = () => {\n        this.stopAnimation();\n\n        this.handle = requestAnimationFrame(this.onAnimationFrame);\n    };\n\n    stopAnimation = () => {\n        if (!this.handle) return;\n\n        cancelAnimationFrame(this.handle);\n        this.handle = null;\n    };\n\n    onAnimationFrame = () => {\n        const { startTime, from, to } = this.state;\n\n        const timePassed = Date.now() - startTime;\n\n        if (timePassed >= ANIMATION_DURATION_200MS) {\n            this.setState({ animated: to });\n            this.stopAnimation();\n        } else {\n            const animated = from + Math.floor(((to - from) * timePassed) / ANIMATION_DURATION_200MS);\n            this.setState({ animated });\n            this.handle = requestAnimationFrame(this.onAnimationFrame);\n        }\n    };\n\n    render() {\n        const { chosen, closed, onClick } = this.props;\n        const { animated } = this.state;\n\n        return (\n            <div className={classNames('poll-percentage', { 'poll-percentage-subtitle': !chosen })}>\n                {!closed && chosen ? (\n                    <a className='poll-percentage-action' onClick={onClick}>\n                        {animated + '%'}\n                    </a>\n                ) : (\n                    <>{animated + '%'}</>\n                )}\n            </div>\n        );\n    }\n}\n\nPollPercentage.propTypes = {\n    value: PropTypes.number.isRequired,\n    chosen: PropTypes.bool,\n    closed: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default PollPercentage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport PollRadio from './PollRadio';\nimport PollPercentage from './PollPercentage';\nimport { borderStyle } from '../../Theme';\nimport './PollOption.css';\n\nconst styles = theme => ({\n    progressRoot: {\n        backgroundColor: 'transparent',\n        margin: '2px 0 0 38px',\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        bottom: 0\n    },\n    progressBar: {\n        transition: 'transform .2s linear'\n    },\n    ...borderStyle(theme)\n});\n\nclass PollOption extends React.Component {\n    getTitleString = (count, t = key => key) => {\n        const { canBeSelected } = this.props;\n        if (canBeSelected) return null;\n\n        if (!count) return t('NoVotes').toLowerCase();\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleClick = event => {\n        const { canBeSelected, onVote } = this.props;\n        if (!canBeSelected) return;\n\n        event.stopPropagation();\n\n        onVote();\n    };\n\n    handleCancel = event => {\n        const { onUnvote } = this.props;\n\n        event.stopPropagation();\n\n        onUnvote();\n    };\n\n    render() {\n        const { classes, option, onChange, canBeSelected, closed, maxVoterCount, t } = this.props;\n        if (!option) return null;\n\n        const { text, voter_count, vote_percentage, is_chosen, is_being_chosen } = option;\n\n        let value = 1.5;\n        if (voter_count) {\n            value = (voter_count / maxVoterCount) * 100;\n        }\n\n        return (\n            <div className='poll-option' onClick={this.handleClick}>\n                <div\n                    className={classNames(\n                        'poll-option-wrapper',\n                        canBeSelected ? 'poll-option-unselected' : 'poll-option-selected'\n                    )}>\n                    <div className='poll-option-text-wrapper' title={this.getTitleString(voter_count, t)}>\n                        <PollPercentage\n                            value={vote_percentage}\n                            chosen={is_chosen}\n                            closed={closed}\n                            onClick={this.handleCancel}\n                        />\n                        <PollRadio\n                            hidden={!canBeSelected}\n                            chosen={is_chosen}\n                            beingChosen={is_being_chosen}\n                            onChange={onChange}\n                        />\n                        <div className='poll-option-text'>{text}</div>\n                    </div>\n                </div>\n                <div className={classNames('poll-option-bottom-border', { [classes.borderColor]: canBeSelected })} />\n                <LinearProgress\n                    classes={{ root: classes.progressRoot, bar: classes.progressBar }}\n                    color='primary'\n                    variant='determinate'\n                    value={canBeSelected ? 0 : Math.max(1.5, value)}\n                />\n            </div>\n        );\n    }\n}\n\nPollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onVote: PropTypes.func.isRequired,\n    onUnvote: PropTypes.func.isRequired,\n    canBeSelected: PropTypes.bool,\n    closed: PropTypes.bool,\n    maxVoterCount: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(PollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Popover from '@material-ui/core/Popover';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport PollOption from './PollOption';\nimport { cancelPollAnswer, setPollAnswer, stopPoll } from '../../../Actions/Poll';\nimport MessageStore from './../../../Stores/MessageStore';\nimport './Poll.css';\n\nclass Poll extends React.Component {\n    state = {\n        dialog: false,\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    getTotalVoterCountString = (count, t = key => key) => {\n        if (!count) return t('NoVotes');\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleVote = index => {\n        const { chatId, messageId } = this.props;\n\n        setPollAnswer(chatId, messageId, [index]);\n    };\n\n    handleUnvote = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId, poll } = this.props;\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.handleCloseContextMenu();\n        }\n\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        cancelPollAnswer(chatId, messageId);\n    };\n\n    handleStopPoll = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n        const { dialog } = this.state;\n\n        if (dialog) {\n            this.setState({ dialog: false });\n        }\n\n        stopPoll(chatId, messageId);\n    };\n\n    handleDialog = event => {\n        const { dialog } = this.state;\n        if (dialog) return;\n\n        this.setState({\n            dialog: true,\n            contextMenu: false\n        });\n    };\n\n    handleCloseDialog = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ dialog: false });\n    };\n\n    handleContextMenu = event => {\n        const { poll } = this.props;\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            this.setState({\n                contextMenu: true,\n                left: event.clientX,\n                top: event.clientY\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    render() {\n        const { chatId, messageId, poll, t } = this.props;\n        const { left, top, contextMenu, dialog } = this.state;\n        const { question, options, total_voter_count, is_closed } = poll;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const canUnvote = !is_closed && options.some(x => x.is_chosen || x.is_being_chosen);\n        const canStopPoll = message && message.can_be_edited;\n        const canBeSelected = !is_closed && options.every(x => !x.is_chosen);\n        const maxVoterCount = Math.max(...options.map(x => x.voter_count));\n\n        return (\n            <div className='poll' onContextMenu={this.handleContextMenu}>\n                <div className='poll-question'>\n                    <span className='poll-question-title'>{question}</span>\n                    <span className='subtitle'>{is_closed ? t('FinalResults') : t('AnonymousPoll')}</span>\n                </div>\n                <div className='poll-options'>\n                    {options.map((x, index) => (\n                        <PollOption\n                            key={index}\n                            option={x}\n                            canBeSelected={canBeSelected}\n                            closed={is_closed}\n                            maxVoterCount={maxVoterCount}\n                            onVote={() => this.handleVote(index)}\n                            onUnvote={this.handleUnvote}\n                        />\n                    ))}\n                </div>\n                <div className='poll-total-count subtitle'>{this.getTotalVoterCountString(total_voter_count, t)}</div>\n                <Popover\n                    open={contextMenu && (canUnvote || canStopPoll)}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}>\n                    <MenuList onClick={e => e.stopPropagation()}>\n                        {canUnvote && <MenuItem onClick={this.handleUnvote}>{t('Unvote')}</MenuItem>}\n                        {canStopPoll && <MenuItem onClick={this.handleDialog}>{t('StopPoll')}</MenuItem>}\n                    </MenuList>\n                </Popover>\n                <Dialog\n                    transitionDuration={0}\n                    open={dialog}\n                    onClose={this.handleCloseDialog}\n                    aria-labelledby='form-dialog-title'>\n                    <DialogTitle id='form-dialog-title'>{t('StopPollAlertTitle')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>{t('StopPollAlertText')}</DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDialog} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handleStopPoll} color='primary'>\n                            {t('Stop')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nPoll.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    poll: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default withTranslation()(Poll);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function setPollAnswer(chatId, messageId, optionIds) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: optionIds\n    });\n}\n\nexport function cancelPollAnswer(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: []\n    });\n}\n\nexport function stopPoll(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'stopPoll',\n        chat_id: chatId,\n        message_id: messageId,\n        reply_markup: null\n    });\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { STICKER_DISPLAY_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Sticker.css';\n\nclass Sticker extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.on('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.removeListener('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    onClientUpdateStickerBlob = update => {\n        const { sticker } = this.props.sticker;\n        const { fileId } = update;\n\n        if (!sticker) return;\n\n        if (sticker.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateStickerThumbnailBlob = update => {\n        const { thumbnail } = this.props.sticker;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { className, displaySize, blur, sticker: source, style, openMedia } = this.props;\n        const { thumbnail, sticker, width, height } = source;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(sticker);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitSize = getFitSize({ width: width, height: height }, displaySize);\n        if (!fitSize) return null;\n\n        const stickerStyle = {\n            width: fitSize.width,\n            height: fitSize.height,\n            ...style\n        };\n\n        return (\n            <div className={classNames('sticker', className)} style={stickerStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='sticker-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('sticker-image', { 'media-blurred': isBlurred && blur })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nSticker.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number,\n    sticker: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n    blur: PropTypes.bool,\n    displaySize: PropTypes.number\n};\n\nSticker.defaultProps = {\n    chatId: 0,\n    messageId: 0,\n    openMedia: () => {},\n    blur: true,\n    displaySize: STICKER_DISPLAY_SIZE\n};\n\nexport default Sticker;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Location from './Location';\nimport './Venue.css';\n\nclass Venue extends React.Component {\n    render() {\n        const { chatId, messageId, venue, openMedia } = this.props;\n        if (!venue) return null;\n\n        const { title, address, location } = venue;\n        if (!location) return null;\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <div className='venue'>\n                <Location chatId={chatId} messageId={messageId} location={location} openMedia={openMedia} />\n                <div className='venue-content'>\n                    <a href={source} target='_blank' rel='noopener noreferrer'>\n                        <div className='venue-title'>{title}</div>\n                    </a>\n                    <div className='venue-subtitle'>{address}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVenue.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    venue: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Venue;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { getFitSize, getDurationString } from '../../../Utils/Common';\nimport { getFileSize } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Video.css';\n\nclass Video extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    onClientUpdateVideoThumbnailBlob = update => {\n        const { thumbnail } = this.props.video;\n        const { fileId } = update;\n\n        if (!thumbnail) return;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia } = this.props;\n        const { thumbnail, video, width, height, duration } = this.props.video;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const file = thumbnail ? thumbnail.photo : null;\n        const blob = file ? FileStore.getBlob(file.id) || file.blob : null;\n        const src = FileStore.getBlobUrl(blob);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        return (\n            <div className='video' style={style} onClick={openMedia}>\n                <img\n                    className={classNames('video-preview', { 'media-blurred': isBlurred })}\n                    style={style}\n                    src={src}\n                    alt=''\n                />\n                <div className='video-play'>\n                    <PlayArrowIcon />\n                </div>\n                <div className='video-meta'>{getDurationString(duration) + ' ' + getFileSize(video)}</div>\n            </div>\n        );\n    }\n}\n\nVideo.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    video: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideo.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default Video;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isContentOpened } from '../../../Utils/Message';\nimport MessageStore from '../../../Stores/MessageStore';\n\nclass MediaStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            isOpened: isContentOpened(chatId, messageId)\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    onUpdateMessageContentOpened = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chat_id && messageId === update.message_id) {\n            this.setState({ isOpened: isContentOpened(chatId, messageId) });\n        }\n    };\n\n    render() {\n        const { icon, openedIcon } = this.props;\n        const { isOpened } = this.state;\n\n        return isOpened ? openedIcon : icon;\n    }\n}\n\nMediaStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    icon: PropTypes.node,\n    openedIcon: PropTypes.node\n};\n\nMediaStatus.defaultProps = {\n    icon: null,\n    openedIcon: null\n};\n\nexport default MediaStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FileProgress from '../../Viewer/FileProgress';\nimport MediaStatus from './MediaStatus';\nimport { getFileSize, getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getDurationString } from '../../../Utils/Common';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './VideoNote.css';\n\nconst circleStyle = {\n    circle: 'video-note-progress-circle'\n};\n\nclass VideoNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { chatId, messageId } = props;\n        const { video } = props.videoNote;\n\n        const { time, message, videoStream } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            srcObject: active ? videoStream : null,\n            src: getSrc(video),\n            currentTime: active && time ? time.currentTime : 0.0,\n            videoDuration: active && time ? time.duration : 0.0\n        };\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    updateVideoSrc() {\n        const { srcObject, src } = this.state;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        if (srcObject) {\n            //player.scr = null;\n            player.srcObject = srcObject;\n            return;\n        }\n\n        const stream = player.srcObject;\n        if (stream) {\n            //console.log('clientUpdate release srcObject');\n            const tracks = stream.getTracks();\n\n            tracks.forEach(track => {\n                //console.log('clientUpdate release track');\n                track.stop();\n            });\n        }\n\n        if (player.srcObject) {\n            //console.log('clientUpdate release video.srcObject');\n            player.srcObject = null;\n        }\n        if (player.src !== src) {\n            player.src = src;\n        }\n    }\n\n    componentDidMount() {\n        this.updateVideoSrc();\n\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                if (this.state.active) {\n                    return;\n                }\n\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaCaptureStream = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({ srcObject: update.stream }, () => {\n                    this.updateVideoSrc();\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({\n                    currentTime: update.currentTime,\n                    videoDuration: update.duration\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n        const { video } = this.props.videoNote;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (this.state.active) {\n            } else {\n                this.setState({\n                    active: true,\n                    currentTime: null\n                });\n            }\n        } else if (this.state.active) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteBlob = update => {\n        const { video } = this.props.videoNote;\n        const { fileId } = update;\n\n        if (!video) return;\n\n        if (video.id === fileId) {\n            this.setState(\n                {\n                    src: getSrc(video)\n                },\n                () => {\n                    this.updateVideoSrc();\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteThumbnailBlob = update => {\n        const { thumbnail } = this.props.videoNote;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleCanPlay = () => {\n        // const player = this.videoRef.current;\n        // if (player){\n        //     if (this.state.active){\n        //         player.muted = false;\n        //     }\n        //     else{\n        //         player.muted = true;\n        //     }\n        // }\n    };\n\n    render() {\n        const { displaySize, chatId, messageId, openMedia } = this.props;\n        const { active, currentTime, videoDuration } = this.state;\n        const { thumbnail, video, duration } = this.props.videoNote;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const style = { width: 200, height: 200 };\n        if (!style) return null;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(video);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        let progress = 0;\n        if (videoDuration && currentTime) {\n            const progressTime = currentTime + 0.25;\n            progress = (progressTime / videoDuration) * 100;\n        }\n\n        return (\n            <div\n                className={classNames('video-note', { 'video-note-playing': active })}\n                style={style}\n                onClick={openMedia}>\n                {src ? (\n                    <>\n                        <video\n                            ref={this.videoRef}\n                            className={classNames('media-viewer-content-image', 'video-note-round')}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                            onCanPlay={this.handleCanPlay}\n                        />\n                        <div className='video-note-player'>\n                            <div className='video-note-progress'>\n                                <CircularProgress\n                                    classes={circleStyle}\n                                    variant='static'\n                                    value={progress}\n                                    size={200}\n                                    thickness={1}\n                                />\n                            </div>\n                            <div className='animation-meta'>\n                                {getDurationString(active ? Math.floor(currentTime) : duration)}\n                                <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                            </div>\n                            <div className='video-note-muted'>\n                                <VolumeOffIcon />\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='video-note-round'>\n                            <img\n                                className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                                style={style}\n                                src={thumbnailSrc}\n                                alt=''\n                            />\n                        </div>\n                        <div className='animation-meta'>\n                            {getDurationString(duration) + ' ' + getFileSize(video)}\n                            <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                        </div>\n                        <div className='video-note-muted'>\n                            <VolumeOffIcon />\n                        </div>\n                    </>\n                )}\n                <FileProgress file={video} download upload cancelButton icon={<ArrowDownwardIcon />} />\n            </div>\n        );\n    }\n}\n\nVideoNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    videoNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideoNote.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default VideoNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core';\nimport Slider from '@material-ui/lab/Slider';\nimport { PLAYER_PROGRESS_TIMEOUT_MS } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNoteSlider.css';\n\nconst styles = {\n    slider: {\n        maxWidth: 216\n    },\n    track: {\n        transition: 'width 0ms linear 0ms, height 0ms linear 0ms, transform 0ms linear 0ms'\n    },\n    thumbWrapper: {\n        transition: 'transform 0ms linear 0ms'\n    },\n    thumb: {\n        transition: 'transform 0ms linear 0ms, box-shadow 0ms linear 0ms'\n    }\n};\n\nclass VoiceNoteSlider extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            value: this.getValue(currentTime, audioDuration, active)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, value } = this.state;\n\n        if (nextState.value !== value) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    reset = () => {\n        const { duration } = this.props;\n        const { value } = this.state;\n\n        if (value === 1) {\n            this.setState({\n                active: false,\n                currentTime: 0\n            });\n\n            setTimeout(() => {\n                const { currentTime } = this.state;\n                if (!currentTime) {\n                    this.setState({\n                        value: this.getValue(0, duration, false)\n                    });\n                }\n            }, PLAYER_PROGRESS_TIMEOUT_MS);\n        } else {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                value: this.getValue(0, duration, false)\n            });\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.reset();\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                value: this.getValue(update.currentTime, update.duration || duration, active)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                value: this.getValue(active ? currentTime : 0, duration, true)\n            });\n        } else if (active) {\n            this.reset();\n        }\n    };\n\n    getValue = (currentTime, duration, active) => {\n        return active ? currentTime / duration : 0;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { value } = this.state;\n\n        return (\n            <div className='voice-note-slider'>\n                <Slider\n                    className={classes.slider}\n                    classes={{\n                        track: classes.track,\n                        thumbWrapper: classes.thumbWrapper,\n                        thumb: classes.thumb\n                    }}\n                    min={0}\n                    max={1}\n                    value={value}\n                />\n            </div>\n        );\n    }\n}\n\nVoiceNoteSlider.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(VoiceNoteSlider);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport MediaStatus from './MediaStatus';\nimport VoiceNoteSlider from './VoiceNoteSlider';\nimport FileProgress from '../../Viewer/FileProgress';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNote.css';\n\nclass VoiceNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, voiceNote, openMedia, classes } = this.props;\n        const { playing } = this.state;\n        if (!voiceNote) return null;\n\n        const { duration, voice: file } = voiceNote;\n\n        //const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={null}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='voice-note-content'>\n                    <VoiceNoteSlider chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                    <div className='voice-note-meta'>\n                        <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                        <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVoiceNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    voiceNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default VoiceNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function openUser(userId, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenUser',\n        userId,\n        popup\n    });\n}\n\nexport function openChat(chatId, messageId = null, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenChat',\n        chatId,\n        messageId,\n        popup\n    });\n}\n\nexport function highlightMessage(chatId, messageId) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageHighlighted',\n        chatId,\n        messageId\n    });\n}\n\nexport function selectMessage(chatId, messageId, selected) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageSelected',\n        chatId,\n        messageId,\n        selected\n    });\n}\n","\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass Currency{\n    constructor(){\n        this.list = new Map([\n            [\"AED\", \".\"],\n            [\"AFN\", \"\"],\n            [\"ARS\", \"$\"],\n            [\"AUD\", \"$\"],\n            [\"AZN\", \"\"],\n            [\"BND\", \"B$\"],\n            [\"BRL\", \"R$\"],\n            [\"CAD\", \"$\"],\n            [\"CHF\", \"Fr\"],\n            [\"CLP\", \"$\"],\n            [\"CNY\", \"\"],\n            [\"COP\", \"$\"],\n            [\"EGP\", \"E\"],\n            [\"EUR\", \"\"],\n            [\"GBP\", \"\"],\n            [\"HKD\", \"$\"],\n            [\"IDR\", \"Rp\"],\n            [\"ILS\", \"\"],\n            [\"INR\", \"\"],\n            [\"ISK\", \"kr\"],\n            [\"JPY\", \"\"],\n            [\"KRW\", \"\"],\n            [\"KZT\", \"\"],\n            [\"MXN\", \"$\"],\n            [\"MYR\", \"RM\"],\n            [\"NOK\", \"kr\"],\n            [\"NZD\", \"$\"],\n            [\"PHP\", \"\"],\n            [\"RUB\", \"\"],\n            [\"SAR\", \"SR\"],\n            [\"SEK\", \"kr\"],\n            [\"SGD\", \"$\"],\n            [\"TRY\", \"\"],\n            [\"TTD\", \"$\"],\n            [\"TWD\", \"$\"],\n            [\"TZS\", \"TSh\"],\n            [\"UAH\", \"\"],\n            [\"UGX\", \"USh\"],\n            [\"USD\", \"$\"],\n            [\"UYU\", \"$\"],\n            [\"VND\", \"\"],\n            [\"YER\", \"\"],\n            [\"ZAR\", \"R\"],\n            [\"IRR\", \"\"],\n            [\"IQD\", \".\"],\n            [\"VEF\", \"Bs.F.\"]\n        ]);\n    }\n\n    get(currency){\n        return this.list.get(currency);\n    }\n\n    set(currency, symbol){\n        this.list.set(currency, symbol);\n    }\n\n    getPow(currency){\n        if (currency === 'CLF'){\n            return 4;\n        }\n        if (['BHD', 'IQD', 'JOD', 'KWD', 'LYD', 'OMR', 'TND'].includes(currency)){\n            return 3;\n        }\n        if (['BIF', 'BYR', 'CLP', 'CVE', 'DJF', 'GNF', 'ISK', 'JPY', 'KMF', 'KRW', 'MGA', 'PYG', 'RWF', 'UGX', 'UYI', 'VND', 'VUV', 'XAF', 'XOF', 'XPF'].includes(currency)){\n            return 0;\n        }\n        if (currency === 'MRO'){\n            return 1;\n        }\n\n        return 2;\n    }\n\n    getString(totalAmount, currency){\n        const amount = (totalAmount/Math.pow(10.0, this.getPow(currency))).toFixed(2);\n        return `${amount} ${this.get(currency)}`;\n    }\n}\n\nlet currency = new Currency();\nexport default currency;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport { getUserFullName } from '../../Utils/User';\nimport { getChatTitle, isPrivateChat } from '../../Utils/Chat';\nimport { openUser as openUserCommand, openChat as openChatCommand } from '../../Actions/Client';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageAuthor.css';\n\nclass MessageAuthor extends React.Component {\n    handleSelect = event => {\n        const { chatId, userId, openUser, openChat } = this.props;\n\n        if (openUser && userId) {\n            event.stopPropagation();\n\n            openUserCommand(userId, true);\n            return;\n        }\n\n        if (openChat && chatId) {\n            event.stopPropagation();\n\n            openChatCommand(chatId, null, true);\n            return;\n        }\n    };\n\n    render() {\n        const { t, chatId, userId, openUser, openChat } = this.props;\n\n        const user = UserStore.get(userId);\n        if (user) {\n            const tileColor = isPrivateChat(chatId)\n                ? 'message-author-color'\n                : `user_color_${(Math.abs(userId) % 8) + 1}`;\n            const className = classNames([tileColor], 'message-author');\n\n            const fullName = getUserFullName(user);\n\n            return openUser ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (chat) {\n            const className = classNames('message-author-color', 'message-author');\n\n            const fullName = getChatTitle(chatId, false, t);\n\n            return openChat ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        return null;\n    }\n}\n\nMessageAuthor.propTypes = {\n    chatId: PropTypes.number,\n    userId: PropTypes.number,\n    openUser: PropTypes.bool,\n    openChat: PropTypes.bool\n};\n\nMessageAuthor.defaultProps = {\n    openUser: false,\n    openChat: false\n};\n\nexport default withTranslation()(MessageAuthor);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Currency from './Currency';\nimport MessageAuthor from '../Components/Message/MessageAuthor';\nimport ChatStore from '../Stores/ChatStore';\nimport UserStore from '../Stores/UserStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport MessageStore from '../Stores/MessageStore';\n\nlet serviceMap = new Map();\nserviceMap.set('messageBasicGroupChatCreate', 'messageBasicGroupChatCreate');\nserviceMap.set('messageChatAddMembers', 'messageChatAddMembers');\nserviceMap.set('messageChatChangePhoto', 'messageChatChangePhoto');\nserviceMap.set('messageChatChangeTitle', 'messageChatChangeTitle');\nserviceMap.set('messageChatDeleteMember', 'messageChatDeleteMember');\nserviceMap.set('messageChatDeletePhoto', 'messageChatDeletePhoto');\nserviceMap.set('messageChatJoinByLink', 'messageChatJoinByLink');\nserviceMap.set('messageChatSetTtl', 'messageChatSetTtl');\nserviceMap.set('messageChatUpgradeFrom', 'messageChatUpgradeFrom');\nserviceMap.set('messageChatUpgradeTo', 'messageChatUpgradeTo');\nserviceMap.set('messageContactRegistered', 'messageContactRegistered');\nserviceMap.set('messageCustomServiceAction', 'messageCustomServiceAction');\nserviceMap.set('messageGameScore', 'messageGameScore');\nserviceMap.set('messagePassportDataReceived', 'messagePassportDataReceived');\nserviceMap.set('messagePassportDataSent', 'messagePassportDataSent');\nserviceMap.set('messagePaymentSuccessful', 'messagePaymentSuccessful');\nserviceMap.set('messagePaymentSuccessfulBot', 'messagePaymentSuccessfulBot');\nserviceMap.set('messagePinMessage', 'messagePinMessage');\nserviceMap.set('messageScreenshotTaken', 'messageScreenshotTaken');\nserviceMap.set('messageSupergroupChatCreate', 'messageSupergroupChatCreate');\nserviceMap.set('messageUnsupported', 'messageUnsupported');\nserviceMap.set('messageWebsiteConnected', 'messageWebsiteConnected');\n\nfunction isServiceMessage(message) {\n    if (!message) return false;\n    if (!message.content) return false;\n\n    return serviceMap.has(message.content['@type']) || message.ttl > 0;\n}\n\nfunction getTTLString(ttl) {\n    if (ttl < 60) {\n        const seconds = ttl === 1 ? 'second' : 'seconds';\n        return `${ttl} ${seconds}`;\n    }\n    if (ttl < 60 * 60) {\n        const minutes = Math.floor(ttl / 60) === 1 ? 'minute' : 'minutes';\n        return `${ttl} ${minutes}`;\n    }\n    if (ttl < 24 * 60 * 60) {\n        const hours = Math.floor(ttl / 60 / 60) === 1 ? 'hour' : 'hours';\n        return `${ttl} ${hours}`;\n    }\n    if (ttl < 7 * 24 * 60 * 60) {\n        const days = Math.floor(ttl / 60 / 60 / 24) === 1 ? 'day' : 'days';\n        return `${ttl} ${days}`;\n    }\n    if (ttl === 7 * 24 * 60 * 60) {\n        return '1 week';\n    }\n\n    return `${ttl} seconds`;\n}\n\nfunction getPassportElementTypeString(type) {\n    switch (type['@type']) {\n        case 'passportElementTypeAddress': {\n            return 'Address';\n        }\n        case 'passportElementTypeBankStatement': {\n            return 'Bank Statement';\n        }\n        case 'passportElementTypeDriverLicense': {\n            return 'Driver Licence';\n        }\n        case 'passportElementTypeEmailAddress': {\n            return 'Email';\n        }\n        case 'passportElementTypeIdentityCard': {\n            return 'Identity Card';\n        }\n        case 'passportElementTypeInternalPassport': {\n            return 'Internal Passport';\n        }\n        case 'passportElementTypePassport': {\n            return 'Passport';\n        }\n        case 'passportElementTypePassportRegistration': {\n            return 'Passport Registration';\n        }\n        case 'passportElementTypePersonalDetails': {\n            return 'Personal details';\n        }\n        case 'passportElementTypePhoneNumber': {\n            return 'Phone Number';\n        }\n        case 'passportElementTypeRentalAgreement': {\n            return 'Tenancy Agreement';\n        }\n        case 'passportElementTypeTemporaryRegistration': {\n            return 'Temporary Registration';\n        }\n        case 'passportElementTypeUtilityBill': {\n            return 'Utility Bill';\n        }\n    }\n\n    return '';\n}\n\nfunction getMessageAuthor(message, openUser) {\n    if (!message) return null;\n\n    const { chat_id, sender_user_id } = message;\n\n    if (sender_user_id !== 0) {\n        return <MessageAuthor userId={sender_user_id} openUser={openUser} />;\n    }\n\n    const chat = ChatStore.get(chat_id);\n    if (!chat) return null;\n\n    return chat.title;\n}\n\nfunction getServiceMessageContent(message, openUser = false) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    const isOutgoing = message.sender_user_id === UserStore.getMyId();\n    const chat = ChatStore.get(message.chat_id);\n    const isChannel = chat.type['@type'] === 'chatTypeSupergroup' && chat.type.is_channel;\n\n    const { ttl, sender_user_id, content } = message;\n    if (ttl > 0) {\n        switch (content['@type']) {\n            case 'messagePhoto': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing photo. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing photo. Please view it on your mobile'}\n                    </>\n                );\n            }\n            case 'messageVideo': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing video. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing video. Please view it on your mobile'}\n                    </>\n                );\n            }\n            default: {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing message. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing message. Please view it on your mobile'}\n                    </>\n                );\n            }\n        }\n    }\n\n    switch (content['@type']) {\n        case 'messageBasicGroupChatCreate': {\n            const { title } = ChatStore.get(message.chat_id);\n\n            if (isOutgoing) {\n                return `You created group ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group ${title}`}\n                </>\n            );\n        }\n        case 'messageChatAddMembers': {\n            const members = content.member_user_ids\n                .map(x => <MessageAuthor key={x} userId={x} openUser={openUser} />)\n                .reduce((accumulator, current, index, array) => {\n                    const separator = index === array.length - 1 ? ' and ' : ', ';\n                    return accumulator === null ? [current] : [...accumulator, separator, current];\n                }, null);\n\n            if (isOutgoing) {\n                return content.member_user_ids.length === 1 && content.member_user_ids[0] === UserStore.getMyId() ? (\n                    'You joined the group'\n                ) : (\n                    <>\n                        {'You added '}\n                        {members}\n                    </>\n                );\n            }\n\n            return content.member_user_ids.length === 1 && content.member_user_ids[0] === message.sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' added '}\n                    {members}\n                </>\n            );\n        }\n        case 'messageChatChangePhoto': {\n            if (isChannel) {\n                return 'Channel photo updated';\n            }\n\n            if (isOutgoing) {\n                return 'You updated group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` updated group photo`}\n                </>\n            );\n        }\n        case 'messageChatChangeTitle': {\n            const { title } = content;\n\n            if (isChannel) {\n                return `Channel name was changed to ${title}`;\n            }\n\n            if (isOutgoing) {\n                return `You changed group name to ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` changed group name to ${title}`}\n                </>\n            );\n        }\n        case 'messageChatDeleteMember': {\n            if (isOutgoing) {\n                return content.user_id === UserStore.getMyId() ? (\n                    'You left the group'\n                ) : (\n                    <>\n                        {'You removed '}\n                        <MessageAuthor userId={content.user_id} openUser={openUser} />\n                    </>\n                );\n            }\n\n            return content.user_id === sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' left the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed '}\n                    <MessageAuthor userId={content.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messageChatDeletePhoto': {\n            if (isChannel) {\n                return 'Channel photo removed';\n            }\n\n            if (isOutgoing) {\n                return 'You removed group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed group photo'}\n                </>\n            );\n        }\n        case 'messageChatJoinByLink': {\n            if (isOutgoing) {\n                return 'You joined the group via invite link';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group via invite link'}\n                </>\n            );\n        }\n        case 'messageChatSetTtl': {\n            const { ttl } = content;\n            const ttlString = getTTLString(ttl);\n\n            if (ttl <= 0) {\n                if (isOutgoing) {\n                    return 'You disabled the self-destruct timer';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' disabled the self-destruct timer'}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You set the self-destruct timer to ${ttlString}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` set the self-destruct timer to ${ttlString}`}\n                </>\n            );\n        }\n        case 'messageChatUpgradeFrom': {\n            return 'The group was upgraded to a supergroup';\n        }\n        case 'messageChatUpgradeTo': {\n            return 'Group migrated to a supergroup';\n        }\n        case 'messageContactRegistered': {\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' just joined Telegram'}\n                </>\n            );\n        }\n        case 'messageCustomServiceAction': {\n            return content.text;\n        }\n        case 'messageGameScore': {\n            const messageGame = MessageStore.get(message.chat_id, content.game_message_id);\n            if (\n                messageGame &&\n                messageGame.content &&\n                messageGame.content['@type'] === 'messageGame' &&\n                messageGame.content.game\n            ) {\n                const { game } = messageGame.content;\n\n                if (isOutgoing) {\n                    return `You scored ${content.score} in ${game.title}`;\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={messageGame.sender_user_id} openUser={openUser} />\n                        {` scored ${content.score} in ${game.title}`}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You scored ${content.score}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` scored ${content.score}`}\n                </>\n            );\n        }\n        case 'messagePassportDataReceived': {\n            return 'Telegram Passport data received';\n        }\n        case 'messagePassportDataSent': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const passportElementTypes = content.types\n                .map(x => getPassportElementTypeString(x))\n                .reduce((accumulator, current) => {\n                    return accumulator === null ? [current] : [...accumulator, ', ', current];\n                }, null);\n\n            return (\n                <>\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                    {' received the following documents: '}\n                    {passportElementTypes}\n                </>\n            );\n        }\n        case 'messagePaymentSuccessful': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const messageInvoice = MessageStore.get(message.chat_id, content.invoice_message_id);\n            if (\n                messageInvoice &&\n                messageInvoice.content &&\n                messageInvoice.content['@type'] === 'messageInvoice' &&\n                messageInvoice.content.invoice\n            ) {\n                const { invoice } = messageInvoice.content;\n\n                return (\n                    <>\n                        {`You have just successfully transferred ${Currency.getString(\n                            content.total_amount,\n                            content.currency\n                        )} to `}\n                        <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                        {` for ${invoice.title}`}\n                    </>\n                );\n            }\n\n            return (\n                <>\n                    {`You have just successfully transferred ${Currency.getString(\n                        content.total_amount,\n                        content.currency\n                    )} to `}\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return 'Payment successful';\n        }\n        case 'messagePinMessage': {\n            const author = getMessageAuthor(message, openUser);\n            const pinnedMessage = MessageStore.get(message.chat_id, content.message_id);\n            if (!pinnedMessage || !pinnedMessage.content) {\n                return (\n                    <>\n                        {author}\n                        {' pinned a message'}\n                    </>\n                );\n            }\n\n            let pinnedContent = ' pinned a message';\n            if (isServiceMessage(pinnedMessage)) {\n                pinnedContent = ' pinned a service message';\n            } else {\n                switch (pinnedMessage.content['@type']) {\n                    case 'messageAnimation': {\n                        pinnedContent = ' pinned a GIF';\n                        break;\n                    }\n                    case 'messageAudio': {\n                        pinnedContent = ' pinned a track';\n                        break;\n                    }\n                    case 'messageCall': {\n                        pinnedContent = ' pinned a call';\n                        break;\n                    }\n                    case 'messageContact': {\n                        pinnedContent = ' pinned a contact';\n                        break;\n                    }\n                    case 'messageDocument': {\n                        pinnedContent = ' pinned a file';\n                        break;\n                    }\n                    case 'messageExpiredPhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messageExpiredVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageGame': {\n                        pinnedContent = ' pinned a game';\n                        break;\n                    }\n                    case 'messageInvoice': {\n                        pinnedContent = ' pinned an invoice';\n                        break;\n                    }\n                    case 'messageLocation': {\n                        pinnedContent = ' pinned a map';\n                        break;\n                    }\n                    case 'messagePhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messagePoll': {\n                        pinnedContent = ' pinned a poll';\n                        break;\n                    }\n                    case 'messageSticker': {\n                        pinnedContent = ' pinned a sticker';\n                        break;\n                    }\n                    case 'messageText': {\n                        const maxLength = 16;\n                        const text = pinnedMessage.content.text.text;\n                        if (text.length <= maxLength) {\n                            pinnedContent = ` pinned ${text}`;\n                        } else {\n                            pinnedContent = ` pinned ${text.substring(0, maxLength)}...`;\n                        }\n\n                        break;\n                    }\n                    case 'messageUnsupported': {\n                        pinnedContent = ' pinned unsupported message';\n                        break;\n                    }\n                    case 'messageVenue': {\n                        pinnedContent = ' pinned a venue';\n                        break;\n                    }\n                    case 'messageVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageVideoNote': {\n                        pinnedContent = ' pinned a video message';\n                        break;\n                    }\n                    case 'messageVoiceNote': {\n                        pinnedContent = ' pinned a voice message';\n                        break;\n                    }\n                }\n            }\n\n            return (\n                <>\n                    {author}\n                    {pinnedContent}\n                </>\n            );\n        }\n        case 'messageScreenshotTaken': {\n            if (isOutgoing) {\n                return 'You took a screenshot!';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' took a screenshot!'}\n                </>\n            );\n        }\n        case 'messageSupergroupChatCreate': {\n            const { title } = content;\n\n            if (isChannel) {\n                return 'Channel created';\n            }\n\n            if (isOutgoing) {\n                return `You created group ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group ${title}`}\n                </>\n            );\n        }\n        case 'messageUnsupported': {\n            return 'Unsupported message';\n        }\n        case 'messageWebsiteConnected': {\n            return `You allowed this bot to message you when you logged in on ${content.domain_name}.`;\n        }\n    }\n\n    return `[${message.content['@type']}]`;\n}\n\nexport { isServiceMessage, getServiceMessageContent };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport Audio from '../Components/Message/Media/Audio';\nimport Animation from '../Components/Message/Media/Animation';\nimport Contact from '../Components/Message/Media/Contact';\nimport Document from '../Components/Message/Media/Document';\nimport Game from '../Components/Message/Media/Game';\nimport Location from '../Components/Message/Media/Location';\nimport Photo from '../Components/Message/Media/Photo';\nimport Poll from '../Components/Message/Media/Poll';\nimport Sticker from '../Components/Message/Media/Sticker';\nimport Venue from '../Components/Message/Media/Venue';\nimport Video from '../Components/Message/Media/Video';\nimport VideoNote from '../Components/Message/Media/VideoNote';\nimport VoiceNote from '../Components/Message/Media/VoiceNote';\nimport { getChatTitle } from './Chat';\nimport { openUser } from './../Actions/Client';\nimport { getPhotoSize, getSize } from './Common';\nimport { download, saveOrDownload } from './File';\nimport { getAudioTitle } from './Media';\nimport { getServiceMessageContent } from './ServiceMessage';\nimport { getUserFullName } from './User';\nimport { LOCATION_HEIGHT, LOCATION_SCALE, LOCATION_WIDTH, LOCATION_ZOOM } from '../Constants';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getAuthor(message) {\n    if (!message) return null;\n\n    const { forward_info } = message;\n\n    if (forward_info) {\n        switch (forward_info['@type']) {\n            case 'messageForwardedFromUser': {\n                if (forward_info.sender_user_id > 0) {\n                    const user = UserStore.get(forward_info.sender_user_id);\n                    if (user) {\n                        return getUserFullName(user);\n                    }\n                }\n                break;\n            }\n            case 'messageForwardedPost': {\n                const chat = ChatStore.get(forward_info.chat_id);\n                if (chat) {\n                    return chat.title;\n                }\n                break;\n            }\n        }\n    }\n\n    return getTitle(message);\n}\n\nfunction getTitle(message) {\n    if (!message) return null;\n\n    const { sender_user_id, chat_id } = message;\n\n    if (sender_user_id) {\n        const user = UserStore.get(sender_user_id);\n        if (user) {\n            return getUserFullName(user);\n        }\n    }\n\n    if (chat_id) {\n        const chat = ChatStore.get(chat_id);\n        if (chat) {\n            return chat.title;\n        }\n    }\n\n    return null;\n}\n\nfunction substring(text, start, end) {\n    if (start < 0) start = 0;\n    if (start > text.length - 1) start = text.length - 1;\n    if (end < start) end = start;\n    if (end > text.length) end = text.length;\n\n    return text.substring(start, end);\n}\n\nfunction stopPropagation(event) {\n    event.stopPropagation();\n}\n\nfunction getFormattedText(text) {\n    if (text['@type'] !== 'formattedText') return null;\n    if (!text.text) return null;\n    if (!text.entities) return text.text;\n\n    let result = [];\n    let index = 0;\n    for (let i = 0; i < text.entities.length; i++) {\n        let beforeEntityText = substring(text.text, index, text.entities[i].offset);\n        if (beforeEntityText) {\n            result.push(beforeEntityText);\n        }\n\n        let entityText = substring(\n            text.text,\n            text.entities[i].offset,\n            text.entities[i].offset + text.entities[i].length\n        );\n        switch (text.entities[i].type['@type']) {\n            case 'textEntityTypeUrl': {\n                let url = entityText.startsWith('http') ? entityText : 'http://' + entityText;\n                let decodedUrl;\n                try {\n                    decodedUrl = decodeURI(entityText);\n                } catch (error) {\n                    console.error('uri: ' + entityText + '\\n' + error);\n                    decodedUrl = entityText;\n                }\n\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {decodedUrl}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeTextUrl': {\n                let url = text.entities[i].type.url.startsWith('http')\n                    ? text.entities[i].type.url\n                    : 'http://' + text.entities[i].type.url;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeBold':\n                result.push(<strong key={text.entities[i].offset}>{entityText}</strong>);\n                break;\n            case 'textEntityTypeItalic':\n                result.push(<em key={text.entities[i].offset}>{entityText}</em>);\n                break;\n            case 'textEntityTypeCode':\n                result.push(<code key={text.entities[i].offset}>{entityText}</code>);\n                break;\n            case 'textEntityTypePre':\n                result.push(\n                    <pre key={text.entities[i].offset}>\n                        <code>{entityText}</code>\n                    </pre>\n                );\n                break;\n            case 'textEntityTypeMention':\n                result.push(\n                    <a key={text.entities[i].offset} onClick={stopPropagation} href={`#/im?p=${entityText}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeMentionName':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`#/im?p=u${text.entities[i].type.user_id}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeHashtag':\n                let hashtag = entityText.length > 0 && entityText[0] === '#' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://search_hashtag?hashtag=${hashtag}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeEmailAddress':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`mailto:${entityText}`}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeBotCommand':\n                let command = entityText.length > 0 && entityText[0] === '/' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://bot_command?command=${command}&bot=`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            default:\n                result.push(entityText);\n                break;\n        }\n\n        index += beforeEntityText.length + entityText.length;\n    }\n\n    if (index < text.text.length) {\n        let afterEntityText = text.text.substring(index);\n        if (afterEntityText) {\n            result.push(afterEntityText);\n        }\n    }\n\n    return result;\n}\n\nfunction getText(message) {\n    if (!message) return null;\n\n    let text = [];\n\n    const { content } = message;\n\n    if (\n        content &&\n        content['@type'] === 'messageText' &&\n        content.text &&\n        content.text['@type'] === 'formattedText' &&\n        content.text.text\n    ) {\n        text = getFormattedText(content.text);\n    } else {\n        //text.push('[' + message.content['@type'] + ']');//JSON.stringify(x);\n        if (content && content.caption && content.caption['@type'] === 'formattedText' && content.caption.text) {\n            text.push('\\n');\n            let formattedText = getFormattedText(content.caption);\n            if (formattedText) {\n                text = text.concat(formattedText);\n            }\n        }\n    }\n\n    return text;\n}\n\nfunction getWebPage(message) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    return message.content.web_page;\n}\n\nfunction getDate(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    let date = new Date(message.date * 1000);\n\n    return dateFormat(date, 'H:MM'); //date.toDateString();\n}\n\nfunction getDateHint(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    const date = new Date(message.date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy'); //date.toDateString();\n}\n\nfunction getMedia(message, openMedia) {\n    if (!message) return null;\n\n    const { chat_id, id, content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation':\n            return <Animation chatId={chat_id} messageId={id} animation={content.animation} openMedia={openMedia} />;\n        case 'messageAudio':\n            return <Audio chatId={chat_id} messageId={id} audio={content.audio} openMedia={openMedia} />;\n        case 'messageContact':\n            return <Contact chatId={chat_id} messageId={id} contact={content.contact} openMedia={openMedia} />;\n        case 'messageDocument':\n            return <Document chatId={chat_id} messageId={id} document={content.document} openMedia={openMedia} />;\n        case 'messageGame':\n            return <Game chatId={chat_id} messageId={id} game={content.game} openMedia={openMedia} />;\n        case 'messageLocation':\n            return <Location chatId={chat_id} messageId={id} location={content.location} openMedia={openMedia} />;\n        case 'messagePhoto':\n            return <Photo chatId={chat_id} messageId={id} photo={content.photo} openMedia={openMedia} />;\n        case 'messagePoll':\n            return <Poll chatId={chat_id} messageId={id} poll={content.poll} openMedia={openMedia} />;\n        case 'messageSticker':\n            return <Sticker chatId={chat_id} messageId={id} sticker={content.sticker} openMedia={openMedia} />;\n        case 'messageText':\n            return null;\n        case 'messageVenue':\n            return <Venue chatId={chat_id} messageId={id} venue={content.venue} openMedia={openMedia} />;\n        case 'messageVideo':\n            return <Video chatId={chat_id} messageId={id} video={content.video} openMedia={openMedia} />;\n        case 'messageVideoNote':\n            return <VideoNote chatId={chat_id} messageId={id} videoNote={content.video_note} openMedia={openMedia} />;\n        case 'messageVoiceNote':\n            return <VoiceNote chatId={chat_id} messageId={id} voiceNote={content.voice_note} openMedia={openMedia} />;\n        default:\n            return '[' + content['@type'] + ']';\n    }\n}\n\nfunction isForwardOriginHidden(forwardInfo) {\n    if (!forwardInfo) return false;\n\n    const { origin } = forwardInfo;\n    if (!origin) return false;\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            return false;\n        }\n        case 'messageForwardOriginHiddenUser': {\n            return true;\n        }\n        case 'messageForwardOriginChannel': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction getForwardTitle(forwardInfo, t = key => key) {\n    if (!forwardInfo) return '';\n\n    const { origin } = forwardInfo;\n    if (!origin) return '';\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            const { sender_user_id } = origin;\n\n            const user = UserStore.get(sender_user_id);\n            return getUserFullName(user);\n        }\n        case 'messageForwardOriginHiddenUser': {\n            const { sender_name } = origin;\n\n            return sender_name;\n        }\n        case 'messageForwardOriginChannel': {\n            const { chat_id, author_signature } = origin;\n\n            return getChatTitle(chat_id, false, t) + (author_signature ? ` (${author_signature})` : '');\n        }\n    }\n\n    return '';\n}\n\nfunction getUnread(message) {\n    if (!message) return false;\n    if (!message.chat_id) return false;\n    if (!message.is_outgoing) return false;\n\n    let chat = ChatStore.get(message.chat_id);\n    if (!chat) return false;\n\n    return chat.last_read_outbox_message_id < message.id;\n}\n\nfunction getSenderUserId(message) {\n    if (!message) return null;\n\n    return message.sender_user_id;\n}\n\nfunction filterMessages(result, history) {\n    if (result.messages.length === 0) return;\n    if (history.length === 0) return;\n\n    const map = history.reduce(function(accumulator, current) {\n        accumulator.set(current.id, current.id);\n        return accumulator;\n    }, new Map());\n\n    result.messages = result.messages.filter(x => !map.has(x.id));\n}\n\nfunction getContent(message, t = key => key) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    let caption = '';\n    if (content.caption && content.caption.text) {\n        caption = `, ${content.caption.text}`;\n    }\n\n    if (message.ttl > 0) {\n        return getServiceMessageContent(message);\n    }\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return t('AttachGif') + caption;\n        }\n        case 'messageAudio': {\n            return t('AttachMusic') + caption;\n        }\n        case 'messageBasicGroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCall': {\n            return t('Call') + caption;\n        }\n        case 'messageChatAddMembers': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangeTitle': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeleteMember': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeletePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatJoinByLink': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatSetTtl': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeFrom': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeTo': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageContact': {\n            return t('AttachContact') + caption;\n        }\n        case 'messageContactRegistered': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCustomServiceAction': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageDocument': {\n            return t('AttachDocument') + caption;\n        }\n        case 'messageExpiredPhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messageExpiredVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageGame': {\n            return t('AttachGame') + caption;\n        }\n        case 'messageGameScore': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageInvoice': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageLocation': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messagePassportDataReceived': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePassportDataSent': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessful': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messagePoll': {\n            const { poll } = content;\n\n            return ' ' + (poll.question || t('Poll')) + caption;\n        }\n        case 'messagePinMessage': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageScreenshotTaken': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            let emoji = '';\n            if (sticker && sticker.emoji) {\n                emoji = sticker.emoji;\n            }\n\n            return t('AttachSticker') + (emoji ? ` ${emoji}` : '') + caption;\n        }\n        case 'messageSupergroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageText': {\n            return content.text.text + caption;\n        }\n        case 'messageUnsupported': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageVenue': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messageVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageVideoNote': {\n            return t('AttachRound') + caption;\n        }\n        case 'messageVoiceNote': {\n            return t('AttachAudio') + caption;\n        }\n        case 'messageWebsiteConnected': {\n            return getServiceMessageContent(message);\n        }\n        default: {\n            return t('UnsupportedAttachment');\n        }\n    }\n}\n\nfunction isMediaContent(content) {\n    if (!content) return false;\n\n    return content['@type'] === 'messagePhoto';\n}\n\nfunction getLocationId(location) {\n    if (!location) return null;\n\n    const { longitude, latitude } = location;\n    return `loc=${latitude},${longitude}&size=${LOCATION_WIDTH},${LOCATION_HEIGHT}&scale=${LOCATION_SCALE}&zoom=${LOCATION_ZOOM}`;\n}\n\nfunction isVideoMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideo': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.video);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isLottieMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (!web_page) return false;\n\n            const { document } = web_page;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isAnimationMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.animation);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isContentOpened(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return true;\n\n    const { content } = message;\n    if (!content) return true;\n\n    switch (content['@type']) {\n        case 'messageVoiceNote': {\n            return content.is_listened;\n        }\n        case 'messageVideoNote': {\n            return content.is_viewed;\n        }\n        default: {\n            return true;\n        }\n    }\n}\n\nfunction getMediaTitle(message) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return getAudioTitle(audio);\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return getAudioTitle(audio);\n                }\n                break;\n            }\n        }\n    }\n\n    return getAuthor(message);\n}\n\nfunction hasAudio(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction hasVideoNote(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { video_note } = web_page;\n                if (video_note) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction getSearchMessagesFilter(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return {\n                    '@type': 'searchMessagesFilterAudio'\n                };\n            }\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                return {\n                    '@type': 'searchMessagesFilterVoiceNote'\n                };\n            }\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return null;\n\n                return {\n                    '@type': 'searchMessagesFilterVideoNote'\n                };\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio, voice_note, video_note } = web_page;\n                if (audio) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterAudio'\n                    };\n                }\n\n                if (voice_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVoiceNote'\n                    };\n                }\n\n                if (video_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVideoNote'\n                    };\n                }\n                break;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction openAnimation(animation, message, fileCancel) {\n    if (!animation) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    // download file at loadMediaViewerContent instead\n    // download(file, message, FileStore.updateAnimationBlob(chat_id, id, file.id));\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openAudio(audio, message, fileCancel) {\n    if (!audio) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateAudioBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openChatPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openContact(contact, message, fileCancel) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    openUser(contact.userId);\n}\n\nfunction openDocument(document, message, fileCancel) {\n    if (!document) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    if (isLottieMessage(chat_id, id)) {\n        TdLibController.send({\n            '@type': 'openMessageContent',\n            chat_id: chat_id,\n            message_id: id\n        });\n\n        ApplicationStore.setMediaViewerContent({\n            chatId: chat_id,\n            messageId: id\n        });\n    } else {\n        saveOrDownload(file, document.file_name, message);\n    }\n}\n\nfunction openGame(game, message, fileCancel) {\n    if (!game) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const { animation } = game;\n    if (animation) {\n        let { animation: file } = animation;\n        if (!file) return;\n\n        file = FileStore.get(file.id) || file;\n        if (fileCancel && file.local.is_downloading_active) {\n            FileStore.cancelGetRemoteFile(file.id, message);\n            return;\n        } else if (fileCancel && file.remote.is_uploading_active) {\n            FileStore.cancelUploadFile(file.id, message);\n            return;\n        }\n\n        download(file, message, () => FileStore.updateAnimationBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nasync function openSticker(sticker, message, fileCancel) {\n    if (!sticker) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    const { set_id } = sticker;\n    if (!set_id) return;\n\n    const stickerSet = await TdLibController.send({\n        '@type': 'getStickerSet',\n        set_id\n    });\n\n    if (!stickerSet) return;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateStickerSet',\n        stickerSet\n    });\n}\n\nfunction openVideo(video, message, fileCancel) {\n    if (!video) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVideoNote(videoNote, message, fileCancel) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updateVideoNoteBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVoiceNote(voiceNote, message, fileCancel) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateVoiceNoteBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openMedia(chatId, messageId, fileCancel = true) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                openAnimation(animation, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                openAudio(audio, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openChatPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageContact': {\n            const { contact } = content;\n            if (contact) {\n                openContact(contact, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                openDocument(document, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (game) {\n                openGame(game, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (sticker) {\n                openSticker(sticker, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    openAnimation(animation, message, fileCancel);\n                }\n\n                if (audio) {\n                    openAudio(audio, message, fileCancel);\n                }\n\n                if (document) {\n                    openDocument(document, message, fileCancel);\n                }\n\n                if (sticker) {\n                    openSticker(sticker, message, fileCancel);\n                }\n\n                if (video) {\n                    openVideo(video, message, fileCancel);\n                }\n\n                if (video_note) {\n                    openVideoNote(video_note, message, fileCancel);\n                }\n\n                if (voice_note) {\n                    openVoiceNote(voice_note, message, fileCancel);\n                }\n\n                if (photo) {\n                    openPhoto(photo, message, fileCancel);\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                openVideo(video, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                openVideoNote(video_note, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                openVoiceNote(voice_note, message, fileCancel);\n            }\n\n            break;\n        }\n    }\n}\n\nfunction isDeletedMessage(message) {\n    return message && message['@type'] === 'deletedMessage';\n}\n\nfunction getReplyPhotoSize(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (!animation) return null;\n\n            const { thumbnail } = animation;\n            return thumbnail || null;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (!audio) return null;\n\n            const { album_cover_thumbnail } = audio;\n            return album_cover_thumbnail || null;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return null;\n\n            const { thumbnail } = document;\n            return thumbnail || null;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (!game) return null;\n\n            const { animation, photo } = game;\n            if (animation) {\n                const { thumbnail } = animation;\n                if (thumbnail) {\n                    return thumbnail;\n                }\n            }\n\n            if (photo) {\n                return getPhotoSize(photo.sizes);\n            }\n\n            return null;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (!sticker) return null;\n\n            const { thumbnail } = sticker;\n            return thumbnail || null;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n                if (photo) {\n                    return getPhotoSize(photo.sizes);\n                }\n                if (animation) {\n                    const { thumbnail } = animation;\n                    return thumbnail || null;\n                }\n                if (audio) {\n                    const { album_cover_thumbnail } = audio;\n                    return album_cover_thumbnail || null;\n                }\n                if (document) {\n                    const { thumbnail } = document;\n                    return thumbnail || null;\n                }\n                if (sticker) {\n                    const { thumbnail } = sticker;\n                    return thumbnail || null;\n                }\n                if (video) {\n                    const { thumbnail } = video;\n                    return thumbnail || null;\n                }\n                if (video_note) {\n                    const { thumbnail } = video_note;\n                    return thumbnail || null;\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (!video) return null;\n\n            const { thumbnail } = video;\n            return thumbnail || null;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (!video_note) return null;\n\n            const { thumbnail } = video_note;\n            return thumbnail || null;\n        }\n    }\n\n    return null;\n}\n\nexport {\n    getAuthor,\n    getTitle,\n    getText,\n    getFormattedText,\n    getWebPage,\n    getContent,\n    getDate,\n    getDateHint,\n    getMedia,\n    isForwardOriginHidden,\n    getForwardTitle,\n    getUnread,\n    getSenderUserId,\n    filterMessages,\n    isMediaContent,\n    isDeletedMessage,\n    isVideoMessage,\n    isAnimationMessage,\n    isLottieMessage,\n    getLocationId,\n    isContentOpened,\n    getMediaTitle,\n    hasAudio,\n    hasVideoNote,\n    getSearchMessagesFilter,\n    openMedia,\n    getReplyPhotoSize\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass BasicGroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateBasicGroup': {\n                this.set(update.basic_group);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateBasicGroupFullInfo':\n                this.setFullInfo(update.basic_group_id, update.basic_group_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(groupId) {\n        return this.items.get(groupId);\n    }\n\n    set(group) {\n        this.items.set(group.id, group);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new BasicGroupStore();\nwindow.basicgroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport PollIcon from '@material-ui/icons/Poll';\nimport { canSendDocuments, canSendPhotos, canSendPolls, isPrivateChat } from '../../Utils/Chat';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        margin: '8px 0'\n    }\n};\n\nclass AttachButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleAttachPhoto = () => {\n        this.handleMenuClose();\n\n        const { onAttachPhoto } = this.props;\n        if (!onAttachPhoto) return;\n\n        setTimeout(() => onAttachPhoto(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachDocument = () => {\n        this.handleMenuClose();\n\n        const { onAttachDocument } = this.props;\n        if (!onAttachDocument) return;\n\n        setTimeout(() => onAttachDocument(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachPoll = () => {\n        this.handleMenuClose();\n\n        const { onAttachPoll } = this.props;\n        if (!onAttachPoll) return;\n\n        onAttachPoll();\n    };\n\n    render() {\n        const { classes, t, chatId } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton}\n                    aria-label='Attach'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <AttachFileIcon className='inputbox-attach-icon' />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleMenuClose}>\n                    <MenuItem onClick={this.handleAttachPhoto} disabled={!canSendPhotos(chatId)}>\n                        <ListItemIcon>\n                            <PhotoIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachPhoto')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleAttachDocument} disabled={!canSendDocuments(chatId)}>\n                        <ListItemIcon>\n                            <InsertDriveFileIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachDocument')} />\n                    </MenuItem>\n                    {!isPrivateChat(chatId) && (\n                        <MenuItem onClick={this.handleAttachPoll} disabled={!canSendPolls(chatId)}>\n                            <ListItemIcon>\n                                <PollIcon />\n                            </ListItemIcon>\n                            <ListItemText inset primary={t('Poll')} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </>\n        );\n    }\n}\n\nAttachButton.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onAttachDocument: PropTypes.func.isRequired,\n    onAttachPhoto: PropTypes.func.isRequired,\n    onAttachPoll: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(AttachButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport function focusNode(node, toEnd = false) {\n    if (!node) return;\n\n    if (toEnd && node.childNodes && node.childNodes.length > 0) {\n        const lastNode = node.childNodes[node.childNodes.length - 1];\n        const range = document.createRange();\n        range.setStart(lastNode, lastNode.length);\n        range.collapse(true);\n\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        node.scrollTop = node.scrollHeight;\n    }\n\n    node.focus();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst keys = {\n    backspace: 8,\n    shift: 16,\n    ctrl: 17,\n    alt: 18,\n    delete: 46,\n    cmd: 91,\n    leftArrow: 37,\n    upArrow: 38,\n    rightArrow: 39,\n    downArrow: 40\n};\n\nexport const utils = {\n    special: {},\n    navigational: {},\n    isSpecial(e) {\n        return typeof this.special[e.keyCode] !== 'undefined';\n    },\n    isNavigational(e) {\n        return typeof this.navigational[e.keyCode] !== 'undefined';\n    }\n};\n\nutils.special[keys['backspace']] = true;\nutils.special[keys['shift']] = true;\nutils.special[keys['ctrl']] = true;\nutils.special[keys['alt']] = true;\nutils.special[keys['delete']] = true;\n\nutils.navigational[keys['upArrow']] = true;\nutils.navigational[keys['downArrow']] = true;\nutils.navigational[keys['leftArrow']] = true;\nutils.navigational[keys['rightArrow']] = true;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { borderStyle } from '../Theme';\nimport { POLL_OPTION_HINT_LENGTH, POLL_OPTION_LENGTH, POLL_OPTION_MAX_LENGTH } from '../../Constants';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollOption.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    counterRoot: {\n        position: 'absolute',\n        right: 24,\n        bottom: 6,\n        minWidth: 28,\n        userSelect: 'none'\n    },\n    ...borderStyle(theme)\n});\n\nclass CreatePollOption extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.optionTextRef = React.createRef();\n\n        this.state = {\n            remainLength: POLL_OPTION_MAX_LENGTH\n        };\n    }\n\n    getText = () => {\n        return this.optionTextRef.current.innerText;\n    };\n\n    focus = (toEnd = false) => {\n        const node = this.optionTextRef.current;\n\n        focusNode(node, toEnd);\n    };\n\n    handleDelete = () => {\n        const { option, onDelete } = this.props;\n        if (!option) return;\n        if (!onDelete) return;\n\n        onDelete(option.id);\n    };\n\n    handleInput = event => {\n        const { option } = this.props;\n\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const length = node.dataset.length;\n        const maxLength = node.dataset.maxLength;\n        const text = this.getText();\n\n        this.setState({\n            remainLength: length - text.length\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollOption',\n            id: option.id,\n            text\n        });\n    };\n\n    handleKeyDown = event => {\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = this.getText();\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Backspace': {\n                const text = this.getText();\n                if (!text) {\n                    const { option, onDelete } = this.props;\n                    if (onDelete) {\n                        onDelete(option.id, true);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'Enter': {\n                const { option, onFocusNext } = this.props;\n                if (option && onFocusNext) {\n                    onFocusNext(option.id);\n                }\n\n                event.preventDefault();\n                return false;\n            }\n            case 'ArrowUp': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const firstChild = node.childNodes && node.childNodes.length > 0 ? node.childNodes[0] : null;\n\n                if (!firstChild || (selection.anchorNode === firstChild && !selection.anchorOffset)) {\n                    const { option, onFocusPrev } = this.props;\n                    if (onFocusPrev) {\n                        onFocusPrev(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    const { option, onFocusNext } = this.props;\n                    if (onFocusNext) {\n                        onFocusNext(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = this.getText();\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        pasteText = pasteText.replace('\\r\\n', '\\n').replace('\\n', ' ');\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength } = this.state;\n\n        return (\n            <div className='create-poll-option'>\n                <div\n                    ref={this.optionTextRef}\n                    id='create-poll-option-text'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Option')}\n                    data-length={POLL_OPTION_LENGTH}\n                    data-max-length={POLL_OPTION_MAX_LENGTH}\n                    onInput={this.handleInput}\n                    onKeyDown={this.handleKeyDown}\n                    onPaste={this.handlePaste}\n                />\n                <div className='create-poll-option-delete-button'>\n                    <IconButton className={classes.iconButton} onClick={this.handleDelete}>\n                        <CloseIcon fontSize='small' />\n                    </IconButton>\n                </div>\n                <div className={classNames('create-poll-option-bottom-border', { [classes.borderColor]: true })} />\n                {remainLength <= POLL_OPTION_LENGTH - POLL_OPTION_HINT_LENGTH && (\n                    <Typography\n                        align='center'\n                        className={classes.counterRoot}\n                        color={remainLength >= 0 ? 'textSecondary' : 'error'}\n                        variant='subtitle1'>\n                        {remainLength}\n                    </Typography>\n                )}\n            </div>\n        );\n    }\n}\n\nCreatePollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onFocusPrev: PropTypes.func.isRequired,\n    onFocusNext: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { POLL_OPTION_LENGTH, POLL_QUESTION_LENGTH } from '../Constants';\n\nexport function isValidPoll(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (!isValidQuestion(question)) return false;\n\n    const noneEmptyOptions = options.filter(x => Boolean(x.text));\n    if (noneEmptyOptions.length <= 1) return false;\n\n    return noneEmptyOptions.every(isValidOption);\n}\n\nfunction isValidQuestion(question) {\n    if (!question) return false;\n\n    return question.length <= POLL_QUESTION_LENGTH;\n}\n\nfunction isValidOption(option) {\n    if (!option) return false;\n    if (!option.text) return false;\n\n    return option.text.length <= POLL_OPTION_LENGTH;\n}\n\nexport function hasPollData(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (question) return true;\n\n    return options.some(x => Boolean(x.text));\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport { isValidPoll } from '../Utils/Poll';\n\nclass PollStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.poll = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {};\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateNewPoll': {\n                this.set({\n                    id: Date.now(),\n                    question: '',\n                    options: []\n                });\n\n                this.emit('clientUpdateNewPoll', update);\n                break;\n            }\n            case 'clientUpdatePollQuestion': {\n                const { question } = update;\n\n                this.assign(this.poll, { question });\n\n                this.emit('clientUpdatePollQuestion', update);\n                break;\n            }\n            case 'clientUpdatePollOption': {\n                const { id, text } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.map(x => (x.id === id ? { ...x, text } : { ...x })) });\n\n                this.emit('clientUpdatePollOption', update);\n                break;\n            }\n            case 'clientUpdateNewPollOption': {\n                const { option } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: [...options, option] });\n                this.emit('clientUpdateNewPollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePollOption': {\n                const { id } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.filter(x => x.id !== id) });\n                this.emit('clientUpdateDeletePollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePoll': {\n                this.set(null);\n\n                this.emit('clientUpdateDeletePoll', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    set(poll) {\n        this.poll = poll;\n    }\n\n    getInputMessagePoll() {\n        if (!this.poll) return null;\n        if (!isValidPoll(this.poll)) return null;\n        const { question, options } = this.poll;\n\n        return {\n            '@type': 'inputMessagePoll',\n            question,\n            options: options.filter(x => Boolean(x.text)).map(x => x.text)\n        };\n    }\n}\n\nconst store = new PollStore();\nwindow.poll = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport CreatePollOption from './CreatePollOption';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { hasPollData, isValidPoll } from '../../Utils/Poll';\nimport {\n    POLL_OPTIONS_MAX_COUNT,\n    POLL_QUESTION_HINT_LENGTH,\n    POLL_QUESTION_LENGTH,\n    POLL_QUESTION_MAX_LENGTH\n} from '../../Constants';\nimport PollStore from '../../Stores/PollStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollDialog.css';\n\nconst styles = theme => ({\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    contentRoot: {\n        width: 300\n    },\n    dividerRoot: {\n        margin: '8px -24px'\n    },\n    listRoot: {\n        margin: '0 -24px'\n    },\n    listItem: {\n        padding: '11px 24px',\n        color: '#8e9396',\n        height: 48\n    },\n    typographyRoot: {}\n});\n\nclass CreatePollDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.questionRef = React.createRef();\n        this.optionsRefMap = new Map();\n\n        this.state = {\n            poll: null,\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH\n        };\n    }\n\n    componentDidMount() {\n        PollStore.on('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.on('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.on('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    componentWillUnmount() {\n        PollStore.removeListener('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.removeListener('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.removeListener('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    handleClientUpdateNewPoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH,\n            poll\n        });\n    };\n\n    handleClientUpdatePollQuestion = update => {\n        const { poll } = PollStore;\n\n        const node = this.questionRef.current;\n        const length = node.dataset.length;\n        const innerText = node.innerText;\n\n        this.setState({\n            remainLength: length - innerText.length,\n            poll\n        });\n    };\n\n    handleClientUpdatePoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll });\n    };\n\n    handleClientUpdateNewPollOption = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll }, () => {\n            setTimeout(() => {\n                const node = this.optionsRefMap.get(poll.options.length - 1);\n\n                node.focus(true);\n            });\n        });\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { poll } = this.state;\n\n        if (poll && !prevState.poll) {\n            setTimeout(() => {\n                focusNode(this.questionRef.current, true);\n            }, 0);\n        }\n    }\n\n    handleKeyDown = event => {\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = node.innerText;\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Enter': {\n                if (!event.shiftKey) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = node.innerText;\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    handleInput = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        //const length = node.dataset.length;\n\n        const innerText = node.innerText;\n        const innerHtml = node.innerHTML;\n\n        if (innerHtml === '<br>') {\n            node.innerText = '';\n        }\n\n        // this.setState({\n        //     remainLength: length - innerText.length\n        // });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollQuestion',\n            question: innerText\n        });\n    };\n\n    handleAddOption = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n        if (options.length >= POLL_OPTIONS_MAX_COUNT) return;\n\n        const option = {\n            id: Date.now(),\n            text: ''\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPollOption',\n            option\n        });\n    };\n\n    handleDeleteOption = (id, backspace = false) => {\n        if (backspace) {\n            this.handleDeleteByBackspace(id);\n        } else {\n            this.handleDelete(id);\n        }\n    };\n\n    handleDelete = id => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePollOption',\n            id\n        });\n    };\n\n    handleDeleteByBackspace = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n        let deleteOption = true;\n        for (let i = index; i < options.length; i++) {\n            const { text } = options[i];\n            if (text) {\n                deleteOption = false;\n                break;\n            }\n        }\n\n        if (deleteOption) {\n            this.handleDeleteOption(id);\n        }\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, true);\n            return;\n        }\n\n        prevNode.focus(true);\n    };\n\n    handleFocusPrevOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, false);\n            return;\n        }\n\n        prevNode.focus(false);\n    };\n\n    handleFocusNextOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const nextIndex = index + 1;\n\n        const nextNode = this.optionsRefMap.get(nextIndex);\n        if (!nextNode) {\n            const text = index >= 0 && index < options.length ? options[index].text : '';\n            if (options.length && !text) {\n                return;\n            }\n\n            this.handleAddOption();\n            return;\n        }\n\n        nextNode.focus(nextNode, true);\n    };\n\n    getHint = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const addCount = POLL_OPTIONS_MAX_COUNT - options.length;\n\n        if (addCount <= 0) {\n            return 'You have added the maximum number of options.';\n        }\n        if (addCount === 1) {\n            return 'You can add 1 more option.';\n        }\n\n        return `You can add ${POLL_OPTIONS_MAX_COUNT - options.length} more options.`;\n    };\n\n    handleClose = () => {\n        const { poll } = this.state;\n\n        if (hasPollData(poll)) {\n            this.setState({ confirm: true });\n        } else {\n            this.handleConfirmationDone();\n        }\n    };\n\n    handleSend = () => {\n        const { onSend } = this.props;\n\n        const inputMessagePoll = PollStore.getInputMessagePoll();\n        if (!inputMessagePoll) return;\n\n        onSend(inputMessagePoll);\n\n        this.handleConfirmationDone();\n    };\n\n    handleConfirmationClose = () => {\n        this.setState({ confirm: false });\n    };\n\n    handleConfirmationDone = () => {\n        this.handleConfirmationClose();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePoll'\n        });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength, confirm, poll } = this.state;\n        if (!poll) return null;\n\n        const options = poll ? poll.options : [];\n\n        this.optionsRefMap.clear();\n        const items = options.map((x, i) => (\n            <CreatePollOption\n                ref={el => this.optionsRefMap.set(i, el)}\n                key={x.id}\n                option={x}\n                onDelete={this.handleDeleteOption}\n                onFocusPrev={this.handleFocusPrevOption}\n                onFocusNext={this.handleFocusNextOption}\n            />\n        ));\n\n        const canAddOption = POLL_OPTIONS_MAX_COUNT - options.length > 0;\n        const hint = this.getHint();\n\n        return (\n            <>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open\n                    transitionDuration={0}\n                    onClose={this.handleClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('NewPoll')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>\n                        <div className='create-poll-dialog-question-title'>\n                            <Typography color='primary' variant='subtitle1' style={{ flexGrow: 1 }}>\n                                {t('Question')}\n                            </Typography>\n                            {remainLength <= POLL_QUESTION_LENGTH - POLL_QUESTION_HINT_LENGTH && (\n                                <Typography color={remainLength >= 0 ? 'textSecondary' : 'error'} variant='subtitle1'>\n                                    {remainLength}\n                                </Typography>\n                            )}\n                        </div>\n                        <div\n                            ref={this.questionRef}\n                            id='create-poll-dialog-question'\n                            contentEditable\n                            suppressContentEditableWarning\n                            placeholder={t('QuestionHint')}\n                            data-length={POLL_QUESTION_LENGTH}\n                            data-max-length={POLL_QUESTION_MAX_LENGTH}\n                            onPaste={this.handlePaste}\n                            onKeyDown={this.handleKeyDown}\n                            onInput={this.handleInput}\n                        />\n                        <Divider className={classes.dividerRoot} />\n                        <Typography color='primary' variant='subtitle1'>\n                            {t('PollOptions')}\n                        </Typography>\n                        <List classes={{ root: classes.listRoot }}>\n                            {items}\n                            {canAddOption && (\n                                <ListItem\n                                    selected={false}\n                                    className={classes.listItem}\n                                    button\n                                    onClick={this.handleAddOption}>\n                                    <ListItemText disableTypography primary={t('AddAnOption')} />\n                                </ListItem>\n                            )}\n                        </List>\n                        <Typography>{hint}</Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleClose}>\n                            {t('Cancel')}\n                        </Button>\n                        {isValidPoll(poll) && (\n                            <Button color='primary' onClick={this.handleSend}>\n                                {t('Send')}\n                            </Button>\n                        )}\n                    </DialogActions>\n                </Dialog>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open={confirm}\n                    transitionDuration={0}\n                    onClose={this.handleConfirmationClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('CancelPollAlertTitle')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>{t('CancelPollAlertText')}</DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleConfirmationClose}>\n                            {t('Cancel')}\n                        </Button>\n                        <Button color='primary' onClick={this.handleConfirmationDone}>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nCreatePollDialog.propTypes = {\n    onSend: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport { Picker } from 'emoji-mart';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport './EmojiPickerButton.css';\n\nconst styles = {\n    iconButton: {\n        margin: '8px 0px'\n    }\n};\n\nclass EmojiPickerButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            anchorEl: null\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateThemeChange', this.onClientUpdateChange);\n        LocalizationStore.on('clientUpdateLanguageChange', this.onClientUpdateChange);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateThemeChange', this.onClientUpdateChange);\n        LocalizationStore.removeListener('clientUpdateLanguageChange', this.onClientUpdateChange);\n    }\n\n    onClientUpdateChange = update => {\n        this.picker = null;\n    };\n\n    updateAnchorEl = anchorEl => {\n        this.setState({ anchorEl: anchorEl });\n    };\n\n    switchPopover = event => {\n        this.updateAnchorEl(this.state.anchorEl ? null : event.currentTarget);\n    };\n\n    render() {\n        const { classes, theme, t } = this.props;\n        const { anchorEl } = this.state;\n\n        const open = Boolean(anchorEl);\n\n        if (!this.picker) {\n            const i18n = {\n                search: t('Search'),\n                notfound: t('NotEmojiFound'),\n                skintext: t('ChooseDefaultSkinTone'),\n                categories: {\n                    search: t('SearchResults'),\n                    recent: t('Recent'),\n                    people: t('SmileysPeople'),\n                    nature: t('AnimalsNature'),\n                    foods: t('FoodDrink'),\n                    activity: t('Activity'),\n                    places: t('TravelPlaces'),\n                    objects: t('Objects'),\n                    symbols: t('Symbols'),\n                    flags: t('Flags'),\n                    custom: t('Custom')\n                }\n            };\n\n            this.picker = (\n                <Picker\n                    set='apple'\n                    showPreview={false}\n                    showSkinTones={false}\n                    onSelect={this.props.onSelect}\n                    color={theme.palette.primary.dark}\n                    i18n={i18n}\n                />\n            );\n        }\n\n        return (\n            <>\n                <link\n                    rel='stylesheet'\n                    type='text/css'\n                    href={theme.palette.type === 'dark' ? 'emoji-mart.dark.css' : 'emoji-mart.light.css'}\n                />\n                <IconButton className={classes.iconButton} aria-label='Emoticon' onClick={this.switchPopover}>\n                    <InsertEmoticonIcon />\n                </IconButton>\n                <Popover\n                    id='render-props-popover'\n                    open={open}\n                    anchorEl={anchorEl}\n                    onClose={() => this.updateAnchorEl(null)}\n                    anchorOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}\n                    transformOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'left'\n                    }}>\n                    {this.picker}\n                </Popover>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(EmojiPickerButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getSrc } from '../../Utils/File';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport { hasVideoNote } from '../../Utils/Message';\nimport FileStore from '../../Stores/FileStore';\nimport './ReplyTile.css';\n\nclass ReplyTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return;\n\n        const { photo } = photoSize;\n        if (!photo) return;\n\n        if (update.chatId === chatId && update.messageId === messageId && update.fileId === photo.id) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return null;\n\n        const { photo } = photoSize;\n        if (!photo) return null;\n\n        const src = getSrc(photo);\n        const isBlurred = isBlurredThumbnail(photo);\n        const isVideoNote = hasVideoNote(chatId, messageId);\n\n        return (\n            <div className='reply-tile'>\n                <img\n                    className={classNames(\n                        'reply-tile-photo',\n                        { 'reply-tile-photo-round': isVideoNote },\n                        { 'reply-tile-photo-loading': !src },\n                        { 'media-blurred': isBlurred }\n                    )}\n                    draggable={false}\n                    src={src}\n                    alt=''\n                />\n            </div>\n        );\n    }\n}\n\nReplyTile.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photoSize: PropTypes.object.isRequired\n};\n\nexport default ReplyTile;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport ReplyTile from '../Tile/ReplyTile';\nimport { getContent, getTitle, isDeletedMessage, getReplyPhotoSize } from '../../Utils/Message';\nimport { accentStyles } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './Reply.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Reply extends React.Component {\n    componentDidMount() {\n        MessageStore.on('getMessageResult', this.onGetMessageResult);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('getMessageResult', this.onGetMessageResult);\n    }\n\n    onGetMessageResult = result => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === result.chat_id && messageId === result.id) {\n            this.forceUpdate();\n        }\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    handleOpen = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n        if (isDeletedMessage(message)) return null;\n\n        openChat(chatId, messageId);\n    };\n\n    render() {\n        const { classes, t, chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        let title = !message ? null : getTitle(message);\n        let content = !message ? t('Loading') : getContent(message, t);\n        const photoSize = getReplyPhotoSize(chatId, messageId);\n\n        if (isDeletedMessage(message)) {\n            title = null;\n            content = t('DeletedMessage');\n        }\n\n        return (\n            <div className='reply' onMouseDown={this.handleOpen} onClick={this.handleClick}>\n                <div className='reply-wrapper'>\n                    <div className={classNames('reply-border', classes.accentBackgroundLight)} />\n                    {photoSize && <ReplyTile chatId={chatId} messageId={messageId} photoSize={photoSize} />}\n                    <div className='reply-content'>\n                        {title && (\n                            <div className={classNames('reply-content-title', classes.accentColorDark)}>{title}</div>\n                        )}\n                        <div className='reply-content-subtitle'>{content}</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nReply.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Reply);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport Reply from '../Message/Reply';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxHeader.css';\n\nconst styles = theme => ({\n    replyIcon: {\n        padding: 12,\n        color: theme.palette.action.active\n    },\n    closeIconButton: {\n        margin: 0\n    }\n});\n\nclass InputBoxHeader extends React.Component {\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateReply',\n            chatId: this.props.chatId,\n            messageId: 0\n        });\n    };\n\n    render() {\n        const { classes, chatId, messageId } = this.props;\n        if (!chatId) return null;\n        if (!messageId) return null;\n\n        return (\n            <div className='inputbox-header'>\n                <div className='inputbox-header-left-column'>\n                    <ReplyIcon className={classes.replyIcon} />\n                </div>\n                <div className='inputbox-header-middle-column'>\n                    <Reply chatId={chatId} messageId={messageId} />\n                </div>\n                <div className='inputbox-header-right-column'>\n                    <IconButton className={classes.closeIconButton} aria-label='Close' onClick={this.handleClose}>\n                        <CloseIcon />\n                    </IconButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nInputBoxHeader.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(InputBoxHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n    constructor(chatId) {\n        this.chatId = chatId;\n        this.lastAction = null;\n    }\n\n    setTyping(action) {\n        if (!this.chatId) return;\n\n        if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n            let now = new Date();\n            now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n            if (this.lastTypingDate && this.lastTypingDate > now) {\n                return;\n            }\n        }\n\n        this.lastAction = action;\n        this.lastTypingDate = new Date();\n\n        TdLibController.send({\n            '@type': 'sendChatAction',\n            chat_id: this.chatId,\n            action: action\n        });\n    }\n}\n\nexport default OutputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass StickerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.stickerSet = null;\n        this.hint = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateInstalledStickerSets': {\n                const { sticker_set_ids } = update;\n                if (this.stickerSet) {\n                    const { id, is_installed } = this.stickerSet;\n                    if (is_installed !== sticker_set_ids.some(x => x === id)) {\n                        this.assign(this.stickerSet, { is_installed: !is_installed });\n                    }\n                }\n\n                this.emit('updateInstalledStickerSets', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateStickerSend': {\n                this.emit('clientUpdateStickerSend', update);\n                break;\n            }\n            case 'clientUpdateStickersHint': {\n                const { hint } = update;\n\n                this.hint = hint;\n\n                this.emit('clientUpdateStickersHint', update);\n                break;\n            }\n            case 'clientUpdateStickerSet': {\n                const { stickerSet } = update;\n\n                this.stickerSet = stickerSet;\n\n                this.emit('clientUpdateStickerSet', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new StickerStore();\nwindow.sticker = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport emojiRegex from 'emoji-regex';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AttachButton from './../ColumnMiddle/AttachButton';\nimport CreatePollDialog from '../Dialog/CreatePollDialog';\nimport EmojiPickerButton from './../ColumnMiddle/EmojiPickerButton';\nimport InputBoxHeader from './InputBoxHeader';\nimport OutputTypingManager from '../../Utils/OutputTypingManager';\nimport { getSize, readImageSize } from '../../Utils/Common';\nimport { getChatDraft, getChatDraftReplyToMessageId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport { PHOTO_SIZE } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxControl.css';\n\nconst styles = theme => ({\n    iconButton: {\n        margin: '8px 0'\n    },\n    closeIconButton: {\n        margin: 0\n    },\n    ...borderStyle(theme)\n});\n\nclass InputBoxControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.attachDocumentRef = React.createRef();\n        this.attachPhotoRef = React.createRef();\n        this.newMessageRef = React.createRef();\n\n        const chatId = ApplicationStore.getChatId();\n\n        this.innerHTML = null;\n        this.state = {\n            chatId: chatId,\n            replyToMessageId: getChatDraftReplyToMessageId(chatId),\n            openPasteDialog: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.t !== t) {\n            return true;\n        }\n\n        if (nextState.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.replyToMessageId !== replyToMessageId) {\n            return true;\n        }\n\n        if (nextState.openPasteDialog !== openPasteDialog) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        //console.log('Perf componentDidMount');\n\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.on('clientUpdateReply', this.onClientUpdateReply);\n        StickerStore.on('clientUpdateStickerSend', this.onClientUpdateStickerSend);\n\n        this.setInputFocus();\n        this.setDraft();\n        this.handleInput();\n    }\n\n    componentWillUnmount() {\n        const newChatDraftMessage = this.getNewChatDraftMessage(this.state.chatId, this.state.replyToMessageId);\n        this.setChatDraftMessage(newChatDraftMessage);\n\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.removeListener('clientUpdateReply', this.onClientUpdateReply);\n        StickerStore.removeListener('clientUpdateStickerSend', this.onClientUpdateStickerSend);\n    }\n\n    onClientUpdateStickerSend = update => {\n        const { sticker: item } = update;\n        if (!item) return;\n\n        const { sticker, thumbnail, width, height } = item;\n        if (!sticker) return;\n\n        this.newMessageRef.current.innerText = null;\n        this.newMessageRef.current.textContent = null;\n        this.innerHTML = null;\n\n        const content = {\n            '@type': 'inputMessageSticker',\n            sticker: {\n                '@type': 'inputFileId',\n                id: sticker.id\n            },\n            width,\n            height\n        };\n\n        if (thumbnail){\n            const { width: thumbnailWidth, height: thumbnailHeight, photo } = thumbnail;\n\n            content.thumbnail = {\n                thumbnail: {\n                    '@type': 'inputFileId',\n                    id: photo.id\n                },\n                width: thumbnailWidth,\n                height: thumbnailHeight\n            };\n        }\n\n        this.onSendInternal(content, true, result => {});\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickersHint',\n            hint: null\n        });\n    };\n\n    onClientUpdateReply = update => {\n        const { chatId: currentChatId } = this.state;\n        const { chatId, messageId } = update;\n\n        if (currentChatId !== chatId) {\n            return;\n        }\n\n        this.setState({ replyToMessageId: messageId });\n\n        if (messageId) {\n            this.setInputFocus();\n        }\n    };\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.state;\n        if (chatId === update.nextChatId) return;\n\n        this.innerHTML = null;\n        this.setState({\n            chatId: update.nextChatId,\n            replyToMessageId: getChatDraftReplyToMessageId(update.nextChatId),\n            openPasteDialog: false\n        });\n    };\n\n    setDraft = () => {\n        const { chatId } = this.state;\n\n        const element = this.newMessageRef.current;\n\n        const draft = getChatDraft(chatId);\n        if (draft) {\n            element.innerText = draft.text;\n            this.innerHTML = draft.text;\n        } else {\n            element.innerText = null;\n            this.innerHTML = null;\n        }\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        //console.log('Perf componentDidUpdate');\n        this.setChatDraftMessage(snapshot);\n\n        if (prevState.chatId !== this.state.chatId) {\n            this.setInputFocus();\n            this.setDraft();\n            this.handleInput();\n        }\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        if (prevState.chatId === this.state.chatId) return null;\n\n        return this.getNewChatDraftMessage(prevState.chatId, prevState.replyToMessageId);\n    }\n\n    setInputFocus = () => {\n        setTimeout(() => {\n            if (this.newMessageRef.current) {\n                const element = this.newMessageRef.current;\n\n                if (element.childNodes.length > 0) {\n                    const range = document.createRange();\n                    range.setStart(element.childNodes[0], element.childNodes[0].length);\n                    range.collapse(true);\n\n                    const selection = window.getSelection();\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                }\n                element.focus();\n            }\n        }, 100);\n    };\n\n    setChatDraftMessage = chatDraftMessage => {\n        if (!chatDraftMessage) return;\n\n        const { chatId, draftMessage } = chatDraftMessage;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'setChatDraftMessage',\n            chat_id: chatId,\n            draft_message: draftMessage\n        });\n    };\n\n    getNewChatDraftMessage = (chatId, replyToMessageId) => {\n        let chat = ChatStore.get(chatId);\n        if (!chat) return;\n        const newDraft = this.getInputText();\n\n        let previousDraft = '';\n        let previousReplyToMessageId = 0;\n        const { draft_message } = chat;\n        if (draft_message && draft_message.input_message_text && draft_message.input_message_text.text) {\n            const { reply_to_message_id, input_message_text } = draft_message;\n\n            previousReplyToMessageId = reply_to_message_id;\n            if (input_message_text && input_message_text.text) {\n                previousDraft = input_message_text.text.text;\n            }\n        }\n\n        if (newDraft !== previousDraft || replyToMessageId !== previousReplyToMessageId) {\n            const draftMessage = {\n                '@type': 'draftMessage',\n                reply_to_message_id: replyToMessageId,\n                input_message_text: {\n                    '@type': 'inputMessageText',\n                    text: {\n                        '@type': 'formattedText',\n                        text: newDraft,\n                        entities: null\n                    },\n                    disable_web_page_preview: true,\n                    clear_draft: false\n                }\n            };\n\n            return { chatId: chatId, draftMessage: draftMessage };\n        }\n\n        return null;\n    };\n\n    handleSubmit = () => {\n        let text = this.getInputText();\n\n        this.newMessageRef.current.innerText = null;\n        this.newMessageRef.current.textContent = null;\n        this.innerHTML = null;\n\n        if (!text) return;\n\n        const content = {\n            '@type': 'inputMessageText',\n            text: {\n                '@type': 'formattedText',\n                text: text,\n                entities: null\n            },\n            disable_web_page_preview: false,\n            clear_draft: true\n        };\n\n        this.onSendInternal(content, false,result => {});\n    };\n\n    handleAttachPoll = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPoll'\n        });\n    };\n\n    handleAttachPhoto = () => {\n        if (!this.attachPhotoRef) return;\n\n        this.attachPhotoRef.current.click();\n    };\n\n    handleAttachPhotoComplete = () => {\n        let files = this.attachPhotoRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            readImageSize(file, result => {\n                this.handleSendPhoto(result);\n            });\n        });\n\n        this.attachPhotoRef.current.value = '';\n    };\n\n    handleAttachDocument = () => {\n        if (!this.attachDocumentRef) return;\n\n        this.attachDocumentRef.current.click();\n    };\n\n    handleAttachDocumentComplete = () => {\n        let files = this.attachDocumentRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.attachDocumentRef.current.value = '';\n    };\n\n    getInputText() {\n        let innerText = this.newMessageRef.current.innerText;\n        let innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        return innerText;\n    }\n\n    handleKeyUp = () => {\n        const { chatId } = this.state;\n\n        if (isMeChat(chatId)) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        if (!innerText) return;\n\n        const typingManager = chat.OutputTypingManager || (chat.OutputTypingManager = new OutputTypingManager(chat.id));\n\n        typingManager.setTyping({ '@type': 'chatActionTyping' });\n    };\n\n    handleKeyDown = e => {\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n        this.innerHTML = innerHTML;\n\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            this.handleSubmit();\n        }\n    };\n\n    handleSendPhoto = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessagePhoto',\n            photo: { '@type': 'inputFileBlob', name: file.name, data: file },\n            width: file.photoWidth,\n            height: file.photoHeight\n        };\n\n        this.onSendInternal(content, true,result => {\n            const cachedMessage = MessageStore.get(result.chat_id, result.id);\n            if (cachedMessage != null) {\n                this.handleSendingMessage(cachedMessage, file);\n            }\n\n            FileStore.uploadFile(result.content.photo.sizes[0].photo.id, result);\n        });\n    };\n\n    handleSendPoll = poll => {\n        this.onSendInternal(poll, true,() => {});\n    };\n\n    handleSendDocument = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessageDocument',\n            document: { '@type': 'inputFileBlob', name: file.name, data: file }\n        };\n\n        this.onSendInternal(content, true,result => FileStore.uploadFile(result.content.document.document.id, result));\n    };\n\n    handlePaste = event => {\n        const items = (event.clipboardData || event.originalEvent.clipboardData).items;\n\n        const files = [];\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].kind.indexOf('file') === 0) {\n                files.push(items[i].getAsFile());\n            }\n        }\n\n        if (files.length > 0) {\n            event.preventDefault();\n\n            this.files = files;\n            this.setState({ openPasteDialog: true });\n            return;\n        }\n\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n            this.innerHTML = plainText;\n            return;\n        }\n    };\n\n    handlePasteContinue = () => {\n        this.handleClosePaste();\n\n        const files = this.files;\n        if (!files) return;\n        if (!files.length) return;\n\n        files.forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.files = null;\n    };\n\n    handleClosePaste = () => {\n        this.setState({ openPasteDialog: false });\n    };\n\n    handleSendingMessage = (message, blob) => {\n        if (message && message.sending_state && message.sending_state['@type'] === 'messageSendingStatePending') {\n            if (message.content && message.content['@type'] === 'messagePhoto' && message.content.photo) {\n                let size = getSize(message.content.photo.sizes, PHOTO_SIZE);\n                if (!size) return;\n\n                let file = size.photo;\n                if (file && file.local && file.local.is_downloading_completed && !file.blob) {\n                    file.blob = blob;\n                    FileStore.updatePhotoBlob(message.chat_id, message.id, file.id);\n                }\n            }\n        }\n    };\n\n    onSendInternal = async (content, clearDraft, callback) => {\n        const { chatId, replyToMessageId } = this.state;\n\n        if (!chatId) return;\n        if (!content) return;\n\n        try {\n            await ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${chatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: chatId,\n                reply_to_message_id: replyToMessageId,\n                input_message_content: content\n            });\n\n            this.setState({ replyToMessageId: 0 },\n                () => {\n                    if (clearDraft) {\n                        const newChatDraftMessage = this.getNewChatDraftMessage(this.state.chatId, this.state.replyToMessageId);\n                        this.setChatDraftMessage(newChatDraftMessage);\n                    }\n                });\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: chatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    handleEmojiSelect = emoji => {\n        if (!emoji) return;\n\n        this.newMessageRef.current.innerText += emoji.native;\n        this.handleInput();\n    };\n\n    handleInput = async event => {\n        const innerText = this.newMessageRef.current.innerText;\n        if (!innerText || innerText.length > 11) {\n            const { hint } = StickerStore;\n            if (hint) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateStickersHint',\n                    hint: null\n                });\n            }\n\n            return;\n        }\n\n        const t0 = performance.now();\n        const regex = emojiRegex();\n        let match = regex.exec(innerText);\n        const t1 = performance.now();\n        console.log('Matched ' + (t1 - t0) + 'ms', match);\n        if (!match || innerText !== match[0]) {\n            const { hint } = StickerStore;\n            if (hint) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateStickersHint',\n                    hint: null\n                });\n            }\n\n            return;\n        }\n\n        const stickers = await TdLibController.send({\n            '@type': 'searchStickers',\n            emoji: match[0],\n            limit: 100\n        });\n        console.log('Matched stickers', match[0], stickers);\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickersHint',\n            hint: {\n                emoji: match[0],\n                stickers\n            }\n        });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        const content = this.innerHTML !== null ? this.innerHTML : null;\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'inputbox')}>\n                    <InputBoxHeader chatId={chatId} messageId={replyToMessageId} />\n                    <div className='inputbox-wrapper'>\n                        <div className='inputbox-left-column'>\n                            <EmojiPickerButton onSelect={this.handleEmojiSelect} />\n                        </div>\n                        <div className='inputbox-middle-column'>\n                            <div\n                                id='inputbox-message'\n                                ref={this.newMessageRef}\n                                key={new Date()}\n                                placeholder={t('Message')}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                                onInput={this.handleInput}>\n                                {content}\n                            </div>\n                        </div>\n                        <div className='inputbox-right-column'>\n                            <input\n                                ref={this.attachDocumentRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                onChange={this.handleAttachDocumentComplete}\n                            />\n                            <input\n                                ref={this.attachPhotoRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                accept='image/*'\n                                onChange={this.handleAttachPhotoComplete}\n                            />\n                            <AttachButton\n                                chatId={chatId}\n                                onAttachPhoto={this.handleAttachPhoto}\n                                onAttachDocument={this.handleAttachDocument}\n                                onAttachPoll={this.handleAttachPoll}\n                            />\n\n                            {/*<IconButton>*/}\n                            {/*<KeyboardVoiceIcon />*/}\n                            {/*</IconButton>*/}\n                            <IconButton className={classes.iconButton} aria-label='Send' onClick={this.handleSubmit}>\n                                <SendIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                {!isPrivateChat(chatId) && <CreatePollDialog onSend={this.handleSendPoll} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={openPasteDialog}\n                    onClose={this.handleClosePaste}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>{t('AppName')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {this.files && this.files.length > 1\n                                ? 'Are you sure you want to send files?'\n                                : 'Are you sure you want to send file?'}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClosePaste} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handlePasteContinue} color='primary'>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(InputBoxControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { borderStyle } from '../Theme';\nimport './FooterCommand.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass FooterCommand extends React.Component {\n    render() {\n        const { classes, command, onCommand } = this.props;\n\n        return (\n            <div className={classNames(classes.borderColor, 'footer-command-wrapper')}>\n                <div className='footer-command-actions'>\n                    <Button color='primary' className={classes.button} onClick={onCommand}>\n                        {command}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(FooterCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { isChatMuted } from '../../Utils/Chat';\nimport { debounce } from '../../Utils/Common';\nimport {\n    MUTED_VALUE_MAX,\n    NOTIFICATIONS_DEBOUNCE_DELAY_MS,\n    MUTED_VALUE_MIN\n} from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass NotificationsControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = props;\n        const chat = ChatStore.get(chatId);\n        const isMuted = isChatMuted(chat);\n\n        this.state = {\n            prevChatId: chatId,\n            isMuted: isMuted\n        };\n\n        this.debouncedSetChatNotificationSettings = debounce(this.setChatNotificationSettings, NOTIFICATIONS_DEBOUNCE_DELAY_MS);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n            const chat = ChatStore.get(chatId);\n            const isMuted = isChatMuted(chat);\n\n            return {\n                prevChatId: props.chatId,\n                isMuted: isMuted\n            };\n        }\n        return null;\n    }\n\n    componentDidMount() {\n        ChatStore.on('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onUpdateChatNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n\n        this.setState({ isMuted: isChatMuted(chat) });\n    };\n\n    onUpdateScopeNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (\n                    chat.type['@type'] === 'chatTypeBasicGroup' ||\n                    chat.type['@type'] === 'chatTypeSupergroup'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (\n                    chat.type['@type'] === 'chatTypePrivate' ||\n                    chat.type['@type'] === 'chatTypeSecret'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n        }\n    };\n\n    handleSetChatNotifications = () => {\n        this.setState({ isMuted: !this.state.isMuted });\n        this.debouncedSetChatNotificationSettings();\n    };\n\n    setChatNotificationSettings = () => {\n        const { chatId } = this.props;\n        const { isMuted } = this.state;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.notification_settings) return;\n\n        const isMutedPrev = isChatMuted(chat);\n        if (isMutedPrev === isMuted) {\n            return;\n        }\n\n        const muteFor = isMuted ? MUTED_VALUE_MAX : MUTED_VALUE_MIN;\n        const newNotificationSettings = {\n            ...chat.notification_settings,\n            use_default_mute_for: false,\n            mute_for: muteFor\n        };\n\n        TdLibController.send({\n            '@type': 'setChatNotificationSettings',\n            chat_id: chatId,\n            notification_settings: newNotificationSettings\n        });\n    };\n}\n\nexport default NotificationsControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FooterCommand from './FooterCommand';\nimport NotificationsControl from './NotificationsControl';\n\nclass NotificationsCommandControl extends NotificationsControl {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { isMuted } = this.state;\n        const command = isMuted ? 'unmute' : 'mute';\n\n        return (\n            <FooterCommand\n                command={command}\n                onCommand={this.handleSetChatNotifications}/>\n        );\n    }\n\n}\n\nexport default NotificationsCommandControl;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport InputBoxControl from './InputBoxControl';\nimport FooterCommand from './FooterCommand';\nimport NotificationsCommandControl from './NotificationsCommandControl';\nimport { hasBasicGroupId, hasSupergroupId } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Footer.css';\n\nclass Footer extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n\n        if (hasBasicGroupId(chatId, update.basic_group.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n\n        if (hasSupergroupId(chatId, update.supergroup.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleJoin = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'joinChat',\n            chat_id: chatId\n        });\n    };\n\n    handleDeleteAndExit = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: true\n        });\n\n        // TdLibController\n        //     .send({\n        //         '@type': 'leaveChat',\n        //         chat_id: this.props.chatId\n        //     });\n    };\n\n    render() {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                if (basicGroup && basicGroup.status) {\n                    switch (basicGroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return null;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (basicGroup.status.is_member) {\n                                if (!basicGroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'chatTypePrivate': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSecret': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup && supergroup.status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                        }\n                        case 'chatMemberStatusMember': {\n                            if (supergroup.is_channel) {\n                                return <NotificationsCommandControl chatId={chatId} />;\n                            } else {\n                                return <InputBoxControl />;\n                            }\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (supergroup.status.is_member) {\n                                if (!supergroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n}\n\nexport default Footer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport { getUserFullName, getUserShortName, getUserStatus, isUserOnline } from './User';\nimport { getSupergroupStatus } from './Supergroup';\nimport { getBasicGroupStatus } from './BasicGroup';\nimport { getLetters } from './Common';\nimport { getContent } from './Message';\nimport { isServiceMessage } from './ServiceMessage';\nimport UserStore from '../Stores/UserStore';\nimport ChatStore from '../Stores/ChatStore';\nimport BasicGroupStore from '../Stores/BasicGroupStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport InputBoxControl from '../Components/ColumnMiddle/Footer';\n\nfunction getGroupChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    let size = inputTypingManager.actions.size;\n    if (size > 2) {\n        return `${size} people are typing`;\n    } else if (size > 1) {\n        let firstUser;\n        let secondUser;\n        for (let userId of inputTypingManager.actions.keys()) {\n            if (!firstUser) {\n                firstUser = UserStore.get(userId);\n            } else if (!secondUser) {\n                secondUser = UserStore.get(userId);\n                break;\n            }\n        }\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n        secondUser = secondUser.first_name ? secondUser.first_name : secondUser.second_name;\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        return `${firstUser} and ${secondUser} are typing`;\n    } else {\n        let firstUser;\n        if (inputTypingManager.actions.size >= 1) {\n            for (let userId of inputTypingManager.actions.keys()) {\n                if (!firstUser) {\n                    firstUser = UserStore.get(userId);\n                    break;\n                }\n            }\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            let action = inputTypingManager.actions.values().next().value.action;\n            switch (action['@type']) {\n                case 'chatActionRecordingVideo':\n                    return `${firstUser} is recording a video`;\n                case 'chatActionRecordingVideoNote':\n                    return `${firstUser} is recording a video message`;\n                case 'chatActionRecordingVoiceNote':\n                    return `${firstUser} is recording a voice message`;\n                case 'chatActionStartPlayingGame':\n                    return `${firstUser} is playing a game`;\n                case 'chatActionUploadingDocument':\n                    return `${firstUser} is sending a file`;\n                case 'chatActionUploadingPhoto':\n                    return `${firstUser} is sending a photo`;\n                case 'chatActionUploadingVideo':\n                    return `${firstUser} is sending a video`;\n                case 'chatActionUploadingVideoNote':\n                    return `${firstUser} is sending a video message`;\n                case 'chatActionUploadingVoiceNote':\n                    return `${firstUser} is sending a voice message`;\n                case 'chatActionChoosingContact':\n                case 'chatActionChoosingLocation':\n                case 'chatActionTyping':\n                default:\n                    return `${firstUser} is typing`;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getPrivateChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    if (inputTypingManager.actions.size >= 1) {\n        let action = inputTypingManager.actions.values().next().value.action;\n        switch (action['@type']) {\n            case 'chatActionRecordingVideo':\n                return 'recording a video';\n            case 'chatActionRecordingVideoNote':\n                return 'recording a video message';\n            case 'chatActionRecordingVoiceNote':\n                return 'recording a voice message';\n            case 'chatActionStartPlayingGame':\n                return 'playing a game';\n            case 'chatActionUploadingDocument':\n                return 'sending a file';\n            case 'chatActionUploadingPhoto':\n                return 'sending a photo';\n            case 'chatActionUploadingVideo':\n                return 'sending a video';\n            case 'chatActionUploadingVideoNote':\n                return 'sending a video message';\n            case 'chatActionUploadingVoiceNote':\n                return 'sending a voice message';\n            case 'chatActionChoosingContact':\n            case 'chatActionChoosingLocation':\n            case 'chatActionTyping':\n            default:\n                return 'typing';\n        }\n    }\n\n    return null;\n}\n\nfunction getChatTypingString(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    let typingManager = ChatStore.getTypingManager(chat.id);\n    if (!typingManager) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const typingString = getPrivateChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            const typingString = getGroupChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n    }\n\n    return null;\n}\n\nfunction getMessageSenderFullName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n    if (!message.sender_user_id) return null;\n\n    const user = UserStore.get(message.sender_user_id);\n    if (!user) return null;\n\n    return getUserFullName(user);\n}\n\nfunction getMessageSenderName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n\n    const chat = ChatStore.get(message.chat_id);\n    if (chat && chat.type['@type'] !== 'chatTypeBasicGroup' && chat.type['@type'] !== 'chatTypeSupergroup') {\n        return null;\n    }\n\n    return getUserShortName(message.sender_user_id);\n}\n\nfunction getLastMessageSenderName(chat) {\n    if (!chat) return null;\n\n    return getMessageSenderName(chat.last_message);\n}\n\nfunction getLastMessageContent(chat, t = key => key) {\n    if (!chat) return null;\n\n    const { last_message } = chat;\n    if (!last_message) return null;\n\n    return getContent(last_message, t);\n}\n\nfunction getChatUnreadMessageIcon(chat) {\n    if (!chat) return false;\n    if (!chat.last_message) return false;\n\n    return chat.last_message.is_outgoing && chat.last_message.id > chat.last_read_outbox_message_id;\n}\n\nfunction getChatUnreadCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_count) return null;\n\n    return chat.unread_count;\n}\n\nfunction getChatUnreadMentionCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_mention_count) return null;\n\n    return chat.unread_mention_count;\n}\n\nfunction isChatMuted(chat) {\n    return getChatMuteFor(chat) > 0;\n}\n\nfunction getChatMuteFor(chat) {\n    if (!chat) return 0;\n\n    if (chat.use_default_mute_for) {\n        switch (chat.type) {\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopePrivateChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopeGroupChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n        }\n    } else {\n        if (!chat.notification_settings) return 0;\n\n        return chat.notification_settings.mute_for;\n    }\n}\n\nfunction getMessageDate(message) {\n    const date = new Date(message.date * 1000);\n\n    const dayStart = new Date();\n    dayStart.setHours(0, 0, 0, 0);\n    if (date > dayStart) {\n        return dateFormat(date, 'H:MM');\n    }\n\n    const now = new Date();\n    const day = now.getDay();\n    const weekStart = now.getDate() - day + (day === 0 ? -6 : 1);\n    const monday = new Date(now.setDate(weekStart));\n    if (date > monday) {\n        return dateFormat(date, 'ddd');\n    }\n\n    return dateFormat(date, 'd.mm.yyyy');\n}\n\nfunction getLastMessageDate(chat) {\n    if (!chat) return null;\n    if (!chat.last_message) return null;\n    if (!chat.last_message.date) return null;\n    if (showChatDraft(chat.id)) return null;\n\n    return getMessageDate(chat.last_message);\n}\n\nfunction getChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    const { type } = chat;\n    if (!type) return null;\n\n    switch (type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup) {\n                return getBasicGroupStatus(basicGroup, chatId);\n            }\n\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(type.user_id);\n            if (user) {\n                return getUserStatus(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                return getSupergroupStatus(supergroup, chatId);\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatSubtitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return null;\n    }\n\n    const chatTypingString = getChatTypingString(chatId);\n    if (chatTypingString) {\n        return chatTypingString;\n    }\n\n    return getChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatLetters(chat) {\n    if (!chat) return null;\n\n    let title = chat.title || 'Deleted account';\n    if (title.length === 0) return null;\n\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return chat.title.charAt(0);\n}\n\nfunction isAccentChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return isUserOnline(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isAccentChatSubtitle(chatId) {\n    const typingString = getChatTypingString(chatId);\n    if (typingString) return false;\n\n    return isAccentChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatUsername(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.username;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.username;\n            }\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatPhoneNumber(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.phone_number;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return null;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatBio(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const fullInfo = UserStore.getFullInfo(chat.type.user_id);\n            if (fullInfo) {\n                return fullInfo.bio;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const fullInfo = SupergroupStore.getFullInfo(chat.type.supergroup_id);\n            if (fullInfo) {\n                return fullInfo.description;\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction isPrivateChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isGroupChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChannelChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n\n            return supergroup && supergroup.is_channel;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChatMember(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return supergroup.status.is_member;\n                    }\n                }\n            }\n        }\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return basicGroup.status.is_member;\n                    }\n                }\n            }\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction getChatTitle(chatId, showSavedMessages = false, t = key => key) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isMeChat(chatId) && showSavedMessages) {\n        return t('SavedMessages');\n    }\n\n    return chat.title || t('HiddenName');\n}\n\nfunction isMeChat(chatId) {\n    const fallbackValue = false;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            return UserStore.getMyId() === chat.type.user_id;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getGroupChatMembers(chatId) {\n    const fallbackValue = [];\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n            if (fullInfo) {\n                return fullInfo.members || fallbackValue;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            break;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            break;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getChatFullInfo(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n    if (!chat.type) return;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeSecret': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeBasicGroup': {\n            TdLibController.send({\n                '@type': 'getBasicGroupFullInfo',\n                basic_group_id: chat.type.basic_group_id\n            });\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            TdLibController.send({\n                '@type': 'getSupergroupFullInfo',\n                supergroup_id: chat.type.supergroup_id\n            });\n            break;\n        }\n    }\n}\n\nfunction hasBasicGroupId(chatId, basicGroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeBasicGroup' && type.basic_group_id === basicGroupId;\n}\n\nfunction isSupergroup(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeSupergroup';\n}\n\nfunction getSupergroupId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    if (type && type['@type'] === 'chatTypeSupergroup') {\n        return type.supergroup_id;\n    }\n\n    return 0;\n}\n\nfunction hasSupergroupId(chatId, supergroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return isSupergroup(chatId) && type.supergroup_id === supergroupId;\n}\n\nfunction hasUserId(chatId, userId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return (\n        type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') && type.user_id === userId\n    );\n}\n\nfunction getChatUserId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return 0;\n\n    const { type } = chat;\n\n    return type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') ? type.user_id : 0;\n}\n\nfunction getPhotoFromChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isPrivateChat(chatId)) {\n        const user = UserStore.get(getChatUserId(chatId));\n        if (user) {\n            return user.profile_photo;\n        }\n    }\n\n    return chat.photo;\n}\n\nfunction canSendFiles(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction getChatShortTitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return 'Saved Messages';\n    }\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return chat.title;\n        }\n        case 'chatTypeSupergroup': {\n            return chat.title;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return getUserShortName(chat.type.user_id);\n        }\n    }\n\n    return null;\n}\n\nfunction getGroupChatMembersCount(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup) {\n                return basicGroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return 0;\n        }\n    }\n\n    return 0;\n}\n\nfunction canClearHistory(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return !Boolean(supergroup.username);\n            }\n\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction canDeleteChat(chatId) {\n    return !isMeChat(chatId);\n}\n\nfunction canSendPhotos(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendDocuments(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendPolls(chatId) {\n    return true;\n}\n\nfunction canSendMessages(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction showChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n    const draft = getChatDraft(chatId);\n\n    return draft && chat.unread_count === 0 && chat.unread_mention_count === 0;\n}\n\nfunction getChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            const { input_message_text } = draft_message;\n            if (input_message_text) {\n                return input_message_text.text;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getChatDraftReplyToMessageId(chatId) {\n    let replyToMessageId = 0;\n    const chat = ChatStore.get(chatId);\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            replyToMessageId = draft_message.reply_to_message_id;\n        }\n    }\n\n    console.log('getChatDraft', replyToMessageId);\n    return replyToMessageId;\n}\n\nexport {\n    showChatDraft,\n    getChatDraft,\n    getChatDraftReplyToMessageId,\n    getChatTypingString,\n    getChatUnreadMessageIcon,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatMuteFor,\n    getChatSubtitle,\n    getChatSubtitleWithoutTyping,\n    getLastMessageSenderName,\n    getMessageSenderName,\n    getMessageSenderFullName,\n    getLastMessageContent,\n    getLastMessageDate,\n    getMessageDate,\n    getChatLetters,\n    isAccentChatSubtitle,\n    isAccentChatSubtitleWithoutTyping,\n    isChatMuted,\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isPrivateChat,\n    isGroupChat,\n    isChannelChat,\n    isChatMember,\n    getChatTitle,\n    getGroupChatMembers,\n    getChatFullInfo,\n    hasBasicGroupId,\n    hasSupergroupId,\n    isSupergroup,\n    getSupergroupId,\n    hasUserId,\n    getChatUserId,\n    getPhotoFromChat,\n    getChatShortTitle,\n    getGroupChatMembersCount,\n    isMeChat,\n    canClearHistory,\n    canDeleteChat,\n    canSendFiles,\n    canSendMessages,\n    canSendPhotos,\n    canSendDocuments,\n    canSendPolls\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getBasicGroupStatus(basicGroup, chatId) {\n    if (!basicGroup) return null;\n\n    const { status, member_count: count } = basicGroup;\n\n    if (status && (status['@type'] === 'chatMemberStatusBanned' || status['@type'] === 'chatMemberStatusLeft')) {\n        return 'group is inaccessible';\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getBasicGroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getSupergroupStatus(supergroup, chatId) {\n    if (!supergroup) return null;\n\n    let { status, is_channel, member_count: count } = supergroup;\n\n    if (status && status['@type'] === 'chatMemberStatusBanned') {\n        return is_channel ? 'channel is inaccessible' : 'group is inaccessible';\n    }\n\n    if (!count) {\n        const fullInfo = SupergroupStore.getFullInfo(supergroup.id);\n        if (fullInfo) {\n            count = fullInfo.member_count;\n        }\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getSupergroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { isUserOnline } from '../../Utils/User';\nimport { getChatUserId } from '../../Utils/Chat';\nimport UserStore from './../../Stores/UserStore';\nimport './ChatStatus.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        borderRadius: '50%',\n        overflow: 'hidden'\n    },\n    icon: {\n        background: 'transparent',\n        width: '100%',\n        height: '100%',\n        boxSizing: 'border-box'\n    },\n    iconIndicator: {\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        background: '#80d066'\n    }\n});\n\nclass ChatStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const userId = getChatUserId(props.chatId);\n        const user = UserStore.get(userId);\n\n        this.state = {\n            userId: userId,\n            online: isUserOnline(user)\n        };\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.state;\n        const { user_id } = update;\n        if (user_id !== userId) return;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n\n        this.setState({\n            online: isUserOnline(user)\n        });\n    };\n\n    render() {\n        const { classes, size, borderSize, className } = this.props;\n        const { online } = this.state;\n        if (!online) return null;\n\n        return (\n            <div className={classNames(className, classes.root)} style={{ width: size, height: size }}>\n                <div className={classes.icon} style={{ padding: borderSize }}>\n                    <div className={classes.iconIndicator} />\n                </div>\n            </div>\n        );\n    }\n}\n\nChatStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    borderSize: PropTypes.number\n};\n\nChatStatus.defaultProps = {\n    size: 12,\n    borderSize: 2\n};\n\nexport default withStyles(styles)(ChatStatus);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\nimport ChatStatus from './ChatStatus';\nimport { getChatLetters, getChatUserId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { loadChatContent } from '../../Utils/File';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './ChatTileControl.css';\n\nconst styles = {\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {}\n};\n\nclass ChatTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { chatId } = this.props;\n        const { chat_id } = update;\n\n        if (chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    handleSelect = event => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(chatId);\n    };\n\n    render() {\n        const { classes, chatId, showOnline, showSavedMessages, onSelect } = this.props;\n\n        if (isMeChat(chatId) && showSavedMessages) {\n            const className = classNames('tile-photo', 'tile_color_4', { pointer: onSelect });\n            return (\n                <div className={className} onClick={this.handleSelect}>\n                    <div className='tile-saved-messages'>\n                        <BookmarkBorderIcon />\n                    </div>\n                </div>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { photo } = chat;\n\n        const letters = getChatLetters(chat);\n        const blob = photo && photo.small ? FileStore.getBlob(photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n\n        const tileColor = `tile_color_${(Math.abs(chatId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return (\n            <div className='chat-tile' onClick={this.handleSelect}>\n                {src ? (\n                    <img className={className} src={src} draggable={false} alt='' />\n                ) : (\n                    <div className={className}>\n                        <span className='tile-text'>{letters}</span>\n                    </div>\n                )}\n                {showOnline && isPrivateChat(chatId) && (\n                    <ChatStatus classes={{ root: classes.statusRoot, icon: classes.statusIcon }} chatId={chatId} />\n                )}\n            </div>\n        );\n    }\n}\n\nChatTileControl.propTypes = {\n    classes: PropTypes.object,\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool,\n    showOnline: PropTypes.bool\n};\n\nChatTileControl.defaultProps = {\n    showSavedMessages: true,\n    showOnline: false\n};\n\nexport default withStyles(styles, { withTheme: true })(ChatTileControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './ForwardTargetChat.css';\n\nconst styles = theme => ({\n    border: {\n        borderColor: theme.palette.primary.main\n    },\n    markSelected: {\n        boxShadow: 'inset 0 0 0 10px ' + theme.palette.primary.main,\n        border: '2px solid ' + theme.palette.background.paper\n    },\n    markUnselected: {\n        boxShadow: 'inset 0 0 0 0 ' + theme.palette.primary.main,\n        border: '2px solid transparent'\n    }\n});\n\nclass ForwardTargetChat extends React.Component {\n    render() {\n        const { classes, chatId, selected, onSelect } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, true);\n\n        return (\n            <div\n                className={classNames('forward-target-chat', { 'forward-target-chat-selected': selected })}\n                onClick={onSelect}>\n                <div className='forward-target-chat-tile'>\n                    <div className='forward-target-chat-tile-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                    </div>\n                    {selected && <div className={classNames('forward-target-chat-selection', classes.border)} />}\n                    <div\n                        className={classNames(\n                            'forward-target-chat-mark',\n                            selected ? classes.markSelected : classes.markUnselected\n                        )}\n                    />\n                    <div className='forward-target-chat-mark-icon' />\n                </div>\n                <div className='forward-target-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nForwardTargetChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    selected: PropTypes.bool,\n    onSelect: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(ForwardTargetChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nlet cyrillicInput = null;\n\nfunction getCyrillicInputMap() {\n    return new Map([\n        ['q', ''],\n        ['w', ''],\n        ['e', ''],\n        ['r', ''],\n        ['t', ''],\n        ['y', ''],\n        ['u', ''],\n        ['i', ''],\n        ['o', ''],\n        ['p', ''],\n        ['[', ''],\n        [']', ''],\n        ['a', ''],\n        ['s', ''],\n        ['d', ''],\n        ['f', ''],\n        ['g', ''],\n        ['h', ''],\n        ['j', ''],\n        ['k', ''],\n        ['l', ''],\n        [';', ''],\n        [\"'\", ''],\n        ['\\\\', ''],\n        ['z', ''],\n        ['x', ''],\n        ['c', ''],\n        ['v', ''],\n        ['b', ''],\n        ['n', ''],\n        ['m', ''],\n        [',', ''],\n        ['.', '']\n    ]);\n}\n\nfunction getCyrillicInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    cyrillicInput = cyrillicInput || getCyrillicInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (cyrillicInput.has(input[i])) {\n            output += cyrillicInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nlet latinInput = null;\n\nfunction getLatinInputMap() {\n    return new Map([\n        ['', 'q'],\n        ['', 'w'],\n        ['', 'e'],\n        ['', 'r'],\n        ['', 't'],\n        ['', 'y'],\n        ['', 'u'],\n        ['', 'i'],\n        ['', 'o'],\n        ['', 'p'],\n        ['', '['],\n        ['', ']'],\n        ['', 'a'],\n        ['', 's'],\n        ['', 'd'],\n        ['', 'f'],\n        ['', 'g'],\n        ['', 'h'],\n        ['', 'j'],\n        ['', 'k'],\n        ['', 'l'],\n        ['', ';'],\n        ['', \"'\"],\n        ['', '\\\\'],\n        ['', 'z'],\n        ['', 'x'],\n        ['', 'c'],\n        ['', 'v'],\n        ['', 'b'],\n        ['', 'n'],\n        ['', 'm'],\n        ['', ','],\n        ['', '.']\n    ]);\n}\n\nfunction getLatinInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    latinInput = latinInput || getLatinInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (latinInput.has(input[i])) {\n            output += latinInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nexport { getCyrillicInput, getLatinInput };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport ForwardTargetChat from '../Tile/ForwardTargetChat';\nimport { canSendMessages, getChatTitle, getChatUsername, isSupergroup } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { getCyrillicInput, getLatinInput } from '../../Utils/Language';\nimport { borderStyle } from '../Theme';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport UserStore from '../../Stores/UserStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ForwardDialog.css';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    dialog: {\n        color: theme.palette.text.primary\n    },\n    dialogContent: {\n        padding: 0,\n        display: 'flex',\n        position: 'relative'\n    },\n    searchList: {\n        background: theme.palette.background.paper\n    },\n    ...borderStyle(theme)\n});\n\nclass ForwardDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: [],\n            savedMessages: null\n        };\n\n        this.searchRef = React.createRef();\n        this.messageRef = React.createRef();\n\n        this.targetChats = new Map();\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        this.setSearchFocus();\n    }\n\n    loadContent = async () => {\n        this.getPublicMessageLink();\n\n        const promises = [];\n        const getChatsPromise = TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 100\n        });\n        promises.push(getChatsPromise);\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        });\n        promises.push(savedMessagesPromise);\n\n        const [chats, savedMessages] = await Promise.all(promises.map(x => x.catch(e => null)));\n\n        this.setState({\n            chatIds: chats.chat_ids,\n            savedMessages: savedMessages\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats.chat_ids);\n    };\n\n    getPublicMessageLink = async () => {\n        const { chatId, messageIds } = this.props;\n        if (!chatId) return;\n        if (!messageIds) return;\n        if (messageIds.length > 1) return;\n        if (!isSupergroup(chatId)) return;\n        if (!getChatUsername(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getPublicMessageLink',\n            chat_id: chatId,\n            message_id: messageIds[0],\n            for_album: false\n        });\n\n        this.setState({\n            publicMessageLink: result\n        });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: null\n        });\n    };\n\n    handleCopyLink = () => {\n        const { t } = this.props;\n        const { publicMessageLink } = this.state;\n\n        if (!publicMessageLink) return;\n        if (!publicMessageLink.link) return;\n\n        const key = `copy_link_${publicMessageLink.link}`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        copy(publicMessageLink.link);\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    getForwardPhotoSize = (chatId, messageIds) => {\n        if (messageIds.length !== 1) return null;\n\n        const message = MessageStore.get(chatId, messageIds[0]);\n        if (!message) return null;\n\n        const { can_be_forwarded, content } = message;\n        if (!can_be_forwarded && content['@type'] === 'messageChatChangePhoto') {\n            const { photo } = content;\n            if (!photo) return null;\n\n            const { sizes } = photo;\n            if (sizes && sizes.length) {\n                return sizes[sizes.length - 1];\n            }\n        }\n\n        return null;\n    };\n\n    handleSend = () => {\n        this.handleClose();\n\n        const { chatId, messageIds, photoSize, link } = this.props;\n        if (!chatId && !messageIds && !messageIds && !photoSize && !link) return;\n\n        const text = this.getInnerText(this.messageRef.current);\n\n        this.targetChats.forEach(targetChatId => {\n            if (link) {\n                if (text) {\n                    TdLibController.send({\n                        '@type': 'sendMessage',\n                        chat_id: targetChatId,\n                        reply_to_message_id: 0,\n                        disable_notifications: false,\n                        from_background: false,\n                        reply_markup: null,\n                        input_message_content: {\n                            '@type': 'inputMessageText',\n                            text: {\n                                '@type': 'formattedText',\n                                text: text,\n                                entities: null\n                            },\n                            disable_web_page_preview: true,\n                            clear_draft: false\n                        }\n                    });\n                }\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: link,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n\n                return;\n            }\n\n            const size = photoSize || this.getForwardPhotoSize(chatId, messageIds);\n            if (size) {\n                const { width, height, photo } = size;\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessagePhoto',\n                        photo: {\n                            '@type': 'inputFileId',\n                            id: photo.id\n                        },\n                        thumbnail: null,\n                        added_sticker_file_ids: [],\n                        width: width,\n                        height: height,\n                        caption: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        ttl: 0\n                    }\n                });\n\n                return;\n            }\n\n            if (text) {\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n            }\n\n            TdLibController.send({\n                '@type': 'forwardMessages',\n                chat_id: targetChatId,\n                from_chat_id: chatId,\n                message_ids: messageIds,\n                disable_notifications: false,\n                from_background: false,\n                as_album: false\n            });\n        });\n    };\n\n    handleChangeSelection = chatId => {\n        if (this.targetChats.has(chatId)) {\n            this.targetChats.delete(chatId);\n        } else {\n            this.targetChats.set(chatId, chatId);\n        }\n\n        console.log(this.targetChats);\n\n        this.forceUpdate();\n    };\n\n    getInnerText = div => {\n        const innerText = div.innerText;\n        const innerHTML = div.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            div.innerHTML = '';\n        }\n\n        return innerText;\n    };\n\n    handleSearchKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleSearchKeyUp = () => {\n        const { chatIds, savedMessages } = this.state;\n\n        const innerHTML = this.searchRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchRef.current.innerHTML = '';\n        }\n\n        const innerText = this.getInnerText(this.searchRef.current).trim();\n        if (!innerText) {\n            this.setState({ searchText: null, searchResults: [] });\n            return;\n        }\n\n        const latinText = getLatinInput(innerText);\n        const cyrillicText = getCyrillicInput(innerText);\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const searchResults = chatsSource.filter(\n            x =>\n                this.hasSearchText(x, innerText) ||\n                (latinText && this.hasSearchText(x, latinText)) ||\n                (cyrillicText && this.hasSearchText(x, cyrillicText))\n        );\n\n        this.setState({ searchText: innerText, searchResults: searchResults });\n    };\n\n    handleSearchPaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    handleMessageKeyUp = () => {\n        const innerHTML = this.messageRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.messageRef.current.innerHTML = '';\n        }\n    };\n\n    handleMessagePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    hasSearchText = (chatId, searchText) => {\n        const { t } = this.props;\n        const { savedMessages } = this.state;\n\n        if (savedMessages && chatId === savedMessages.id) {\n            const title = getChatTitle(chatId, true, t) || '';\n            if (title.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n                return true;\n            }\n        }\n\n        const title1 = getChatTitle(chatId, false, t) || '';\n        if (title1.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        const username = getChatUsername(chatId) || '';\n        if (username.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        return false;\n    };\n\n    setSearchFocus = () => {\n        setTimeout(() => {\n            if (this.searchRef.current) {\n                const element = this.searchRef.current;\n\n                element.focus();\n            }\n        }, 100);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatIds, searchText, searchResults, savedMessages, publicMessageLink } = this.state;\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const chats = chatsSource.map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        const foundChats = (searchResults || []).map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        return (\n            <Dialog\n                open\n                onClose={this.handleClose}\n                aria-labelledby='forward-dialog-title'\n                aria-describedby='forward-dialog-description'\n                className={classes.dialog}>\n                <DialogTitle id='forward-dialog-title'>{t('ShareSendTo')}</DialogTitle>\n                <div\n                    ref={this.searchRef}\n                    id='forward-dialog-search'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Search')}\n                    onKeyDown={this.handleSearchKeyDown}\n                    onKeyUp={this.handleSearchKeyUp}\n                    onPaste={this.handleSearchPaste}\n                />\n                <div className={classNames(classes.borderColor, 'forward-dialog-content')}>\n                    <div className='forward-dialog-list'>{chats}</div>\n                    {searchText && (\n                        <div className={classNames(classes.searchList, 'forward-dialog-search-list')}>{foundChats}</div>\n                    )}\n                </div>\n                {this.targetChats.size > 0 && (\n                    <div\n                        ref={this.messageRef}\n                        id='forward-dialog-message'\n                        contentEditable\n                        suppressContentEditableWarning\n                        placeholder={t('ShareComment')}\n                        onKeyUp={this.handleMessageKeyUp}\n                        onPaste={this.handleMessagePaste}\n                    />\n                )}\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    {this.targetChats.size > 0 && (\n                        <Button onClick={this.handleSend} color='primary' autoFocus>\n                            {t('Send')}\n                        </Button>\n                    )}\n                    {!this.targetChats.size && publicMessageLink && (\n                        <Button onClick={this.handleCopyLink} color='primary'>\n                            {t('CopyLink')}\n                        </Button>\n                    )}\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nForwardDialog.propTypes = {\n    chatId: PropTypes.number,\n    messageIds: PropTypes.array,\n    photoSize: PropTypes.object\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ForwardDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport './NotificationTimer.css';\n\nclass NotificationTimer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            seconds: this.props.timeout / 1000,\n            value: 0\n        };\n    }\n\n    componentDidMount() {\n        this.startTime = new Date();\n        this.expire = this.startTime;\n        this.expire.setMilliseconds(this.expire.getMilliseconds() + this.props.timeout);\n        this.timerId = setInterval(this.handleTimer, 100);\n    }\n\n    handleTimer = () => {\n        const now = new Date();\n        const seconds = this.expire - now;\n        const value = 100 - (seconds / this.props.timeout) * 100;\n        // console.log(`NotificationTimer ms=${seconds} value=${value}`);\n        this.setState({\n            seconds: seconds > 0 ? seconds : 0,\n            value: value > 100 ? 100 : value\n        });\n\n        if (now >= this.expire) {\n            if (this.timerId) {\n                clearInterval(this.timerId);\n                this.timerId = null;\n            }\n        }\n    };\n\n    componentWillUnmount() {\n        if (this.timerId) {\n            clearInterval(this.timerId);\n            this.timerId = null;\n        }\n    }\n\n    render() {\n        const { value, seconds } = this.state;\n\n        return (\n            <div className='notification-timer'>\n                <div className='notification-timer-text'>\n                    <Typography color='inherit'>{(seconds / 1000).toFixed()}</Typography>\n                </div>\n                <div className='notification-timer-progress'>\n                    <CircularProgress size={32} value={100 - value} variant='static' />\n                </div>\n            </div>\n        );\n    }\n}\n\nNotificationTimer.propTypes = {\n    timeout: PropTypes.number.isRequired\n};\n\nexport default NotificationTimer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withSnackbar } from 'notistack';\nimport { compose } from 'recompose';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport { canClearHistory, canDeleteChat, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MainMenuButton.css';\n\nconst styles = theme => ({\n    menuIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n});\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'right'\n};\n\nconst menuTransformOrigin = {\n    vertical: 'top',\n    horizontal: 'right'\n};\n\nclass LeaveChatDialog extends React.Component {\n    getDeleteDialogText = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return `Are you sure you want to leave group ${chat.title}?`;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel\n                        ? `Are you sure you want to leave channel ${chat.title}?`\n                        : `Are you sure you want to leave group ${chat.title}?`;\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return `Are you sure you want to delete chat with ${getChatShortTitle(chatId)}?`;\n            }\n        }\n\n        return null;\n    };\n\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            {this.getDeleteDialogText(chatId)}\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass ClearHistoryDialog extends React.Component {\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            Are you sure you want clear history?\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            anchorEl: null,\n            openDelete: false,\n            openClearHistory: false\n        };\n    }\n\n    handleButtonClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleChatInfo = () => {\n        this.handleMenuClose();\n        setTimeout(() => this.props.openChatDetails(), 150);\n    };\n\n    handleClearHistory = () => {\n        this.handleMenuClose();\n\n        this.setState({ openClearHistory: true });\n    };\n\n    handleClearHistoryContinue = result => {\n        this.setState({ openClearHistory: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = 'Messages deleted';\n        const request = {\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: false\n        };\n\n        this.handleScheduledAction(chatId, 'clientUpdateClearHistory', message, request);\n    };\n\n    handleLeave = () => {\n        this.handleMenuClose();\n\n        this.setState({ openDelete: true });\n    };\n\n    handleLeaveContinue = result => {\n        this.setState({ openDelete: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = this.getLeaveChatNotification(chatId);\n        const request = isPrivateChat(chatId)\n            ? { '@type': 'deleteChatHistory', chat_id: chatId, remove_from_chat_list: true }\n            : { '@type': 'leaveChat', chat_id: chatId };\n\n        this.handleScheduledAction(chatId, 'clientUpdateLeaveChat', message, request);\n    };\n\n    handleScheduledAction = (chatId, clientUpdateType, message, request) => {\n        if (!clientUpdateType) return;\n\n        const key = `${clientUpdateType} chatId=${chatId}`;\n        const action = async () => {\n            try {\n                await TdLibController.send(request);\n            } finally {\n                TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n            }\n        };\n        const cancel = () => {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n        };\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS, action, cancel)) {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: true });\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS - 2 * TRANSITION_DELAY,\n                action: [\n                    <IconButton key='progress' color='inherit' className='progress-button'>\n                        <NotificationTimer timeout={NOTIFICATION_AUTO_HIDE_DURATION_MS} />\n                    </IconButton>,\n                    <Button\n                        key='undo'\n                        color='primary'\n                        size='small'\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        UNDO\n                    </Button>\n                ]\n            });\n        }\n    };\n\n    getLeaveChatTitle = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Delete and exit';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Leave channel' : 'Leave group';\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Delete conversation';\n            }\n        }\n\n        return null;\n    };\n\n    getLeaveChatNotification = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return 'Chat deleted';\n        if (!chat.type) return 'Chat deleted';\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Chat deleted';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Left channel' : 'Left group';\n                }\n\n                return 'Chat deleted';\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Chat deleted';\n            }\n        }\n\n        return 'Chat deleted';\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, openDelete, openClearHistory } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n        const clearHistory = canClearHistory(chatId);\n        const deleteChat = canDeleteChat(chatId);\n        const leaveChatTitle = this.getLeaveChatTitle(chatId);\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleButtonClick}>\n                    <MoreVertIcon />\n                </IconButton>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}\n                    transformOrigin={menuTransformOrigin}>\n                    <MenuItem onClick={this.handleChatInfo}>Chat info</MenuItem>\n                    {clearHistory && <MenuItem onClick={this.handleClearHistory}>Clear history</MenuItem>}\n                    {deleteChat && leaveChatTitle && <MenuItem onClick={this.handleLeave}>{leaveChatTitle}</MenuItem>}\n                </Menu>\n                <LeaveChatDialog chatId={chatId} open={openDelete} onClose={this.handleLeaveContinue} />\n                <ClearHistoryDialog chatId={chatId} open={openClearHistory} onClose={this.handleClearHistoryContinue} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles),\n    withSnackbar\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport { getUserStatus, isUserOnline } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserStatusControl.css';\n\nconst styles = theme => ({\n    userStatusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    userStatusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass UserStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        this.state = {\n            prevUserId: userId,\n            status: getUserStatus(user),\n            isAccent: isUserOnline(user)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.userId !== state.prevUserId) {\n            const { userId } = props;\n            const user = UserStore.get(userId);\n\n            return {\n                prevUserId: userId,\n                status: getUserStatus(user),\n                isAccent: isUserOnline(user)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { userId, theme } = this.props;\n        const { status, isAccent } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.userId !== userId) {\n            return true;\n        }\n\n        if (nextState.status !== status) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        if (userId === update.user_id) {\n            this.setState({ status: getUserStatus(user), isAccent: isUserOnline(user) });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { status, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames('dialog-content', classes.userStatusSubtitle, {\n                    'accent-color': isAccent,\n                    [classes.userStatusAccentSubtitle]: isAccent\n                })}>\n                {status}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(UserStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from './UserTileControl';\nimport UserStatusControl from './UserStatusControl';\nimport { getUserFullName } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserControl.css';\n\nclass UserControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.userId !== this.props.userId;\n    }\n\n    handleClick = () => {\n        const { userId, onSelect } = this.props;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n        if (!onSelect) return;\n\n        onSelect(user);\n    };\n\n    render() {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        const fullName = getUserFullName(user);\n\n        return (\n            <div className='user' onClick={this.handleClick}>\n                <div className='user-wrapper'>\n                    <UserTileControl userId={userId} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <div className='dialog-title'>{fullName}</div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <UserStatusControl userId={userId} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nUserControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default UserControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { getChatTitle } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogTitleControl.css';\n\nclass DialogTitleControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { t, chatId, showSavedMessages } = this.props;\n\n        const title = getChatTitle(chatId, showSavedMessages, t);\n\n        return <div className='dialog-title'>{title}</div>;\n    }\n}\n\nDialogTitleControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogTitleControl.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withTranslation()(DialogTitleControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { getChatSubtitleWithoutTyping, isAccentChatSubtitleWithoutTyping } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport './DialogStatusControl.css';\n\nconst styles = theme => ({\n    statusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    statusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass DialogStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            subtitle: getChatSubtitleWithoutTyping(chatId),\n            isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n\n            return {\n                prevChatId: chatId,\n                subtitle: getChatSubtitleWithoutTyping(chatId),\n                isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.subtitle !== subtitle) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateUserStatus = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        let updateSubtitle = false;\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(x => x.user_id === update.user_id);\n                    if (member) {\n                        updateSubtitle = true;\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n\n        if (updateSubtitle) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    updateSubtitle = chat => {\n        this.setState({\n            subtitle: getChatSubtitleWithoutTyping(chat.id),\n            isAccent: isAccentChatSubtitleWithoutTyping(chat.id)\n        });\n    };\n\n    onUpdateUserFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames(\n                    'dialog-status',\n                    isAccent ? classes.statusAccentSubtitle : classes.statusSubtitle\n                )}>\n                {subtitle}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogStatusControl from './DialogStatusControl';\nimport ChatStore from '../../Stores/ChatStore';\nimport './ChatControl.css';\n\nclass ChatControl extends React.Component {\n    constructor(props) {\n        super(props);\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId } = this.props;\n            this.state = {\n                chat: ChatStore.get(chatId)\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.chatId !== this.props.chatId;\n    }\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        onSelect(chat);\n    };\n\n    render() {\n        const { chatId, onTileSelect, showStatus, showSavedMessages } = this.props;\n\n        return (\n            <div className='chat' onClick={this.handleClick}>\n                <div className='chat-wrapper'>\n                    <ChatTileControl chatId={chatId} onSelect={onTileSelect} showSavedMessages={showSavedMessages} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} showSavedMessages={showSavedMessages} />\n                        </div>\n                        {showStatus && !showSavedMessages && (\n                            <div className='tile-second-row'>\n                                <DialogStatusControl chatId={chatId} />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nChatControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool,\n    showStatus: PropTypes.bool,\n    onSelect: PropTypes.func,\n    onTileSelect: PropTypes.func\n};\n\nChatControl.defaultProps = {\n    showSavedMessages: true,\n    showStatus: true\n};\n\nexport default ChatControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './ChatDetailsHeader.css';\nimport { isChannelChat, isPrivateChat } from '../../Utils/Chat';\n\nconst styles = {\n    leftIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    rightIconButton: {\n        margin: '8px 12px 8px -2px'\n    }\n};\n\nclass ChatDetailsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, chatId, t, backButton, onClick, onClose } = this.props;\n\n        let info = t('ChatInfo');\n        if (isPrivateChat(chatId)) {\n            info = t('Info');\n        } else if (isChannelChat(chatId)) {\n            info = t('ChannelInfo');\n        }\n\n        return (\n            <div className='header-master'>\n                {backButton && (\n                    <IconButton className={classes.leftIconButton} onClick={onClose}>\n                        <ArrowBackIcon />\n                    </IconButton>\n                )}\n                <div className='header-status grow cursor-pointer' onClick={onClick}>\n                    <span className='header-status-content'>{info}</span>\n                </div>\n                {!backButton && (\n                    <IconButton className={classes.rightIconButton} onClick={onClose}>\n                        <CloseIcon />\n                    </IconButton>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(ChatDetailsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport Switch from '@material-ui/core/Switch';\nimport Typography from '@material-ui/core/Typography';\nimport NotificationsControl from '../ColumnMiddle/NotificationsControl';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass NotificationsListItem extends NotificationsControl {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, t } = this.props;\n        const { isMuted } = this.state;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={this.handleSetChatNotifications}>\n                <ListItemIcon>{!isMuted ? <NotificationsActiveIcon /> : <NotificationsIcon />}</ListItemIcon>\n                <ListItemText\n                    primary={\n                        <Typography variant='inherit' noWrap>\n                            {t('Notifications')}\n                        </Typography>\n                    }\n                />\n                <ListItemSecondaryAction>\n                    <Switch color='primary' onChange={this.handleSetChatNotifications} checked={!isMuted} />\n                </ListItemSecondaryAction>\n            </ListItem>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(NotificationsListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport { isUserBlocked } from '../../Utils/User';\nimport { isChannelChat, isChatMember, isGroupChat } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass MoreListItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n        this.state = {\n            prevChatId: chatId,\n            openMore: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                openMore: false\n            };\n        }\n\n        return null;\n    }\n\n    handleMoreClick = () => {\n        this.setState({ openMore: !this.state.openMore });\n    };\n\n    handleSendMessage = () => {\n        const currentChatId = ApplicationStore.getChatId();\n        const { chatId } = this.props;\n        if (currentChatId === chatId) {\n            //this.dialogDetails.current.scrollToBottom();\n        } else {\n            TdLibController.setChatId(chatId);\n        }\n    };\n\n    handleBlock = () => {\n        const { chatId } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        const { user_id } = chat.type;\n        if (!user_id) return;\n\n        TdLibController.send({\n            '@type': isUserBlocked(user_id) ? 'unblockUser' : 'blockUser',\n            user_id: user_id\n        });\n    };\n\n    render() {\n        const { t, chatId, classes } = this.props;\n        const { openMore } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const isGroup = isGroupChat(chatId);\n        let isBlocked = false;\n        if (!isGroup && chat.type) {\n            isBlocked = isUserBlocked(chat.type.user_id);\n        }\n        const isMember = isChatMember(chatId);\n        const isChannel = isChannelChat(chatId);\n\n        return (\n            <>\n                <ListItem button className={classes.listItem} onClick={this.handleMoreClick}>\n                    <ListItemIcon>\n                        <MoreHorizIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary={\n                            <Typography variant='inherit' noWrap>\n                                {t('More')}\n                            </Typography>\n                        }\n                    />\n                    {openMore ? <ExpandLess /> : <ExpandMore />}\n                </ListItem>\n                <Collapse in={openMore} timeout='auto' unmountOnExit>\n                    <List component='div' disablePadding>\n                        {!isGroup && (\n                            <>\n                                <ListItem button className={classes.listItem} onClick={this.handleSendMessage}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {t('SendMessage')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                                <ListItem button className={classes.listItem} onClick={this.handleBlock}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography color='secondary' variant='inherit' noWrap>\n                                                {isBlocked ? t('Unblock') : t('BlockContact')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            </>\n                        )}\n                        {isGroup && isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {isChannel ? t('LeaveChannel') : t('DeleteChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                        {isGroup && !isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {t('ReportChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                </Collapse>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MoreListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withSnackbar } from 'notistack';\nimport { withTranslation } from 'react-i18next';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\nimport CallIcon from '@material-ui/icons/Call';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport Button from '@material-ui/core/Button';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '../ColumnMiddle/MainMenuButton';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport UserControl from '../Tile/UserControl';\nimport ChatControl from '../Tile/ChatControl';\nimport ChatDetailsHeader from './ChatDetailsHeader';\nimport NotificationsListItem from './NotificationsListItem';\nimport MoreListItem from './MoreListItem';\nimport {\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isGroupChat,\n    getGroupChatMembers,\n    getChatFullInfo,\n    isPrivateChat,\n    getChatUserId,\n    isMeChat\n} from '../../Utils/Chat';\nimport { getUserStatusOrder } from '../../Utils/User';\nimport { loadUsersContent, loadChatsContent } from '../../Utils/File';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport { openChat } from '../../Actions/Client';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport OptionStore from '../../Stores/OptionStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatDetails.css';\n\nconst styles = theme => ({\n    closeIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    nested: {\n        // paddingLeft: theme.spacing.unit * 4,\n    },\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    listItem: {\n        padding: '11px 22px'\n    }\n});\n\nclass ChatDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.chatDetailsListRef = React.createRef();\n\n        const { chatId } = this.props;\n\n        this.members = new Map();\n        this.state = {\n            prevChatId: chatId,\n            hasGroupsInCommon: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                hasGroupsInCommon: false\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = list;\n        const snapshot = {\n            scrollTop: scrollTop,\n            scrollHeight: scrollHeight,\n            offsetHeight: offsetHeight\n        };\n\n        console.log(\n            `[ChatDetails] getSnapshotBeforeUpdate chatId=${chatId} scrollTop=${scrollTop} scrollHeight=${scrollHeight} offsetHeight=${offsetHeight}`\n        );\n\n        return snapshot;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.hasGroupsInCommon !== hasGroupsInCommon) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId } = this.props;\n        if (prevProps.chatId !== chatId) {\n            this.handleSelectChat();\n        }\n\n        console.log('chatDetailsListRef', this.chatDetailsListRef);\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n        console.log(\n            `[ChatDetails] componentDidUpdate before chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n        list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n        console.log(\n            `[ChatDetails] componentDidUpdate after chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n    }\n\n    componentDidMount() {\n        this.handleSelectChat();\n\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.handleSelectChat();\n\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserStatus = update => {\n        if (this.members.has(update.user_id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelectChat = () => {\n        this.getFullInfo();\n\n        this.getGroupsInCommon();\n\n        this.loadChatContents();\n    };\n\n    loadChatContents = () => {\n        const { chatId } = this.props;\n\n        const store = FileStore.getStore();\n\n        loadChatsContent(store, [chatId]);\n        const members = getGroupChatMembers(chatId).map(x => x.user_id);\n        loadUsersContent(store, members);\n    };\n\n    getFullInfo = () => {\n        const { chatId } = this.props;\n\n        getChatFullInfo(chatId);\n    };\n\n    getGroupsInCommon = async () => {\n        const { chatId } = this.props;\n\n        const isGroup = isGroupChat(chatId);\n        if (isGroup) return;\n\n        const isMe = isMeChat(chatId);\n        if (isMe) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: getChatUserId(chatId),\n            offset_chat_id: 0,\n            limit: 1\n        });\n\n        this.setState({ hasGroupsInCommon: result.chat_ids.length > 0 });\n    };\n\n    handleUsernameHint = () => {\n        const { t, chatId } = this.props;\n        const username = getChatUsername(chatId);\n        if (!username) return;\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n        const usernameLink = telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/';\n\n        copy(usernameLink + username);\n\n        const key = `${chatId}_copy_username`;\n        const message = t('TextCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handlePhoneHint = () => {\n        const { t, chatId } = this.props;\n        const phoneNumber = getChatPhoneNumber(chatId);\n        if (!phoneNumber) return;\n\n        copy(formatPhoneNumber(phoneNumber));\n\n        const key = `${chatId}_copy_phone`;\n        const message = t('PhoneCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleHeaderClick = () => {\n        this.chatDetailsListRef.current.scrollTop = 0;\n    };\n\n    handleOpenViewer = () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.photo) return;\n\n        ApplicationStore.setProfileMediaViewerContent({ chatId: chatId });\n    };\n\n    handleOpenChat = () => {\n        const { chatId, popup } = this.props;\n\n        openChat(chatId, null, false);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    getContentHeight = () => {\n        if (!this.chatDetailsListRef) return 0;\n\n        return this.chatDetailsListRef.current.clientHeight;\n    };\n\n    render() {\n        const {\n            t,\n            className,\n            chatId,\n            classes,\n            onOpenSharedMedia,\n            onOpenGroupsInCommon,\n            popup,\n            backButton,\n            onClose\n        } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) {\n            return (\n                <div className='chat-details'>\n                    <ChatDetailsHeader onClose={onClose} />\n                    <div ref={this.chatDetailsListRef} className='chat-details-list' />\n                </div>\n            );\n        }\n\n        const username = getChatUsername(chatId);\n        const phoneNumber = getChatPhoneNumber(chatId);\n        const bio = getChatBio(chatId);\n        const isGroup = isGroupChat(chatId);\n        const isMe = isMeChat(chatId);\n\n        const members = getGroupChatMembers(chatId);\n        const users = [];\n        this.members = new Map();\n        members.forEach(member => {\n            const user = UserStore.get(member.user_id);\n            if (user) {\n                this.members.set(user.id, user.id);\n                users.push(user);\n            }\n        });\n\n        const sortedUsers = users.sort((x, y) => {\n            return getUserStatusOrder(y) - getUserStatusOrder(x);\n        });\n        const items = sortedUsers.map(user => (\n            <ListItem button className={classes.listItem} key={user.id}>\n                <UserControl userId={user.id} onSelect={this.handleSelectUser} />\n            </ListItem>\n        ));\n\n        const { photo } = chat;\n\n        const content = (\n            <>\n                <ChatDetailsHeader\n                    chatId={chatId}\n                    backButton={backButton}\n                    onClose={onClose}\n                    onClick={this.handleHeaderClick}\n                />\n                <div ref={this.chatDetailsListRef} className='chat-details-list'>\n                    <div className='chat-details-info'>\n                        <ChatControl\n                            chatId={chatId}\n                            showStatus={popup}\n                            showSavedMessages={!popup}\n                            onTileSelect={photo ? this.handleOpenViewer : null}\n                        />\n                    </div>\n                    {(username || phoneNumber || bio) && (\n                        <List>\n                            {username && (\n                                <ListItem button className={classes.listItem} onClick={this.handleUsernameHint}>\n                                    <ListItemIcon>\n                                        <AlternateEmailIcon />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {username}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            )}\n                            {phoneNumber && (\n                                <>\n                                    <ListItem button className={classes.listItem} onClick={this.handlePhoneHint}>\n                                        <ListItemIcon>\n                                            <CallIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {formatPhoneNumber(phoneNumber)}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                </>\n                            )}\n                            {bio && (\n                                <ListItem className={classes.listItem}>\n                                    <ListItemIcon>\n                                        <ErrorOutlineIcon className='chat-details-info-icon' />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={bio}\n                                        style={{ whiteSpace: 'pre-wrap', wordWrap: 'break-word' }}\n                                    />\n                                </ListItem>\n                            )}\n                        </List>\n                    )}\n                    <Divider />\n                    <List>\n                        {!isMe && <NotificationsListItem chatId={chatId} />}\n                        {isGroup && <MoreListItem chatId={chatId} />}\n                        {!isGroup && (\n                            <ListItem button className={classes.listItem} onClick={this.handleOpenChat}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='primary' variant='inherit' noWrap>\n                                            {t('SendMessage').toUpperCase()}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    <Divider />\n                    <List>\n                        <ListItem button disabled className={classes.listItem} onClick={onOpenSharedMedia}>\n                            <ListItemIcon>\n                                <PhotoIcon />\n                            </ListItemIcon>\n                            <ListItemText\n                                primary={\n                                    <Typography variant='inherit' noWrap>\n                                        {t('SharedMedia')}\n                                    </Typography>\n                                }\n                            />\n                        </ListItem>\n                        {hasGroupsInCommon && (\n                            <ListItem button className={classes.listItem} onClick={onOpenGroupsInCommon}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography variant='inherit' noWrap>\n                                            {t('GroupsInCommon')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    {items.length > 0 && (\n                        <>\n                            <Divider />\n                            <List>{items}</List>\n                        </>\n                    )}\n                </div>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className={classNames('chat-details', className)}>{content}</div>;\n    }\n}\n\nChatDetails.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    popup: PropTypes.bool,\n    onClose: PropTypes.func,\n    onOpenSharedMedia: PropTypes.func,\n    onOpenGroupsInCommon: PropTypes.func\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withSnackbar,\n    withRestoreRef()\n);\n\nexport default enhance(ChatDetails);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {IconButton} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport {withStyles} from '@material-ui/core/styles';\nimport './GroupsInCommonHeader.css'\n\nconst styles = {\n    backIconButton : {\n        margin: '8px -2px 8px 12px',\n    }\n};\n\nclass GroupsInCommonHeader extends React.Component {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { classes, onClose } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton\n                    className={classes.backIconButton}\n                    onClick={onClose}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Groups in common</span>\n                </div>\n            </div>);\n    }\n}\n\nGroupsInCommonHeader.propTypes = {\n    onClose: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(GroupsInCommonHeader);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatControl from '../Tile/ChatControl';\nimport GroupsInCommonHeader from './GroupsInCommonHeader';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './GroupsInCommon.css';\n\nclass GroupsInCommon extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: []\n        };\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n\n        const userId = getChatUserId(chatId);\n        if (!userId) return;\n\n        TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: userId,\n            offset_chat_id: 0,\n            limit: 100\n        }).then(result => {\n            const store = FileStore.getStore();\n            loadChatsContent(store, result.chat_ids);\n\n            this.setState({ chatIds: result.chat_ids });\n        });\n    }\n\n    handleSelect = chat => {\n        const { popup } = this.props;\n\n        openChat(chat.id);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    render() {\n        const { minHeight, onClose, popup } = this.props;\n        const { chatIds } = this.state;\n\n        const chats = chatIds.map(x => (\n            <ListItem button key={x}>\n                <ChatControl chatId={x} onSelect={this.handleSelect} />\n            </ListItem>\n        ));\n\n        const content = (\n            <>\n                <GroupsInCommonHeader onClose={onClose} />\n                <div className='groups-in-common-list' style={{ minHeight }}>\n                    {chats}\n                </div>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className='groups-in-common'>{content}</div>;\n    }\n}\n\nGroupsInCommon.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    popup: PropTypes.bool,\n    minHeight: PropTypes.number\n};\n\nGroupsInCommon.defaultProps = {\n    popup: false,\n    minHeight: 0\n};\n\nexport default GroupsInCommon;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport {IconButton} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './SharedMediaHeaderControl.css'\n\nconst styles = {\n    backIconButton : {\n        margin: '8px -2px 8px 12px',\n    }\n};\n\nclass SharedMediaHeaderControl extends React.Component {\n\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { classes, close } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton\n                    className={classes.backIconButton}\n                    onClick={close}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Shared Media</span>\n                </div>\n            </div>);\n    }\n}\n\nexport default withStyles(styles)(SharedMediaHeaderControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport SharedMediaHeaderControl from './SharedMediaHeaderControl';\nimport './SharedMedia.css';\nimport PropTypes from 'prop-types';\nimport GroupsInCommon from './GroupsInCommon';\n\nclass SharedMedia extends React.Component {\n    state = {\n        value: 0\n    };\n\n    handleChange = (event, value) => {\n        this.setState({ value });\n    };\n\n    render() {\n        const { onClose, popup } = this.props;\n        const { value } = this.state;\n\n        const content = (\n            <>\n                <SharedMediaHeaderControl close={onClose} />\n                <Tabs\n                    value={value}\n                    onChange={this.handleChange}\n                    indicatorColor='primary'\n                    textColor='primary'\n                    scrollable\n                    scrollButtons='off'\n                    fullWidth>\n                    <Tab label='Media' style={{ minWidth: '40px' }} />\n                    <Tab label='Docs' style={{ minWidth: '40px' }} />\n                    <Tab label='Links' style={{ minWidth: '40px' }} />\n                    <Tab label='Audio' style={{ minWidth: '40px' }} />\n                </Tabs>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className='shared-media'>{content}</div>;\n    }\n}\n\nSharedMedia.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    popup: PropTypes.bool,\n    minHeight: PropTypes.number\n};\n\nSharedMedia.defaultProps = {\n    popup: false,\n    minHeight: 0\n};\n\nexport default SharedMedia;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatDetails from './ChatDetails';\nimport GroupsInCommon from './GroupsInCommon';\nimport SharedMedia from './SharedMedia';\nimport { borderStyle } from '../Theme';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfo.css';\n\n// const styles = (theme) => ({\n//     borderColor: {\n//         borderColor: theme.palette.divider\n//     }\n// });\n\nclass ChatInfo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.detailsRef = React.createRef();\n\n        const { popup } = props;\n\n        this.state = {\n            chatId: popup ? ApplicationStore.dialogChatId : ApplicationStore.chatId\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { popup } = this.props;\n        if (popup) return;\n\n        this.setState({\n            chatId: update.nextChatId,\n            userChatId: null,\n            openSharedMedia: false,\n            openGroupsInCommon: false\n        });\n    };\n\n    handelOpenSharedMedia = () => {\n        this.setState({ openSharedMedia: true });\n    };\n\n    handleCloseSharedMedia = () => {\n        this.setState({ openSharedMedia: false });\n    };\n\n    handleOpenGroupsInCommon = height => {\n        console.log('ChatInfo.handleOpenGroupsInCommon', height);\n        this.setState({ openGroupsInCommon: true });\n    };\n\n    handleCloseGroupsInCommon = () => {\n        this.setState({ openGroupsInCommon: false });\n    };\n\n    handleCloseChatDetails = () => {\n        const { popup } = this.props;\n        const { userChatId } = this.state;\n        if (userChatId) {\n            this.setState({ userChatId: null });\n        } else if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        } else {\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n    };\n\n    handleSelectUser = async user => {\n        if (!user) return;\n\n        let chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: user.id,\n            force: true\n        });\n\n        chat = ChatStore.get(chat.id) || chat;\n        if (!chat) return;\n\n        this.setState({ userChatId: chat.id });\n    };\n\n    render() {\n        const { classes, className, popup } = this.props;\n        const { chatId, userChatId, openSharedMedia, openGroupsInCommon } = this.state;\n        const currentChatId = chatId || userChatId;\n        const minHeight = this.detailsRef && this.detailsRef.current ? this.detailsRef.current.getContentHeight() : 0;\n\n        let content = null;\n        if (openSharedMedia) {\n            content = (\n                <SharedMedia\n                    chatId={currentChatId}\n                    popup={popup}\n                    minHeight={minHeight}\n                    onClose={this.handleCloseSharedMedia}\n                />\n            );\n        } else if (openGroupsInCommon) {\n            content = (\n                <GroupsInCommon\n                    chatId={currentChatId}\n                    popup={popup}\n                    minHeight={minHeight}\n                    onClose={this.handleCloseGroupsInCommon}\n                />\n            );\n        } else {\n            content = (\n                <ChatDetails\n                    ref={this.detailsRef}\n                    chatId={currentChatId}\n                    popup={popup}\n                    backButton={userChatId === chatId}\n                    onOpenSharedMedia={this.handelOpenSharedMedia}\n                    onOpenGroupsInCommon={this.handleOpenGroupsInCommon}\n                    onClose={this.handleCloseChatDetails}\n                />\n            );\n        }\n\n        return popup ? (\n            <>{content}</>\n        ) : (\n            <div className={classNames(classes.borderColor, { 'right-column': !popup }, className)}>{content}</div>\n        );\n    }\n}\n\nChatInfo.propTypes = {\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    popup: PropTypes.bool\n};\n\nChatInfo.defaultProps = {\n    className: null,\n    classes: null,\n    popup: false\n};\n\nexport default withStyles(borderStyle)(ChatInfo);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './TopChat.css';\n\nconst styles = {\n    userStatusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    }\n};\n\nclass TopChat extends React.PureComponent {\n    render() {\n        const { classes, chatId, onSelect, showSavedMessages } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, showSavedMessages);\n\n        return (\n            <div className='top-chat'>\n                <ChatTileControl chatId={chatId} onSelect={onSelect} showSavedMessages={showSavedMessages} showOnline />\n                <div className='top-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nTopChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool\n};\n\nTopChat.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withStyles(styles)(TopChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport './RecentlyFoundChat.css';\n\nconst styles = {\n    listItem: {\n        padding: '0px'\n    }\n};\n\nclass RecentlyFoundChat extends React.PureComponent {\n    render() {\n        const { chatId, onClick, classes } = this.props;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div className='recently-found-chat'>\n                    <div className='chat-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                        <div className='dialog-inner-wrapper'>\n                            <div className='tile-first-row'>\n                                <DialogTitleControl chatId={chatId} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nRecentlyFoundChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default withStyles(styles)(RecentlyFoundChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getChatUsername, getGroupChatMembersCount } from '../../Utils/Chat';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundPublicChat.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    listItemSelected: {\n        backgroundColor: theme.palette.primary.main + '!important'\n    },\n    foundPublicChatSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundPublicChat extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            previousChatId: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { nextChatId, previousChatId } = update;\n\n        this.setState({\n            nextChatId: nextChatId,\n            previousChatId: previousChatId\n        });\n    };\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        onSelect(chatId);\n    };\n\n    render() {\n        const { chatId, onClick, classes } = this.props;\n        const selectedChatId = this.state.nextChatId;\n\n        const username = getChatUsername(chatId);\n        const membersCount = getGroupChatMembersCount(chatId);\n        let subscribersString = '';\n        if (membersCount > 0) {\n            subscribersString = membersCount === 1 ? ', 1 subscriber' : `, ${membersCount} subscribers`;\n        }\n\n        return (\n            <ListItem button classes={{ root: classes.listItem }} onClick={onClick}>\n                <div\n                    className={classNames('found-public-chat', {\n                        [classes.listItemSelected]: chatId === selectedChatId,\n                        'accent-background': chatId === selectedChatId\n                    })}\n                    onClick={this.handleClick}>\n                    <ChatTileControl chatId={chatId} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundPublicChatSubtitle)}>\n                                @{username}\n                                {subscribersString}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundPublicChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(FoundPublicChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatTileControl from './ChatTileControl';\nimport UserTileControl from './UserTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getMessageDate, getMessageSenderFullName, getMessageSenderName } from '../../Utils/Chat';\nimport { getContent } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundMessage.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    accentBackground: {\n        background: theme.palette.primary.main + '!important'\n    },\n    foundMessageSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            nextMessageId: ApplicationStore.getMessageId()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId && nextState.nextMessageId === messageId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId && nextState.previousMessageId === messageId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            ...update\n        });\n    };\n\n    render() {\n        const { chatId, messageId, chatSearch, onClick, classes, t } = this.props;\n        const selectedChatId = this.state.nextChatId;\n        const selectedMessageId = this.state.nextMessageId;\n        const message = MessageStore.get(chatId, messageId);\n\n        const { sender_user_id } = message;\n\n        const date = getMessageDate(message);\n        const senderName = getMessageSenderName(message);\n        const senderFullName = getMessageSenderFullName(message);\n        const content = getContent(message, t) || '\\u00A0';\n\n        const tile =\n            sender_user_id && chatSearch ? (\n                <UserTileControl userId={sender_user_id} />\n            ) : (\n                <ChatTileControl chatId={chatId} />\n            );\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div\n                    className={classNames(\n                        'found-message',\n                        { [classes.accentBackground]: chatId === selectedChatId && messageId === selectedMessageId },\n                        { 'accent-background': chatId === selectedChatId && messageId === selectedMessageId }\n                    )}>\n                    {tile}\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            {chatSearch && senderFullName ? (\n                                <div className='dialog-title'>{senderFullName}</div>\n                            ) : (\n                                <DialogTitleControl chatId={chatId} />\n                            )}\n                            <div className={classNames('dialog-meta-date', classes.foundMessageSubtitle)}>{date}</div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundMessageSubtitle)}>\n                                {\n                                    <>\n                                        {!chatSearch && senderName && (\n                                            <span className='dialog-content-accent'>{senderName}: </span>\n                                        )}\n                                        {content}\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundMessage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    chatSearch: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(FoundMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './SearchCaption.css';\n\nconst styles = theme => ({\n    searchCaption: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] + '!important' : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    },\n    searchCaptionCommand: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    }\n});\n\nfunction SearchCaption(props) {\n    const { caption, command, onClick, classes } = props;\n\n    return (\n        <div className={classNames('search-caption', classes.searchCaption)}>\n            <div className='search-caption-title'>{caption}</div>\n            {Boolean(command) && (\n                <a className={classes.searchCaptionCommand} onClick={onClick}>\n                    {command}\n                </a>\n            )}\n        </div>\n    );\n}\n\nSearchCaption.propTypes = {\n    caption: PropTypes.string.isRequired,\n    command: PropTypes.string,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchCaption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport ChatControl from '../../Tile/ChatControl';\nimport TopChat from '../../Tile/TopChat';\nimport RecentlyFoundChat from '../../Tile/RecentlyFoundChat';\nimport FoundPublicChat from '../../Tile/FoundPublicChat';\nimport FoundMessage from '../../Tile/FoundMessage';\nimport SearchCaption from './SearchCaption';\nimport { loadChatsContent, loadUsersContent } from '../../../Utils/File';\nimport { filterMessages } from '../../../Utils/Message';\nimport { getCyrillicInput, getLatinInput } from '../../../Utils/Language';\nimport { orderCompare } from '../../../Utils/Common';\nimport { USERNAME_LENGTH_MIN } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport FileStore from '../../../Stores/FileStore';\nimport ChatStore from '../../../Stores/ChatStore';\nimport UserStore from '../../../Stores/UserStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './Search.css';\n\nconst styles = theme => ({\n    closeSearchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    listItem: {\n        padding: '0px'\n    },\n    search: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    }\n});\n\nclass Search extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n\n        const { chatId, text } = this.props;\n\n        this.state = {\n            prevPropsChatId: chatId,\n            prevPropsText: text,\n\n            top: null,\n            recentlyFound: null,\n            local: null,\n            global: null,\n            messages: null\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevPropsChatId || props.text !== state.prevPropsText) {\n            return {\n                prevPropsChatId: props.chatId,\n                prevPropsText: props.text,\n\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        ApplicationStore.on('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    onClientUpdateSearchText = update => {\n        const { text } = update;\n\n        const trimmedText = text.trim();\n\n        if (!trimmedText) {\n            this.loadContent();\n        } else {\n            this.searchText(trimmedText);\n        }\n    };\n\n    concatSearchResults = results => {\n        const arr = [];\n        const map = new Map();\n\n        for (let i = 0; i < results.length; i++) {\n            let result = results[i].chat_ids;\n            if (result) {\n                for (let j = 0; j < result.length; j++) {\n                    if (!map.has(result[j])) {\n                        map.set(result[j], result[j]);\n                        arr.push(result[j]);\n                    }\n                }\n            }\n        }\n\n        arr.sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        return arr;\n    };\n\n    searchText = async text => {\n        this.sessionId = new Date();\n        this.text = text;\n        const sessionId = this.sessionId;\n        let store = null;\n\n        const { chatId } = this.props;\n        const { savedMessages } = this.state;\n\n        if (!chatId) {\n            const promises = [];\n            const localPromise = TdLibController.send({\n                '@type': 'searchChats',\n                query: text,\n                limit: 100\n            });\n            promises.push(localPromise);\n\n            const latinText = getLatinInput(text);\n            if (latinText) {\n                const latinLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: latinText,\n                    limit: 100\n                });\n                promises.push(latinLocalPromise);\n            }\n\n            const cyrillicText = getCyrillicInput(text);\n            if (cyrillicText) {\n                const cyrillicLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: cyrillicText,\n                    limit: 100\n                });\n                promises.push(cyrillicLocalPromise);\n            }\n\n            const results = await Promise.all(promises.map(x => x.catch(e => null)));\n            const local = this.concatSearchResults(results);\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            if (savedMessages) {\n                const { t } = this.props;\n\n                const searchText = text.toUpperCase();\n                const savedMessagesStrings = ['SAVED MESSAGES', t('SavedMessages').toUpperCase()];\n\n                if (\n                    savedMessagesStrings.some(el => el.includes(searchText)) ||\n                    (latinText && savedMessagesStrings.some(el => el.includes(latinText.toUpperCase())))\n                ) {\n                    local.splice(0, 0, savedMessages.id);\n                }\n            }\n\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: local,\n                global: null,\n                messages: null\n            });\n\n            store = FileStore.getStore();\n            loadChatsContent(store, local);\n\n            if (text.length >= USERNAME_LENGTH_MIN) {\n                const globalPromises = [];\n\n                const globalPromise = TdLibController.send({\n                    '@type': 'searchPublicChats',\n                    query: text\n                });\n                globalPromises.push(globalPromise);\n\n                if (latinText) {\n                    const globalLatinPromise = TdLibController.send({\n                        '@type': 'searchPublicChats',\n                        query: latinText\n                    });\n                    globalPromises.push(globalLatinPromise);\n                }\n\n                const globalResults = await Promise.all(globalPromises.map(x => x.catch(e => null)));\n                const global = this.concatSearchResults(globalResults);\n\n                if (sessionId !== this.sessionId) {\n                    return;\n                }\n\n                this.setState({\n                    global: global\n                });\n\n                store = FileStore.getStore();\n                loadChatsContent(store, global);\n            }\n        }\n\n        let messages = [];\n        if (chatId) {\n            messages = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: text,\n                sender_user_id: 0,\n                from_message_id: 0,\n                offset: 0,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            messages = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: text,\n                offset_date: 0,\n                offset_chat_id: 0,\n                offset_message_id: 0,\n                limit: 50\n            });\n        }\n\n        MessageStore.setItems(messages.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: messages\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < messages.messages.length; i++) {\n            chats.set(messages.messages[i].chat_id, messages.messages[i].chat_id);\n            if (messages.messages[i].sender_user_id) {\n                users.set(messages.messages[i].sender_user_id, messages.messages[i].sender_user_id);\n            }\n        }\n\n        store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    loadContent = async () => {\n        const { chatId } = this.props;\n        if (chatId) {\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            });\n\n            return;\n        }\n\n        const topPromise = TdLibController.send({\n            '@type': 'getTopChats',\n            category: { '@type': 'topChatCategoryUsers' },\n            limit: 30\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const recentlyFoundPromise = TdLibController.send({\n            '@type': 'searchChats',\n            query: '',\n            limit: 100\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        }).catch(error => {});\n\n        const [top, recentlyFound, savedMessages] = await Promise.all([\n            topPromise,\n            recentlyFoundPromise,\n            savedMessagesPromise\n        ]);\n\n        this.setState({\n            top: top,\n            recentlyFound: recentlyFound,\n            savedMessages: savedMessages,\n            local: null,\n            global: null,\n            messages: null\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, top.chat_ids);\n        loadChatsContent(store, recentlyFound.chat_ids);\n    };\n\n    handleRecentlyFound = async () => {\n        const chats = await TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 20\n        });\n\n        for (let i = chats.chat_ids.length - 1; i >= 0; i--) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chats.chat_ids[i]\n            });\n        }\n    };\n\n    handleClearRecentlyFound = event => {\n        event.stopPropagation();\n\n        TdLibController.send({\n            '@type': 'clearRecentlyFoundChats'\n        });\n\n        this.setState({ recentlyFound: null });\n    };\n\n    handleSelectMessage = (chatId, messageId, addToRecent, keepOpen) => {\n        const { onSelectMessage } = this.props;\n\n        if (addToRecent) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chatId\n            });\n        }\n\n        onSelectMessage(chatId, messageId, keepOpen);\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            this.onLoadPrevious();\n        }\n    };\n\n    getOffset = messages => {\n        const length = messages ? messages.messages.length : 0;\n\n        const offsetDate = length > 0 ? messages.messages[length - 1].date : 0;\n        const offsetChatId = length > 0 ? messages.messages[length - 1].chat_id : 0;\n        const offsetMessageId = length > 0 ? messages.messages[length - 1].id : 0;\n\n        return {\n            offset_date: offsetDate,\n            offset_chat_id: offsetChatId,\n            offset_message_id: offsetMessageId\n        };\n    };\n\n    concatMessages = (messages, result) => {\n        if (!result) return messages;\n        if (!result.messages.length) return messages;\n\n        if (!messages) return result;\n        if (!messages.messages.length) return result;\n\n        return {\n            total_count: result.total_count,\n            messages: messages.messages.concat(result.messages)\n        };\n    };\n\n    onLoadPrevious = async () => {\n        if (this.loading) return;\n\n        const { chatId } = this.props;\n\n        const sessionId = this.sessionId;\n\n        const { messages } = this.state;\n\n        const offset = this.getOffset(messages);\n\n        this.loading = true;\n        let result = [];\n        if (chatId) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: this.text,\n                sender_user_id: 0,\n                from_message_id: offset.offset_message_id,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            result = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: this.text,\n                ...offset,\n                limit: 50\n            });\n        }\n        this.loading = false;\n\n        filterMessages(result, messages ? messages.messages : []);\n\n        MessageStore.setItems(result.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: this.concatMessages(messages, result)\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < result.messages.length; i++) {\n            chats.set(result.messages[i].chat_id, result.messages[i].chat_id);\n            if (result.messages[i].sender_user_id) {\n                users.set(result.messages[i].sender_user_id, result.messages[i].sender_user_id);\n            }\n        }\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    handleTopChatsScroll = event => {\n        event.stopPropagation();\n    };\n\n    handleClose = () => {\n        const { onClose } = this.props;\n\n        onClose();\n    };\n\n    render() {\n        const { classes, chatId } = this.props;\n        const { top, recentlyFound, local, global, messages } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const topChats =\n            top && top.chat_ids\n                ? top.chat_ids.map(x => (\n                      <TopChat key={x} chatId={x} onSelect={() => this.handleSelectMessage(x, null, false, false)} />\n                  ))\n                : [];\n\n        const recentlyFoundChats =\n            recentlyFound && recentlyFound.chat_ids\n                ? recentlyFound.chat_ids.map(x => (\n                      <RecentlyFoundChat\n                          key={x}\n                          chatId={x}\n                          onClick={() => this.handleSelectMessage(x, null, true, false)}\n                      />\n                  ))\n                : [];\n\n        const localChats = local\n            ? local.map(x => (\n                  <RecentlyFoundChat\n                      key={x}\n                      chatId={x}\n                      onClick={() => this.handleSelectMessage(x, null, true, false)}\n                  />\n              ))\n            : [];\n\n        const globalChats = global\n            ? global.map(x => (\n                  <FoundPublicChat key={x} chatId={x} onClick={() => this.handleSelectMessage(x, null, true, true)} />\n              ))\n            : [];\n\n        const globalMessages =\n            messages && messages.messages\n                ? messages.messages.map(x => (\n                      <FoundMessage\n                          key={`${x.chat_id}_${x.id}`}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          chatSearch={Boolean(chatId)}\n                          onClick={() => this.handleSelectMessage(x.chat_id, x.id, false, true)}\n                      />\n                  ))\n                : [];\n\n        let messagesCaption = 'No messages found';\n        if (messages && messages.total_count) {\n            messagesCaption = messages.total_count === 1 ? 'Found 1 message' : `Found ${messages.total_count} messages`;\n        }\n\n        return (\n            <div ref={this.listRef} className={classNames(classes.search, 'search')} onScroll={this.handleScroll}>\n                {chat && (\n                    <div className='search-chat'>\n                        <SearchCaption caption='Search messages in' />\n                        <div className='search-chat-wrapper'>\n                            <div className='search-chat-control'>\n                                <ChatControl chatId={chatId} showStatus={false} />\n                            </div>\n                            <IconButton\n                                className={classes.closeSearchIconButton}\n                                aria-label='Search'\n                                onMouseDown={this.handleClose}>\n                                <CloseIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                )}\n                {topChats.length > 0 && (\n                    <div className='search-top-chats'>\n                        <SearchCaption caption='People' />\n                        <div className='search-top-chats-list' onScroll={this.handleTopChatsScroll}>\n                            <div className='search-top-chats-placeholder' />\n                            {topChats}\n                            <div className='search-top-chats-placeholder' />\n                        </div>\n                    </div>\n                )}\n                {recentlyFoundChats.length > 0 && (\n                    <div className='search-recently-found-chats'>\n                        <SearchCaption caption='Recent' command='Clear' onClick={this.handleClearRecentlyFound} />\n                        {recentlyFoundChats}\n                    </div>\n                )}\n                {localChats.length > 0 && (\n                    <div className='search-local-chats'>\n                        <SearchCaption caption='Chats and contacts' />\n                        {localChats}\n                    </div>\n                )}\n                {globalChats.length > 0 && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption='Global search' />\n                        {globalChats}\n                    </div>\n                )}\n                {messages && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption={messagesCaption} />\n                        {globalMessages}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nSearch.propTypes = {\n    chatId: PropTypes.number,\n    text: PropTypes.string,\n    onSelectMessage: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Search);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { withStyles } from '@material-ui/core/styles';\nimport red from '@material-ui/core/colors/red';\nimport orange from '@material-ui/core/colors/orange';\nimport amber from '@material-ui/core/colors/amber';\nimport green from '@material-ui/core/colors/green';\nimport blue from '@material-ui/core/colors/blue';\nimport indigo from '@material-ui/core/colors/indigo';\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    },\n    redRoot: {\n        color: red[600],\n        '&$checked': {\n            color: red[500]\n        }\n    },\n    orangeRoot: {\n        color: orange[600],\n        '&$checked': {\n            color: orange[500]\n        }\n    },\n    amberRoot: {\n        color: amber[600],\n        '&$checked': {\n            color: amber[500]\n        }\n    },\n    greenRoot: {\n        color: green[600],\n        '&$checked': {\n            color: green[500]\n        }\n    },\n    blueRoot: {\n        color: blue[600],\n        '&$checked': {\n            color: blue[500]\n        }\n    },\n    indigoRoot: {\n        color: indigo[600],\n        '&$checked': {\n            color: indigo[500]\n        }\n    },\n    deepPurpleRoot: {\n        color: deepPurple[600],\n        '&$checked': {\n            color: deepPurple[500]\n        }\n    },\n    checked: {}\n});\n\nclass ThemePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            type: this.props.theme.palette.type,\n            color: this.getColorString(this.props.theme.palette.primary.main)\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ type: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: event.target.value,\n            primary: this.getColor(this.state.color)\n        });\n    };\n\n    handleAccentChange = event => {\n        this.setState({ color: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: this.state.type,\n            primary: this.getColor(event.target.value)\n        });\n    };\n\n    getColorString = value => {\n        switch (value) {\n            case red['500']:\n                return 'red';\n            case orange['500']:\n                return 'orange';\n            case amber['500']:\n                return 'amber';\n            case green['500']:\n                return 'green';\n            case blue['500']:\n                return 'blue';\n            case indigo['500']:\n                return 'indigo';\n            case deepPurple['500']:\n                return 'deepPurple';\n        }\n\n        return null;\n    };\n\n    getColor = value => {\n        switch (value) {\n            case 'red':\n                return red;\n            case 'orange':\n                return orange;\n            case 'amber':\n                return amber;\n            case 'green':\n                return green;\n            case 'blue':\n                return blue;\n            case 'indigo':\n                return indigo;\n            case 'deepPurple':\n                return deepPurple;\n        }\n\n        return null;\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { type, color } = this.state;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onClose={this.handleClose}\n                aria-labelledby='alert-dialog-title'\n                aria-describedby='alert-dialog-description'>\n                <DialogTitle id='alert-dialog-title'>Appearance</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Theme\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='theme'\n                            name='theme1'\n                            className={classes.group}\n                            value={type}\n                            onChange={this.handleChange}>\n                            <FormControlLabel value='light' control={<Radio color='primary' />} label='Light' />\n                            <FormControlLabel value='dark' control={<Radio color='primary' />} label='Dark' />\n                        </RadioGroup>\n                    </FormControl>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Accent\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='accent'\n                            name='accent1'\n                            className={classes.group}\n                            value={color}\n                            onChange={this.handleAccentChange}>\n                            <FormControlLabel\n                                value='red'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.redRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Red'\n                            />\n                            <FormControlLabel\n                                value='orange'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.orangeRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Orange'\n                            />\n                            <FormControlLabel\n                                value='amber'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.amberRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Amber'\n                            />\n                            <FormControlLabel\n                                value='green'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.greenRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Green'\n                            />\n                            <FormControlLabel\n                                value='blue'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.blueRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Blue'\n                            />\n                            <FormControlLabel\n                                value='indigo'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.indigoRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Indigo'\n                            />\n                            <FormControlLabel\n                                value='deepPurple'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.deepPurpleRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Deep Purple'\n                            />\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nThemePicker.propTypes = {};\n\nexport default withStyles(styles, { withTheme: true })(ThemePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport TdLibController from '../../Controllers/TdLibController';\nimport LocalizationStore from '../../Stores/LocalizationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    }\n});\n\nclass LanguagePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { i18n } = props;\n        const language = i18n ? i18n.language : null;\n\n        this.state = {\n            open: false,\n            language: language || 'en'\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ language: event.target.value });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: event.target.value });\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { open, language } = this.state;\n        const info = LocalizationStore.info || { language_packs: [] };\n\n        const languages = info.language_packs.map(x => (\n            <FormControlLabel\n                key={x.id}\n                value={x.id}\n                control={<Radio color='primary' />}\n                label={`${x.name}\\xa0(${x.native_name})`}\n            />\n        ));\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={open}\n                onClose={this.handleClose}\n                aria-labelledby='language-dialog-title'\n                aria-describedby='language-dialog-description'>\n                <DialogTitle id='language-dialog-title'>{t('Language')}</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset'>\n                        <RadioGroup\n                            aria-label='language'\n                            name='language1'\n                            value={language}\n                            onChange={this.handleChange}>\n                            {languages}\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nLanguagePicker.propTypes = {};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withRestoreRef()\n);\n\nexport default enhance(LanguagePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { arrayBufferToBase64 } from './Utils/Common';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default async function register() {\n    console.log('[SW] Register');\n\n    if (FIRST_START_OPTIMIZATIONS) {\n        const cookies = new Cookies();\n        cookies.set('register', true);\n    }\n\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        const serviceWorkerName =\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\n        console.log(`[SW] Service worker url: ${swUrl}`);\n\n        if (!isLocalhost) {\n            // Is not local host. Just register service worker\n            await registerValidSW(swUrl);\n        } else {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            await checkValidServiceWorker(swUrl);\n        }\n    }\n}\n\nasync function registerValidSW(swUrl) {\n    console.log('[SW] RegisterValidSW');\n    try {\n        const registration = await navigator.serviceWorker.register(swUrl);\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        console.log('[SW] New content is available; please refresh.');\n\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\n                    } else {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        console.log('[SW] Content is cached for offline use.');\n                    }\n                }\n            };\n        };\n\n        await subscribeNotifications(registration);\n    } catch (error) {\n        console.error('[SW] Error during service worker registration: ', error);\n    }\n}\n\nasync function subscribeNotifications(registration) {\n    try {\n        let pushSubscription = await registration.pushManager.getSubscription();\n        if (pushSubscription) await pushSubscription.unsubscribe();\n\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\n\n        const { endpoint } = pushSubscription;\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\n\n        if (endpoint && p256dh_base64url && auth_base64url) {\n            const { authorizationState } = ApplicationStore;\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n                await TdLibController.send({\n                    '@type': 'registerDevice',\n                    device_token: {\n                        '@type': 'deviceTokenWebPush',\n                        endpoint: endpoint,\n                        p256dh_base64url: p256dh_base64url,\n                        auth_base64url: auth_base64url\n                    },\n                    other_user_ids: []\n                });\n            }\n        }\n    } catch (error) {\n        console.error('[SW] Error during service worker push subscription: ', error);\n    }\n}\n\nasync function checkValidServiceWorker(swUrl) {\n    console.log('[SW] CheckValidServiceWorker');\n    // Check if the service worker can be found. If it can't reload the page.\n    try {\n        const response = await fetch(swUrl);\n\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            const registration = await navigator.serviceWorker.ready;\n            await registration.unregister();\n\n            window.location.reload();\n        } else {\n            // Service worker found. Proceed as normal.\n            await registerValidSW(swUrl);\n        }\n    } catch (error) {\n        console.log('[SW] No internet connection found. App is running in offline mode.');\n    }\n}\n\nexport async function unregister() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.unregister();\n    }\n}\n\nexport async function update() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.update();\n    }\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ThemePicker from './ThemePicker';\nimport LanguagePicker from './LanguagePicker';\nimport { update } from '../../registerServiceWorker';\nimport { isAuthorizationReady } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n};\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'left'\n};\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            anchorEl: null\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleMenuOpen = event => {\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleLogOut = () => {\n        this.handleMenuClose();\n\n        this.props.onLogOut();\n    };\n\n    handleCheckUpdates = async () => {\n        this.handleMenuClose();\n\n        await update();\n    };\n\n    handleAppearance = event => {\n        this.handleMenuClose();\n\n        this.themePicker.open();\n    };\n\n    handleLanguage = event => {\n        this.handleMenuClose();\n\n        this.languagePicker.open();\n    };\n\n    setRef = ref => {\n        console.log(this);\n        this.languagePicker = ref;\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { anchorEl, authorizationState } = this.state;\n\n        const mainMenuControl = isAuthorizationReady(authorizationState) ? (\n            <>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}>\n                    <MenuItem onClick={this.handleCheckUpdates}>{t('UpdateTelegram')}</MenuItem>\n                    <MenuItem onClick={this.handleAppearance}>{t('Appearance')}</MenuItem>\n                    <MenuItem onClick={this.handleLanguage}>{t('Language')}</MenuItem>\n                    <MenuItem onClick={this.handleLogOut}>{t('LogOut')}</MenuItem>\n                </Menu>\n            </>\n        ) : null;\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleMenuOpen}>\n                    <MenuIcon />\n                </IconButton>\n                {mainMenuControl}\n                <ThemePicker innerRef={ref => (this.themePicker = ref)} />\n                <LanguagePicker ref={ref => (this.languagePicker = ref)} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Button,\n    IconButton\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport MainMenuButton from './MainMenuButton';\nimport { debounce, isAuthorizationReady, throttle } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport '../ColumnMiddle/Header.css';\n\nconst styles = {\n    headerIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    dialogText: {\n        whiteSpace: 'pre-wrap'\n    }\n};\n\nclass DialogsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.searchInput = React.createRef();\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            open: false\n        };\n\n        this.handleInput = debounce(this.handleInput, 250);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.openSearch && this.props.openSearch !== prevProps.openSearch) {\n            setTimeout(() => {\n                if (this.searchInput.current) {\n                    this.searchInput.current.focus();\n                }\n            }, 250);\n        }\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleLogOut = () => {\n        this.setState({ open: true });\n    };\n\n    handleDone = () => {\n        this.handleClose();\n        TdLibController.logOut();\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    handleSearch = () => {\n        const { onSearch, openSearch } = this.props;\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        onSearch(!openSearch);\n    };\n\n    handleKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleKeyUp = () => {\n        const innerText = this.searchInput.current.innerText;\n        const innerHTML = this.searchInput.current.innerHTML;\n\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchInput.current.innerHTML = '';\n        }\n\n        ApplicationStore.emit('clientUpdateSearchText', { text: innerText });\n    };\n\n    handlePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    render() {\n        const { classes, onClick, openSearch, t } = this.props;\n        const { open } = this.state;\n\n        const confirmLogoutDialog = open ? (\n            <Dialog transitionDuration={0} open={open} onClose={this.handleClose} aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText className={classes.dialogText}>{t('AreYouSureLogout')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        return (\n            <div className='header-master'>\n                {!openSearch ? (\n                    <>\n                        <MainMenuButton onLogOut={this.handleLogOut} />\n                        {confirmLogoutDialog}\n                        <div className='header-status grow cursor-pointer' onClick={onClick}>\n                            <span className='header-status-content'>{t('AppName')}</span>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='header-search-input grow'>\n                            <div\n                                id='header-search-inputbox'\n                                ref={this.searchInput}\n                                placeholder={t('Search')}\n                                key={Date()}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                            />\n                        </div>\n                    </>\n                )}\n                <IconButton\n                    className={classes.headerIconButton}\n                    aria-label={t('Search')}\n                    onMouseDown={this.handleSearch}>\n                    <SpeedDialIcon open={openSearch} icon={<SearchIcon />} openIcon={<CloseIcon />} />\n                </IconButton>\n            </div>\n        );\n    }\n}\n\nDialogsHeader.propTypes = {\n    openSearch: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    onSearch: PropTypes.func.isRequired,\n    onSearchTextChange: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles)\n);\n\nexport default enhance(DialogsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport {\n    getChatTypingString,\n    getChatDraft,\n    getLastMessageSenderName,\n    getLastMessageContent,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogContentControl.css';\n\nclass DialogContentControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateUserChatAction', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n\n        if (this.clearHistory) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        let contentControl = null;\n        const typingString = getChatTypingString(chatId);\n        if (typingString) {\n            contentControl = <span className='dialog-content-accent'>{typingString}</span>;\n        }\n\n        if (!contentControl) {\n            const draft = getChatDraft(chatId);\n            if (showChatDraft(chatId)) {\n                const text = draft.text || '\\u00A0';\n\n                contentControl = (\n                    <>\n                        <span className='dialog-content-draft'>{t('Draft') + ': '}</span>\n                        {text}\n                    </>\n                );\n            }\n        }\n\n        if (!contentControl) {\n            const content = getLastMessageContent(chat, t) || '\\u00A0';\n            const senderName = getLastMessageSenderName(chat);\n            contentControl = (\n                <>\n                    {senderName && <span className='dialog-content-accent'>{senderName}: </span>}\n                    {content}\n                </>\n            );\n        }\n\n        return <div className='dialog-content'>{contentControl}</div>;\n    }\n}\n\nexport default withTranslation()(DialogContentControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n    getChatMuteFor,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatUnreadMessageIcon,\n    isChatMuted,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogBadgeControl.css';\n\nconst styles = theme => ({\n    dialogBadge: {\n        background: theme.palette.primary.main\n    }\n});\n\nclass DialogBadgeControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatReadOutbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatReadOutbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateScopeNotificationSettings = update => {\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (chat.type['@type'] === 'chatTypeBasicGroup' || chat.type['@type'] === 'chatTypeSupergroup') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n        }\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { classes, chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { draft_message } = chat;\n\n        const unreadMessageIcon = getChatUnreadMessageIcon(chat);\n        const unreadCount = getChatUnreadCount(chat);\n        const unreadMentionCount = getChatUnreadMentionCount(chat);\n        const showUnreadCount = unreadCount > 1 || (unreadCount === 1 && unreadMentionCount < 1);\n        const showDraftChat = showChatDraft(chat.id);\n        const muteClassName = isChatMuted(chat) ? 'dialog-badge-muted' : '';\n\n        return (\n            <>\n                {unreadMessageIcon && !showDraftChat && <i className='dialog-badge-unread' />}\n                {unreadMentionCount && (\n                    <div className={classNames('dialog-badge', classes.dialogBadge)}>\n                        <div className='dialog-badge-mention'>@</div>\n                    </div>\n                )}\n                {showUnreadCount ? (\n                    <div className={classNames(muteClassName, 'dialog-badge', classes.dialogBadge)}>\n                        <span className='dialog-badge-text'>{unreadCount}</span>\n                    </div>\n                ) : chat.is_pinned && !unreadMessageIcon ? (\n                    <i className='dialog-badge-pinned' />\n                ) : null}\n            </>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogBadgeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getLastMessageDate } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogMetaControl.css';\n\nclass DialogMetaControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.on('updateMessageMentionRead', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.removeListener('updateMessageMentionRead', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        const date = getLastMessageDate(chat);\n\n        return <>{date && <div className='dialog-meta-date'>{date}</div>}</>;\n    }\n}\nexport default DialogMetaControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogContentControl from './DialogContentControl';\nimport DialogBadgeControl from './DialogBadgeControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogMetaControl from './DialogMetaControl';\nimport { openChat } from '../../Actions/Client';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogControl.css';\n\nconst styles = theme => ({\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {},\n    dialogActive: {\n        color: '#fff', //theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '& $statusRoot': {\n            background: theme.palette.primary.main\n        }\n    },\n    dialog: {\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main + '22',\n            '& $statusRoot': {\n                background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n            },\n            '& $statusIcon': {\n                background: theme.palette.primary.main + '22'\n            }\n        }\n    }\n});\n\nclass DialogControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialog = React.createRef();\n\n        const chat = ChatStore.get(this.props.chatId);\n        this.state = {\n            chat: chat\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.hidden !== this.props.hidden) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.previousChatId || chatId === update.nextChatId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelect = () => {\n        openChat(this.props.chatId);\n    };\n\n    render() {\n        const { classes, chatId, showSavedMessages, hidden } = this.props;\n\n        if (hidden) return null;\n\n        const currentChatId = ApplicationStore.getChatId();\n        const isSelected = currentChatId === chatId;\n\n        return (\n            <div\n                ref={this.dialog}\n                className={classNames(\n                    isSelected ? classes.dialogActive : classes.dialog,\n                    isSelected ? 'dialog-active' : 'dialog'\n                )}\n                onMouseDown={this.handleSelect}>\n                <div className='dialog-wrapper'>\n                    <ChatTileControl\n                        chatId={chatId}\n                        showSavedMessages={showSavedMessages}\n                        showOnline\n                        classes={{ statusRoot: classes.statusRoot, statusIcon: classes.statusIcon }}\n                    />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                            <DialogMetaControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <DialogContentControl chatId={chatId} />\n                            <DialogBadgeControl chatId={chatId} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nDialogControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    hidden: PropTypes.bool,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogControl.defaultProps = {\n    hidden: false,\n    showSavedMessages: true\n};\n\nexport default withStyles(styles, { withTheme: true })(DialogControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport DialogControl from '../Tile/DialogControl';\nimport { CHAT_SLICE_LIMIT } from '../../Constants';\nimport { loadChatsContent } from '../../Utils/File';\nimport { itemsInView, orderCompare, throttle } from '../../Utils/Common';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './DialogsList.css';\n\nclass DialogsList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.hiddenChats = new Map();\n\n        this.listRef = React.createRef();\n\n        this.state = {\n            chats: [],\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chats !== this.state.chats) {\n            return true;\n        }\n\n        return false;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { current: list } = this.listRef;\n\n        return { scrollTop: list.scrollTop };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { current: list } = this.listRef;\n        const { scrollTop } = snapshot;\n\n        list.scrollTop = scrollTop;\n    }\n\n    componentDidMount() {\n        this.loadFirstSlice();\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.on('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.removeListener('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    onClientUpdateLeaveChat = update => {\n        if (update.inProgress) {\n            this.hiddenChats.set(update.chatId, update.chatId);\n        } else {\n            this.hiddenChats.delete(update.chatId);\n        }\n\n        this.forceUpdate();\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state }, () => this.loadFirstSlice());\n    };\n\n    onFastUpdatingComplete = update => {\n        this.onLoadNext(true);\n        // this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    onUpdateConnectionState = update => {\n        console.log(this);\n        const newConnectionState = update.state;\n        const { connectionState } = this.state;\n\n        this.setState({ connectionState: newConnectionState });\n\n        const updatingCompleted =\n            connectionState &&\n            connectionState['@type'] === 'connectionStateUpdating' &&\n            newConnectionState['@type'] !== 'connectionStateUpdating';\n        if (!updatingCompleted) return;\n\n        const hasSkippedUpdates = ChatStore.skippedUpdates.length > 0;\n        if (!hasSkippedUpdates) return;\n\n        ChatStore.skippedUpdates = [];\n        this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    loadFirstSlice = async () => {\n        const { authorizationState } = this.state;\n        if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n            await FileStore.initDB(() => this.onLoadNext());\n        }\n    };\n\n    onUpdateChatOrder = update => {\n        // NOTE: updateChatOrder is primary used to delete chats with order=0\n        // In all other cases use updateChatLastMessage\n\n        if (update.order !== '0') return;\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) {\n            return;\n        }\n\n        // unselect deleted chat\n        if (update.chat_id === ApplicationStore.getChatId()) {\n            TdLibController.setChatId(0);\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n\n        let chatIds = [];\n        for (let i = 0; i < this.state.chats.length; i++) {\n            let chat = ChatStore.get(this.state.chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds);\n    };\n\n    onUpdate = update => {\n        const { chat_id, order } = update;\n        if (order === '0') return;\n        const chat = ChatStore.get(chat_id);\n        if (!chat || chat.order === '0') {\n            return;\n        }\n\n        const { chats } = this.state;\n\n        let newChatIds = [];\n        if (chats.length > 0) {\n            const existingChat = chats.find(x => x === chat_id);\n            if (!existingChat) {\n                const minChatOrder = ChatStore.get(chats[chats.length - 1]).order;\n                if (orderCompare(minChatOrder, chat.order) === 1) {\n                    return;\n                }\n                newChatIds.push(chat.id);\n            }\n        }\n\n        // get last chat.order values\n        let chatIds = [];\n        for (let i = 0; i < chats.length; i++) {\n            let chat = ChatStore.get(chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds, newChatIds, () => {\n            this.loadChatContents(newChatIds);\n        });\n    };\n\n    reorderChats(chatIds, newChatIds = [], callback) {\n        const orderedChatIds = chatIds.concat(newChatIds).sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        if (!DialogsList.isDifferentOrder(this.state.chats, orderedChatIds)) {\n            return;\n        }\n\n        this.setState({ chats: orderedChatIds }, callback);\n    }\n\n    static isDifferentOrder(oldChatIds, newChatIds) {\n        if (oldChatIds.length === newChatIds.length) {\n            for (let i = 0; i < oldChatIds.length; i++) {\n                if (oldChatIds[i] !== newChatIds[i]) return true;\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list && list.scrollTop + list.offsetHeight >= list.scrollHeight) {\n            this.onLoadNext();\n        }\n    };\n\n    onLoadNext = async (replace = false) => {\n        const { chats } = this.state;\n\n        if (this.loading) return;\n\n        let offsetOrder = '9223372036854775807'; // 2^63\n        let offsetChatId = 0;\n        if (!replace && chats && chats.length > 0) {\n            const chat = ChatStore.get(chats[chats.length - 1]);\n            if (chat) {\n                offsetOrder = chat.order;\n                offsetChatId = chat.id;\n            }\n        }\n\n        this.loading = true;\n        const result = await TdLibController.send({\n            '@type': 'getChats',\n            offset_chat_id: offsetChatId,\n            offset_order: offsetOrder,\n            limit: CHAT_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        //TODO: replace result with one-way data flow\n\n        if (result.chat_ids.length > 0 && result.chat_ids[0] === offsetChatId) {\n            result.chat_ids.shift();\n        }\n\n        if (replace) {\n            this.replaceChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        } else {\n            this.appendChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        }\n    };\n\n    loadChatContents(chats) {\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats);\n    }\n\n    appendChats(chats, callback) {\n        if (chats.length === 0) return;\n\n        this.setState({ chats: this.state.chats.concat(chats) }, callback);\n    }\n\n    replaceChats(chats, callback) {\n        this.setState({ chats: chats }, callback);\n    }\n\n    scrollToTop() {\n        const list = this.listRef.current;\n        list.scrollTop = 0;\n    }\n\n    render() {\n        const { chats } = this.state;\n\n        const dialogs = chats.map(x => <DialogControl key={x} chatId={x} hidden={this.hiddenChats.has(x)} />);\n\n        /*<Scrollbars*/\n        /*ref={this.listRef}*/\n        /*onScroll={this.handleScroll}*/\n        /*autoHide*/\n        /*autoHideTimeout={500}*/\n        /*autoHideDuration={300}>*/\n        /*{chats}*/\n        /*</Scrollbars>*/\n\n        return (\n            <div ref={this.listRef} className='dialogs-list' onScroll={this.handleScroll}>\n                {dialogs}\n            </div>\n        );\n    }\n}\n\nexport default DialogsList;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    root: {\n        margin: 0,\n        padding: '24px',\n        width: '100%',\n        borderRadius: 0,\n        color: 'white',\n        maxHeight: '65px'\n    }\n};\n\nclass UpdatePanel extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            newContentAvailable: false\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    onClientUpdateNewContentAvailable = () => {\n        this.setState({ newContentAvailable: true });\n    };\n\n    handleUpdate = () => {\n        if (this.handled) return;\n\n        this.handled = true;\n        setTimeout(() => {\n            window.location.reload();\n        }, 250);\n    };\n\n    render() {\n        const { newContentAvailable } = this.state;\n        const { classes } = this.props;\n\n        const content = newContentAvailable ? (\n            <Button variant='contained' color='primary' className={classes.root} onClick={this.handleUpdate}>\n                Update\n            </Button>\n        ) : null;\n\n        return <>{content}</>;\n    }\n}\n\nexport default withStyles(styles)(UpdatePanel);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Search from './Search/Search';\nimport DialogsHeader from './DialogsHeader';\nimport DialogsList from './DialogsList';\nimport UpdatePanel from './UpdatePanel';\nimport { borderStyle } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Dialogs.css';\n\nclass Dialogs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialogsList = React.createRef();\n\n        this.state = {\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible,\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.isChatDetailsVisible !== this.state.isChatDetailsVisible) {\n            return true;\n        }\n\n        if (nextState.openSearch !== this.state.openSearch) {\n            return true;\n        }\n\n        if (nextState.searchChatId !== this.state.searchChatId) {\n            return true;\n        }\n\n        if (nextState.searchText !== this.state.searchText) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.on('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.removeListener('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    onClientUpdateThemeChange = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateSearchChat = update => {\n        this.setState({\n            openSearch: true,\n            searchChatId: update.chatId,\n            searchText: null\n        });\n    };\n\n    handleHeaderClick = () => {\n        this.dialogsList.current.scrollToTop();\n    };\n\n    handleSearch = visible => {\n        this.setState({\n            openSearch: visible,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSelectMessage = (chatId, messageId, openSearch) => {\n        const { onSelectChat } = this.props;\n\n        openChat(chatId, messageId);\n\n        onSelectChat(chatId, messageId);\n\n        const searchChatId = openSearch ? this.state.searchChatId : 0;\n        const searchText = openSearch ? this.state.searchText : null;\n\n        this.setState({\n            openSearch: openSearch,\n            searchChatId: searchChatId,\n            searchText: searchText\n        });\n    };\n\n    handleClose = () => {\n        this.setState({\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSearchTextChange = text => {\n        this.setState({\n            searchText: text\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { isChatDetailsVisible, openSearch, searchChatId, searchText } = this.state;\n\n        return (\n            <div\n                className={classNames(classes.borderColor, 'dialogs', {\n                    'dialogs-third-column': isChatDetailsVisible\n                })}>\n                <DialogsHeader\n                    openSearch={openSearch}\n                    onClick={this.handleHeaderClick}\n                    onSearch={this.handleSearch}\n                    onSearchTextChange={this.handleSearchTextChange}\n                />\n                <div className='dialogs-content'>\n                    <DialogsList ref={this.dialogsList} />\n                    {openSearch && (\n                        <Search\n                            chatId={searchChatId}\n                            text={searchText}\n                            onSelectMessage={this.handleSelectMessage}\n                            onClose={this.handleClose}\n                        />\n                    )}\n                </div>\n                <UpdatePanel />\n            </div>\n        );\n    }\n}\n\nDialogs.propTypes = {\n    onSelectChat: PropTypes.func.isRequired\n};\n\nexport default withStyles(borderStyle)(Dialogs);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox/';\nimport { withStyles } from '@material-ui/core';\nimport { borderStyle } from '../Theme';\nimport { canSendMessages, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderCommand.css';\n\nconst styles = theme => ({\n    buttonLeft: {\n        margin: '14px 0 14px 14px',\n        minWidth: '100px'\n    },\n    buttonRight: {\n        margin: '14px 14px 14px 0',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderCommand extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            openDeleteDialog: false\n        };\n    }\n\n    handleCancel = () => {\n        TdLibController.clientUpdate({ '@type': 'clientUpdateClearSelection' });\n    };\n\n    handleDelete = () => {\n        let canBeDeletedForAllUsers = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n            if (!message.can_be_deleted_for_all_users) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n        }\n\n        this.setState({\n            openDeleteDialog: true,\n            canBeDeletedForAllUsers: canBeDeletedForAllUsers,\n            revoke: canBeDeletedForAllUsers\n        });\n    };\n\n    handleDeleteContinue = () => {\n        const { revoke } = this.state;\n\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: id,\n            message_ids: messageIds,\n            revoke: revoke\n        });\n    };\n\n    handleRevokeChange = () => {\n        this.setState({ revoke: !this.state.revoke });\n    };\n\n    handleCloseDelete = () => {\n        this.setState({ openDeleteDialog: false });\n    };\n\n    handleForward = () => {\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: id,\n                messageIds: messageIds\n            }\n        });\n    };\n\n    handleReply = () => {\n        if (MessageStore.selectedItems.size !== 1) return;\n\n        const { chatId, messageId } = MessageStore.selectedItems.values().next().value;\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateReply', chatId: chatId, messageId: messageId });\n    };\n\n    render() {\n        const { classes, t, count } = this.props;\n        const { openDeleteDialog, canBeDeletedForAllUsers, revoke } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n\n        let canBeDeleted = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeleted = false;\n                break;\n            }\n            if (!message.can_be_deleted_only_for_self && !message.can_be_deleted_for_all_users) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        let canBeForwarded = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeForwarded = false;\n                break;\n            }\n            if (!message.can_be_forwarded) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        const canBeReplied = count === 1 && canSendMessages(chatId);\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'header-command')}>\n                    {canBeForwarded && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleForward}>\n                            {count <= 1 ? t('Forward') : `${t('Forward')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeDeleted && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleDelete}>\n                            {count <= 1 ? t('Delete') : `${t('Delete')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeReplied && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleReply}>\n                            {t('Reply')}\n                        </Button>\n                    )}\n                    <div className='header-command-space' />\n                    <Button color='primary' className={classes.buttonRight} onClick={this.handleCancel}>\n                        {t('Cancel')}\n                    </Button>\n                </div>\n                <Dialog\n                    transitionDuration={0}\n                    open={openDeleteDialog}\n                    onClose={this.handleCloseDelete}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>Confirm</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {count === 1\n                                ? 'Are you sure you want to delete 1 message?'\n                                : `Are you sure you want to delete ${count} messages?`}\n                        </DialogContentText>\n                        {canBeDeletedForAllUsers && (\n                            <FormControlLabel\n                                control={\n                                    <Checkbox checked={revoke} onChange={this.handleRevokeChange} color='primary' />\n                                }\n                                label={\n                                    isPrivateChat(chatId) ? `Delete for ${getChatShortTitle(chatId)}` : 'Delete for all'\n                                }\n                            />\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDelete} color='primary'>\n                            Cancel\n                        </Button>\n                        <Button onClick={this.handleDeleteContinue} color='primary'>\n                            Ok\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nHeaderCommand.propTypes = {\n    count: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(HeaderCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport MainMenuButton from './MainMenuButton';\nimport HeaderCommand from './HeaderCommand';\nimport { getChatSubtitle, getChatTitle, isAccentChatSubtitle, isMeChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Header.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px'\n    },\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    messageSearchIconButton: {\n        margin: '8px 0 8px 12px'\n    },\n    moreIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    headerStatusAccentTitle: {\n        color: theme.palette.primary.dark + '!important'\n    },\n    ...borderStyle(theme)\n});\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState !== this.state) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.on('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.on('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.removeListener('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateChatOnlineMemberCount = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onClientUpdateMessageSelected = update => {\n        this.setState({ selectionCount: MessageStore.selectedItems.size });\n    };\n\n    onClientUpdateChatId = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateConnectionState = update => {\n        this.setState({ connectionState: update.state });\n    };\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    onUpdateChatTitle = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateUserStatus = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(x => x.user_id === update.user_id);\n                    if (member) {\n                        this.forceUpdate();\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n    };\n\n    onUpdateUserChatAction = update => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (currentChatId === update.chat_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    openChatDetails = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.changeChatDetailsVisibility(true);\n    };\n\n    handleSearchChat = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.searchChat(chatId);\n    };\n\n    localize = str => {\n        const { t } = this.props;\n\n        return t(str)\n            .replace('...', '')\n            .replace('', '');\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { authorizationState, connectionState, selectionCount } = this.state;\n\n        if (selectionCount) {\n            return <HeaderCommand count={selectionCount} />;\n        }\n\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n\n        const isAccentSubtitle = isAccentChatSubtitle(chatId);\n        let title = getChatTitle(chatId, true, t);\n        let subtitle = getChatSubtitle(chatId, true);\n        let showProgressAnimation = false;\n\n        if (connectionState) {\n            switch (connectionState['@type']) {\n                case 'connectionStateConnecting':\n                    title = this.localize('Connecting');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateConnectingToProxy':\n                    title = this.localize('Connecting to proxy');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateReady':\n                    break;\n                case 'connectionStateUpdating':\n                    title = this.localize('Updating');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateWaitingForNetwork':\n                    title = this.localize('Waiting for network');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed':\n                    break;\n                case ' authorizationStateClosing':\n                    break;\n                case 'authorizationStateLoggingOut':\n                    title = this.localize('Logging out');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateReady':\n                    break;\n                case 'authorizationStateWaitCode':\n                    break;\n                case 'authorizationStateWaitEncryptionKey':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateWaitPassword':\n                    break;\n                case 'authorizationStateWaitPhoneNumber':\n                    break;\n                case 'authorizationStateWaitTdlibParameters':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else {\n            title = this.localize('Loading');\n            subtitle = '';\n            showProgressAnimation = true;\n        }\n\n        return (\n            <div className={classNames(classes.borderColor, 'header-details')}>\n                <div\n                    className={classNames('header-status', 'grow', chat ? 'cursor-pointer' : 'cursor-default')}\n                    onClick={this.openChatDetails}>\n                    <span className='header-status-content'>{title}</span>\n                    {showProgressAnimation && (\n                        <>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                        </>\n                    )}\n                    <span\n                        className={classNames('header-status-title', {\n                            [classes.headerStatusAccentTitle]: isAccentSubtitle\n                        })}>\n                        {subtitle}\n                    </span>\n                    <span className='header-status-tail' />\n                </div>\n                {chat && (\n                    <>\n                        <IconButton\n                            className={classes.messageSearchIconButton}\n                            aria-label='Search'\n                            onClick={this.handleSearchChat}>\n                            <SearchIcon />\n                        </IconButton>\n                        <MainMenuButton openChatDetails={this.openChatDetails} />\n                    </>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(Header);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\nimport VolumeDownIcon from '@material-ui/icons/VolumeDown';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport IconButton from '@material-ui/core/IconButton';\nimport Slider from '@material-ui/lab/Slider';\nimport { borderStyle } from '../Theme';\nimport { PLAYER_VOLUME_NORMAL } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './VolumeButton.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    root: {\n        display: 'flex',\n        height: 100,\n        padding: '13px 0',\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    slider: {\n        padding: '0 13px'\n    },\n    ...borderStyle(theme)\n});\n\nclass VolumeButton extends React.Component {\n    state = {\n        anchorEl: null,\n        value: PlayerStore.volume,\n        prevValue: PlayerStore.volume,\n        dragging: false,\n        buttonOver: false,\n        popupOver: false\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    onClientUpdateMediaVolume = update => {\n        const { volume, prevVolume } = update;\n\n        if (prevVolume === undefined) {\n            this.setState({ value: volume });\n        } else {\n            this.setState({ value: volume, prevValue: prevVolume });\n        }\n    };\n\n    handlePopoverOpen = anchorEl => {\n        this.setState({ anchorEl: anchorEl });\n    };\n\n    handlePopoverClose = () => {\n        const { dragging, buttonOver, popupOver } = this.state;\n\n        if (dragging) return;\n        if (buttonOver) return;\n        if (popupOver) return;\n\n        this.setState({ anchorEl: null });\n    };\n\n    handleMouseEnter = (event, openPopover) => {\n        this.setState({ buttonOver: true });\n\n        if (openPopover) {\n            this.handlePopoverOpen(event.currentTarget);\n        }\n    };\n\n    handleMouseLeave = () => {\n        this.setState({ buttonOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handlePopupMouseLeave = () => {\n        this.setState({ popupOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handleVoiceClick = () => {\n        const { value, prevValue } = this.state;\n        const nextValue = value > 0 ? 0 : prevValue || PLAYER_VOLUME_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaVolume',\n            volume: nextValue\n        });\n    };\n\n    handleChange = (event, value) => {\n        const { dragging, prevValue } = this.state;\n\n        if (dragging) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                volume: value\n            });\n        } else {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                prevVolume: value > 0 ? value : prevValue,\n                volume: value\n            });\n        }\n    };\n\n    handleDragStart = () => {\n        const { value } = this.state;\n\n        this.setState({\n            dragging: true,\n            prevValue: value\n        });\n    };\n\n    handleDragEnd = () => {\n        const { value, prevValue } = this.state;\n\n        this.setState(\n            {\n                dragging: false,\n                prevValue: value > 0 ? value : prevValue\n            },\n            () => {\n                this.handlePopoverClose();\n            }\n        );\n    };\n\n    getVolumeIcon = value => {\n        if (value === 0) {\n            return <VolumeOffIcon fontSize='small' />;\n        }\n\n        if (value < 0.25) {\n            return <VolumeMuteIcon fontSize='small' />;\n        }\n\n        if (value < 0.5) {\n            return <VolumeDownIcon fontSize='small' />;\n        }\n\n        return <VolumeUpIcon fontSize='small' />;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, value } = this.state;\n        const open = Boolean(anchorEl);\n\n        return (\n            <div\n                onMouseEnter={e => this.handleMouseEnter(e, true)}\n                onMouseLeave={this.handleMouseLeave}\n                style={{\n                    position: 'relative',\n                    background: 'transparent'\n                }}>\n                <IconButton className={classes.iconButton} color='primary' onClick={this.handleVoiceClick}>\n                    {this.getVolumeIcon(value)}\n                </IconButton>\n                <div\n                    style={{\n                        position: 'absolute',\n                        background: 'transparent',\n                        visibility: open ? 'visible' : 'hidden',\n                        zIndex: 1\n                    }}\n                    onMouseEnter={e => this.handleMouseEnter(e, false)}\n                    onMouseLeave={this.handlePopupMouseLeave}>\n                    <div\n                        className={classNames(classes.borderColor, classes.root)}\n                        style={{\n                            marginTop: 8,\n                            borderWidth: 1,\n                            borderStyle: 'solid'\n                        }}>\n                        <Slider\n                            classes={{ container: classes.slider }}\n                            min={0}\n                            max={1}\n                            value={value}\n                            onChange={this.handleChange}\n                            onDragStart={this.handleDragStart}\n                            onDragEnd={this.handleDragEnd}\n                            vertical\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(VolumeButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport PlayerStore, { RepeatEnum } from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass RepeatButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { repeat } = PlayerStore;\n\n        this.state = {\n            repeat\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    onClientUpdateMediaRepeat = update => {\n        const { repeat } = update;\n\n        this.setState({ repeat });\n    };\n\n    handleRepeat = () => {\n        const { repeat } = this.state;\n\n        let nextRepeat = repeat;\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                nextRepeat = RepeatEnum.REPEAT;\n                break;\n            }\n            case RepeatEnum.REPEAT: {\n                nextRepeat = RepeatEnum.REPEAT_ONE;\n                break;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                nextRepeat = RepeatEnum.NONE;\n                break;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaRepeat',\n            repeat: nextRepeat\n        });\n    };\n\n    getIcon = repeat => {\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                return <RepeatOneIcon fontSize='small' />;\n            }\n            default: {\n                return <RepeatIcon fontSize='small' />;\n            }\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { repeat } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={repeat === RepeatEnum.NONE ? 'default' : 'primary'}\n                onClick={this.handleRepeat}>\n                {this.getIcon(repeat)}\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(RepeatButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass ShuffleButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { shuffle } = PlayerStore;\n\n        this.state = {\n            shuffle\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    onClientUpdateMediaShuffle = update => {\n        const { shuffle } = update;\n\n        this.setState({ shuffle });\n    };\n\n    handleShuffle = () => {\n        const { shuffle } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaShuffle',\n            shuffle: !shuffle\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { shuffle } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={!shuffle ? 'default' : 'primary'}\n                onClick={this.handleShuffle}>\n                <ShuffleIcon fontSize='small' />\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(ShuffleButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\nclass PlaybackRateButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { playbackRate } = PlayerStore;\n\n        this.state = {\n            playbackRate\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        this.setState({ playbackRate });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playbackRate } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={playbackRate > PLAYER_PLAYBACKRATE_NORMAL ? 'primary' : 'default'}\n                onClick={this.handlePlaybackRate}>\n                <div className='header-player-playback-icon'>2X</div>\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(PlaybackRateButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getDurationString } from '../../Utils/Common';\nimport PlayerStore from '../../Stores/PlayerStore';\n\nclass Time extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentTime: 0,\n            duration: 0,\n            timeString: this.getTimeString(0, 0)\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    onClientUpdateMediaTime = update => {\n        const { currentTime } = update;\n\n        this.setState({\n            currentTime: currentTime,\n            currentTimeString: getDurationString(Math.floor(currentTime || 0))\n        });\n    };\n\n    getTimeString = (currentTime, duration) => {\n        const type = 0;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        //return type === 0 ? `${currentTimeString}/${durationString}` : `${durationString}`;\n\n        return currentTimeString;\n    };\n\n    render() {\n        const { currentTimeString } = this.state;\n\n        return <>{currentTimeString}</>;\n    }\n}\n\nexport default Time;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { getMedia, openMedia } from '../../Utils/Message';\nimport { borderStyle } from '../Theme';\nimport { withStyles } from '@material-ui/core';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Playlist.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    ...borderStyle(theme)\n});\n\nclass Playlist extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n        this.itemRefMap = new Map();\n\n        const { message, playlist } = PlayerStore;\n\n        this.chatId = message ? message.chat_id : 0;\n        this.messageId = message ? message.id : 0;\n\n        this.state = {\n            open: false,\n            titleMouseOver: false,\n            playlistMouseOver: false,\n            playlist: playlist\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { open } = this.state;\n\n        if (!prevState.open && open) {\n            this.scrollToActive();\n        }\n    }\n\n    scrollToActive = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        const { messageId } = this;\n        if (!messageId) return;\n\n        const item = this.itemRefMap.get(messageId);\n        if (!item) return;\n\n        const node = ReactDOM.findDOMNode(item);\n        if (!node) return;\n\n        list.scrollTop = node.offsetTop - 15;\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.on('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.removeListener('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    onClientUpdateMediaTitleMouseOver = update => {\n        const { over } = update;\n\n        if (over) {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryOpen();\n                }\n            );\n        } else {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryClose();\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n    };\n\n    onClientUpdateMediaPlaylistLoading = update => {\n        const { chatId, messageId } = this;\n\n        if (update.chatId === chatId && update.messageId === messageId) {\n            this.setState({\n                playlist: null\n            });\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { chatId, messageId } = this;\n        const { playlist } = update;\n\n        if (chatId === playlist.chatId && messageId === playlist.messageId) {\n            this.setState({\n                playlist: playlist\n            });\n        }\n    };\n\n    tryOpen = () => {\n        clearTimeout(this.openTimeout);\n\n        this.openTimeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    tryClose = () => {\n        clearTimeout(this.timeout);\n\n        this.timeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    handleMouseEnter = () => {\n        this.setState({\n            playlistMouseOver: true,\n            open: true\n        });\n    };\n\n    handleMouseLeave = () => {\n        this.setState(\n            {\n                playlistMouseOver: false\n            },\n            () => {\n                this.tryClose();\n            }\n        );\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        if (list.scrollTop === 0) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistNext'\n            });\n        } else if (list.scrollHeight === list.scrollTop + list.offsetHeight) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistPrev'\n            });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        const { open, playlist } = this.state;\n        if (!open) return null;\n        if (!playlist) return null;\n\n        const { messages } = playlist;\n        if (!messages) return null;\n        if (messages.length <= 1) return null;\n\n        this.itemRefMap.clear();\n\n        return (\n            <div className='playlist'>\n                <div className={classNames('playlist-wrapper', classes.root, classes.borderColor)}>\n                    <div\n                        ref={this.listRef}\n                        className='playlist-items'\n                        onMouseEnter={this.handleMouseEnter}\n                        onMouseLeave={this.handleMouseLeave}\n                        onScroll={this.handleScroll}>\n                        {playlist.messages\n                            .slice(0)\n                            .reverse()\n                            .map(x => (\n                                <div key={x.id} ref={el => this.itemRefMap.set(x.id, el)} className='playlist-item'>\n                                    {getMedia(x, () => openMedia(x.chat_id, x.id))}\n                                </div>\n                            ))}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(Playlist);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeButton from '../Player/VolumeButton';\nimport RepeatButton from '../Player/RepeatButton';\nimport ShuffleButton from '../Player/ShuffleButton';\nimport PlaybackRateButton from './PlaybackRateButton';\nimport Time from '../Player/Time';\nimport Playlist from '../Player/Playlist';\nimport { borderStyle } from '../Theme';\nimport { getSrc } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport { getDurationString } from '../../Utils/Common';\nimport { getDate, getDateHint, getMediaTitle, hasAudio } from '../../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL, PLAYER_STARTTIME } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderPlayer.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderPlayer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { message, playlist } = PlayerStore;\n\n        this.startTime = PLAYER_STARTTIME;\n\n        this.state = {\n            currentTime: 0,\n            currentTimeString: getDurationString(0),\n            message: message,\n            playlist: playlist,\n            playing: false,\n            src: this.getMediaSrc(message)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { theme } = this.props;\n        const { message, playlist, src, playing } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.message !== message) {\n            return true;\n        }\n\n        if (nextState.playlist !== playlist) {\n            return true;\n        }\n\n        if (nextState.src !== src) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.on('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.on('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.removeListener('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.removeListener('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.playbackRate = playbackRate;\n    };\n\n    onClientUpdateMediaVolume = update => {\n        const { volume } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.volume = volume;\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.playingMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n    };\n\n    onClientUpdateMediaViewerEnded = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPause = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPlay = update => {\n        this.playingMediaViewer = true;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.pause();\n    };\n\n    startPlayingFile = (file, message) => {\n        const { chat_id, id } = message;\n\n        this.setState(\n            {\n                src: this.getMediaSrc(message)\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (this.playingMediaViewer) {\n                        player.pause();\n\n                        TdLibController.clientUpdate({\n                            '@type': 'clientUpdateMediaPause',\n                            chatId: chat_id,\n                            messageId: id\n                        });\n                    }\n                }\n            }\n        );\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId } = update;\n        const { message } = this.state;\n\n        if (!message) return;\n\n        const { chat_id, id, content } = message;\n        if (!content) return;\n        if (chatId !== chat_id || messageId !== id) return;\n\n        switch (content['@type']) {\n            case 'messageText': {\n                const { web_page } = content;\n                if (web_page) {\n                    const { audio, voice_note, video_note } = web_page;\n\n                    if (audio) {\n                        const file = audio.audio;\n                        if (file) {\n                            this.startPlayingFile(file, message);\n                        }\n                    }\n\n                    if (voice_note) {\n                        const { voice } = voice_note;\n                        if (voice) {\n                            this.startPlayingFile(voice, message);\n                        }\n                    }\n\n                    if (video_note) {\n                        const { video } = video_note;\n                        if (video) {\n                            this.startPlayingFile(video, message);\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        this.startPlayingFile(file, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        this.startPlayingFile(voice, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        this.startPlayingFile(video, message);\n                    }\n                }\n\n                break;\n            }\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { playlist } = update;\n        const { chatId, messageId } = playlist;\n        const { message } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            this.setState({ playlist: playlist });\n        }\n    };\n\n    onClientUpdateMediaClose = update => {\n        this.setState({\n            message: null,\n            playlist: null,\n            playing: false,\n            src: null\n        });\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n        const { message, src } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            if (src) {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (player.paused) {\n                        player.play();\n                    } else {\n                        player.pause();\n                    }\n                }\n            }\n        } else {\n            const src = this.getMediaSrc(PlayerStore.message);\n            const playing = Boolean(src);\n            const playlist = PlayerStore.playlist;\n            this.setState(\n                {\n                    message: PlayerStore.message,\n                    playlist: PlayerStore.playlist,\n                    playing: playing,\n                    src: src\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (player) {\n                        player.currentTime = this.startTime;\n                        if (this.playingMediaViewer) {\n                            player.pause();\n\n                            //this.handleVideoPause();\n                        }\n                    }\n                }\n            );\n        }\n    };\n\n    handlePrev = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPrev'\n        });\n    };\n\n    handlePlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaActive',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handleNext = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaNext'\n        });\n    };\n\n    getMediaSrc = message => {\n        if (message) {\n            const { content } = message;\n            if (content) {\n                const { audio, voice_note, video_note, web_page } = content;\n\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        return getSrc(file);\n                    }\n                }\n\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        return getSrc(voice);\n                    }\n                }\n\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        return getSrc(video);\n                    }\n                }\n\n                if (web_page) {\n                    if (web_page.audio) {\n                        const file = web_page.audio.audio;\n                        if (file) {\n                            return getSrc(file);\n                        }\n                    }\n\n                    if (web_page.voice_note) {\n                        const { voice } = web_page.voice_note;\n                        if (voice) {\n                            return getSrc(voice);\n                        }\n                    }\n\n                    if (web_page.video_note) {\n                        const { video } = web_page.video_note;\n                        if (video) {\n                            return getSrc(video);\n                        }\n                    }\n                }\n            }\n        }\n\n        return '';\n    };\n\n    handleEnded = (moveNext = true) => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaEnding',\n            chatId: message.chat_id,\n            messageId: message.id,\n            moveNext: moveNext\n        });\n\n        this.setState(\n            {\n                //playing: false,\n                //message: null,\n                //src: null\n            },\n            () => {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateMediaEnd',\n                    chatId: message.chat_id,\n                    messageId: message.id,\n                    moveNext: moveNext\n                });\n            }\n        );\n    };\n\n    handleVideoEnded = () => {\n        this.handleEnded(true);\n    };\n\n    handleClose = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            player.pause();\n        }\n\n        this.handleEnded(false);\n    };\n\n    handleTimeUpdate = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        this.setState({\n            currentTime: player.currentTime,\n            currentTimeString: getDurationString(Math.floor(player.currentTime || 0))\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTime',\n            chatId: message.chat_id,\n            messageId: message.id,\n            duration: player.duration,\n            currentTime: player.currentTime,\n            timestamp: Date.now()\n        });\n    };\n\n    handleCanPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        const { playbackRate, volume } = PlayerStore;\n\n        const { chat_id, id } = message;\n        const audio = hasAudio(chat_id, id);\n\n        player.playbackRate = audio ? PLAYER_PLAYBACKRATE_NORMAL : playbackRate;\n        player.volume = volume;\n        player.muted = false;\n\n        if (audio) {\n            return;\n        }\n\n        let stream = null;\n        if ('captureStream' in player) {\n            stream = player.captureStream();\n        } else if ('mozCaptureStream' in player) {\n            stream = player.mozCaptureStream();\n        }\n\n        if (!stream) {\n            return;\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaCaptureStream',\n            chatId: message.chat_id,\n            messageId: message.id,\n            stream: stream\n        });\n    };\n\n    handleVideoPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: true\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlay',\n            chatId: message.chat_id,\n            messageId: message.id,\n            currentTime: player.currentTime,\n            duration: player.duration,\n            timestamp: Date.now()\n        });\n    };\n\n    handleVideoPause = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: false\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPause',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        this.setState(\n            {\n                playbackRate: nextPlaybackRate\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (!player) return;\n\n                player.playbackRate = nextPlaybackRate;\n            }\n        );\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    hasPrev = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index + 1 < playlist.messages.length;\n    };\n\n    hasNext = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index - 1 >= 0;\n    };\n\n    handleTitleMouseEnter = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: true\n        });\n    };\n\n    handleTitleMouseLeave = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: false\n        });\n    };\n\n    handleTitleClick = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        openChat(message.chat_id, message.id);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playing, message, playlist, src } = this.state;\n\n        let audio = false;\n        if (message) {\n            const { chat_id, id } = message;\n            audio = hasAudio(chat_id, id);\n        }\n\n        const title = getMediaTitle(message);\n        const dateHint = getDateHint(message);\n        const date = getDate(message);\n        const showDate = !audio;\n        const showPlaybackRate = !audio;\n        const showRepeat = audio;\n        const showShuffle = audio;\n        const hasPrev = this.hasPrev(message, playlist);\n        const hasNext = this.hasNext(message, playlist);\n\n        return (\n            <>\n                <video\n                    className='header-player-video'\n                    ref={this.videoRef}\n                    src={src}\n                    autoPlay={true}\n                    controls={false}\n                    width={44}\n                    height={44}\n                    onCanPlay={this.handleCanPlay}\n                    onPlay={this.handleVideoPlay}\n                    onPause={this.handleVideoPause}\n                    onTimeUpdate={this.handleTimeUpdate}\n                    onEnded={this.handleVideoEnded}\n                />\n                {message && (\n                    <div className={classNames(classes.borderColor, 'header-player')}>\n                        <IconButton\n                            disabled={!hasPrev}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handlePrev}>\n                            <SkipPreviousIcon fontSize='small' />\n                        </IconButton>\n                        <IconButton\n                            className={classes.iconButton}\n                            color='primary'\n                            disabled={!src}\n                            onClick={this.handlePlay}>\n                            {playing ? <PauseIcon /> : <PlayArrowIcon />}\n                        </IconButton>\n                        <IconButton\n                            disabled={!hasNext}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handleNext}>\n                            <SkipNextIcon fontSize='small' />\n                        </IconButton>\n                        <Playlist />\n                        <div\n                            className='header-player-content'\n                            onMouseEnter={this.handleTitleMouseEnter}\n                            onMouseLeave={this.handleTitleMouseLeave}\n                            onClick={this.handleTitleClick}>\n                            <div className='header-player-title'>\n                                {title}\n                                {showDate && (\n                                    <span title={dateHint}>\n                                        &nbsp;\n                                        {date}\n                                    </span>\n                                )}\n                            </div>\n                            &nbsp;\n                            <Time />\n                        </div>\n                        <VolumeButton />\n                        {showPlaybackRate && <PlaybackRateButton />}\n                        {showRepeat && <RepeatButton />}\n                        {showShuffle && <ShuffleButton />}\n                        <IconButton className={classes.iconButton} onClick={this.handleClose}>\n                            <CloseIcon fontSize='small' />\n                        </IconButton>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(HeaderPlayer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './FilesDropTarget.css';\n\nclass FilesDropTarget extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dragging: ApplicationStore.getDragging()\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    onClientUpdateDragging = update => {\n        this.setState({ dragging: ApplicationStore.getDragging() });\n    };\n\n    handleDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n\n        this.handleAttachDocumentComplete(event.dataTransfer.files);\n    };\n\n    handleDragLeave = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n    };\n\n    handleAttachDocumentComplete = files => {\n        if (files.length === 0) return;\n\n        for (let i = 0; i < files.length; i++) {\n            let file = files[i];\n            const content = {\n                '@type': 'inputMessageDocument',\n                document: { '@type': 'inputFileBlob', name: file.name, data: file }\n            };\n\n            this.onSendInternal(content, result => FileStore.uploadFile(result.content.document.document.id, result));\n        }\n    };\n\n    onSendInternal = async (content, callback) => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (!currentChatId) return;\n        if (!content) return;\n\n        try {\n            ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${currentChatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: currentChatId,\n                reply_to_message_id: 0,\n                input_message_content: content\n            });\n\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: currentChatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    render() {\n        const { dragging } = this.state;\n\n        return (\n            <>\n                {dragging && (\n                    <div\n                        className='files-drop-target'\n                        onDragEnter={this.handleDragEnter}\n                        onDragLeave={this.handleDragLeave}\n                        onDrop={this.handleDrop}>\n                        <div className='files-drop-target-wrapper'>\n                            <div className='files-drop-target-text'>\n                                <div className='files-drop-target-title'>Drop files here</div>\n                                <div className='files-drop-target-subtitle'>to send them without compression</div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nFilesDropTarget.propTypes = {};\n\nexport default FilesDropTarget;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nfunction arrowGenerator(color) {\n    return {\n        '&[x-placement*=\"bottom\"] $arrow': {\n            top: 0,\n            left: 0,\n            marginTop: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '0 1em 1em 1em',\n                borderColor: `transparent transparent ${color} transparent`\n            }\n        },\n        '&[x-placement*=\"top\"] $arrow': {\n            bottom: 0,\n            left: 0,\n            marginBottom: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 0 1em',\n                borderColor: `${color} transparent transparent transparent`\n            }\n        },\n        '&[x-placement*=\"right\"] $arrow': {\n            left: 0,\n            marginLeft: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 1em 0',\n                borderColor: `transparent ${color} transparent transparent`\n            }\n        },\n        '&[x-placement*=\"left\"] $arrow': {\n            right: 0,\n            marginRight: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 0 1em 1em',\n                borderColor: `transparent transparent transparent ${color}`\n            }\n        }\n    };\n}\n\nconst styles = theme => ({\n    forwardColor: {\n        color: theme.palette.primary.main\n    },\n    arrowPopper: arrowGenerator(theme.palette.grey[700]),\n    arrow: {\n        position: 'absolute',\n        fontSize: 6,\n        width: '3em',\n        height: '3em',\n        '&::before': {\n            content: '\"\"',\n            margin: 'auto',\n            display: 'block',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid'\n        }\n    },\n    tooltip: {\n        margin: '6px 0 26px 0'\n    }\n});\n\nclass Forward extends React.Component {\n    state = {\n        arrowRef: null\n    };\n\n    handleArrowRef = node => {\n        this.setState({\n            arrowRef: node\n        });\n    };\n\n    openForward = event => {\n        event.stopPropagation();\n\n        const { forwardInfo } = this.props;\n        if (!forwardInfo) return null;\n\n        const { origin } = forwardInfo;\n\n        switch (origin['@type']) {\n            case 'messageForwardOriginUser': {\n                const { sender_user_id } = origin;\n\n                openUser(sender_user_id, true);\n                break;\n            }\n            case 'messageForwardOriginHiddenUser': {\n                break;\n            }\n            case 'messageForwardOriginChannel': {\n                const { chat_id, message_id } = origin;\n\n                openChat(chat_id, message_id, true);\n                break;\n            }\n        }\n    };\n\n    render() {\n        const { t, classes, forwardInfo } = this.props;\n        const { arrowRef } = this.state;\n\n        const title = getForwardTitle(forwardInfo, t);\n        const tooltip = isForwardOriginHidden(forwardInfo) ? (\n            <>\n                {t('HidAccount')}\n                <span className={classes.arrow} ref={this.handleArrowRef} />\n            </>\n        ) : (\n            ''\n        );\n\n        return (\n            <div className={classNames('message-author', classes.forwardColor, 'forward')}>\n                {`${t('ForwardedMessage')}\\n${t('From')} `}\n                <Tooltip\n                    title={tooltip}\n                    classes={{ popper: classes.arrowPopper, tooltip: classes.tooltip }}\n                    PopperProps={{\n                        popperOptions: {\n                            modifiers: {\n                                arrow: {\n                                    enabled: Boolean(arrowRef),\n                                    element: arrowRef\n                                }\n                            }\n                        }\n                    }}\n                    placement='top'>\n                    <a onClick={this.openForward}>{title}</a>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nForward.propTypes = {\n    forwardInfo: PropTypes.object.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Forward);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageStatus.css';\n\nclass MessageStatus extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleUpdateMessageSend = this.handleUpdateMessageSend.bind(this);\n        this.handleUpdateChatReadOutbox = this.handleUpdateChatReadOutbox.bind(this);\n\n        this.state = {\n            sendingState: props.sendingState,\n            unread: true\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.on('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.on('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    handleUpdateMessageSend(payload) {\n        if (this.props.messageId === payload.old_message_id && payload.message) {\n            this.newMessageId = payload.message.id;\n            this.setState({ sendingState: payload.message.sending_state });\n        }\n    }\n\n    handleUpdateChatReadOutbox(payload) {\n        if (\n            this.props.chatId === payload.chat_id &&\n            ((this.props.newMessageId && this.props.newMessageId <= payload.last_read_outbox_message_id) ||\n                this.props.messageId <= payload.last_read_outbox_message_id)\n        ) {\n            this.setState({ sendingState: null, unread: false });\n        }\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.removeListener('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    render() {\n        let stateClassName = 'messagestatus-succeded';\n        if (this.state.sendingState) {\n            stateClassName =\n                this.state.sendingState['@type'] === 'messageSendingStateFailed'\n                    ? 'messagestatus-failed'\n                    : 'messagestatus-pending';\n        }\n\n        return this.state.unread && <i className={classNames('messagestatus-icon', stateClassName)} />;\n    }\n}\n\nexport default MessageStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './UnreadSeparator.css';\n\nconst styles = theme => ({\n    unreadSeparator: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary : '#8096a8'\n    }\n});\n\nfunction UnreadSeparator(props) {\n    const { classes } = props;\n\n    return <div className={classNames('unread-separator', classes.unreadSeparator)}>Unread messages</div>;\n}\n\nexport default withStyles(styles)(UnreadSeparator);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Animation from './Animation';\nimport Photo from './Photo';\nimport Video from './Video';\nimport Audio from './Audio';\nimport Document from './Document';\nimport VoiceNote from './VoiceNote';\nimport VideoNote from './VideoNote';\nimport Sticker from './Sticker';\nimport { getSize } from '../../../Utils/Common';\nimport { accentStyles } from '../../Theme';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_DISPLAY_SMALL_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './WebPage.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass WebPage extends React.Component {\n    getContent = () => {\n        const { classes, chatId, messageId, size, displaySize, displaySmallSize, openMedia } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const {\n            site_name,\n            title,\n            description,\n            url,\n            photo,\n            animation,\n            video,\n            audio,\n            document,\n            voice_note,\n            video_note,\n            sticker,\n            type\n        } = web_page;\n\n        if (sticker) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Sticker chatId={chatId} messageId={messageId} sticker={sticker} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (voice_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VoiceNote chatId={chatId} messageId={messageId} voiceNote={voice_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (video_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VideoNote chatId={chatId} messageId={messageId} videoNote={video_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (audio) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Audio chatId={chatId} messageId={messageId} audio={audio} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (document) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Document chatId={chatId} messageId={messageId} document={document} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (video) {\n            if (video.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Video chatId={chatId} messageId={messageId} video={video} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (photo) {\n            const photoSize = getSize(photo.sizes, size);\n            const smallPhoto =\n                (type === 'article' || type === 'photo') &&\n                (site_name || title || description) &&\n                photoSize &&\n                photoSize.width === photoSize.height;\n\n            const style = smallPhoto\n                ? {\n                      float: 'right',\n                      marginLeft: 6,\n                      marginBottom: 6\n                  }\n                : {};\n            return (\n                <>\n                    {smallPhoto && (\n                        <Photo\n                            displaySize={displaySmallSize}\n                            style={style}\n                            chatId={chatId}\n                            messageId={messageId}\n                            photo={photo}\n                            openMedia={openMedia}\n                        />\n                    )}\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    {!smallPhoto && <Photo chatId={chatId} messageId={messageId} photo={photo} openMedia={openMedia} />}\n                </>\n            );\n        }\n\n        return (\n            <>\n                {site_name && (\n                    <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                )}\n                {title && <div className='web-page-title'>{title}</div>}\n                {description && <div className='web-page-description'>{description}</div>}\n            </>\n        );\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div className='web-page'>\n                <div className={classNames('web-page-border', classes.accentBackgroundLight)} />\n                <div className='web-page-wrapper'>{this.getContent()}</div>\n            </div>\n        );\n    }\n}\n\nWebPage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number,\n    displaySmallSize: PropTypes.number,\n    openMedia: PropTypes.func\n};\n\nWebPage.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    displaySmallSize: PHOTO_DISPLAY_SMALL_SIZE\n};\n\nexport default withStyles(styles)(WebPage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport Reply from './Reply';\nimport Forward from './Forward';\nimport MessageStatus from './MessageStatus';\nimport MessageAuthor from './MessageAuthor';\nimport UserTileControl from '../Tile/UserTileControl';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport UnreadSeparator from './UnreadSeparator';\nimport WebPage from './Media/WebPage';\nimport {\n    getDate,\n    getDateHint,\n    getText,\n    getMedia,\n    getUnread,\n    getSenderUserId,\n    getWebPage,\n    openMedia\n} from '../../Utils/Message';\nimport { canSendMessages } from '../../Utils/Chat';\nimport { openUser, openChat, selectMessage } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Message.css';\n\nconst styles = theme => ({\n    messageAuthorColor: {\n        color: theme.palette.primary.main\n    },\n    messageSelected: {\n        backgroundColor: theme.palette.primary.main + '22'\n    },\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass Message extends Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                selected: false,\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                selected: false,\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { contextMenu, selected, highlighted } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.contextMenu !== contextMenu) {\n            return true;\n        }\n\n        if (nextState.selected !== selected) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.on('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.removeListener('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    onClientUpdateClearSelection = update => {\n        if (!this.state.selected) return;\n\n        this.setState({ selected: false });\n    };\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    onClientUpdateMessageSelected = update => {\n        const { chatId, messageId } = this.props;\n        const { selected } = update;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ selected, highlighted: false });\n        }\n    };\n\n    onUpdateMessageEdited = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageViews = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId !== chat_id) return;\n        if (messageId !== message_id) return;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messagePoll': {\n                this.forceUpdate();\n                break;\n            }\n        }\n    };\n\n    handleSelectUser = userId => {\n        openUser(userId, true);\n    };\n\n    handleSelectChat = chatId => {\n        openChat(chatId, true);\n    };\n\n    handleSelection = () => {\n        if (!this.mouseDown) return;\n\n        const selection = window.getSelection().toString();\n        if (selection) return;\n\n        const { chatId, messageId } = this.props;\n\n        const selected = !MessageStore.selectedItems.has(`chatId=${chatId}_messageId=${messageId}`);\n        selectMessage(chatId, messageId, selected);\n    };\n\n    handleDateClick = e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        const canBeReplied = canSendMessages(chatId);\n        if (canBeReplied) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateReply',\n                chatId: chatId,\n                messageId: messageId\n            });\n            return;\n        }\n\n        const canBeForwarded = message && message.can_be_forwarded;\n        if (canBeForwarded) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateForward',\n                info: {\n                    chatId: chatId,\n                    messageIds: [messageId]\n                }\n            });\n        }\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    handleMouseDown = () => {\n        this.mouseDown = true;\n    };\n\n    handleMouseOver = () => {\n        this.mouseDown = false;\n    };\n\n    handleMouseOut = () => {\n        this.mouseOut = false;\n    };\n\n    render() {\n        const { t, classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { contextMenu, left, top, selected, highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty message]</div>;\n\n        const { sending_state, views, edit_date, reply_to_message_id, forward_info } = message;\n\n        const text = getText(message);\n        const webPage = getWebPage(message);\n        const date = getDate(message);\n        const dateHint = getDateHint(message);\n        const media = getMedia(message, this.openMedia);\n        this.unread = getUnread(message);\n        const senderUserId = getSenderUserId(message);\n\n        const tile = senderUserId ? (\n            <UserTileControl userId={senderUserId} onSelect={this.handleSelectUser} />\n        ) : (\n            <ChatTileControl chatId={chatId} onSelect={this.handleSelectChat} />\n        );\n\n        const messageClassName = classNames(\n            'message',\n            { 'message-selected': selected },\n            { [classes.messageSelected]: selected },\n            // { 'message-highlighted': highlighted && !selected },\n            { [classes.messageHighlighted]: highlighted && !selected }\n        );\n\n        return (\n            <div\n                className={messageClassName}\n                onMouseOver={this.handleMouseOver}\n                onMouseOut={this.handleMouseOut}\n                onMouseDown={this.handleMouseDown}\n                onClick={this.handleSelection}\n                onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='message-wrapper'>\n                    <i className='message-select-tick' />\n                    {this.unread && (\n                        <MessageStatus chatId={chatId} messageId={messageId} sendingState={sending_state} />\n                    )}\n                    {tile}\n                    <div className='message-content'>\n                        <div className='message-title'>\n                            {!forward_info && <MessageAuthor chatId={chatId} openChat userId={senderUserId} openUser />}\n                            {forward_info && <Forward forwardInfo={forward_info} />}\n                            <div className='message-meta'>\n                                <span>&nbsp;</span>\n                                {views > 0 && (\n                                    <>\n                                        <i className='message-views-icon' />\n                                        <span className='message-views'>\n                                            &nbsp;\n                                            {views}\n                                            &nbsp; &nbsp;\n                                        </span>\n                                    </>\n                                )}\n                                {edit_date > 0 && <span>{t('EditedMessage')}&nbsp;</span>}\n                                <a className='message-date' onClick={this.handleDateClick}>\n                                    <span title={dateHint}>{date}</span>\n                                </a>\n                            </div>\n                        </div>\n                        {Boolean(reply_to_message_id) && <Reply chatId={chatId} messageId={reply_to_message_id} />}\n                        {media}\n                        <div className='message-text'>{text}</div>\n                        {webPage && <WebPage chatId={chatId} messageId={messageId} openMedia={this.openMedia} />}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Message);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport UnreadSeparator from './UnreadSeparator';\nimport Photo from './Media/Photo';\nimport { openMedia } from '../../Utils/Message';\nimport { getServiceMessageContent } from '../../Utils/ServiceMessage';\nimport MessageStore from '../../Stores/MessageStore';\nimport './ServiceMessage.css';\n\nconst chatPhotoStyle = {\n    width: 64,\n    height: 64,\n    borderRadius: '50%',\n    margin: '-8px auto 16px auto'\n};\n\nconst styles = theme => ({\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass ServiceMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    render() {\n        const { classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty service message]</div>;\n\n        const { content } = message;\n        if (!content) return <div>[empty service message]</div>;\n\n        const { photo } = content;\n\n        const text = getServiceMessageContent(message, true);\n\n        const messageClassName = classNames('service-message', { [classes.messageHighlighted]: highlighted });\n\n        return (\n            <div className={messageClassName} onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='service-message-wrapper'>\n                    <div className='service-message-content'>{text}</div>\n                </div>\n                {photo && (\n                    <Photo\n                        chatId={chatId}\n                        messageId={messageId}\n                        photo={photo}\n                        style={chatPhotoStyle}\n                        openMedia={this.openMedia}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(ServiceMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LinkIcon from '@material-ui/icons/Link';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport OptionStore from '../../Stores/OptionStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    }\n});\n\nclass ShareStickerSetButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.handleOpen(event.currentTarget);\n    };\n\n    handleOpen = anchorEl => {\n        this.setState({ anchorEl });\n    };\n\n    handleClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleCopyLink = () => {\n        this.handleClose();\n\n        const { t } = this.props;\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        copy(link);\n\n        const key = `${link}_copy_stickers_link`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    getStickersLink = stickerSet => {\n        if (!stickerSet) return '';\n\n        const { name } = stickerSet;\n        if (!name) return '';\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n\n        return (telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/') + 'addstickers/' + name;\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes, t } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handleShare = () => {\n        this.handleClose();\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { link }\n        });\n    };\n\n    render() {\n        const { classes, t, className } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton + ' ' + className}\n                    aria-label='Share'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <MoreIcon />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleClose}>\n                    <MenuItem onClick={this.handleCopyLink}>\n                        <ListItemIcon>\n                            <LinkIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('CopyLink')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleShare}>\n                        <ListItemIcon>\n                            <ShareIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('StickersShare')} />\n                    </MenuItem>\n                </Menu>\n            </>\n        );\n    }\n}\n\nShareStickerSetButton.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ShareStickerSetButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport ShareStickerSetButton from './ShareStickerSetButton';\nimport Sticker from '../Message/Media/Sticker';\nimport { loadStickerContent, loadStickerSetContent } from '../../Utils/File';\nimport { STICKER_PREVIEW_DISPLAY_SIZE, STICKER_SMALL_DISPLAY_SIZE } from '../../Constants';\nimport StickerStore from '../../Stores/StickerStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickerSetDialog.css';\n\nconst styles = theme => ({\n    contentRoot: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        maxHeight: 480,\n        padding: '0 12px 24px',\n        background: 'transparent'\n    },\n    paperRoot: {\n        width: 344\n    },\n    dialogTitleRoot: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    shareButtonRoot: {\n        margin: '-24px -12px -24px 0'\n    },\n    typographyRoot: {\n        flexGrow: 1,\n        flexShrink: 1\n    },\n    disablePointerEvents: {\n        pointerEvents: 'none'\n    }\n});\n\nclass StickerSetDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            stickerSet: StickerStore.stickerSet,\n            stickerId: 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { stickerSet, stickerId } = this.state;\n\n        return stickerSet !== nextState.stickerSet || stickerId !== nextState.stickerId;\n    }\n\n    componentDidMount() {\n        StickerStore.on('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.on('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    componentWillUnmount() {\n        StickerStore.removeListener('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.removeListener('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    handleUpdateInstalledStickerSets = update => {\n        const { stickerSet } = StickerStore;\n\n        this.setState({ stickerSet });\n    };\n\n    handleClientUpdateStickerSet = update => {\n        const { stickerSet } = update;\n\n        this.setState({ stickerSet });\n\n        if (stickerSet) {\n            const store = FileStore.getStore();\n            loadStickerSetContent(store, stickerSet);\n        }\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n    };\n\n    handleDone = () => {\n        const { stickerSet } = this.state;\n        if (!stickerSet) return;\n\n        const { is_installed } = stickerSet;\n\n        TdLibController.send({\n            '@type': 'changeStickerSet',\n            set_id: stickerSet.id,\n            is_installed: !is_installed\n        });\n\n        this.handleClose();\n    };\n\n    loadPreviewContent = stickerId => {\n        const { stickerSet } = this.state;\n        const { stickers } = stickerSet;\n        const sticker = stickers.find(x => x.sticker.id === stickerId);\n        if (!sticker) return;\n\n        const store = FileStore.getStore();\n        loadStickerContent(store, sticker, null);\n\n        const preloadStickers = this.getNeighborStickers(stickerId);\n        preloadStickers.forEach(x => {\n            loadStickerContent(store, x, null);\n        });\n    };\n\n    getNeighborStickers = stickerId => {\n        const { stickerSet } = this.state;\n        if (!stickerSet) return [];\n\n        const { stickers } = stickerSet;\n        if (!stickers) return [];\n\n        const indexes = [];\n        const index = stickers.findIndex(x => x.sticker.id === stickerId);\n        if (index === -1) return [];\n\n        const STICKERS_PER_ROW = 4;\n        const row = Math.floor(index / STICKERS_PER_ROW);\n        const column = index % STICKERS_PER_ROW;\n\n        const prevRow = row - 1;\n        const nextRow = row + 1;\n        const prevColumn = column - 1;\n        const nextColumn = column + 1;\n\n        if (prevRow >= 0) {\n            if (prevColumn >= 0) {\n                indexes.push(STICKERS_PER_ROW * prevRow + prevColumn);\n            }\n            indexes.push(STICKERS_PER_ROW * prevRow + column);\n            if (nextColumn < STICKERS_PER_ROW) {\n                indexes.push(STICKERS_PER_ROW * prevRow + nextColumn);\n            }\n        }\n\n        if (prevColumn >= 0) {\n            indexes.push(STICKERS_PER_ROW * row + prevColumn);\n        }\n        if (nextColumn < STICKERS_PER_ROW) {\n            indexes.push(STICKERS_PER_ROW * row + nextColumn);\n        }\n\n        if (nextRow < Math.ceil(stickers.length / STICKERS_PER_ROW)) {\n            if (prevColumn >= 0) {\n                indexes.push(STICKERS_PER_ROW * nextRow + prevColumn);\n            }\n            indexes.push(STICKERS_PER_ROW * nextRow + column);\n            if (nextColumn < STICKERS_PER_ROW) {\n                indexes.push(STICKERS_PER_ROW * nextRow + nextColumn);\n            }\n        }\n\n        return indexes.map(i => stickers[i]);\n    };\n\n    handleMouseOver = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        if (!this.mouseDown) return;\n\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n    };\n\n    handleMouseDown = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n\n        this.mouseDown = true;\n        document.addEventListener('mouseup', this.handleMouseUp);\n\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    };\n\n    handleMouseUp = () => {\n        this.setState({ stickerId: 0 });\n        this.mouseDown = false;\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    render() {\n        const { t, classes } = this.props;\n        const { stickerSet, stickerId } = this.state;\n        if (!stickerSet) return null;\n\n        const { title, stickers, emojis, is_installed } = stickerSet;\n\n        const items = stickers.map(x => (\n            <div\n                className='sticker-set-dialog-item'\n                key={x.sticker.id}\n                data-sticker-id={x.sticker.id}\n                style={{ width: 76, height: 76 }}>\n                <Sticker\n                    key={x.sticker.id}\n                    className='sticker-set-dialog-item-sticker'\n                    sticker={x}\n                    displaySize={STICKER_SMALL_DISPLAY_SIZE}\n                    blur={false}\n                />\n                <div className='sticker-set-dialog-item-emoji'>{x.emoji}</div>\n            </div>\n        ));\n\n        const stickerIndex = stickers.findIndex(x => x.sticker.id === stickerId);\n        const sticker = stickerIndex !== -1 ? stickers[stickerIndex] : null;\n        const emoji = stickerIndex !== -1 ? emojis[stickerIndex].emojis.join(' ') : null;\n\n        return (\n            <Dialog\n                className={classes.dialogRoot}\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                aria-labelledby='sticker-set-dialog-title-text'\n                classes={{ paper: classes.paperRoot }}>\n                <DialogTitle\n                    id='sticker-set-dialog-title-text'\n                    className={classNames(classes.dialogTitleRoot, {\n                        [classes.disablePointerEvents]: Boolean(sticker)\n                    })}\n                    disableTypography>\n                    <Typography variant='h6' className={classes.typographyRoot} noWrap>\n                        {title}\n                    </Typography>\n                    <ShareStickerSetButton className={classes.shareButtonRoot} />\n                </DialogTitle>\n                <DialogContent\n                    classes={{ root: classes.contentRoot }}\n                    onMouseOver={this.handleMouseOver}\n                    onMouseOut={this.handleMouseOut}\n                    onMouseDown={this.handleMouseDown}>\n                    {items}\n                </DialogContent>\n                <DialogActions className={classNames({ [classes.disablePointerEvents]: Boolean(sticker) })}>\n                    <Button color='primary' onClick={this.handleClose}>\n                        {t('Cancel')}\n                    </Button>\n                    <Button color='primary' onClick={this.handleDone}>\n                        {is_installed ? t('Remove') : t('Add')}\n                    </Button>\n                </DialogActions>\n                {Boolean(sticker) && (\n                    <div className='sticker-set-dialog-preview'>\n                        <div className='sticker-set-dialog-preview-emoji'>{emoji}</div>\n                        <Sticker sticker={sticker} displaySize={STICKER_PREVIEW_DISPLAY_SIZE} />\n                    </div>\n                )}\n            </Dialog>\n        );\n    }\n}\n\nStickerSetDialog.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles),\n    withTranslation()\n);\n\nexport default enhance(StickerSetDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Sticker from '../Message/Media/Sticker';\nimport { borderStyle } from '../Theme';\nimport { loadStickerContent, loadStickersContent } from '../../Utils/File';\nimport { STICKER_PREVIEW_DISPLAY_SIZE, STICKER_SMALL_DISPLAY_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickersHint.css';\nimport DialogContent from '../Dialog/StickerSetDialog';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    ...borderStyle(theme)\n});\n\nclass StickersHint extends React.Component {\n    state = {\n        hint: null,\n        stickerId: 0\n    };\n\n    componentDidMount() {\n        StickerStore.on('clientUpdateStickersHint', this.onClientUpdateStickersHint);\n    }\n\n    componentWillUnmount() {\n        StickerStore.removeListener('clientUpdateStickersHint', this.onClientUpdateStickersHint);\n    }\n\n    onClientUpdateStickersHint = update => {\n        const { hint } = update;\n\n        this.setState({ hint, stickerId: 0 });\n\n        if (!hint) return;\n\n        const store = FileStore.getStore();\n        const { stickers } = hint;\n        loadStickersContent(store, stickers.stickers);\n    };\n\n    handleSend = sticker => {\n        if (!sticker) return;\n        if (this.mouseDownStickerId !== sticker.sticker.id) return;\n        console.log('Match.sendSticker', sticker);\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSend',\n            sticker\n        });\n    };\n\n    loadPreviewContent = stickerId => {\n        const { hint } = this.state;\n        const { stickers: result } = hint;\n        const { stickers } = result;\n\n        const sticker = stickers.find(x => x.sticker.id === stickerId);\n        if (!sticker) return;\n\n        const store = FileStore.getStore();\n        loadStickerContent(store, sticker, null);\n\n        const preloadStickers = this.getNeighborStickers(stickerId, stickers, 8);\n        preloadStickers.forEach(x => {\n            loadStickerContent(store, x, null);\n        });\n    };\n\n    getNeighborStickers = (stickerId, stickers, stickersPerRow) => {\n        if (!stickers) return [];\n\n        const indexes = [];\n        const index = stickers.findIndex(x => x.sticker.id === stickerId);\n        if (index === -1) return [];\n\n        const row = Math.floor(index / stickersPerRow);\n        const column = index % stickersPerRow;\n\n        const prevRow = row - 1;\n        const nextRow = row + 1;\n        const prevColumn = column - 1;\n        const nextColumn = column + 1;\n\n        if (prevRow >= 0) {\n            if (prevColumn >= 0) {\n                indexes.push(stickersPerRow * prevRow + prevColumn);\n            }\n            indexes.push(stickersPerRow * prevRow + column);\n            if (nextColumn < stickersPerRow) {\n                indexes.push(stickersPerRow * prevRow + nextColumn);\n            }\n        }\n\n        if (prevColumn >= 0) {\n            indexes.push(stickersPerRow * row + prevColumn);\n        }\n        if (nextColumn < stickersPerRow) {\n            indexes.push(stickersPerRow * row + nextColumn);\n        }\n\n        if (nextRow < Math.ceil(stickers.length / stickersPerRow)) {\n            if (prevColumn >= 0) {\n                indexes.push(stickersPerRow * nextRow + prevColumn);\n            }\n            indexes.push(stickersPerRow * nextRow + column);\n            if (nextColumn < stickersPerRow) {\n                indexes.push(stickersPerRow * nextRow + nextColumn);\n            }\n        }\n\n        return indexes.map(i => stickers[i]);\n    };\n\n    handleMouseOver = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        if (!this.mouseDown) return;\n\n\n        if (this.mouseDownStickerId !== stickerId) {\n            this.mouseDownStickerId = null;\n        }\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n    };\n\n    handleMouseDown = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        this.mouseDownStickerId = stickerId;\n        const now = Date.now();\n\n        this.setState({ stickerId, timestamp: now, showPreview: false });\n        setTimeout(() => {\n            const { timestamp } = this.state;\n            if (timestamp === now) {\n                this.setState({ showPreview: true })\n            }\n\n        }, 500);\n\n\n        this.loadPreviewContent(stickerId);\n\n        this.mouseDown = true;\n        document.addEventListener('mouseup', this.handleMouseUp);\n\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    };\n\n    handleMouseUp = () => {\n        this.setState({ stickerId: 0, timestamp: 0, showPreview: false });\n        this.mouseDown = false;\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { hint, stickerId, showPreview } = this.state;\n        if (!hint) return null;\n\n        const { stickers } = hint;\n        if (!stickers) return null;\n\n        const { stickers: items } = stickers;\n        if (!items.length) return null;\n\n        const controls = items.map(x => (\n            <div\n                className='sticker-set-dialog-item'\n                key={x.sticker.id}\n                data-sticker-id={x.sticker.id}\n                style={{ width: 76, height: 76 }}\n                onClick={() => this.handleSend(x)}>\n                <Sticker\n                    key={x.sticker.id}\n                    className='sticker-set-dialog-item-sticker'\n                    sticker={x}\n                    displaySize={STICKER_SMALL_DISPLAY_SIZE}\n                    blur={false}\n                />\n                {/*<div className='sticker-set-dialog-item-emoji'>{x.emoji}</div>*/}\n            </div>\n        ));\n\n        const stickerIndex = items.findIndex(x => x.sticker.id === stickerId);\n        const sticker = stickerIndex !== -1 ? items[stickerIndex] : null;\n        const emoji = stickerIndex !== -1 ? sticker.emoji : null;\n\n        return (\n            <div\n                className={classNames('stickers-hint', classes.borderColor, classes.root)}\n                onMouseOver={this.handleMouseOver}\n                onMouseOut={this.handleMouseOut}\n                onMouseDown={this.handleMouseDown}>\n                {controls}\n                {Boolean(sticker) && showPreview && (\n                    <div className='sticker-set-dialog-preview'>\n                        {/*<div className='sticker-set-dialog-preview-emoji'>{emoji}</div>*/}\n                        <Sticker sticker={sticker} displaySize={STICKER_PREVIEW_DISPLAY_SIZE} />\n                    </div>\n                )}\n            </div>\n\n        );\n    }\n}\n\nexport default withStyles(styles)(StickersHint);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport FilesDropTarget from './FilesDropTarget';\nimport Message from '../Message/Message';\nimport ServiceMessage from '../Message/ServiceMessage';\nimport StickersHint from './StickersHint';\nimport { debounce, throttle, getPhotoSize, itemsInView } from '../../Utils/Common';\nimport { loadChatsContent, loadDraftContent, loadMessageContents } from '../../Utils/File';\nimport { filterMessages } from '../../Utils/Message';\nimport { isServiceMessage } from '../../Utils/ServiceMessage';\nimport { canSendFiles, getChatFullInfo, getSupergroupId, isSupergroup } from '../../Utils/Chat';\nimport { highlightMessage } from '../../Actions/Client';\nimport { MESSAGE_SLICE_LIMIT } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MessagesList.css';\n\nconst ScrollBehaviorEnum = Object.freeze({\n    NONE: 'NONE',\n    SCROLL_TO_BOTTOM: 'SCROLL_TO_BOTTOM',\n    SCROLL_TO_UNREAD: 'SCROLL_TO_UNREAD',\n    SCROLL_TO_MESSAGE: 'SCROLL_TO_MESSAGE',\n    KEEP_SCROLL_POSITION: 'KEEP_SCROLL_POSITION'\n});\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[900] : 'transparent'\n    }\n});\n\nclass MessagesList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`MessagesList.ctor chat_id=${props.chatId} message_id=${props.messageId}`);\n\n        this.sessionId = Date.now();\n        this.state = {\n            prevChatId: 0,\n            prevMessageId: null,\n            playerOpened: false,\n            history: [],\n            clearHistory: false,\n            selectionActive: false,\n            scrollBehavior: ScrollBehaviorEnum.NONE,\n            separatorMessageId: 0\n        };\n\n        this.listRef = React.createRef();\n        this.itemsRef = React.createRef();\n\n        this.itemsMap = new Map();\n\n        this.updateItemsInView = throttle(this.updateItemsInView, 500);\n        //debounce(this.updateItemsInView, 250);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId || props.messageId !== state.prevMessageId) {\n            return {\n                prevChatId: props.chatId,\n                prevMessageId: props.messageId,\n                clearHistory: false,\n                selectionActive: false,\n                scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                separatorMessageId: 0\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.listRef.current;\n        const snapshot = {\n            scrollTop: list.scrollTop,\n            scrollHeight: list.scrollHeight,\n            offsetHeight: list.offsetHeight\n        };\n\n        console.log(\n            `SCROLL GETSNAPSHOTBEFOREUPDATE \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        return snapshot;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        const list = this.listRef.current;\n        console.log(\n            `MessagesList.componentDidUpdate chat_id=${chatId} message_id=${messageId} \\\\\n            prev_chat_id=${prevProps.chatId} prev_message_id=${prevProps.messageId} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight}`\n        );\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.handleSelectChat(chatId, prevProps.chatId, messageId, prevProps.messageId);\n        } else {\n            this.handleScrollBehavior(snapshot);\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n        const { playerOpened, history, dragging, clearHistory, selectionActive } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.playerOpened !== playerOpened) {\n            return true;\n        }\n\n        if (nextState.history !== history) {\n            return true;\n        }\n\n        if (nextState.dragging !== dragging) {\n            return true;\n        }\n\n        if (nextState.clearHistory !== clearHistory) {\n            return true;\n        }\n\n        if (nextState.selectionActive !== selectionActive) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        this.handleSelectChat(chatId, 0);\n\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.on('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaActive = update => {\n        const list = this.listRef.current;\n\n        const prevOffsetHeight = list.offsetHeight;\n        const prevScrollTop = list.scrollTop;\n        this.setState({ playerOpened: true }, () => {\n            if (list.scrollTop === prevScrollTop) {\n                list.scrollTop += Math.abs(prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateMediaEnding = udpate => {\n        const list = this.listRef.current;\n\n        this.prevOffsetHeight = list.offsetHeight;\n        this.prevScrollTop = list.scrollTop;\n    };\n\n    onClientUpdateMediaEnd = udpate => {\n        const list = this.listRef.current;\n\n        //const prevOffsetHeight = list.offsetHeight;\n        //const prevScrollTop = list.scrollTop;\n\n        this.setState({ playerOpened: false }, () => {\n            if (list.scrollTop === this.prevScrollTop) {\n                list.scrollTop -= Math.abs(this.prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateSelection = update => {\n        this.setState({\n            selectionActive: MessageStore.selectedItems.size > 0,\n            scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION\n        });\n    };\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.setState({ clearHistory: update.inProgress });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId } = this.props;\n        const { history } = this.state;\n        const { chat_id, message_id } = update;\n\n        if (chatId !== chat_id) return;\n\n        if (history.findIndex(x => x.id === message_id) !== -1) {\n            const message = MessageStore.get(chat_id, message_id);\n            if (!message) return;\n\n            const store = FileStore.getStore();\n            loadMessageContents(store, [message]);\n        }\n    };\n\n    onUpdateChatLastMessage = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n    };\n\n    onUpdateMessageSendSucceeded = update => {\n        const { message, old_message_id } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let handleSendSucceeded = false;\n        const { content } = message;\n        switch (content['@type']) {\n            case 'messagePoll': {\n                handleSendSucceeded = true;\n                break;\n            }\n        }\n\n        if (!handleSendSucceeded) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        console.log('SCROLL MessagesList.onUpdateMessageSendSucceeded scrollBehavior=' + scrollBehavior);\n        this.replaceMessage(old_message_id, message, scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, [message]);\n        MessagesList.viewMessages([message]);\n    };\n\n    onUpdateNewMessage = update => {\n        if (!this.completed) return;\n\n        const { message } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        const history = [message];\n\n        console.log('SCROLL MessagesList.onUpdateNewMessage scrollBehavior=' + scrollBehavior);\n        this.insertAfter(this.filterMessages(history), scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, history);\n        MessagesList.viewMessages(history);\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n\n        if (!update.is_permanent) return;\n\n        this.deleteHistory(update.message_ids);\n    };\n\n    updateItemsInView = () => {\n        if (!this.messages) return;\n\n        const messages = new Map();\n        const items = itemsInView(this.listRef, this.itemsRef);\n        for (let i = 0; i < items.length; i++) {\n            const message = this.messages[items[i]];\n            if (message) {\n                const { chatId, messageId } = message.props;\n                const key = `${chatId}_${messageId}`;\n                messages.set(key, key);\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMessagesInView',\n            messages: messages\n        });\n        return;\n\n        if (!messages.length) return;\n\n        /*let ids = messages.map(x => x.id);\n        console.log('[perf] load_messages_contents ids=[' + ids + ']');\n\n                let messagesMap = new Map(messages.map((i) => [i.id, i]));\n\n                if (this.previousMessages){\n                    let cancelMessages = [];\n                    for (let i = 0; i < this.previousMessages.length; i++){\n                        if (!messagesMap.has(this.previousMessages[i].id)){\n                            cancelMessages.push(this.previousMessages[i]);\n                        }\n                    }\n                    if (cancelMessages.length > 0) {\n                        this.cancelLoadMessageContents(cancelMessages);\n                    }\n                }\n                this.previousMessages = messages;*/\n\n        const store = FileStore.getStore();\n        loadMessageContents(store, messages);\n    };\n\n    async handleSelectChat(chatId, previousChatId, messageId, previousMessageId) {\n        const chat = ChatStore.get(chatId);\n        const previousChat = ChatStore.get(previousChatId);\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n        this.loadMigratedHistory = false;\n\n        this.suppressHandleScrollOnSelectChat = true;\n        if (chat) {\n            TdLibController.send({\n                '@type': 'openChat',\n                chat_id: chat.id\n            });\n\n            const unread = !messageId && chat.unread_count > 0;\n            const fromMessageId =\n                unread && chat.unread_count > 1 ? chat.last_read_inbox_message_id : messageId ? messageId : 0;\n            const offset = (unread && chat.unread_count > 1) || messageId ? -1 - MESSAGE_SLICE_LIMIT : 0;\n            const limit =\n                (unread && chat.unread_count > 1) || messageId ? 2 * MESSAGE_SLICE_LIMIT : MESSAGE_SLICE_LIMIT;\n\n            const sessionId = this.sessionId;\n            const result = await TdLibController.send({\n                '@type': 'getChatHistory',\n                chat_id: chat.id,\n                from_message_id: fromMessageId,\n                offset: offset,\n                limit: limit\n            });\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            //TODO: replace result with one-way data flow\n\n            if (chat.last_message) {\n                this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n            } else {\n                this.completed = true;\n            }\n\n            MessageStore.setItems(result.messages);\n            result.messages.reverse();\n\n            // calculate separator\n            let separatorMessageId = Number.MAX_VALUE;\n            if (chat && chat.unread_count > 1) {\n                for (let i = result.messages.length - 1; i >= 0; i--) {\n                    const { id } = result.messages[i];\n                    if (\n                        !result.messages[i].is_outgoing &&\n                        id > chat.last_read_inbox_message_id &&\n                        id < separatorMessageId\n                    ) {\n                        separatorMessageId = id;\n                    } else {\n                        break;\n                    }\n                }\n            }\n            separatorMessageId = separatorMessageId === Number.MAX_VALUE ? 0 : separatorMessageId;\n            console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n            let scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n            if (messageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_MESSAGE;\n            } else if (unread && separatorMessageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_UNREAD;\n            }\n\n            this.replace(separatorMessageId, result.messages, scrollBehavior, () => {\n                this.suppressHandleScrollOnSelectChat = false;\n                if (messageId) {\n                    highlightMessage(chatId, messageId);\n                }\n            });\n\n            // load files\n            const store = FileStore.getStore();\n            loadMessageContents(store, result.messages);\n            loadChatsContent(store, [chatId]);\n            loadDraftContent(store, chatId);\n\n            MessagesList.viewMessages(result.messages);\n\n            this.loadIncompleteHistory(result);\n\n            // load full info\n            getChatFullInfo(chat.id);\n        } else {\n            this.replace(\n                0,\n                [],\n                ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                () => (this.suppressHandleScrollOnSelectChat = false)\n            );\n        }\n\n        if (previousChat) {\n            TdLibController.send({\n                '@type': 'closeChat',\n                chat_id: previousChat.id\n            });\n        }\n    }\n\n    static viewMessages(messages) {\n        if (!messages) return;\n        if (messages.length === 0) return;\n        if (!messages[0].chat_id) return;\n\n        TdLibController.send({\n            '@type': 'viewMessages',\n            chat_id: messages[0].chat_id,\n            message_ids: messages.map(x => x.id)\n        });\n    }\n\n    cancelLoadMessageContents(messages) {\n        //return;\n        for (let i = messages.length - 1; i >= 0; i--) {\n            let message = messages[i];\n            if (message && message.content) {\n                switch (message.content['@type']) {\n                    case 'messagePhoto': {\n                        let [id, pid] = this.getMessagePhoto(message);\n                        if (pid) {\n                            let obj = getPhotoSize(message.content.photo.sizes);\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    case 'messageSticker': {\n                        let [id, pid] = this.getMessageSticker(message);\n                        if (pid) {\n                            let obj = message.content.sticker.sticker;\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            }\n        }\n    }\n\n    loadIncompleteHistory = async result => {\n        const MAX_ITERATIONS = 5;\n        let incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n\n        for (let i = 0; i < MAX_ITERATIONS && incomplete; i++) {\n            result = await this.onLoadNext();\n            incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n        }\n    };\n\n    onLoadNext = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        if (this.loadMigratedHistory) {\n            this.onLoadMigratedHistory();\n            return;\n        }\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages), () => {\n            if (!result.messages.length) {\n                this.onLoadMigratedHistory();\n            }\n        });\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    filterMessages = messages => {\n        return messages.filter(x => x.content['@type'] !== 'messageChatUpgradeTo');\n    };\n\n    onLoadMigratedHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        const supergroupId = getSupergroupId(chatId);\n        if (!supergroupId) return;\n\n        const fullInfo = SupergroupStore.getFullInfo(supergroupId);\n        if (!fullInfo) return;\n        if (!fullInfo.upgraded_from_basic_group_id) return;\n\n        this.loadMigratedHistory = true;\n\n        const basicGroupChat = await TdLibController.send({\n            '@type': 'createBasicGroupChat',\n            basic_group_id: fullInfo.upgraded_from_basic_group_id\n        });\n\n        if (!basicGroupChat) return;\n\n        let fromMessageId = 0;\n        if (\n            this.state.history &&\n            this.state.history.length > 0 &&\n            this.state.history[0].chat_id === basicGroupChat.id\n        ) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: basicGroupChat.id,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages));\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n    };\n\n    onLoadPrevious = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n\n        if (!chat) return;\n        if (this.loading) return;\n        if (this.completed) return;\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[this.state.history.length - 1].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: -MESSAGE_SLICE_LIMIT - 1,\n            limit: MESSAGE_SLICE_LIMIT + 1\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        filterMessages(result, this.state.history);\n\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        console.log('SCROLL MessagesList.onLoadPrevious scrollBehavior=NONE');\n        this.insertAfter(this.filterMessages(result.messages), ScrollBehaviorEnum.NONE);\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    replace(separatorMessageId, history, scrollBehavior, callback) {\n        this.setState(\n            { separatorMessageId: separatorMessageId, history: history, scrollBehavior: scrollBehavior },\n            callback\n        );\n    }\n\n    insertBefore(history, callback) {\n        if (history.length === 0) {\n            if (callback) callback();\n            return;\n        }\n\n        this.setState(\n            { history: history.concat(this.state.history), scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION },\n            callback\n        );\n    }\n\n    replaceMessage(oldMessageId, message, scrollBehavior, callback) {\n        if (!message) return;\n\n        this.setState(\n            {\n                history: this.state.history.filter(x => x.id !== oldMessageId).concat([message]),\n                scrollBehavior: scrollBehavior\n            },\n            callback\n        );\n    }\n\n    insertAfter(history, scrollBehavior, callback) {\n        if (history.length === 0) return;\n\n        this.setState({ history: this.state.history.concat(history), scrollBehavior: scrollBehavior }, callback);\n    }\n\n    deleteHistory(message_ids, callback) {\n        const { history } = this.state;\n        if (history.length === 0) return;\n\n        let map = new Map(message_ids.map(x => [x, x]));\n\n        this.setState(\n            { history: history.filter(x => !map.has(x.id)), scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM },\n            callback\n        );\n    }\n\n    handleScroll = () => {\n        this.updateItemsInView();\n\n        const list = this.listRef.current;\n        //console.log(`SCROLL HANDLESCROLL list.scrollTop=${list.scrollTop} list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight} chatId=${this.props.chatId}`);\n\n        if (this.suppressHandleScroll) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScroll');\n            this.suppressHandleScroll = false;\n            return;\n        }\n\n        if (this.suppressHandleScrollOnSelectChat) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScrollOnSelectChat');\n            return;\n        }\n\n        if (list.scrollTop <= 0) {\n            console.log('SCROLL HANDLESCROLL onLoadNext');\n            this.onLoadNext();\n        } else if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            console.log('SCROLL HANDLESCROLL onLoadPrevious');\n            this.onLoadPrevious();\n        } else {\n            //console.log('SCROLL HANDLESCROLL updateItemsInView');\n        }\n    };\n\n    handleScrollBehavior = snapshot => {\n        const { chatId, messageId } = this.props;\n        const { scrollBehavior, history } = this.state;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n\n        console.log(\n            `SCROLL HANDLESCROLLBEHAVIOR \\\\\n            scrollBehavior=${scrollBehavior} \\\\\n            previousScrollTop=${scrollTop} \\\\\n            previousScrollHeight=${scrollHeight} \\\\\n            previousOffsetHeight=${offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n        if (scrollBehavior === ScrollBehaviorEnum.NONE) {\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_BOTTOM) {\n            this.scrollToBottom();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_MESSAGE) {\n            this.scrollToMessage();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_UNREAD) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n\n            let scrolled = false;\n            for (let i = 0; i < history.length; i++) {\n                let itemComponent = this.itemsMap.get(i);\n                let item = ReactDOM.findDOMNode(itemComponent);\n                if (item) {\n                    // console.log(`SCROLL SCROLL_TO_UNREAD item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                    if (itemComponent.props.showUnreadSeparator) {\n                        list.scrollTop = item.offsetTop; // + unread messages margin-top\n                        scrolled = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!scrolled) {\n                this.scrollToBottom();\n            }\n\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        } else if (scrollBehavior === ScrollBehaviorEnum.KEEP_SCROLL_POSITION) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n            list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        }\n    };\n\n    scrollToMessage = () => {\n        const { chatId, messageId } = this.props;\n        const { history } = this.state;\n\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} before \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        let scrolled = false;\n        for (let i = 0; i < history.length; i++) {\n            let itemComponent = this.itemsMap.get(i);\n            let item = ReactDOM.findDOMNode(itemComponent);\n            if (item) {\n                // console.log(`SCROLL SCROLL_TO_MESSAGE message_id=${messageId} item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                if (itemComponent.props.messageId === messageId) {\n                    list.scrollTop = item.offsetTop - list.offsetHeight / 2.0;\n                    scrolled = true;\n                    break;\n                }\n            }\n        }\n\n        if (!scrolled) {\n            this.scrollToBottom();\n        }\n\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} after \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n    };\n\n    scrollToBottom = () => {\n        this.suppressHandleScroll = true;\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_BOTTOM before \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            chatId=${this.props.chatId}`\n        );\n\n        const nextScrollTop = list.scrollHeight - list.offsetHeight;\n        if (nextScrollTop !== list.scrollTop) {\n            list.scrollTop = list.scrollHeight - list.offsetHeight;\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        } else {\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after(already bottom) \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        }\n    };\n\n    scrollToStart = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n\n        const fromMessageId = 0;\n        const offset = 0;\n        const limit = MESSAGE_SLICE_LIMIT;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chat.id,\n            from_message_id: fromMessageId,\n            offset: offset,\n            limit: limit\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        //TODO: replace result with one-way data flow\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n\n        // calculate separator\n        let separatorMessageId = 0;\n        console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n        this.replace(separatorMessageId, result.messages, ScrollBehaviorEnum.SCROLL_TO_BOTTOM);\n\n        // load files\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        loadChatsContent(store, [chatId]);\n\n        MessagesList.viewMessages(result.messages);\n\n        this.loadIncompleteHistory(result);\n    };\n\n    handleListDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const { chatId } = this.props;\n        if (!canSendFiles(chatId)) return;\n\n        ApplicationStore.setDragging(true);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { history, separatorMessageId, clearHistory, selectionActive } = this.state;\n\n        console.log(`MessagesList.render clearHistory=${clearHistory}`, history);\n\n        this.itemsMap.clear();\n        this.messages = clearHistory\n            ? null\n            : history.map((x, i) =>\n                  isServiceMessage(x) ? (\n                      <ServiceMessage\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  ) : (\n                      <Message\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showTitle\n                          sendingState={x.sending_state}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  )\n              );\n\n        return (\n            <div\n                className={classNames(classes.background, 'messages-list', {\n                    'messages-list-selection-active': selectionActive\n                })}\n                onDragEnter={this.handleListDragEnter}>\n                <div ref={this.listRef} className='messages-list-wrapper' onScroll={this.handleScroll}>\n                    <div className='messages-list-top' />\n                    <div ref={this.itemsRef} className='messages-list-items'>\n                        {this.messages}\n                    </div>\n                </div>\n                <FilesDropTarget />\n                <StickersHint/>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(MessagesList);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport ChatInfo from '../ColumnRight/ChatInfo';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfoDialog.css';\n\nconst styles = theme => ({\n    chatInfoRoot: {\n        width: 336\n    },\n    containerRoot: {\n        alignItems: 'start'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary,\n        zIndex: 1\n    },\n    paperRoot: {\n        width: 336\n    }\n});\n\nclass ChatInfoDialog extends React.Component {\n    state = {\n        chatId: ApplicationStore.dialogChatId\n    };\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { chatId } = this.state;\n\n        return nextState.chatId !== chatId;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    handleClientUpdateDialogChatId = update => {\n        const { chatId } = update;\n\n        this.setState({ chatId });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDialogChatId',\n            chatId: 0\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { chatId } = this.state;\n        if (!chatId) return null;\n\n        return (\n            <Dialog\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                classes={{ root: classes.dialogRoot, container: classes.containerRoot, paper: classes.paperRoot }}>\n                <ChatInfo className={classes.chatInfoRoot} chatId={chatId} popup />\n            </Dialog>\n        );\n    }\n}\n\nChatInfoDialog.propTypes = {};\n\nexport default withStyles(styles)(ChatInfoDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Footer from './Footer';\nimport Header from './Header';\nimport HeaderPlayer from '../Player/HeaderPlayer';\nimport MessagesList from './MessagesList';\nimport ChatInfoDialog from '../Dialog/ChatInfoDialog';\nimport StickerSetDialog from '../Dialog/StickerSetDialog';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogDetails.css';\n\nclass DialogDetails extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatId: ApplicationStore.getChatId(),\n            messageId: ApplicationStore.getMessageId(),\n            selectedCount: 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chatId !== this.state.chatId) {\n            return true;\n        }\n        if (nextState.messageId !== this.state.messageId) {\n            return true;\n        }\n        if (nextState.selectedCount !== this.state.selectedItems) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onUpdateChatDetailsVisibility = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            chatId: update.nextChatId,\n            messageId: update.nextMessageId\n        });\n    };\n\n    scrollToBottom = () => {\n        this.messagesList.scrollToBottom();\n    };\n\n    scrollToStart = () => {\n        this.messagesList.scrollToStart();\n    };\n\n    scrollToMessage = () => {\n        this.messagesList.scrollToMessage();\n    };\n\n    render() {\n        /*let groups = [];\n        if (this.props.history.length > 0){\n            let currentGroup = {\n                key: this.props.history[0].id,\n                date: this.props.history[0].date,\n                senderUserId: this.props.history[0].sender_user_id,\n                messages: [this.props.history[0]]\n            };\n\n            for (let i = 1; i < this.props.history.length; i++){\n                if (this.props.history[i].sender_user_id === currentGroup.senderUserId\n                    && Math.abs(this.props.history[i].date - currentGroup.date) <= 10 * 60\n                    && i % 20 !== 0){\n                    currentGroup.key += '_' + this.props.history[i].id;\n                    currentGroup.messages.push(this.props.history[i]);\n                }\n                else {\n                    groups.push(currentGroup);\n                    currentGroup = {\n                        key: this.props.history[i].id,\n                        date: this.props.history[i].date,\n                        senderUserId: this.props.history[i].sender_user_id,\n                        messages: [this.props.history[i]]\n                    };\n                }\n            }\n            groups.push(currentGroup);\n        }\n\n        this.groups = groups.map(x => {\n            return (<MessageGroup key={x.key} senderUserId={x.senderUserId} messages={x.messages} onSelectChat={this.props.onSelectChat}/>);\n        });*/\n        const { chatId, messageId, selectedCount } = this.state;\n        const { isChatDetailsVisible } = ApplicationStore;\n\n        return (\n            <div className={classNames('dialog-details', { 'dialog-details-third-column': isChatDetailsVisible })}>\n                <HeaderPlayer />\n                <Header chatId={chatId} />\n                <MessagesList innerRef={ref => (this.messagesList = ref)} chatId={chatId} messageId={messageId} />\n                <Footer chatId={chatId} />\n                <StickerSetDialog />\n                <ChatInfoDialog />\n            </div>\n        );\n    }\n}\n\nexport default DialogDetails;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { isValidPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport OptionStore from '../../Stores/OptionStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './SignInControl.css';\n\nconst styles = {\n    button: {\n        margin: '16px 0 0 0'\n    },\n    phone: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n    },\n    continueAtLanguage: {\n        transform: 'translateY(100px)',\n        textAlign: 'center'\n    }\n};\n\nclass SignInControl extends React.Component {\n    state = {\n        error: null,\n        loading: false\n    };\n\n    componentDidMount() {\n        this.handleSuggestedLanguagePackId();\n\n        OptionStore.on('updateOption', this.handleUpdateOption);\n    }\n\n    componentWillUnmount() {\n        OptionStore.removeListener('updateOption', this.handleUpdateOption);\n    }\n\n    handleUpdateOption = update => {\n        const { name } = update;\n\n        if (name === 'suggested_language_pack_id') {\n            this.handleSuggestedLanguagePackId();\n        }\n    };\n\n    handleSuggestedLanguagePackId = () => {\n        const { i18n } = this.props;\n        if (!i18n) return;\n\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\n        if (!languagePackId) return;\n\n        const { value } = languagePackId;\n        if (value === i18n.language) {\n            this.setState({ suggestedLanguage: null });\n            return;\n        }\n\n        LocalizationStore.loadLanguage(value).then(() => {\n            this.setState({ suggestedLanguage: value });\n        });\n    };\n\n    handleNext = () => {\n        const { phone } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n\n        if (isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: null, openConfirmation: true });\n        } else {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n        }\n    };\n\n    handleChange = event => {\n        this.phoneNumber = event.target.value;\n    };\n\n    handleKeyPress = event => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    handleDone = () => {\n        const { phone, onPhoneEnter } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n        if (!isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n            return;\n        }\n\n        onPhoneEnter(phoneNumber);\n        this.setState({ error: null, loading: true });\n        TdLibController.send({\n            '@type': 'setAuthenticationPhoneNumber',\n            phone_number: phoneNumber\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: { string: errorString } });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleChangeLanguage = () => {\n        const { i18n } = this.props;\n        const { suggestedLanguage } = this.state;\n\n        if (!i18n) return;\n        if (!suggestedLanguage) return;\n\n        this.setState({ suggestedLanguage: i18n.language });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\n    };\n\n    render() {\n        const { phone, classes, t } = this.props;\n        const { loading, error, suggestedLanguage } = this.state;\n\n        let errorString = '';\n        if (error) {\n            const { code, string } = error;\n            if (code) {\n                errorString = t(code);\n            } else {\n                errorString = string;\n            }\n        }\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{t('YourPhone')}</span>\n                </div>\n                <div>{t('StartText')}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(errorString)}\n                    fullWidth\n                    autoFocus\n                    id='phoneNumber'\n                    label=''\n                    margin='normal'\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                    defaultValue={phone}\n                />\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\n                <div className='sign-in-actions'>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        disabled={loading}\n                        className={classes.button}\n                        onClick={this.handleDone}>\n                        {t('Next')}\n                    </Button>\n                    <Typography className={classes.continueAtLanguage}>\n                        <Link onClick={this.handleChangeLanguage}>\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\n                        </Link>\n                    </Typography>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(SignInControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport './ConfirmCodeControl.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n};\n\nclass ConfirmCodeControl extends React.Component {\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            error : '',\n            loading : false\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n    }\n\n    handleNext(){\n        if (this.code && this.isValid(this.code)){\n            this.setState({ error : '' });\n            this.handleDone();\n        }\n        else{\n            this.setState({error : 'Invalid code. Please try again.'});\n        }\n    }\n    \n    handleDone(){\n        const code = this.code;\n\n        this.setState({ loading: true });\n        TdLibController\n            .send({\n                '@type': 'checkAuthenticationCode',\n                code: code,\n                first_name: 'A',\n                last_name: 'B'\n            })\n            .then(result => {\n\n            })\n            .catch(error => {\n                let errorString = null;\n                if (error\n                    && error['@type'] === 'error'\n                    && error.message){\n                    errorString = error.message;\n                }\n                else{\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleBack(){\n        this.props.onChangePhone();\n    }\n\n    isValid(code){\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\n        if (!isBad) {\n            code = code.replace(/\\D/g, '');\n            if (code.length !== 5) {\n                isBad = true\n            }\n        }\n\n        return !isBad;\n    }\n\n    handleChange(e) {\n        this.code = e.target.value;\n\n        if (this.code\n            && this.codeLength > 0\n            && this.code.length === this.codeLength){\n            this.handleNext();\n        }\n    }\n\n    handleKeyPress(e){\n        if (e.key === 'Enter'){\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    getPhoneNumber(codeInfo){\n        if (!codeInfo) return null;\n        return codeInfo.phone_number;\n    }\n    \n    getCodeLength(codeInfo){\n        if (!codeInfo) return 0;\n        if (!codeInfo.type) return 0;\n        \n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 0;\n            }\n            case 'authenticationCodeTypeSms': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return codeInfo.type.length;\n            }\n        }\n\n        return 0;\n    }\n\n    getSubtitle(codeInfo){\n        if (!codeInfo) return 'Subtitle';\n        if (!codeInfo.type) return 'Subtitle';\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeSms': {\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return 'Please enter the code you\\'ve just received in your previous Telegram app.';\n            }\n        }\n\n        return 'Subtitle';\n    }\n\n    render() {\n        const {loading, error} = this.state;\n        const {classes, codeInfo} = this.props;\n\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\n        this.codeLength = this.getCodeLength(codeInfo);\n        const subtitle = this.getSubtitle(codeInfo);\n\n        const title = this.phoneNumber? formatPhoneNumber(this.phoneNumber) : 'Your Code';\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                </div>\n                <div>\n                    {subtitle}\n                </div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(error)}\n                    fullWidth\n                    autoFocus\n                    label='Your code'\n                    margin='normal'\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                />\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button\n                        fullWidth\n                        className={classes.buttonLeft}\n                        onClick={this.handleBack}\n                        disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nexport default withStyles(styles)(ConfirmCodeControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { InputLabel, InputAdornment } from '@material-ui/core';\nimport Input from '@material-ui/core/Input'\nimport { FormControl } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport './PasswordControl.css';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    margin: {\n        margin: '16px 0 8px 0'\n    },\n    withoutLabel: {\n        marginTop: theme.spacing.unit * 3,\n    },\n    textField: {\n        flexBasis: 200,\n    },\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n});\n\n\nclass PasswordControl extends React.Component {\n\n    constructor(props){\n        super(props);\n\n        this.state ={\n            password : '',\n            showPassword : false,\n            error : ''\n        };\n\n        this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\n        this.handleMouseDownPassword = this.handleMouseDownPassword.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n    }\n\n    handleNext(){\n        if (this.password){\n            this.setState({ error : '' });\n            this.handleDone();\n        }\n        else{\n            this.setState({ error : 'Invalid password. Please try again.' });\n        }\n    }\n\n    handleBack(){\n        this.props.onChangePhone();\n    }\n\n    handleDone(){\n        const password = this.password;\n\n        this.setState({ loading: true });\n        TdLibController\n            .send({\n                '@type': 'checkAuthenticationPassword',\n                password: password\n            })\n            .then(result => {\n\n            })\n            .catch(error => {\n                let errorString = null;\n                if (error\n                    && error['@type'] === 'error'\n                    && error.message){\n                    errorString = error.message;\n                }\n                else{\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleMouseDownPassword = event => {\n        event.preventDefault();\n    };\n\n    handleClickShowPassword = () => {\n        this.setState({ showPassword: !this.state.showPassword });\n    };\n\n    handleChange(e){\n        this.password = e.target.value;\n    }\n\n    handleKeyPress(e){\n        if (e.key === 'Enter'){\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    render() {\n        const {loading, error, showPassword} = this.state;\n        const {passwordHint, classes} = this.props;\n\n        return (\n            <div>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>Cloud Password Check</span>\n                </div>\n                <div>\n                    Please enter your cloud password.\n                </div>\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\n                    <InputLabel\n                        htmlFor='adornment-password'\n                        error={error}>\n                        Your cloud password\n                    </InputLabel>\n                    <Input\n                        fullWidth\n                        autoFocus\n                        id='adornment-password'\n                        type={showPassword ? 'text' : 'password'}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                        endAdornment={\n                            <InputAdornment position='end'>\n                                <IconButton\n                                    aria-label='Toggle password visibility'\n                                    onClick={this.handleClickShowPassword}\n                                    onMouseDown={this.handleMouseDownPassword}>\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n                {passwordHint && <FormHelperText id='password-hint-text'><span className='password-hint-label'>Hint: </span>{passwordHint}</FormHelperText>}\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button\n                        fullWidth\n                        className={classes.buttonLeft}\n                        onClick={this.handleBack}\n                        disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(PasswordControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass AuthErrorDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            error: null\n        };\n\n        this.handleAuthError = this.handleAuthError.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentDidMount() {\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\n    }\n\n    handleAuthError(error) {\n        this.setState({\n            open: true,\n            error: error\n        });\n    }\n\n    handleClose() {\n        this.setState({\n            open: false\n        });\n    }\n\n    handleKeyDown(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleClose();\n        }\n    }\n\n    render() {\n        let errorString = null;\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\n            errorString = this.state.error.message;\n        } else {\n            errorString = JSON.stringify(this.state.error);\n        }\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onKeyDown={this.handleKeyDown}\n                onClose={this.handleClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{errorString}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default AuthErrorDialog;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport SignInControl from './SignInControl';\nimport ConfirmCodeControl from './ConfirmCodeControl';\nimport PasswordControl from './PasswordControl';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport './AuthFormControl.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '20px'\n    },\n    authorizationFormContent: {\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary\n    }\n});\n\nclass AuthFormControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.phone = null;\n\n        this.handlePhoneEnter = this.handlePhoneEnter.bind(this);\n    }\n\n    handlePhoneEnter(phone) {\n        this.phone = phone;\n    }\n\n    render() {\n        const { classes, authorizationState } = this.props;\n\n        let control = null;\n        switch (authorizationState['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n                // control = (\n                //     <>\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\n                //         <SignUpControl/>\n                //     </>);\n                control = <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter} />;\n                break;\n            case 'authorizationStateWaitCode':\n                control = (\n                    <ConfirmCodeControl\n                        termsOfService={authorizationState.terms_of_service}\n                        codeInfo={authorizationState.code_info}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            case 'authorizationStateWaitPassword':\n                control = (\n                    <PasswordControl\n                        passwordHint={authorizationState.password_hint}\n                        hasRecoveryEmailAddress={authorizationState.has_recovery_email_address}\n                        recoveryEmailAddressPattern={authorizationState.recovery_email_address_pattern}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <div className='sign-in-wrap'>\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default withStyles(styles)(AuthFormControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport packageJson from '../../package.json';\nimport './Footer.css'\n\nclass Footer extends React.PureComponent {\n\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className='footer-wrapper'>\n                <span>\n                    {packageJson.version}\n                </span>\n            </div>\n        );\n    }\n}\n\nexport default Footer;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateHint, getSenderUserId } from '../../Utils/Message';\nimport UserTileControl from './UserTileControl';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaViewerControl.css';\n\nclass MediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const userId = getSenderUserId(message);\n        const dateHint = getDateHint(message);\n\n        const tileControl = userId ? (\n            <UserTileControl userId={userId} />\n        ) : (\n            <ChatTileControl chatId={chatId} />\n        );\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    {tileControl}\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} userId={userId} />\n                        </div>\n                        <div className='media-viewer-row message-meta'>\n                            <span className='message-date'>{dateHint}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default MediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport lottie from 'lottie-web';\nimport './Lottie.css';\n\nclass Lottie extends React.Component {\n    componentDidMount() {\n        const { options, eventListeners } = this.props;\n\n        const {\n            loop,\n            autoplay,\n            animationData,\n            //path,\n            rendererSettings,\n            segments\n        } = options;\n\n        this.options = {\n            container: this.el,\n            renderer: 'svg',\n            loop: Boolean(loop),\n            autoplay: Boolean(autoplay),\n            segments: Boolean(segments),\n            animationData,\n            //path,\n            rendererSettings\n        };\n\n        this.options = { ...this.options, ...options };\n\n        this.anim = lottie.loadAnimation(this.options);\n        this.registerEvents(eventListeners);\n    }\n\n    componentWillUpdate(nextProps, nextState, nextContext) {\n        /* Recreate the animation handle if the data is changed */\n        if (\n            this.options.animationData !== nextProps.options.animationData ||\n            this.options.path !== nextProps.options.path\n        ) {\n            this.deRegisterEvents(this.props.eventListeners);\n            this.destroy();\n            this.options = { ...this.options, ...nextProps.options };\n            this.anim = lottie.loadAnimation(this.options);\n            this.registerEvents(nextProps.eventListeners);\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.isStopped) {\n            this.stop();\n        } else if (this.props.segments) {\n            this.playSegments();\n        } else {\n            this.play();\n        }\n\n        this.pause();\n        this.setSpeed();\n        this.setDirection();\n    }\n\n    componentWillUnmount() {\n        this.deRegisterEvents(this.props.eventListeners);\n        this.destroy();\n        this.options.animationData = null;\n        this.options.path = null;\n        this.anim = null;\n    }\n\n    setSpeed() {\n        this.anim.setSpeed(this.props.speed);\n    }\n\n    setDirection() {\n        this.anim.setDirection(this.props.direction);\n    }\n\n    play() {\n        this.anim.play();\n    }\n\n    playSegments() {\n        this.anim.playSegments(this.props.segments);\n    }\n\n    stop() {\n        this.anim.stop();\n    }\n\n    pause() {\n        if (this.props.isPaused && !this.anim.isPaused) {\n            this.anim.pause();\n        } else if (!this.props.isPaused && this.anim.isPaused) {\n            this.anim.pause();\n        }\n    }\n\n    destroy() {\n        this.anim.destroy();\n    }\n\n    registerEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.addEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    deRegisterEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.removeEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    handleClickToPause = () => {\n        // The pause() method is for handling pausing by passing a prop isPaused\n        // This method is for handling the ability to pause by clicking on the animation\n        if (this.anim.isPaused) {\n            this.anim.play();\n        } else {\n            this.anim.pause();\n        }\n    };\n\n    render() {\n        const { width, height, ariaRole, ariaLabel, isClickToPauseDisabled, title } = this.props;\n\n        const getSize = initial => {\n            let size;\n\n            if (typeof initial === 'number') {\n                size = `${initial}px`;\n            } else {\n                size = initial || '100%';\n            }\n\n            return size;\n        };\n\n        const lottieStyles = {\n            width: getSize(width),\n            height: getSize(height),\n            overflow: 'hidden',\n            margin: '0 auto',\n            outline: 'none',\n            ...this.props.style\n        };\n\n        const onClickHandler = isClickToPauseDisabled ? () => null : this.handleClickToPause;\n\n        return (\n            // Bug with eslint rules https://github.com/airbnb/javascript/issues/1374\n            // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n            <div\n                ref={c => {\n                    this.el = c;\n                }}\n                style={lottieStyles}\n                onClick={onClickHandler}\n                title={title}\n                role={ariaRole}\n                aria-label={ariaLabel}\n                tabIndex='0'\n            />\n        );\n    }\n}\n\nLottie.propTypes = {\n    eventListeners: PropTypes.arrayOf(PropTypes.object),\n    options: PropTypes.object.isRequired,\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    isStopped: PropTypes.bool,\n    isPaused: PropTypes.bool,\n    speed: PropTypes.number,\n    segments: PropTypes.arrayOf(PropTypes.number),\n    direction: PropTypes.number,\n    ariaRole: PropTypes.string,\n    ariaLabel: PropTypes.string,\n    isClickToPauseDisabled: PropTypes.bool,\n    title: PropTypes.string,\n    style: PropTypes.string\n};\n\nLottie.defaultProps = {\n    eventListeners: [],\n    isStopped: false,\n    isPaused: false,\n    speed: 1,\n    ariaRole: 'button',\n    ariaLabel: 'animation',\n    isClickToPauseDisabled: false,\n    title: ''\n};\n\nexport default Lottie;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getText } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaCaption.css';\n\nclass MediaCaption extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    render() {\n        const { text } = this.props;\n\n        return (\n            <div className='media-caption' onClick={this.handleClick}>\n                <div className='media-caption-text'>{text}</div>\n            </div>\n        );\n    }\n}\n\nMediaCaption.propTypes = {\n    text: PropTypes.array\n};\n\nMediaCaption.defaultProps = {};\n\nexport default MediaCaption;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from './FileProgress';\nimport Lottie from './Lottie';\nimport MediaCaption from './MediaCaption';\nimport { getMediaFile, getMediaPreviewFile } from '../../Utils/File';\nimport { getText, isAnimationMessage, isLottieMessage, isVideoMessage } from '../../Utils/Message';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewerContent.css';\n\nclass MediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n        this.lottieRef = React.createRef();\n\n        const { chatId, messageId, size } = this.props;\n\n        let [width, height, file] = getMediaFile(chatId, messageId, size);\n        file = FileStore.get(file.id) || file;\n\n        let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n        thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n        const message = MessageStore.get(chatId, messageId);\n        const text = getText(message);\n\n        //console.log('mediaViewer file', file);\n        //console.log('mediaViewer thumbnail', thumbnail);\n\n        this.state = {\n            speed: 1,\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            isPlaying: false,\n            width: width,\n            height: height,\n            file: file,\n            text: text,\n            thumbnailWidth: thumbnailWidth,\n            thumbnailHeight: thumbnailHeight,\n            thumbnail: thumbnail\n        };\n\n        this.updateAnimationData();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, messageId, size } = props;\n\n        if (chatId !== state.prevChatId || messageId !== state.prevMessageId) {\n            let [width, height, file] = getMediaFile(chatId, messageId, size);\n            file = FileStore.get(file.id) || file;\n\n            let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n            thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n\n            return {\n                speed: 1,\n                prevChatId: chatId,\n                prevMessageId: messageId,\n                isPlaying: false,\n                width: width,\n                height: height,\n                file: file,\n                text: text,\n                thumbnailWidth: thumbnailWidth,\n                thumbnailHeight: thumbnailHeight,\n                thumbnail: thumbnail\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.updateAnimationData();\n        }\n    }\n\n    onClientUpdateDocumentBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.updateAnimationData();\n        }\n    };\n\n    updateAnimationData = async () => {\n        const { chatId, messageId, size } = this.props;\n\n        if (!isLottieMessage(chatId, messageId)) {\n            return;\n        }\n\n        const [width, height, file] = getMediaFile(chatId, messageId, size);\n        const animationData = await this.getAnimationData(file);\n\n        this.setState({ animationData });\n    };\n\n    getAnimationData = file => {\n        return new Promise(resolve => {\n            if (!file) {\n                resolve(null);\n                return;\n            }\n\n            const blob = FileStore.getBlob(file.id);\n            if (!blob) {\n                resolve(null);\n                return;\n            }\n\n            const fileReader = new FileReader();\n            fileReader.onload = event => resolve(JSON.parse(event.target.result));\n            fileReader.onerror = () => resolve(null);\n            fileReader.onabort = () => resolve(null);\n            fileReader.readAsText(blob);\n        });\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId, size } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            this.setState({\n                width,\n                height,\n                file\n            });\n        }\n    };\n\n    onClientUpdateMediaThumbnailBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaPreviewFile(chatId, messageId);\n            this.setState({\n                thumbnailWidth: width,\n                thumbnailHeight: height,\n                thumbnail: file\n            });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId, messageId, size } = this.props;\n        const { chat_id, message_id } = update;\n\n        if (chatId === chat_id && messageId === message_id) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n            this.setState({\n                width: width,\n                height: height,\n                file: file,\n                text: text\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n    };\n\n    changeSpeed = speed => {\n        this.setState({\n            speed\n        });\n    };\n\n    render() {\n        const { chatId, messageId } = this.props;\n        const {\n            animationData,\n            width,\n            height,\n            thumbnailWidth,\n            thumbnailHeight,\n            file,\n            text,\n            thumbnail,\n            isPlaying\n        } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob) || '';\n\n        const thumbnailBlob = thumbnail ? FileStore.getBlob(thumbnail.id) || thumbnail.blob : null;\n        const thumbnailSrc = FileStore.getBlobUrl(thumbnailBlob);\n        const isBlurred = isBlurredThumbnail({ width: thumbnailWidth, height: thumbnailHeight });\n\n        const isVideo = isVideoMessage(chatId, messageId);\n        const isAnimation = isAnimationMessage(chatId, messageId);\n        const isLottie = isLottieMessage(chatId, messageId);\n        let videoWidth = width;\n        let videoHeight = height;\n        if (Math.max(videoWidth, videoHeight) > 640) {\n            const scale = 640 / Math.max(videoWidth, videoHeight);\n            videoWidth = videoWidth > videoHeight ? 640 : Math.floor(videoWidth * scale);\n            videoHeight = videoHeight > videoWidth ? 640 : Math.floor(videoHeight * scale);\n        }\n\n        let content = null;\n        if (isVideo) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        ref={this.videoRef}\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        controls\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPlay'\n                            });\n                        }}\n                        onCanPlay={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                player.volume = PlayerStore.volume;\n                            }\n                        }}\n                        onPause={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPause'\n                            });\n                        }}\n                        onEnded={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerEnded'\n                            });\n                        }}\n                        onVolumeChange={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                TdLibController.clientUpdate({\n                                    '@type': 'clientUpdateMediaVolume',\n                                    volume: player.volume\n                                });\n                            }\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isAnimation) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        loop\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isLottie) {\n            const defaultOptions = {\n                loop: true,\n                autoplay: true,\n                //path: src,\n                animationData: animationData,\n                rendererSettings: {\n                    preserveAspectRatio: 'xMidYMid slice'\n                }\n            };\n            const { speed } = this.state;\n\n            content = (\n                <Lottie\n                    ref={this.lottieRef}\n                    speed={speed}\n                    options={defaultOptions}\n                    height='auto'\n                    width={400}\n                    isStopped={false}\n                    isPaused={false}\n                />\n            );\n        } else {\n            content = <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />;\n        }\n\n        return (\n            <div className='media-viewer-content'>\n                {content}\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} zIndex={2} />\n                {text && text.length > 0 && <MediaCaption text={text} />}\n            </div>\n        );\n    }\n}\n\nMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired\n};\n\nexport default MediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport './MediaViewerButton.css';\n\nclass MediaViewerButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { disabled, onClick } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { disabled, grow, children } = this.props;\n\n        const className = classNames(\n            disabled ? 'media-viewer-button-disabled' : 'media-viewer-button',\n            { grow: grow }\n        );\n\n        return (\n            <div className={className} onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default MediaViewerButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './MediaViewerFooterText.css';\n\nclass MediaViewerFooterText extends React.Component {\n    render() {\n        const { title, subtitle } = this.props;\n\n        return (\n            <div className=\"media-viewer-footer-text\">\n                <div className=\"media-viewer-footer-text-wrapper\">\n                    <span>{title}</span>\n                    {\n                        Boolean(subtitle) && (\n                            <span>\n                                &nbsp;\n                                {subtitle}\n                            </span>\n                        )}\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterText.propTypes = {\n    title: PropTypes.string,\n    subtitle: PropTypes.string\n};\n\nexport default MediaViewerFooterText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './MediaViewerFooterButton.css';\n\nconst styles = theme => ({\n    checked: {\n        color: theme.palette.primary.main\n    }\n});\n\nclass MediaViewerFooterButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick, disabled } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { checked, children, classes, disabled, title } = this.props;\n\n        return (\n            <div\n                className={classNames(disabled ? 'media-viewer-footer-button-disabled' : 'media-viewer-footer-button', {\n                    [classes.checked]: checked\n                })}\n                title={title}\n                onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterButton.propTypes = {\n    title: PropTypes.string,\n    disabled: PropTypes.bool,\n    checked: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles)(MediaViewerFooterButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    FormControlLabel\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport SlowMotionVideoIcon from '@material-ui/icons/SlowMotionVideo';\nimport MediaViewerControl from '../Tile/MediaViewerControl';\nimport MediaViewerContent from './MediaViewerContent';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport { getSize } from '../../Utils/Common';\nimport {\n    cancelPreloadMediaViewerContent,\n    getMediaFile,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    saveOrDownload\n} from '../../Utils/File';\nimport {\n    filterMessages,\n    isAnimationMessage,\n    isLottieMessage,\n    isMediaContent,\n    isVideoMessage\n} from '../../Utils/Message';\nimport { between } from '../../Utils/Common';\nimport { PHOTO_SIZE, PHOTO_BIG_SIZE, MEDIA_SLICE_LIMIT } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    transform: 'scaleX(-1)'\n};\n\nconst iconStyle = {\n    padding: 20\n};\n\nconst navigationIconStyle = {\n    padding: 35\n};\n\nclass MediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.contentRef = React.createRef();\n        this.history = [];\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            speed: 1,\n            background: 'media-viewer-default',\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            currentMessageId: messageId,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false,\n            deleteForAll: true\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        if (nextState.background !== background) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentMessageId !== currentMessageId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        if (nextState.speed !== speed) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handleNext();\n        } else if (event.keyCode === 37) {\n            this.handlePrevious();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id, new_content, old_content } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (chatId !== chat_id) return;\n\n        const message = MessageStore.get(chat_id, message_id);\n        if (!message) return;\n\n        loadMediaViewerContent([message]);\n\n        const addMessage = isMediaContent(new_content) && !isMediaContent(old_content);\n        if (addMessage) {\n            if (\n                this.history.length >= 2 &&\n                (this.firstSliceLoaded ||\n                    between(message_id, this.history[0].id, this.history[this.history.length - 1].id))\n            ) {\n                let inserted = false;\n                let history = [];\n                for (let i = 0; i < this.history.length; i++) {\n                    if (this.history[i].id > message_id) {\n                        history.push(this.history[i]);\n                    } else {\n                        if (!inserted) {\n                            inserted = true;\n                            history.push(message);\n                        }\n                        history.push(this.history[i]);\n                    }\n                }\n                this.history = history;\n            }\n\n            const index = this.history.findIndex(x => x.id === currentMessageId);\n            this.setState({\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index),\n                totalCount: totalCount + 1\n            });\n        }\n\n        const removeMessage = !isMediaContent(new_content) && isMediaContent(old_content);\n        if (removeMessage) {\n            let oldHistory = this.history;\n            this.history = this.history.filter(x => x.id !== message_id);\n\n            if (currentMessageId === message_id) {\n                const filterMap = new Map();\n                filterMap.set(message_id, message_id);\n\n                this.moveToNextMedia(oldHistory, filterMap);\n                this.setState({\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            } else {\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            }\n        }\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chat_id, message_ids, is_permanent } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (!is_permanent) return;\n        if (chatId !== chat_id) return;\n\n        const filterMap = message_ids.reduce((accumulator, currentId) => {\n            accumulator.set(currentId, currentId);\n            return accumulator;\n        }, new Map());\n\n        const oldHistory = this.history;\n        let deletedCount = oldHistory.length;\n\n        this.history = this.history.filter(x => !filterMap.has(x.id));\n        deletedCount -= this.history.length;\n\n        this.setState({ totalCount: Math.max(totalCount - deletedCount, 0) });\n\n        if (!this.history.length) {\n            ApplicationStore.setMediaViewerContent(null);\n            return;\n        }\n\n        if (filterMap.has(currentMessageId)) {\n            this.moveToNextMedia(oldHistory, filterMap);\n        }\n    };\n\n    onUpdateNewMessage = update => {\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        const { message } = update;\n        if (!message) return;\n        if (!isMediaContent(message.content)) return;\n\n        if (message.chat_id !== chatId) return;\n        if (!this.firstSliceLoaded) return;\n\n        this.history = [message].concat(this.history);\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: totalCount + 1\n        });\n    };\n\n    getFilter = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterChatPhoto'\n                };\n            }\n            case 'messagePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            case 'messageVideo': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            default: {\n                return null;\n            }\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId, messageId } = this.props;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: messageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: 2 * MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = result.messages;\n        this.firstSliceLoaded = result.messages.length === 0;\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index)\n        });\n\n        if (index === -1) {\n            this.history = [MessageStore.get(chatId, currentMessageId)];\n            preloadMediaViewerContent(0, this.history);\n        } else {\n            preloadMediaViewerContent(index, this.history);\n\n            const filter = this.getFilter(chatId, messageId);\n            if (!filter) return;\n\n            const maxCount = 1500;\n            let count = 0;\n            while (!this.firstSliceLoaded && count < maxCount) {\n                const result = await TdLibController.send({\n                    '@type': 'searchChatMessages',\n                    chat_id: chatId,\n                    query: '',\n                    sender_user_id: 0,\n                    from_message_id: this.history.length > 0 ? this.history[0].id : 0,\n                    offset: -99,\n                    limit: 99 + 1,\n                    filter: filter\n                });\n                count += result.messages.length;\n\n                filterMessages(result, this.history);\n                MessageStore.setItems(result.messages);\n\n                this.history = result.messages.concat(this.history);\n                this.firstSliceLoaded = result.messages.length === 0;\n\n                const { currentMessageId } = this.state;\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    firstSliceLoaded: this.firstSliceLoaded,\n                    totalCount: result.total_count\n                });\n            }\n        }\n    };\n\n    handleClose = () => {\n        ApplicationStore.setMediaViewerContent(null);\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        if (index !== -1) {\n            cancelPreloadMediaViewerContent(index, this.history);\n        }\n    };\n\n    saveAnimation = (animation, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!animation) return;\n\n        const { animation: file, file_name } = animation;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateAnimationBlob(chat_id, id, fileId));\n    };\n\n    saveDocument = (document, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!document) return;\n\n        const { document: file, file_name } = document;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateDocumentBlob(chat_id, id, fileId));\n    };\n\n    saveVideo = (video, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!video) return;\n\n        const { video: file, file_name } = video;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateVideoBlob(chat_id, id, fileId));\n    };\n\n    savePhoto = (photo, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!photo) return;\n\n        const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n        if (!photoSize) return;\n\n        const { photo: file } = photoSize;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file.id + '.jpg', message, () => FileStore.updatePhotoBlob(chat_id, id, fileId));\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.saveAnimation(animation, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.saveDocument(document, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) return;\n\n                const { animation, document, photo, video } = web_page;\n\n                if (animation) {\n                    this.saveAnimation(animation, message);\n                    return;\n                }\n\n                if (document) {\n                    this.saveDocument(document, message);\n                    return;\n                }\n\n                if (photo) {\n                    this.savePhoto(photo, message);\n                    return;\n                }\n\n                if (video) {\n                    this.saveVideo(video, message);\n                    return;\n                }\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.saveVideo(video, message);\n                break;\n            }\n        }\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: chatId,\n                messageIds: [currentMessageId]\n            }\n        });\n    };\n\n    handleDelete = () => {\n        this.handleDialogOpen();\n        return;\n\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n        if (!message.content) return;\n\n        const { photo } = message.content;\n        if (photo) {\n            const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n            if (photoSize) {\n                let file = photoSize.photo;\n                file = FileStore.get(file.id) || file;\n                if (file) {\n                    const store = FileStore.getReadWriteStore();\n\n                    FileStore.deleteLocalFile(store, file);\n                }\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: 0,\n                limit: MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = this.history.concat(result.messages);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: MEDIA_SLICE_LIMIT + 1,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.firstSliceLoaded = result.messages.length === 0;\n        this.history = result.messages.concat(this.history);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            firstSliceLoaded: this.firstSliceLoaded,\n            totalCount: result.total_count\n        });\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentMessageId: this.history[index].id,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        preloadMediaViewerContent(index, this.history);\n        return true;\n    };\n\n    moveToNextMedia = (oldHistory, filterMap) => {\n        const { currentMessageId } = this.state;\n\n        const index = oldHistory.findIndex(x => x.id === currentMessageId);\n        let nextId = 0;\n        for (let i = index - 1; i >= 0; i--) {\n            if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                nextId = oldHistory[i].id;\n                break;\n            }\n        }\n        if (!nextId) {\n            for (let i = index + 1; i < oldHistory.length; i++) {\n                if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                    nextId = oldHistory[i].id;\n                    break;\n                }\n            }\n        }\n\n        if (!nextId) return;\n\n        const nextIndex = this.history.findIndex(x => x.id === nextId);\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            } else if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    handleDialogOpen = () => {\n        this.setState({ deleteConfirmationOpened: true });\n    };\n\n    handleDialogClose = () => {\n        this.setState({ deleteConfirmationOpened: false });\n    };\n\n    handleDone = () => {\n        this.setState({ deleteConfirmationOpened: false });\n\n        const { chatId } = this.props;\n        const { currentMessageId, deleteForAll } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n        const canBeDeleted = can_be_deleted_only_for_self || can_be_deleted_for_all_users;\n        if (!canBeDeleted) return;\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: chatId,\n            message_ids: [currentMessageId],\n            revoke: can_be_deleted_for_all_users && deleteForAll\n        });\n    };\n\n    handleChangeDeleteForAll = event => {\n        this.setState({ deleteForAll: event.target.checked });\n    };\n\n    handleInvertColors = () => {\n        const { background } = this.state;\n\n        let nextBackground = 'media-viewer-default';\n        switch (background) {\n            case 'media-viewer-default': {\n                nextBackground = 'media-viewer-dark';\n                break;\n            }\n            case 'media-viewer-dark': {\n                nextBackground = 'media-viewer-light';\n                break;\n            }\n            case 'media-viewer-light': {\n                nextBackground = 'media-viewer-default';\n                break;\n            }\n        }\n\n        this.setState({\n            background: nextBackground\n        });\n    };\n\n    handleChangeSpeed = () => {\n        if (!this.contentRef) return;\n\n        const { current } = this.contentRef;\n        if (!current) return;\n\n        const { speed } = this.state;\n        const nextSpeed = speed < 1 ? 1 : 0.1;\n\n        this.setState({ speed: nextSpeed });\n\n        current.changeSpeed(nextSpeed);\n    };\n\n    canBeForwarded = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return false;\n\n        const { can_be_forwarded, content } = message;\n        if (!content) return false;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return true;\n            }\n            default: {\n                return can_be_forwarded;\n            }\n        }\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            deleteForAll,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        let index = -1;\n        if (totalCount && firstSliceLoaded) {\n            index = this.history.findIndex(x => x.id === currentMessageId);\n        }\n        const maxCount = Math.max(this.history.length, totalCount);\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        const { can_be_deleted_for_all_users, can_be_deleted_only_for_self } = message;\n\n        const canBeDeleted = can_be_deleted_for_all_users || can_be_deleted_only_for_self;\n        const canBeForwarded = this.canBeForwarded(chatId, currentMessageId);\n\n        let deleteConfirmationContent = '';\n        if (isVideoMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteGIF');\n        } else {\n            deleteConfirmationContent = t('AreYouSureDeletePhoto');\n        }\n        const deleteConfirmation = deleteConfirmationOpened ? (\n            <Dialog\n                transitionDuration={0}\n                open={deleteConfirmationOpened}\n                onClose={this.handleDialogClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{deleteConfirmationContent}</DialogContentText>\n                    {can_be_deleted_for_all_users && (\n                        <FormControlLabel\n                            label={t('DeleteForAll')}\n                            control={\n                                <Checkbox color='primary' value='deleteAll' onChange={this.handleChangeDeleteForAll} />\n                            }\n                            checked={deleteForAll}\n                        />\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleDialogClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        const [width, height, file] = getMediaFile(chatId, currentMessageId, PHOTO_BIG_SIZE);\n\n        const fileId = file ? file.id : 0;\n        let title = t('AttachPhoto');\n        if (isVideoMessage(chatId, currentMessageId)) {\n            title = t('AttachVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            title = t('AttachGif');\n        } else if (isLottieMessage(chatId, currentMessageId)) {\n            title = '';\n        }\n\n        return (\n            <div className={classNames('media-viewer', background)}>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <MediaViewerContent\n                            ref={this.contentRef}\n                            chatId={chatId}\n                            messageId={currentMessageId}\n                            size={PHOTO_BIG_SIZE}\n                            onClick={this.handlePrevious}\n                        />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <MediaViewerControl chatId={chatId} messageId={currentMessageId} />\n                    <MediaViewerFooterText\n                        title={title}\n                        subtitle={maxCount && index >= 0 ? `${maxCount - index} of ${maxCount}` : null}\n                    />\n                    {isLottieMessage(chatId, currentMessageId) && (\n                        <>\n                            <MediaViewerFooterButton\n                                title={t('ChangeSpeed')}\n                                checked={speed < 1}\n                                onClick={this.handleChangeSpeed}>\n                                <SlowMotionVideoIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                            <MediaViewerFooterButton\n                                title={t('InvertBackgroundColor')}\n                                onClick={this.handleInvertColors}>\n                                <InvertColorsIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                        </>\n                    )}\n                    <MediaViewerDownloadButton title={t('Save')} fileId={fileId} onClick={this.handleSave} />\n                    <MediaViewerFooterButton\n                        title={t('Forward')}\n                        disabled={!canBeForwarded}\n                        onClick={this.handleForward}>\n                        <ReplyIcon style={forwardIconStyle} />\n                    </MediaViewerFooterButton>\n                    <MediaViewerFooterButton title={t('Delete')} disabled={!canBeDeleted} onClick={this.handleDelete}>\n                        <DeleteIcon style={iconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(MediaViewer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FileProgress from './FileProgress';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { PROFILE_PHOTO_BIG_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './ProfileMediaViewer.css';\n\nclass ProfileMediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, photo } = this.props;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n\n        this.state = {\n            prevChatId: chatId,\n            prevPhoto: photo,\n            width: PROFILE_PHOTO_BIG_SIZE,\n            height: PROFILE_PHOTO_BIG_SIZE,\n            file: file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, photo } = props;\n\n        if (chatId !== state.prevChatId || photo !== state.prevPhoto) {\n            return {\n                prevChatId: chatId,\n                prevPhoto: photo,\n                width: PROFILE_PHOTO_BIG_SIZE,\n                height: PROFILE_PHOTO_BIG_SIZE,\n                file: photo.big\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    onClientUpdateChatBlob = update => {\n        const { chatId, photo } = this.props;\n\n        if (chatId === update.chatId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    onClientUpdateUserBlob = update => {\n        const { chatId, photo } = this.props;\n        const userId = getChatUserId(chatId);\n\n        if (userId === update.userId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n\n        this.props.onClick(event);\n    };\n\n    render() {\n        const { width, height, file } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob);\n\n        return (\n            <div className='media-viewer-content'>\n                <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} />\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired\n};\n\nexport default ProfileMediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport './MediaViewerControl.css';\n\nclass ProfileMediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, date } = this.props;\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    <ChatTileControl chatId={chatId} showSavedMessages={false} />\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} />\n                        </div>\n                        {date && (\n                            <div className='media-viewer-row message-meta'>\n                                <span className='message-date'>{date}</span>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    date: PropTypes.string\n};\n\nexport default ProfileMediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport ProfileMediaViewerContent from './ProfileMediaViewerContent';\nimport ProfileMediaViewerControl from '../Tile/ProfileMediaViewerControl';\nimport { getPhotoFromChat, getChatUserId, isPrivateChat } from '../../Utils/Chat';\nimport { getProfilePhotoDateHint, getProfilePhoto } from '../../Utils/User';\nimport { loadProfileMediaViewerContent, preloadProfileMediaViewerContent, saveOrDownload } from '../../Utils/File';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ProfileMediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    color: 'white',\n    transform: 'scaleX(-1)'\n};\n\nconst deleteIconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nconst navigationIconStyle = {\n    padding: 35,\n    color: 'white'\n};\n\nclass ProfileMediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.history = [];\n\n        const { chatId, fileId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            prevFileId: fileId,\n            currentIndex: 0,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            currentFileId,\n            hasPreviousMedia,\n            hasNextMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened\n        } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentFileId !== currentFileId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        const photo = getPhotoFromChat(chatId);\n        loadProfileMediaViewerContent(chatId, [photo]);\n\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handlePrevious();\n        } else if (event.keyCode === 37) {\n            this.handleNext();\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!isPrivateChat(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getUserProfilePhotos',\n            user_id: getChatUserId(chatId),\n            offset: 0,\n            limit: 100\n        });\n\n        this.history = result.photos;\n        this.firstSliceLoaded = result.photos.length === 0;\n\n        const index = 0;\n\n        this.setState({\n            currentIndex: index,\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n    };\n\n    handleClose = () => {\n        ApplicationStore.setProfileMediaViewerContent(null);\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        if (!photo) return;\n        if (!photo.big) return;\n\n        const file = FileStore.get(photo.big.id) || photo.big;\n        if (!file) return;\n\n        saveOrDownload(file, file.id + '.jpg', chat, () => FileStore.updateChatPhotoBlob(chatId, file.id));\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        if (!isPrivateChat(chatId)) return;\n\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        if (index < 0 || index >= this.history.length) return;\n        const photo = getProfilePhoto(this.history[index]);\n        if (!photo) return;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n        if (!file) return;\n\n        const photoSize = {\n            '@type': 'photoSize',\n            type: 'c',\n            photo: file,\n            width: 640,\n            height: 640\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { photoSize }\n        });\n    };\n\n    handleDelete = () => {\n        const { chatId, messageId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n\n        if (photo) {\n            let file = photo.big;\n            file = FileStore.get(file.id) || file;\n            if (file) {\n                const store = FileStore.getReadWriteStore();\n\n                FileStore.deleteLocalFile(store, file);\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        return;\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        return;\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentIndex: index,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        const { chatId } = this.props;\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n        return true;\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            currentIndex,\n            hasNextMedia,\n            hasPreviousMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened,\n            deleteForAll\n        } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const deleteConfirmation = null;\n        const inHistory = index >= 0 && index < this.history.length;\n        const photo = inHistory ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        const userProfilePhoto = inHistory ? this.history[index] : null;\n        const { big: file } = photo;\n\n        return (\n            <div className='media-viewer'>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <ProfileMediaViewerContent chatId={chatId} photo={photo} onClick={this.handlePrevious} />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <ProfileMediaViewerControl chatId={chatId} date={getProfilePhotoDateHint(userProfilePhoto)} />\n                    <MediaViewerFooterText\n                        title={t('AttachPhoto')}\n                        subtitle={totalCount && index >= 0 ? `${index + 1} of ${totalCount}` : null}\n                    />\n                    <MediaViewerDownloadButton title={t('Save')} fileId={file.id} onClick={this.handleSave} />\n                    {isPrivateChat(chatId) && (\n                        <MediaViewerFooterButton\n                            title={t('Forward')}\n                            disabled={!inHistory}\n                            onClick={this.handleForward}>\n                            <ReplyIcon style={forwardIconStyle} />\n                        </MediaViewerFooterButton>\n                    )}\n                    <MediaViewerFooterButton title={t('Delete')} disabled onClick={this.handleDelete}>\n                        <DeleteIcon style={deleteIconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(ProfileMediaViewer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport './AppInactiveControl.css';\n\nclass AppInactiveControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static handleReload() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div className='app-inactive'>\n                <div className='app-inactive-wrapper'>\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\n                    <div className='app-inactive-description'>\n                        Telegram supports only one active tab with the app.\n                        <br />\n                        Please reload this page to continue using this tab or close it.\n                    </div>\n                    <div className='app-inactive-actions'>\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\n                            Reload app\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AppInactiveControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Cookies from 'universal-cookie';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport localForage from 'localforage';\nimport LocalForageWithGetItems from 'localforage-getitems';\nimport packageJson from '../package.json';\nimport withLanguage from './Language';\nimport withTheme from './Theme';\nimport withSnackbarNotifications from './Notifications';\nimport ForwardDialog from './Components/Dialog/ForwardDialog';\nimport ChatInfo from './Components/ColumnRight/ChatInfo';\nimport Dialogs from './Components/ColumnLeft/Dialogs';\nimport DialogDetails from './Components/ColumnMiddle/DialogDetails';\nimport AuthFormControl from './Components/Auth/AuthFormControl';\nimport Footer from './Components/Footer';\nimport MediaViewer from './Components/Viewer/MediaViewer';\nimport ProfileMediaViewer from './Components/Viewer/ProfileMediaViewer';\nimport AppInactiveControl from './Components/Additional/AppInactiveControl';\nimport registerServiceWorker from './registerServiceWorker';\nimport { highlightMessage } from './Actions/Client';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ChatStore from './Stores/ChatStore';\nimport UserStore from './Stores/UserStore';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\nimport './TelegramApp.css';\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    },\n    '@global': {\n        a: {\n            color: theme.palette.primary.main\n        },\n        code: {\n            color: theme.palette.primary.dark\n        }\n    }\n});\n\nclass TelegramApp extends Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`Start Telegram Web ${packageJson.version}`);\n\n        this.dialogDetailsRef = React.createRef();\n\n        this.state = {\n            authorizationState: null,\n            inactive: false,\n            mediaViewerContent: ApplicationStore.mediaViewerContent,\n            fatalError: false,\n            forwardInfo: null\n        };\n\n        /*this.store = localForage.createInstance({\n                    name: 'tdlib'\n                });*/\n\n        //this.initDB();\n    }\n\n    componentWillMount() {\n        const { location } = this.props;\n\n        TdLibController.init(location);\n    }\n\n    componentDidMount() {\n        TdLibController.addListener('update', this.onUpdate);\n\n        UserStore.on('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.on('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.on('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('update', this.onUpdate);\n\n        UserStore.removeListener('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.removeListener('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.removeListener('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    onClientUpdateOpenChat = update => {\n        const { chatId, messageId, popup } = update;\n\n        this.handleSelectChat(chatId, messageId, popup);\n    };\n\n    onClientUpdateOpenUser = update => {\n        const { userId, popup } = update;\n\n        this.handleSelectUser(userId, popup);\n    };\n\n    onUpdate = update => {\n        if (FIRST_START_OPTIMIZATIONS) {\n            if (!this.checkServiceWorker) {\n                this.checkServiceWorker = true;\n\n                const cookieEnabled = navigator.cookieEnabled;\n                if (cookieEnabled) {\n                    const cookies = new Cookies();\n                    const register = cookies.get('register');\n                    if (!register) {\n                        registerServiceWorker();\n                    }\n                }\n            }\n        }\n    };\n\n    onClientUpdateForward = update => {\n        const { info } = update;\n\n        this.setState({ forwardInfo: info });\n    };\n\n    onUpdateFatalError = update => {\n        this.setState({ fatalError: true });\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state });\n\n        if (!window.hasFocus) return;\n        if (!authorization_state) return;\n        if (authorization_state['@type'] !== 'authorizationStateReady') return;\n\n        TdLibController.send({\n            '@type': 'setOption',\n            name: 'online',\n            value: { '@type': 'optionValueBoolean', value: true }\n        });\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.setState({ mediaViewerContent: ApplicationStore.mediaViewerContent });\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.setState({\n            profileMediaViewerContent: ApplicationStore.profileMediaViewerContent\n        });\n    };\n\n    onClientUpdateAppInactive = update => {\n        this.setState({ inactive: true });\n    };\n\n    handleSelectChat = (chatId, messageId = null, popup = false) => {\n        const currentChatId = ApplicationStore.getChatId();\n        const currentDialogChatId = ApplicationStore.dialogChatId;\n        const currentMessageId = ApplicationStore.getMessageId();\n\n        if (popup) {\n            if (currentDialogChatId !== chatId) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateDialogChatId',\n                    chatId\n                });\n            }\n\n            return;\n        }\n\n        if (currentChatId === chatId && messageId && currentMessageId === messageId) {\n            this.dialogDetailsRef.current.scrollToMessage();\n            if (messageId) {\n                highlightMessage(chatId, messageId);\n            }\n        } else if (currentChatId === chatId && !messageId) {\n            const chat = ChatStore.get(chatId);\n            if (chat && chat.unread_count > 0) {\n                this.dialogDetailsRef.current.scrollToStart();\n            } else {\n                this.dialogDetailsRef.current.scrollToBottom();\n            }\n        } else {\n            TdLibController.setChatId(chatId, messageId);\n        }\n    };\n\n    handleSelectUser = async (userId, popup) => {\n        if (!userId) return;\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: userId,\n            force: true\n        });\n\n        this.handleSelectChat(chat.id, null, popup);\n    };\n\n    handleChangePhone = () => {\n        this.setState({\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\n        });\n    };\n\n    handleDragOver = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleRefresh = () => {\n        this.setState({ fatalError: false });\n        window.location.reload();\n    };\n\n    handleDestroy = () => {\n        this.setState({ fatalError: false });\n        TdLibController.send({ '@type': 'destroy' });\n    };\n\n    handleKeyDown = event => {\n        //console.log('KeyDown', event);\n    };\n\n    render() {\n        const {\n            inactive,\n            authorizationState,\n            isChatDetailsVisible,\n            mediaViewerContent,\n            profileMediaViewerContent,\n            fatalError,\n            forwardInfo\n        } = this.state;\n        const { classes } = this.props;\n\n        let page = (\n            <>\n                <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\n                    <Dialogs onClearCache={this.clearCache} onSelectChat={this.handleSelectChat} />\n                    <DialogDetails ref={this.dialogDetailsRef} />\n                    {isChatDetailsVisible && <ChatInfo />}\n                </div>\n                <Footer />\n            </>\n        );\n\n        if (inactive) {\n            page = (\n                <>\n                    <div className='header-wrapper' />\n                    <div className={classNames(classes.page, 'page')}>\n                        <AppInactiveControl />\n                    </div>\n                    <Footer />\n                </>\n            );\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed': {\n                    break;\n                }\n                case 'authorizationStateClosing': {\n                    break;\n                }\n                case 'authorizationStateLoggingOut': {\n                    break;\n                }\n                case 'authorizationStateReady': {\n                    break;\n                }\n                case 'authorizationStateWaitCode':\n                case 'authorizationStateWaitPassword':\n                case 'authorizationStateWaitPhoneNumber':\n                    page = (\n                        <AuthFormControl\n                            authorizationState={authorizationState}\n                            onChangePhone={this.handleChangePhone}\n                        />\n                    );\n                    break;\n                case 'authorizationStateWaitEncryptionKey': {\n                    break;\n                }\n                case 'authorizationStateWaitTdlibParameters': {\n                    break;\n                }\n            }\n        }\n\n        return (\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\n                {page}\n                {mediaViewerContent && <MediaViewer {...mediaViewerContent} />}\n                {profileMediaViewerContent && <ProfileMediaViewer {...profileMediaViewerContent} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={fatalError}\n                    onClose={this.handleRefresh}\n                    aria-labelledby='fatal-error-dialog-title'\n                    aria-describedby='fatal-error-dialog-description'>\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id='fatal-error-dialog-description'>\n                            Oops! Something went wrong. We need to refresh this page.\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleDestroy} color='primary'>\n                            Log out\n                        </Button>\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\n                            Refresh\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n                {forwardInfo && <ForwardDialog {...forwardInfo} />}\n            </div>\n        );\n    }\n}\n\nconst keyMap = new Map();\nwindow.keyMap = keyMap;\n\nasync function openPinnedChat(index) {\n    const chats = await TdLibController.send({\n        '@type': 'getChats',\n        offset_order: '9223372036854775807',\n        offset_chat_id: 0,\n        limit: 10\n    });\n\n    if (chats) {\n        let pinnedIndex = -1;\n        for (let i = 0; i < chats.chat_ids.length; i++) {\n            const chat = ChatStore.get(chats.chat_ids[i]);\n            if (chat && chat.is_pinned) {\n                pinnedIndex++;\n            }\n\n            if (pinnedIndex === index) {\n                TdLibController.setChatId(chat.id);\n                return;\n            }\n        }\n    }\n}\n\ndocument.addEventListener('keyup', event => {\n    keyMap.delete(event.key);\n    //console.log('keyup key=' + event.key, keyMap);\n});\n\ndocument.addEventListener('keydown', async event => {\n    keyMap.set(event.key, event.key);\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\n\n    const { authorizationState } = ApplicationStore;\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n    if (keyMap.size > 3) return;\n\n    if (event.altKey && event.ctrlKey) {\n        switch (event.key) {\n            case '0': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                const chat = await TdLibController.send({\n                    '@type': 'createPrivateChat',\n                    user_id: UserStore.getMyId(),\n                    force: true\n                });\n\n                if (chat) {\n                    TdLibController.setChatId(chat.id);\n                }\n                break;\n            }\n            case '1': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(0);\n                break;\n            }\n            case '2': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(1);\n                break;\n            }\n            case '3': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(2);\n                break;\n            }\n            case '4': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(3);\n                break;\n            }\n            case '5': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(4);\n                break;\n            }\n        }\n    }\n});\n\nwindow.hasFocus = true;\n\n// set offline on page lost focus\nwindow.onblur = function() {\n    keyMap.clear();\n    //console.log('window.blur key', keyMap);\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = false;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: false\n    });\n};\n\n// set online on page get focus\nwindow.onfocus = function() {\n    keyMap.clear();\n    //console.log('window.focus key', keyMap);\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = true;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: true\n    });\n};\n\n// disable back navigation\nwindow.history.pushState(null, null, window.location.href);\nwindow.onpopstate = function() {\n    window.history.go(1);\n};\n\nconst enhance = compose(\n    withLanguage,\n    withTheme,\n    withStyles(styles),\n    withSnackbarNotifications\n);\n\nexport default enhance(TelegramApp);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport TelegramApp from './TelegramApp';\nimport registerServiceWorker from './registerServiceWorker';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport './index.css';\n\nReactDOM.render(\n    <Router>\n        <Route path='' component={TelegramApp} />\n    </Router>,\n    document.getElementById('root')\n);\n\nif (FIRST_START_OPTIMIZATIONS) {\n    const cookieEnabled = navigator.cookieEnabled;\n    if (cookieEnabled) {\n        const cookies = new Cookies();\n        const register = cookies.get('register');\n        if (register) {\n            registerServiceWorker();\n        }\n    } else {\n        registerServiceWorker();\n    }\n} else {\n    registerServiceWorker();\n}\n"],"sourceRoot":""}