{"version":3,"sources":["Controllers/TdLibController.js","Stores/LocalizationStore.js","Utils/Common.js","Utils/HOC.js","Language.js","Theme.js","Notifications.js","Stores/OptionStore.js","Stores/UserStore.js","Utils/User.js","Stores/SupergroupStore.js","Utils/InputTypingManager.js","Stores/ChatStore.js","Stores/FileStore.js","Components/Viewer/FileProgress.js","Stores/MessageStore.js","Utils/File.js","Components/Tile/DocumentTile.js","Stores/PlayerStore.js","Components/Message/Media/AudioAction.js","Utils/Media.js","Components/Message/Media/DocumentAction.js","Components/Message/Media/Document.js","Components/Message/Media/Audio.js","Components/Message/Media/Animation.js","Components/Tile/UserTileControl.js","Components/Message/Media/Contact.js","Components/Message/Media/Photo.js","Components/Theme.js","Components/Message/Media/Game.js","Components/Message/Media/Location.js","Components/Message/Media/PollRadio.js","Components/Message/Media/PollPercentage.js","Components/Message/Media/PollOption.js","Components/Message/Media/Poll.js","Actions/Poll.js","Components/Message/Media/Sticker.js","Components/Message/Media/Venue.js","Components/Message/Media/Video.js","Components/Message/Media/MediaStatus.js","Components/Message/Media/VideoNote.js","Components/Message/Media/VoiceNoteSlider.js","Components/Message/Media/VoiceNote.js","Actions/Client.js","Utils/Currency.js","Components/Message/MessageAuthor.js","Utils/ServiceMessage.js","Utils/Message.js","Stores/BasicGroupStore.js","Components/ColumnMiddle/AttachButton.js","Utils/Component.js","Utils/Key.js","Components/Dialog/CreatePollOption.js","Utils/Poll.js","Stores/PollStore.js","Components/Dialog/CreatePollDialog.js","Components/Tile/ReplyTile.js","Components/Message/Reply.js","Components/ColumnMiddle/InputBoxHeader.js","Utils/OutputTypingManager.js","Stores/StickerStore.js","Components/ColumnMiddle/InputBoxControl.js","Components/ColumnMiddle/FooterCommand.js","Components/ColumnMiddle/NotificationsControl.js","Components/ColumnMiddle/NotificationsCommandControl.js","Components/ColumnMiddle/Footer.js","Utils/Chat.js","Utils/BasicGroup.js","Utils/Supergroup.js","Components/Tile/ChatStatus.js","Components/Tile/ChatTileControl.js","Components/Tile/ForwardTargetChat.js","Utils/Language.js","Components/Dialog/ForwardDialog.js","Components/Additional/NotificationTimer.js","Components/ColumnMiddle/MainMenuButton.js","Components/Tile/UserStatusControl.js","Components/Tile/UserControl.js","Components/Tile/DialogTitleControl.js","Components/Tile/DialogStatusControl.js","Components/Tile/ChatControl.js","Components/ColumnRight/ChatDetailsHeader.js","Components/ColumnRight/NotificationsListItem.js","Components/ColumnRight/MoreListItem.js","Components/ColumnRight/ChatDetails.js","Components/ColumnRight/GroupsInCommonHeader.js","Components/ColumnRight/GroupsInCommon.js","Components/ColumnRight/SharedMediaHeaderControl.js","Components/ColumnRight/SharedMedia.js","Components/ColumnRight/ChatInfo.js","Components/Tile/TopChat.js","Components/Tile/RecentlyFoundChat.js","Components/Tile/FoundPublicChat.js","Components/Tile/FoundMessage.js","Components/ColumnLeft/Search/SearchCaption.js","Components/ColumnLeft/Search/Search.js","Components/ColumnLeft/ThemePicker.js","Components/ColumnLeft/LanguagePicker.js","registerServiceWorker.js","Components/ColumnLeft/MainMenuButton.js","Components/ColumnLeft/DialogsHeader.js","Components/Tile/DialogContentControl.js","Components/Tile/DialogBadgeControl.js","Components/Tile/DialogMetaControl.js","Components/Tile/DialogControl.js","Components/ColumnLeft/DialogsList.js","Components/ColumnLeft/UpdatePanel.js","Components/ColumnLeft/Dialogs.js","Components/ColumnMiddle/HeaderCommand.js","Components/ColumnMiddle/Header.js","Components/Player/VolumeButton.js","Components/Player/RepeatButton.js","Components/Player/ShuffleButton.js","Components/Player/PlaybackRateButton.js","Components/Player/Time.js","Components/Player/Playlist.js","Components/Player/HeaderPlayer.js","Components/ColumnMiddle/FilesDropTarget.js","Components/Message/Forward.js","Components/Message/MessageStatus.js","Components/Message/UnreadSeparator.js","Components/Message/Media/WebPage.js","Components/Message/Message.js","Components/Message/ServiceMessage.js","Components/Dialog/ShareStickerSetButton.js","Components/Dialog/StickerSetDialog.js","Components/ColumnMiddle/StickersHint.js","Components/ColumnMiddle/MessagesList.js","Components/Dialog/ChatInfoDialog.js","Components/ColumnMiddle/DialogDetails.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Footer.js","Components/Tile/MediaViewerControl.js","Components/Viewer/Lottie.js","Components/Viewer/MediaCaption.js","Components/Viewer/MediaViewerContent.js","Components/Viewer/MediaViewerButton.js","Components/Viewer/MediaViewerFooterText.js","Components/Viewer/MediaViewerFooterButton.js","Components/Viewer/MediaViewerDownloadButton.js","Components/Viewer/MediaViewer.js","Components/Viewer/ProfileMediaViewerContent.js","Components/Tile/ProfileMediaViewerControl.js","Components/Viewer/ProfileMediaViewer.js","Components/Additional/AppInactiveControl.js","TelegramApp.js","index.js","Constants.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js"],"names":["controller","TdLibController","_this","Object","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","init","location","setParameters","_this$parameters","parameters","verbosity","jsVerbosity","useTestDC","readOnly","fastUpdating","useDatabase","options","logVerbosityLevel","jsLogVerbosityLevel","mode","prefix","isBackground","console","log","concat","JSON","stringify","client","TdClient","onUpdate","update","disableLog","file","id","emit","clientUpdate","search","params","URLSearchParams","toLowerCase","has","stringToBoolean","get","parseInt","VERBOSITY_MIN","VERBOSITY_MAX","VERBOSITY_JS_MIN","VERBOSITY_JS_MAX","tag","replace","split","tagVerbosity","length","send","request","then","result","sendTdParameters","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","apiHash","version","i","wrap","_context","prev","next","process","packageJson","@type","use_test_dc","api_id","api_hash","system_language_code","navigator","language","device_model","getBrowser","system_version","getOSName","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","stop","setChatId","chatId","messageId","arguments","undefined","setMaxListeners","Infinity","_this2","catch","error","content","EventEmitter","defaultNamespace","Cookies","i18n","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","local","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChatInfo","ChannelInfo","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Loading","Connecting","Updating","ru","lng","fallbackLng","interpolation","escapeValue","react","wait","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","err","data","translationCurrentLng","addResourceBundle","store","LocalizationStore","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","addTdLibListener","addListener","onClientUpdate","removeTdLibListener","removeListener","authorization_state","name","value","only_local","info","_ref","_callee2","_language","_context2","t0","language_pack_id","keys","_ref2","set","processStrings","save","changeLanguage","_x2","apply","abrupt","_x","languagePackStrings","strings","key","loadLanguage","_ref3","_callee3","_context3","sent","_x3","window","localization","__webpack_require__","d","__webpack_exports__","isValidPhoneNumber","orderCompare","getSize","getPhotoThumbnailSize","getPhotoSize","getFitSize","itemsInView","throttle","debounce","getLetters","readImageSize","formatPhoneNumber","arrayBufferToBase64","isAuthorizationReady","between","getDurationString","getRandomInt","libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__","_Constants__WEBPACK_IMPORTED_MODULE_1__","OSName","userAgent","indexOf","isEdge","document","documentMode","StyleMedia","phoneNumber","isBad","match","string","trim","Boolean","order1","order2","diff","sizes","PHOTO_THUMBNAIL_SIZE","PHOTO_SIZE","dimension","useWidth","width","height","Math","abs","index","type","photo","is_downloading_completed","currDiff","size","max","increaseToMax","floor","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","items","children","child","offsetTop","offsetHeight","scrollTop","push","func","context","args","timeout","previous","later","leading","Date","now","remaining","clearTimeout","trailing","setTimeout","immediate","callNow","getFirstLetter","str","toUpperCase","title","callback","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","src","readAsDataURL","number","unformattedNumber","startsWith","formatNumber","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","state","item","first","last","secondsTotal","hours","minutes","seconds","min","ceil","random","withSaveRef","Component","React","forwardRef","props","ref","react_default","createElement","assign","forwardedRef","withRestoreRef","_React$Component","_class","classCallCheck","possibleConstructorReturn","getPrototypeOf","inherits","createClass","_this$props","rest","objectWithoutProperties","getDisplayName","WrappedComponent","displayName","withLanguage","LanguageWrapper","es","withTheme","ThemeWrapper","onClientUpdateThemeChanging","primary","theme","createMuiTheme","palette","secondary","main","typography","useNextVariants","setState","ApplicationStore","blue","on","MuiThemeProvider_default","withSnackbarNotifications","NotificationsWrapper","build","maxSnack","MAX_SNACK","OptionStore","Map","option","UserStore","user","setFullInfo","user_id","user_full_info","status","fullInfoItems","source1","source2","myId","userId","fullInfo","getUserStatus","SERVICE_NOTIFICATIONS_USER_ID","was_online","wasOnline","getTime","today","setHours","dateFormat","yesterday","setDate","getDate","isUserOnline","getUserFullName","first_name","last_name","getUserShortName","isUserBlocked","getFullInfo","is_blocked","getUserStatusOrder","expires","getProfilePhoto","userProfilePhoto","smallPhotoSize","PROFILE_PHOTO_SMALL_SIZE","bigPhotoSize","PROFILE_PHOTO_BIG_SIZE","small","big","getProfilePhotoDateHint","added_date","date","SupergroupStore","supergroup","supergroup_id","supergroup_full_info","InputTypingManager","timeoutCallback","actions","timerId","handleTimer","bind","addAction","clearAction","setActionsTimeout","expiredActions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","slicedToArray","expire","return","_arr","_i","delete","chat_id","action","setSeconds","getSeconds","TYPING_INPUT_INTERVAL_S","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref6","_ref5","actionTimeout","ChatStore","updating","skippedUpdates","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","chat","order","draft_message","is_marked_as_unread","is_pinned","is_sponsored","last_message","notification_settings","profile_photo","last_read_inbox_message_id","unread_count","last_read_outbox_message_id","reply_markup_message_id","unread_mention_count","typingManager","getTypingManager","setTypingManager","typingManagers","onlineMemberCount","useReadFile","FileStore","asyncToGenerator","regenerator_default","onUpdateFile","onUpdateAuthorizationState","initDB","handleDownloads","handleUploads","arr","idb_key","downloads","getStore","forEach","handleChat","handleMessage","handleSticker","handleUser","remote","uploads","is_uploading_completed","getLocalFile","updateChatPhotoBlob","getRemoteFile","FILE_PRIORITY","updateUserPhotoBlob","message","animation","handleAnimation","audio","handleAudio","handlePhoto","handleDocument","game","handleGame","handleLocation","sticker","web_page","video","video_note","voice_note","handleVideo","handleVoiceNote","handleVideoNote","venue","obj","photoSize","source","updatePhotoBlob","album_cover_thumbnail","updateAudioThumbnailBlob","THUMBNAIL_PRIORITY","updateAudioBlob","thumbnail","updateDocumentThumbnailBlob","updateDocumentBlob","locationId","getLocationId","getLocationFile","updateLocationBlob","updateStickerThumbnailBlob","updateStickerBlob","voiceNote","voice","updateVoiceNoteBlob","videoNote","updateVideoNoteThumbnailBlob","updateVideoNoteBlob","updateVideoThumbnailBlob","updateVideoBlob","updateAnimationThumbnailBlob","updateAnimationBlob","deleteLocalFile","fileId","getBlob","blobItems","setBlob","blob","deleteBlob","locationItems","setLocationFile","getBlobUrl","urls","url","URL","createObjectURL","deleteBlobUrl","callbacks","db","WeakMap","initiatingDB","openDB","Promise","resolve","reject","indexedDB","open","onsuccess","onerror","transaction","objectStore","faultCallback","_callee4","response","_context4","file_id","_x4","Blob","event","target","priority","some","x","filter","only_if_pending","message_ids","revoke","circleStyle","circle","FileProgress","currentFile","nextFile","prevFile","isDownloading","download","wasActive","is_downloading_active","isActive","isUploading","upload","is_uploading_active","getProgressParams","isCompleted","progressSize","downloaded_size","uploaded_size","completeAnimation","prevPropsFile","nextProps","nextState","icon","thumbnailSrc","nextLocal","nextIdbKey","prevLocal","prevIdbKey","isDownloadingCompleted","receiveIdbKey","mount","_this$props2","cancelButton","zIndex","completeIcon","_this$state","_this$getProgressPara","_this$getProgressPara2","inProgress","progress","ANIMATION_DURATION_300MS","style","background","className","CircularProgress_default","classes","variant","thickness","Close_default","defaultProps","MessageStore","message_id","reply_markup","edit_date","views","old_content","new_content","is_listened","is_viewed","old_message_id","sending_state","error_code","error_message","selected","selectedItems","clear","deletedMessage","messages","getSizeString","toFixed","getFileSize","saveBlob","filename","msSaveBlob","blobURL","tempLink","display","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","loadReplies","messageIds","map","setItems","loadReplyContents","loadAnimationThumbnailContent","loadAudioThumbnailContent","loadPhotoContent","loadDocumentThumbnailContent","loadGameThumbnailContent","loadStickerThumbnailContent","loadVideoThumbnailContent","loadVideoNoteThumbnailContent","loadAudioContent","useFileSize","_file","PRELOAD_AUDIO_SIZE","loadAnimationContent","_file3","PRELOAD_ANIMATION_SIZE","loadContactContent","contact","loadUserContent","loadDocumentContent","_file5","PRELOAD_DOCUMENT_SIZE","loadGameContent","loadLocationContent","zoom","LOCATION_ZOOM","LOCATION_WIDTH","LOCATION_HEIGHT","scale","LOCATION_SCALE","loadBigPhotoContent","PHOTO_BIG_SIZE","loadPhotoThumbnailContent","loadStickerContent","_file10","PRELOAD_STICKER_SIZE","loadVideoContent","_file12","PRELOAD_VIDEO_SIZE","loadVideoNoteContent","_file14","PRELOAD_VIDEONOTE_SIZE","loadVoiceNoteContent","_file16","PRELOAD_VOICENOTE_SIZE","loadMessageContents","users","replies","sender_user_id","reply_to_message_id","loadPhoto","loadUsersContent","toConsumableArray","saveOrDownload","fileName","mime","saveData","can_be_downloaded","getMediaPreviewFile","getMediaFile","cancelLoadMediaViewerContent","cancelGetRemoteFile","loadMediaViewerContent","useSizeLimit","preloadMediaViewerContent","history","loadUserFileContent","loadChatFileContent","loadProfileMediaViewerContent","photos","_photo9","getChatUserId","_photo10","_photo11","preloadProfileMediaViewerContent","ids","loadChatContent","loadChatsContent","loadDraftContent","loadStickersContent","stickers","getSrc","getDownloadedSize","getUploadedSize","getExtension","parts","pop","DocumentTile","onClientUpdateDocumentThumbnailBlob","forceUpdate","openMedia","classNames","document-tile-background","onClick","draggable","alt","Components_Viewer_FileProgress","withStyles","borderRadius","RepeatEnum","freeze","NONE","REPEAT","REPEAT_ONE","PlayerStore","close","playlist","time","videoStream","getPlaylist","volume","repeat","shuffle","playbackRate","playing","moveToNextMedia","moveToPrevMedia","moveNext","duration","currentTime","timestamp","stream","_this$message","findIndex","useRepeatShuffle","_this$message2","nextIndex","_assertThisInitialize","currentPlaylist","_messages","total_count","assertThisInitialized","getSearchMessagesFilter","totalCount","query","from_message_id","offset","limit","cookies","Number","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_VOLUME_NORMAL","player","AudioAction","onClientUpdateMediaEnd","active","timeString","getTimeString","onClientUpdateMediaTime","_this$state2","onClientUpdateMediaActive","_this$props3","_this$state3","durationString","currentTimeString","_this$props4","audioDuration","_this$state4","_this$state5","isDownloadingActive","isUploadingActive","sizeString","isBlurredThumbnail","THUMBNAIL_BLURRED_SIZE","getAudioTitle","file_name","performer","trimmedTitle","trimmedPerformer","DocumentAction","Document","Components_Tile_DocumentTile","ArrowDownward_default","InsertDriveFile_default","data-name","data-ext","Message_Media_DocumentAction","Audio","onClientUpdateMediaPlay","onClientUpdateMediaPause","nextContext","_this$props5","Pause_default","PlayArrow_default","Message_Media_AudioAction","Animation","startStopPlayer","videoRef","inView","focused","openMediaViewer","openProfileMediaViewer","play","pause","onClientUpdateProfileMediaViewerContent","profileMediaViewerContent","onClientUpdateMediaViewerContent","mediaViewerContent","onClientUpdateFocusWindow","onClientUpdateMessagesInView","onClientUpdateAnimationBlob","onClientUpdateAnimationThumbnailBlob","createRef","hasFocus","displaySize","t","_this$props$animation","mime_type","fitPhotoSize","mimeType","isBlurred","isGif","poster","muted","autoPlay","loop","playsInline","Fragment","media-blurred","PHOTO_DISPLAY_SIZE","withTranslation","UserTileControl","onClientUpdateUserBlob","onClientUpdateChatBlob","onUpdateChatPhoto","onUpdateChatTitle","handleSelect","onSelect","stopPropagation","letters","charAt","getUserLetters","tileColor","defineProperty","pointer","Contact","phone_number","fullName","Components_Tile_UserTileControl","Photo","onClientUpdatePhotoBlob","thumbnailSize","showProgress","photoStyle","objectSpread","borderStyle","borderColor","divider","accentStyles","accentColorDark","color","accentBackgroundLight","light","Game","getContent","Message_Media_Animation","Message_Media_Photo","text","description","formattedText","getFormattedText","Location","onClientUpdateLocationBlob","longitude","latitude","rel","Room_default","fontSize","PollRadio","chosen","beingChosen","hidden","onChange","poll-radio-hidden","Radio_default","root","radioRoot","checked","checkedIcon","RadioButtonChecked_default","progressRoot","position","top","left","pointerEvents","padding","PollPercentage","updateAnimation","stopAnimation","handle","requestAnimationFrame","onAnimationFrame","cancelAnimationFrame","startTime","from","to","timePassed","ANIMATION_DURATION_200MS","animated","prevPropsValue","closed","prevProps","prevState","snapshot","poll-percentage-subtitle","PollOption","getTitleString","count","canBeSelected","handleClick","onVote","handleCancel","onUnvote","maxVoterCount","voter_count","vote_percentage","is_chosen","is_being_chosen","Message_Media_PollPercentage","Message_Media_PollRadio","LinearProgress_default","bar","progressBar","enhance","compose","backgroundColor","margin","right","bottom","transition","Poll","dialog","contextMenu","getTotalVoterCountString","handleVote","optionIds","option_ids","setPollAnswer","handleUnvote","poll","handleCloseContextMenu","is_closed","cancelPollAnswer","handleStopPoll","stopPoll","handleDialog","handleCloseDialog","handleContextMenu","preventDefault","clientX","clientY","question","total_voter_count","canUnvote","canStopPoll","can_be_edited","every","onContextMenu","Message_Media_PollOption","Popover_default","onClose","anchorReference","anchorPosition","anchorOrigin","vertical","horizontal","transformOrigin","MenuList_default","e","MenuItem_default","Dialog_default","transitionDuration","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","Button_default","Sticker","onClientUpdateStickerBlob","onClientUpdateStickerThumbnailBlob","blur","fitSize","stickerStyle","STICKER_DISPLAY_SIZE","Venue","address","Message_Media_Location","Video","onClientUpdateVideoThumbnailBlob","_this$props$video","MediaStatus","onUpdateMessageContentOpened","isOpened","isContentOpened","openedIcon","VideoNote","onClientUpdateMediaCaptureStream","srcObject","updateVideoSrc","videoDuration","onClientUpdateVideoNoteBlob","onClientUpdateVideoNoteThumbnailBlob","handleCanPlay","getTracks","track","_this$props6","_this$props$videoNote","video-note-playing","onCanPlay","Media_MediaStatus","VolumeOff_default","VoiceNoteSlider","reset","getValue","PLAYER_PROGRESS_TIMEOUT_MS","Slider_default","slider","thumbWrapper","thumb","maxWidth","VoiceNote","Message_Media_VoiceNoteSlider","openUser","popup","openChat","highlightMessage","currency","Currency","list","symbol","includes","totalAmount","amount","pow","getPow","MessageAuthor","openUserCommand","openChatCommand","isPrivateChat","getChatTitle","serviceMap","isServiceMessage","ttl","getServiceMessageContent","isOutgoing","getMyId","isChannel","is_channel","Components_Message_MessageAuthor","members","member_user_ids","reduce","accumulator","array","separator","ttlString","days","getTTLString","messageGame","game_message_id","score","passportElementTypes","types","getPassportElementTypeString","messageInvoice","invoice_message_id","invoice","getString","total_amount","author","getMessageAuthor","pinnedMessage","pinnedContent","substring","domain_name","getTitle","start","end","entities","beforeEntityText","entityText","decodedUrl","decodeURI","hashtag","command","afterEntityText","getText","caption","getDateHint","getMedia","Message_Media_Audio","Message_Media_Contact","Message_Media_Document","Message_Media_Game","Message_Media_Poll","Message_Media_Sticker","Message_Media_Venue","Message_Media_Video","Message_Media_VideoNote","Message_Media_VoiceNote","getSenderUserId","filterMessages","isMediaContent","isVideoMessage","isLottieMessage","endsWith","isAnimationMessage","getMediaTitle","forward_info","getAuthor","hasAudio","openAnimation","fileCancel","cancelUploadFile","setMediaViewerContent","openAudio","openDocument","openPhoto","openSticker","set_id","stickerSet","openVideo","openVideoNote","openVoiceNote","openChatPhoto","openContact","openGame","isDeletedMessage","BasicGroupStore","basic_group","basic_group_id","basic_group_full_info","groupId","group","basicgroup","AttachButton","anchorEl","handleMenuClick","currentTarget","handleMenuClose","handleAttachPhoto","onAttachPhoto","handleAttachDocument","onAttachDocument","handleAttachPoll","onAttachPoll","IconButton_default","iconButton","aria-label","AttachFile_default","Menu_default","getContentAnchorEl","disableAutoFocusItem","disableRestoreFocus","disabled","canSendPhotos","ListItemIcon_default","icons_Photo_default","ListItemText_default","inset","canSendDocuments","icons_Poll_default","focusNode","node","toEnd","childNodes","lastNode","range","createRange","setStart","collapse","selection","getSelection","removeAllRanges","addRange","scrollHeight","focus","utils","special","navigational","isSpecial","keyCode","isNavigational","CreatePollOption","optionTextRef","innerText","handleDelete","onDelete","handleInput","dataset","maxLength","remainLength","handleKeyDown","hasSelection","toString","onFocusNext","isCollapsed","firstChild","anchorNode","anchorOffset","onFocusPrev","lastChild","handlePaste","selectionString","pasteText","clipboardData","getData","substr","execCommand","POLL_OPTION_MAX_LENGTH","contentEditable","suppressContentEditableWarning","placeholder","data-length","POLL_OPTION_LENGTH","data-max-length","onInput","onKeyDown","onPaste","POLL_OPTION_HINT_LENGTH","Typography_Typography","align","counterRoot","minWidth","userSelect","isValidPoll","POLL_QUESTION_LENGTH","isValidQuestion","noneEmptyOptions","isValidOption","PollStore","_this$poll","CreatePollDialog","handleClientUpdateNewPoll","confirm","POLL_QUESTION_MAX_LENGTH","handleClientUpdatePollQuestion","questionRef","handleClientUpdatePoll","handleClientUpdateNewPollOption","optionsRefMap","shiftKey","handleFocusNextOption","innerHTML","handleAddOption","POLL_OPTIONS_MAX_COUNT","handleDeleteOption","handleDeleteByBackspace","prevIndex","deleteOption","prevNode","handleFocusPrevOption","nextNode","getHint","addCount","handleClose","hasPollData","handleConfirmationDone","handleSend","onSend","inputMessagePoll","getInputMessagePoll","handleConfirmationClose","_this3","Components_Dialog_CreatePollOption","el","canAddOption","hint","dialogRoot","contentRoot","Typography_default","flexGrow","POLL_QUESTION_HINT_LENGTH","Divider_default","dividerRoot","List_default","listRoot","ListItem_default","listItem","button","disableTypography","typographyRoot","ReplyTile","isVideoNote","hasVideoNote","reply-tile-photo-round","reply-tile-photo-loading","Reply","onGetMessageResult","handleOpen","getReplyPhotoSize","onMouseDown","Components_Tile_ReplyTile","InputBoxHeader","Reply_default","replyIcon","Components_Message_Reply","closeIconButton","OutputTypingManager","lastAction","TYPING_OUTPUT_INTERVAL_S","lastTypingDate","StickerStore","sticker_set_ids","_this$stickerSet","is_installed","EmojiPickerButton","lazy","all","InputBoxControl","onClientUpdateStickerSend","newMessageRef","textContent","thumbnailWidth","thumbnailHeight","onSendInternal","onClientUpdateReply","currentChatId","replyToMessageId","setInputFocus","onClientUpdateChatId","nextChatId","getChatDraftReplyToMessageId","openPasteDialog","setDraft","element","draft","getChatDraft","setChatDraftMessage","chatDraftMessage","draftMessage","getNewChatDraftMessage","newDraft","getInputText","previousDraft","previousReplyToMessageId","input_message_text","disable_web_page_preview","clear_draft","handleSubmit","attachPhotoRef","handleAttachPhotoComplete","files","Array","handleSendPhoto","attachDocumentRef","handleAttachDocumentComplete","handleSendDocument","handleKeyUp","isMeChat","setTyping","cachedMessage","handleSendingMessage","uploadFile","handleSendPoll","originalEvent","kind","getAsFile","plainText","handlePasteContinue","handleClosePaste","clearDraft","invokeScheduledAction","input_message_content","newChatDraftMessage","alert","handleEmojiSelect","native","regex","t1","performance","emojiRegex","exec","getChatId","Components_ColumnMiddle_InputBoxHeader","Suspense","fallback","onKeyUp","multiple","accept","ColumnMiddle_AttachButton","Send_default","Components_Dialog_CreatePollDialog","FooterCommand","onCommand","Button_Button_default","NotificationsControl","onUpdateChatNotificationSettings","isMuted","isChatMuted","onUpdateScopeNotificationSettings","scope","handleSetChatNotifications","debouncedSetChatNotificationSettings","setChatNotificationSettings","muteFor","MUTED_VALUE_MAX","MUTED_VALUE_MIN","newNotificationSettings","use_default_mute_for","mute_for","prevChatId","NOTIFICATIONS_DEBOUNCE_DELAY_MS","NotificationsCommandControl","Components_ColumnMiddle_FooterCommand","Footer","onUpdateBasicGroup","basicGroupId","hasBasicGroupId","onUpdateSupergroup","supergroupId","isSupergroup","hasSupergroupId","handleJoin","handleDeleteAndExit","remove_from_chat_list","basicGroup","Components_ColumnMiddle_InputBoxControl","is_member","can_send_messages","ColumnMiddle_NotificationsCommandControl","getChatTypingString","typingString","inputTypingManager","values","getPrivateChatTypingString","firstUser","secondUser","second_name","getGroupChatTypingString","getMessageSenderName","notificationSettings","getNotificationSettings","getChatMuteFor","getMessageDate","dayStart","day","getDay","weekStart","getChatSubtitleWithoutTyping","member_count","onlineCount","getOnlineMemberCount","getBasicGroupStatus","getSupergroupStatus","isAccentChatSubtitleWithoutTyping","getChatUsername","username","getChatPhoneNumber","isGroupChat","isChannelChat","showSavedMessages","getGroupChatMembers","fallbackValue","getChatFullInfo","getSupergroupId","getPhotoFromChat","getChatShortTitle","can_send_media_messages","canSendMessages","showChatDraft","ChatStatus","onUpdateUserStatus","online","borderSize","iconIndicator","default","overflow","boxSizing","ChatTileControl","onFastUpdatingComplete","showOnline","BookmarkBorder_default","getChatLetters","Components_Tile_ChatStatus","statusRoot","statusIcon","ForwardTargetChat","shortTitle","forward-target-chat-selected","Components_Tile_ChatTileControl","border","markSelected","markUnselected","boxShadow","paper","cyrillicInput","getCyrillicInput","input","output","latinInput","getLatinInput","ForwardDialog","loadContent","promises","getChatsPromise","savedMessagesPromise","chats","savedMessages","getPublicMessageLink","offset_order","offset_chat_id","force","chatIds","chat_ids","for_album","publicMessageLink","handleCopyLink","link","copy","handleScheduledAction","enqueueSnackbar","addScheduledAction","NOTIFICATION_AUTO_HIDE_DURATION_MS","autoHideDuration","removeScheduledAction","getForwardPhotoSize","can_be_forwarded","getInnerText","messageRef","targetChats","targetChatId","disable_notifications","from_background","added_sticker_file_ids","from_chat_id","as_album","handleChangeSelection","div","handleSearchKeyDown","handleSearchKeyUp","searchRef","latinText","cyrillicText","searchResults","hasSearchText","searchText","handleSearchPaste","handleMessageKeyUp","handleMessagePaste","toLocaleLowerCase","setSearchFocus","Components_Tile_ForwardTargetChat","foundChats","aria-describedby","searchList","autoFocus","spacing","unit","dialogContent","withSnackbar","NotificationTimer","clearInterval","setMilliseconds","getMilliseconds","setInterval","menuAnchorOrigin","menuTransformOrigin","LeaveChatDialog","getDeleteDialogText","other","ClearHistoryDialog","MainMenuButton","handleButtonClick","handleChatInfo","openChatDetails","handleClearHistory","openClearHistory","handleClearHistoryContinue","handleLeave","openDelete","handleLeaveContinue","getLeaveChatNotification","clientUpdateType","finish","_this2$props","Components_Additional_NotificationTimer","getLeaveChatTitle","clearHistory","canClearHistory","deleteChat","canDeleteChat","leaveChatTitle","aria-owns","aria-haspopup","menuIconButton","MoreVert_default","MainMenuButton_LeaveChatDialog","MainMenuButton_ClearHistoryDialog","UserStatusControl","isAccent","prevUserId","userStatusSubtitle","accent-color","userStatusAccentSubtitle","dark","UserControl","Components_Tile_UserStatusControl","DialogTitleControl","DialogStatusControl","updateSubtitle","find","subtitle","onUpdateUserFullInfo","onUpdateBasicGroupFullInfo","onUpdateSupergroupFullInfo","statusAccentSubtitle","statusSubtitle","ChatControl","onTileSelect","showStatus","Components_Tile_DialogTitleControl","Components_Tile_DialogStatusControl","ChatDetailsHeader","backButton","leftIconButton","ArrowBack_default","rightIconButton","NotificationsListItem","Notifications_default","NotificationsActive_default","noWrap","ListItemSecondaryAction_default","Switch_default","MoreListItem","handleMoreClick","openMore","handleSendMessage","handleBlock","isGroup","isBlocked","isMember","isChatMember","MoreHoriz_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","unmountOnExit","component","disablePadding","ChatDetails","handleSelectChat","getGroupsInCommon","loadChatContents","hasGroupsInCommon","handleUsernameHint","telegramUrlOption","usernameLink","handlePhoneHint","handleHeaderClick","chatDetailsListRef","handleOpenViewer","setProfileMediaViewerContent","handleOpenChat","getContentHeight","clientHeight","onOpenSharedMedia","onOpenGroupsInCommon","Components_ColumnRight_ChatDetailsHeader","bio","getChatBio","isMe","member","sort","y","Components_Tile_UserControl","handleSelectUser","Components_Tile_ChatControl","AlternateEmail_default","Call_default","ErrorOutline_default","whiteSpace","wordWrap","ColumnRight_NotificationsListItem","ColumnRight_MoreListItem","nested","GroupsInCommonHeader","backIconButton","GroupsInCommon","minHeight","Components_ColumnRight_GroupsInCommonHeader","SharedMediaHeaderControl","SharedMedia","handleChange","Components_ColumnRight_SharedMediaHeaderControl","Tabs_default","indicatorColor","textColor","scrollable","scrollButtons","fullWidth","Tab_default","label","userChatId","openSharedMedia","openGroupsInCommon","handelOpenSharedMedia","handleCloseSharedMedia","handleOpenGroupsInCommon","handleCloseGroupsInCommon","handleCloseChatDetails","changeChatDetailsVisibility","detailsRef","dialogChatId","Components_ColumnRight_SharedMedia","Components_ColumnRight_GroupsInCommon","Components_ColumnRight_ChatDetails","right-column","TopChat","PureComponent","userStatusRoot","RecentlyFoundChat","FoundPublicChat","previousChatId","_classNames","selectedChatId","membersCount","getGroupChatMembersCount","subscribersString","listItemSelected","foundPublicChatSubtitle","FoundMessage","nextMessageId","getMessageId","previousMessageId","chatSearch","selectedMessageId","senderName","senderFullName","getMessageSenderFullName","tile","accentBackground","accent-background","foundMessageSubtitle","searchCaption","grey","searchCaptionCommand","onClientUpdateSearchText","trimmedText","concatSearchResults","results","j","b","sessionId","localPromise","latinLocalPromise","cyrillicLocalPromise","savedMessagesStrings","globalPromises","globalPromise","globalLatinPromise","globalResults","global","splice","recentlyFound","USERNAME_LENGTH_MIN","offset_date","offset_message_id","topPromise","recentlyFoundPromise","_ref4","category","handleRecentlyFound","handleClearRecentlyFound","handleSelectMessage","addToRecent","keepOpen","onSelectMessage","handleScroll","listRef","onLoadPrevious","getOffset","concatMessages","loading","handleTopChatsScroll","prevPropsChatId","prevPropsText","topChats","Components_Tile_TopChat","recentlyFoundChats","Components_Tile_RecentlyFoundChat","localChats","globalChats","Components_Tile_FoundPublicChat","globalMessages","Components_Tile_FoundMessage","messagesCaption","onScroll","Search_SearchCaption","closeSearchIconButton","ThemePicker","getColor","handleAccentChange","getColorString","red","orange","amber","green","indigo","deepPurple","FormControl_default","formControl","FormLabel_default","RadioGroup_default","FormControlLabel_default","control","redRoot","orangeRoot","amberRoot","greenRoot","blueRoot","indigoRoot","deepPurpleRoot","&$checked","LanguagePicker","languages","language_packs","native_name","isLocalhost","hostname","register","_register","swUrl","FIRST_START_OPTIMIZATIONS","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","pushSubscription","endpoint","p256dh_base64url","auth_base64url","authorizationState","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","fetch","headers","ready","unregister","reload","_update","_callee6","_context6","handleMenuOpen","handleLogOut","onLogOut","handleCheckUpdates","handleAppearance","themePicker","handleLanguage","languagePicker","setRef","getAuthorizationState","mainMenuControl","icons_Menu_default","ColumnLeft_ThemePicker","innerRef","ColumnLeft_LanguagePicker","searchIconButton","DialogsHeader","handleDone","logOut","handleSearch","onSearch","openSearch","searchInput","confirmLogoutDialog","index_es","dialogText","ColumnLeft_MainMenuButton","headerIconButton","SpeedDialIcon_default","icons_Search_default","openIcon","DialogContentControl","onClientUpdateClearHistory","contentControl","getLastMessageContent","getLastMessageSenderName","DialogBadgeControl","unreadMessageIcon","is_outgoing","getChatUnreadMessageIcon","unreadCount","getChatUnreadCount","unreadMentionCount","getChatUnreadMentionCount","showUnreadCount","showDraftChat","muteClassName","dialogBadge","DialogMetaControl","getLastMessageDate","DialogControl","isSelected","dialogActive","Components_Tile_DialogMetaControl","Components_Tile_DialogContentControl","Components_Tile_DialogBadgeControl","cursor","& $statusRoot","&:hover","& $statusIcon","DialogsList","onClientUpdateLeaveChat","hiddenChats","loadFirstSlice","onLoadNext","onUpdateConnectionState","newConnectionState","connectionState","onUpdateChatOrder","reorderChats","newChatIds","minChatOrder","offsetOrder","offsetChatId","_args2","CHAT_SLICE_LIMIT","finally","shift","replaceChats","appendChats","getConnectionState","orderedChatIds","isDifferentOrder","dialogs","Components_Tile_DialogControl","oldChatIds","UpdatePanel","onClientUpdateNewContentAvailable","newContentAvailable","handleUpdate","handled","maxHeight","Dialogs","onClientUpdateThemeChange","onClientUpdateChatDetailsVisibility","isChatDetailsVisible","onClientUpdateSearchChat","searchChatId","dialogsList","scrollToTop","visible","onSelectChat","handleSearchTextChange","dialogs-third-column","ColumnLeft_DialogsHeader","onSearchTextChange","Components_ColumnLeft_DialogsList","ColumnLeft_Search_Search","ColumnLeft_UpdatePanel","HeaderCommand","canBeDeletedForAllUsers","can_be_deleted_for_all_users","openDeleteDialog","handleDeleteContinue","handleRevokeChange","handleCloseDelete","handleForward","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","handleReply","_MessageStore$selecte","canBeDeleted","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref9","can_be_deleted_only_for_self","canBeForwarded","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref10","canBeReplied","buttonLeft","buttonRight","Checkbox_default","Header","onUpdateChatOnlineMemberCount","onClientUpdateMessageSelected","selectionCount","onUpdateUserChatAction","handleSearchChat","searchChat","localize","Components_ColumnMiddle_HeaderCommand","isAccentSubtitle","isAccentChatSubtitle","chatTypingString","getChatSubtitle","showProgressAnimation","headerStatusAccentTitle","messageSearchIconButton","Components_ColumnMiddle_MainMenuButton","moreIconButton","VolumeButton","prevValue","dragging","buttonOver","popupOver","onClientUpdateMediaVolume","prevVolume","handlePopoverOpen","handlePopoverClose","handleMouseEnter","openPopover","handleMouseLeave","handlePopupMouseLeave","handleVoiceClick","nextValue","handleDragStart","handleDragEnd","getVolumeIcon","VolumeMute_default","VolumeDown_default","VolumeUp_default","onMouseEnter","onMouseLeave","visibility","marginTop","borderWidth","container","onDragStart","onDragEnd","RepeatButton","onClientUpdateMediaRepeat","handleRepeat","nextRepeat","getIcon","Repeat_default","RepeatOne_default","ShuffleButton","onClientUpdateMediaShuffle","handleShuffle","Shuffle_default","PlaybackRateButton","onClientUpdateMediaPlaybackRate","handlePlaybackRate","nextPlaybackRate","PLAYER_PLAYBACKRATE_FAST","Time","Playlist","scrollToActive","itemRefMap","ReactDOM","onClientUpdateMediaTitleMouseOver","over","playlistMouseOver","tryOpen","tryClose","onClientUpdateMediaPlaylistLoading","_assertThisInitialize2","onClientUpdateMediaPlaylist","_assertThisInitialize3","openTimeout","titleMouseOver","slice","reverse","HeaderPlayer","playingMediaViewer","onClientUpdateMediaViewerEnded","onClientUpdateMediaViewerPause","onClientUpdateMediaViewerPlay","startPlayingFile","getMediaSrc","onClientUpdateMediaBlob","onClientUpdateMediaClose","paused","handlePrev","handlePlay","handleNext","handleEnded","handleVideoEnded","handleTimeUpdate","captureStream","mozCaptureStream","handleVideoPlay","handleVideoPause","hasPrev","hasNext","handleTitleMouseEnter","handleTitleMouseLeave","handleTitleClick","PLAYER_STARTTIME","dateHint","showDate","showPlaybackRate","showRepeat","showShuffle","controls","onPlay","onPause","onTimeUpdate","onEnded","SkipPrevious_default","SkipNext_default","Components_Player_Playlist","Player_Time","Components_Player_VolumeButton","Player_PlaybackRateButton","Player_RepeatButton","Player_ShuffleButton","FilesDropTarget","onClientUpdateDragging","getDragging","handleDragEnter","handleDrop","setDragging","dataTransfer","handleDragLeave","onDragEnter","onDragLeave","onDrop","Forward","arrowRef","handleArrowRef","openForward","forwardInfo","sender_name","author_signature","getForwardTitle","tooltip","isForwardOriginHidden","arrow","forwardColor","Tooltip_default","popper","arrowPopper","PopperProps","popperOptions","modifiers","placement","&[x-placement*=\"bottom\"] $arrow","&::before","&[x-placement*=\"top\"] $arrow","marginBottom","&[x-placement*=\"right\"] $arrow","marginLeft","&[x-placement*=\"left\"] $arrow","marginRight","MessageStatus","handleUpdateMessageSend","handleUpdateChatReadOutbox","sendingState","unread","payload","newMessageId","stateClassName","unreadSeparator","WebPage","displaySmallSize","site_name","smallPhoto","float","PHOTO_DISPLAY_SMALL_SIZE","Message","onClientUpdateClearSelection","onClientUpdateMessageHighlighted","highlighted","onUpdateMessageEdited","onUpdateMessageViews","onUpdateMessageContent","handleSelection","mouseDown","selectMessage","handleDateClick","_this$props7","_this$props8","handleAnimationEnd","handleMouseDown","handleMouseOver","handleMouseOut","mouseOut","_this$props10","showUnreadSeparator","_this$props11","webPage","getWebPage","media","getUnread","senderUserId","messageClassName","message-selected","messageSelected","messageHighlighted","onMouseOver","onMouseOut","onAnimationEnd","Message_UnreadSeparator","Components_Message_MessageStatus","Components_Message_Forward","Message_Media_WebPage","messageAuthorColor","@keyframes highlighted","chatPhotoStyle","ServiceMessage","ShareStickerSetButton","getStickersLink","handleShare","Link_default","Share_default","StickerSetDialog","handleUpdateInstalledStickerSets","handleClientUpdateStickerSet","loadStickerSetContent","loadPreviewContent","stickerId","getNeighborStickers","indexes","row","column","prevRow","nextRow","prevColumn","nextColumn","handleMouseUp","removeEventListener","emojis","data-sticker-id","STICKER_SMALL_DISPLAY_SIZE","stickerIndex","join","paperRoot","dialogTitleRoot","disablePointerEvents","Dialog_ShareStickerSetButton","shareButtonRoot","STICKER_PREVIEW_DISPLAY_SIZE","flexWrap","flexDirection","alignItems","flexShrink","StickersHint","onClientUpdateStickersHint","mouseDownStickerId","stickersPerRow","showPreview","ScrollBehaviorEnum","SCROLL_TO_BOTTOM","SCROLL_TO_UNREAD","SCROLL_TO_MESSAGE","KEEP_SCROLL_POSITION","MessagesList","prevOffsetHeight","prevScrollTop","playerOpened","onClientUpdateMediaEnding","udpate","onClientUpdateSelection","selectionActive","scrollBehavior","onUpdateChatLastMessage","onUpdateMessageSendSucceeded","handleSendSucceeded","replaceMessage","viewMessages","onUpdateNewMessage","completed","insertAfter","onUpdateDeleteMessages","is_permanent","deleteHistory","updateItemsInView","itemsRef","_message$props","loadIncompleteHistory","MAX_ITERATIONS","incomplete","MESSAGE_SLICE_LIMIT","fromMessageId","loadMigratedHistory","onLoadMigratedHistory","insertBefore","basicGroupChat","upgraded_from_basic_group_id","suppressHandleScroll","suppressHandleScrollOnSelectChat","handleScrollBehavior","scrollToBottom","scrollToMessage","scrolled","itemComponent","itemsMap","scrollToStart","_callee5","_context5","handleListDragEnter","canSendFiles","prevMessageId","separatorMessageId","previousChat","MAX_VALUE","_this$getMessagePhoto","getMessagePhoto","_this$getMessagePhoto2","_this$getMessageStick","getMessageSticker","_this$getMessageStick2","oldMessageId","Components_Message_ServiceMessage","Components_Message_Message","showTitle","messages-list-selection-active","Components_ColumnMiddle_FilesDropTarget","Components_ColumnMiddle_StickersHint","ChatInfoDialog","handleClientUpdateDialogChatId","containerRoot","Components_ColumnRight_ChatInfo","chatInfoRoot","DialogDetails","onUpdateChatDetailsVisibility","messagesList","selectedCount","dialog-details-third-column","Components_Player_HeaderPlayer","Components_ColumnMiddle_Header","Components_ColumnMiddle_MessagesList","Components_ColumnMiddle_Footer","Components_Dialog_StickerSetDialog","Components_Dialog_ChatInfoDialog","SignInControl","handleUpdateOption","handleSuggestedLanguagePackId","languagePackId","suggestedLanguage","phone","openConfirmation","code","handleKeyPress","onPhoneEnter","errorString","handleChangeLanguage","TextField_default","onKeyPress","defaultValue","FormHelperText_default","continueAtLanguage","core_Link_default","fontWeight","textAlign","transform","ConfirmCodeControl","handleBack","isValid","onChangePhone","codeLength","codeInfo","getPhoneNumber","getCodeLength","getSubtitle","FormHelperText_FormHelperText_default","PasswordControl","handleMouseDownPassword","handleClickShowPassword","showPassword","password","passwordHint","textField","InputLabel_default","htmlFor","Input_default","endAdornment","InputAdornment_default","VisibilityOff_default","Visibility_default","withoutLabel","flexBasis","AuthErrorDialog","handleAuthError","AuthFormControl","handlePhoneEnter","Components_Auth_SignInControl","Components_Auth_ConfirmCodeControl","termsOfService","terms_of_service","code_info","Components_Auth_PasswordControl","password_hint","hasRecoveryEmailAddress","has_recovery_email_address","recoveryEmailAddressPattern","recovery_email_address_pattern","authorizationFormContent","Auth_AuthErrorDialog","MediaViewerControl","tileControl","Lottie","handleClickToPause","anim","isPaused","eventListeners","autoplay","animationData","rendererSettings","segments","renderer","lottie","loadAnimation","registerEvents","path","deRegisterEvents","destroy","isStopped","playSegments","setSpeed","setDirection","speed","direction","eventListener","eventName","_this4","ariaRole","ariaLabel","isClickToPauseDisabled","initial","lottieStyles","outline","onClickHandler","c","role","tabIndex","MediaCaption","MediaViewerContent","onClientUpdateDocumentBlob","updateAnimationData","_getMediaFile","_getMediaFile2","getAnimationData","fileReader","onload","parse","onabort","readAsText","_getMediaFile3","_getMediaFile4","onClientUpdateMediaThumbnailBlob","_getMediaPreviewFile","_getMediaPreviewFile2","_getMediaFile5","_getMediaFile6","handleContentClick","changeSpeed","lottieRef","_getMediaFile7","_getMediaFile8","_getMediaPreviewFile3","_getMediaPreviewFile4","isPlaying","thumbnailBlob","isVideo","isAnimation","isLottie","videoWidth","videoHeight","onVolumeChange","defaultOptions","preserveAspectRatio","Components_Viewer_Lottie","Components_Viewer_MediaCaption","_getMediaFile9","_getMediaFile10","_getMediaPreviewFile5","_getMediaPreviewFile6","MediaViewerButton","grow","MediaViewerFooterText","MediaViewerFooterButton","iconStyle","MediaViewerDownloadButton","saveDisabled","prevPropsFileId","Components_Viewer_MediaViewerFooterButton","GetApp_default","forwardIconStyle","navigationIconStyle","MediaViewer","deleteConfirmationOpened","handlePrevious","currentMessageId","firstSliceLoaded","inserted","hasNextMedia","hasPreviousMedia","oldHistory","filterMap","currentId","deletedCount","getFilter","loadHistory","_filter","maxCount","_loop","MEDIA_SLICE_LIMIT","delegateYield","cancelPreloadMediaViewerContent","saveAnimation","saveDocument","saveVideo","savePhoto","handleSave","handleDialogOpen","loadMedia","loadPrevious","loadNext","nextId","handleDialogClose","deleteForAll","handleChangeDeleteForAll","handleInvertColors","nextBackground","handleChangeSpeed","contentRef","nextSpeed","hasPrevousMedia","_this$state6","deleteConfirmationContent","deleteConfirmation","Components_Viewer_MediaViewerButton","NavigateBefore_default","Components_Viewer_MediaViewerContent","NavigateNext_default","Components_Tile_MediaViewerControl","Components_Viewer_MediaViewerFooterText","SlowMotionVideo_default","InvertColors_default","Viewer_MediaViewerDownloadButton","Delete_default","ProfileMediaViewerContent","prevPhoto","ProfileMediaViewerControl","deleteIconStyle","ProfileMediaViewer","currentIndex","getReadWriteStore","prevFileId","currentFileId","inHistory","Viewer_ProfileMediaViewerContent","Tile_ProfileMediaViewerControl","AppInactiveControl","handleReload","TelegramApp","onClientUpdateOpenChat","onClientUpdateOpenUser","checkServiceWorker","cookieEnabled","registerServiceWorker","onClientUpdateForward","onUpdateFatalError","fatalError","onClientUpdateAppInactive","inactive","currentDialogChatId","dialogDetailsRef","handleChangePhone","handleDragOver","handleRefresh","handleDestroy","page","page-third-column","Components_ColumnLeft_Dialogs","onClearCache","clearCache","Components_ColumnMiddle_DialogDetails","src_Components_Footer","Components_Additional_AppInactiveControl","Components_Auth_AuthFormControl","onDragOver","Components_Viewer_MediaViewer","Components_Viewer_ProfileMediaViewer","Components_Dialog_ForwardDialog","keyMap","openPinnedChat","pinnedIndex","altKey","ctrlKey","onblur","onfocus","pushState","onpopstate","go","@global","render","react_router_dom","react_router","getElementById","ActionScheduler","actionCallback","cancelCallback","add","cancel","invoke","remove","expired","_ref7","actionScheduler","handleCancelScheduledAction","loggingOut","setNotificationSettings","extendedUpdate","onUpdateStatistics","statistics","addStatistics","scopeNotificationSettings","application"],"mappings":"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","file":"static/js/main.a739075f.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport packageJson from '../../package.json';\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\nimport { VERBOSITY_JS_MAX, VERBOSITY_JS_MIN, VERBOSITY_MAX, VERBOSITY_MIN } from '../Constants';\nimport TdClient from '@arseny30/tdweb/dist/tdweb';\n\nclass TdLibController extends EventEmitter {\n    constructor() {\n        super();\n\n        this.parameters = {\n            useTestDC: false,\n            readOnly: false,\n            verbosity: 1,\n            jsVerbosity: 3,\n            fastUpdating: true,\n            useDatabase: false,\n            mode: 'wasm'\n        };\n\n        this.disableLog = false;\n\n        this.setMaxListeners(Infinity);\n    }\n\n    init = location => {\n        this.setParameters(location);\n\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\n\n        let options = {\n            logVerbosityLevel: verbosity,\n            jsLogVerbosityLevel: jsVerbosity,\n            mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\n            prefix: useTestDC ? 'tdlib_test' : 'tdlib',\n            readOnly: readOnly,\n            isBackground: false,\n            useDatabase: useDatabase\n            // onUpdate: update => this.emit('update', update)\n        };\n\n        console.log(\n            `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\n        );\n\n        this.client = new TdClient(options);\n        this.client.onUpdate = update => {\n            if (!this.disableLog) {\n                if (update['@type'] === 'updateFile') {\n                    console.log('receive updateFile file_id=' + update.file.id, update);\n                } else {\n                    console.log('receive update', update);\n                }\n            }\n            this.emit('update', update);\n        };\n    };\n\n    clientUpdate = update => {\n        if (!this.disableLog) {\n            console.log('clientUpdate', update);\n        }\n        this.emit('clientUpdate', update);\n    };\n\n    setParameters = location => {\n        if (!location) return;\n\n        const { search } = location;\n        if (!search) return;\n\n        const params = new URLSearchParams(search.toLowerCase());\n\n        if (params.has('test')) {\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\n        }\n\n        if (params.has('verbosity')) {\n            const verbosity = parseInt(params.get('verbosity'), 10);\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\n                this.parameters.verbosity = verbosity;\n            }\n        }\n\n        if (params.has('jsverbosity')) {\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\n                this.parameters.jsVerbosity = jsVerbosity;\n            }\n        }\n\n        if (params.has('tag') && params.has('tagverbosity')) {\n            const tag = params\n                .get('tag')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            const tagVerbosity = params\n                .get('tagverbosity')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\n                this.parameters.tag = tag;\n                this.parameters.tagVerbosity = tagVerbosity;\n            }\n        }\n\n        if (params.has('readonly')) {\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\n        }\n\n        if (params.has('fastupdating')) {\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\n        }\n\n        if (params.has('db')) {\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\n        }\n        if (params.has('mode')) {\n            this.parameters.mode = params.get('mode');\n        }\n    };\n\n    send = request => {\n        if (!this.disableLog) {\n            console.log('send', request);\n            return this.client.send(request).then(result => {\n                console.log('receive', result);\n                return result;\n            });\n        } else {\n            return this.client.send(request);\n        }\n    };\n\n    sendTdParameters = async () => {\n        const apiId = process.env.REACT_APP_TELEGRAM_API_ID;\n        const apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\n        if (!apiId || !apiHash) {\n            if (\n                window.confirm(\n                    'API id is missing!\\n' +\n                        'In order to obtain an API id and develop your own application ' +\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\n                )\n            ) {\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\n            }\n        }\n\n        const { useTestDC } = this.parameters;\n        const { version } = packageJson;\n\n        this.send({\n            '@type': 'setTdlibParameters',\n            parameters: {\n                '@type': 'tdParameters',\n                use_test_dc: useTestDC,\n                api_id: apiId,\n                api_hash: apiHash,\n                system_language_code: navigator.language || 'en',\n                device_model: getBrowser(),\n                system_version: getOSName(),\n                application_version: version,\n                use_secret_chats: false,\n                use_message_database: true,\n                use_file_database: false,\n                database_directory: '/db',\n                files_directory: '/'\n            }\n            // ,\n            // extra: {\n            //     a: ['a', 'b'],\n            //     b: 123\n            // }\n        });\n\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\n            for (let i = 0; i < this.parameters.tag.length; i++) {\n                let tag = this.parameters.tag[i];\n                let tagVerbosity = this.parameters.tagVerbosity[i];\n\n                this.send({\n                    '@type': 'setLogTagVerbosityLevel',\n                    tag: tag,\n                    new_verbosity_level: tagVerbosity\n                });\n            }\n        }\n    };\n\n    logOut() {\n        this.send({ '@type': 'logOut' }).catch(error => {\n            this.emit('tdlib_auth_error', error);\n        });\n    }\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            chatId: chatId,\n            messageId: messageId\n        };\n\n        this.clientUpdate(update);\n    };\n\n    setMediaViewerContent(content) {\n        this.clientUpdate({\n            '@type': 'clientUpdateMediaViewerContent',\n            content: content\n        });\n    }\n}\n\nconst controller = new TdLibController();\n\nexport default controller;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport LocalStorageBackend from 'i18next-localstorage-backend';\nimport { initReactI18next } from 'react-i18next';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst defaultLanguage = 'en';\nconst defaultNamespace = 'translation';\nconst cookies = new Cookies();\nconst language = cookies.get('i18next') || defaultLanguage;\n\n// const detection = {\n//     // order and from where user language should be detected\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n//\n//     // keys or params to lookup language from\n//     lookupQuerystring: 'lng',\n//     lookupCookie: 'i18next',\n//     lookupLocalStorage: 'i18nextLng',\n//     lookupFromPathIndex: 0,\n//     lookupFromSubdomainIndex: 0,\n//\n//     // cache user language on\n//     caches: ['localStorage', 'cookie']\n// };\n\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\n    .init({\n        //detection: detection,\n        ns: [defaultNamespace, 'local'],\n        defaultNS: defaultNamespace,\n        fallbackNS: ['local', 'emoji'],\n        resources: {\n            en: {\n                local: {\n                    DeletedMessage: 'Deleted message',\n                    YourPhone: 'Your Phone',\n                    StartText: 'Please confirm your country code and enter your phone number.',\n                    Next: 'Next',\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\n                    More: 'More',\n                    SendMessage: 'Send Message',\n                    ChatInfo: 'Chat Info',\n                    ChannelInfo: 'Channel Info'\n                },\n                emoji: {\n                    Search: 'Search',\n                    NotEmojiFound: 'No Emoji Found',\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\n                    SearchResults: 'Search Results',\n                    Recent: 'Frequently Used',\n                    SmileysPeople: 'Smileys & People',\n                    AnimalsNature: 'Animals & Nature',\n                    FoodDrink: 'Food & Drink',\n                    Activity: 'Activity',\n                    TravelPlaces: 'Travel & Places',\n                    Objects: 'Objects',\n                    Symbols: 'Symbols',\n                    Flags: 'Flags',\n                    Custom: 'Custom'\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Loading: 'Loading',\n                    Connecting: 'Connecting',\n                    Updating: 'Updating'\n                }\n            },\n            ru: {\n                local: {\n                    DeletedMessage: ' ',\n                    YourPhone: ' ',\n                    StartText: ',       .',\n                    Next: '',\n                    InvalidPhoneNumber:\n                        '  . ,      .',\n                    More: '',\n                    SendMessage: ' ',\n                    ChatInfo: '  ',\n                    ChannelInfo: '  '\n                },\n                emoji: {\n                    Search: '',\n                    NotEmojiFound: '  ',\n                    ChooseDefaultSkinTone: '    ',\n                    SearchResults: ' ',\n                    Recent: ' ',\n                    SmileysPeople: '  ',\n                    AnimalsNature: '  ',\n                    FoodDrink: '  ',\n                    Activity: '',\n                    TravelPlaces: '  ',\n                    Objects: '',\n                    Symbols: '',\n                    Flags: '',\n                    Custom: ''\n                },\n                translation: {\n                    AppName: '',\n                    Loading: '',\n                    Connecting: '',\n                    Updating: ''\n                }\n            }\n        },\n        lng: language,\n        fallbackLng: defaultLanguage,\n        interpolation: {\n            escapeValue: false\n        },\n        react: {\n            wait: false\n        }\n    });\n\nconst cache = new LocalStorageBackend(null, {\n    enabled: true,\n    prefix: 'i18next_res_',\n    expirationTime: Infinity\n});\n\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\n    return data;\n});\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\n    return data;\n});\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\n\nclass LocalizationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.i18n = i18n;\n        this.cache = cache;\n\n        this.setMaxListeners(Infinity);\n        this.addTdLibListener();\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'localization_target',\n                            value: { '@type': 'optionValueString', value: 'android' }\n                        });\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'language_pack_id',\n                            value: { '@type': 'optionValueString', value: language }\n                        });\n                        TdLibController.send({\n                            '@type': 'getLocalizationTargetInfo',\n                            only_local: false\n                        }).then(result => {\n                            this.info = result;\n\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateLanguageChange',\n                                language: language\n                            });\n                        });\n                        break;\n                }\n                break;\n            }\n            case 'updateLanguagePackStrings': {\n                // add/remove new strings\n\n                this.emit('updateLanguagePackStrings', update);\n                break;\n            }\n        }\n    };\n\n    onClientUpdate = async update => {\n        switch (update['@type']) {\n            case 'clientUpdateLanguageChange': {\n                const { language } = update;\n\n                TdLibController.send({\n                    '@type': 'getLanguagePackStrings',\n                    language_pack_id: language,\n                    keys: []\n                }).then(async result => {\n                    const cookies = new Cookies();\n                    cookies.set('i18next', language);\n\n                    const resources = this.processStrings(language, result);\n\n                    this.cache.save(language, defaultNamespace, resources);\n\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\n\n                    await i18n.changeLanguage(language);\n\n                    TdLibController.send({\n                        '@type': 'setOption',\n                        name: 'language_pack_id',\n                        value: { '@type': 'optionValueString', value: language }\n                    });\n\n                    this.emit('clientUpdateLanguageChange', update);\n                });\n                break;\n            }\n        }\n    };\n\n    processStrings = (lng, languagePackStrings) => {\n        if (!languagePackStrings) return {};\n        const { strings } = languagePackStrings;\n        if (!strings) return {};\n\n        let result = {};\n        for (let i = 0; i < strings.length; i++) {\n            const { value } = strings[i];\n            switch (value['@type']) {\n                case 'languagePackStringValueOrdinary': {\n                    result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValuePluralized': {\n                    //result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValueDeleted': {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    loadLanguage = async language => {\n        const result = await TdLibController.send({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: language,\n            keys: []\n        });\n\n        const resources = this.processStrings(language, result);\n\n        this.cache.save(language, defaultNamespace, resources);\n\n        i18n.addResourceBundle(language, defaultNamespace, resources);\n    };\n}\n\nconst store = new LocalizationStore();\nwindow.localization = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n    return getSize(sizes, PHOTO_SIZE);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    let split = title.split(' ');\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +''+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n    return item > first && item < last;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport {\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    getDurationString,\n    getRandomInt\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nexport function withSaveRef() {\n    return Component => {\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\n    };\n}\n\nexport function withRestoreRef() {\n    return Component => {\n        return class extends React.Component {\n            render() {\n                const { forwardedRef, ...rest } = this.props;\n\n                return <Component {...rest} ref={forwardedRef} />;\n            }\n        };\n    };\n}\n\nexport function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { getDisplayName } from './Utils/HOC';\nimport LocalizationStore from './Stores/LocalizationStore';\n\nfunction withLanguage(WrappedComponent) {\n    class LanguageWrapper extends React.Component {\n        render() {\n            const i18n = LocalizationStore.i18n;\n\n            return (\n                <I18nextProvider i18n={i18n}>\n                    <WrappedComponent {...this.props} />\n                </I18nextProvider>\n            );\n        }\n    }\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\n\n    return LanguageWrapper;\n}\n\nexport default withLanguage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport blue from '@material-ui/core/colors/blue';\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport { getDisplayName } from './Utils/HOC';\nimport Cookies from 'universal-cookie';\nimport ApplicationStore from './Stores/ApplicationStore';\n\nfunction withTheme(WrappedComponent) {\n    class ThemeWrapper extends React.Component {\n        constructor(props) {\n            super(props);\n\n            const cookies = new Cookies();\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\n\n            let theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' }\n                },\n                typography: {\n                    useNextVariants: true\n                }\n            });\n\n            this.state = {\n                theme: theme\n            };\n        }\n\n        componentDidMount() {\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        componentWillUnmount() {\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        onClientUpdateThemeChanging = update => {\n            const { type, primary } = update;\n\n            const theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' },\n                    typography: {\n                        useNextVariants: true\n                    }\n                }\n            });\n\n            const cookies = new Cookies();\n            cookies.set('themeOptions', { type: type, primary: primary });\n\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\n        };\n\n        render() {\n            const { theme } = this.state;\n\n            return (\n                <MuiThemeProvider theme={theme}>\n                    <WrappedComponent {...this.props} />\n                </MuiThemeProvider>\n            );\n        }\n    }\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\n\n    return ThemeWrapper;\n}\n\nexport default withTheme;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { getDisplayName } from './Utils/HOC';\nimport { MAX_SNACK } from './Constants';\n\nfunction withSnackbarNotifications(WrappedComponent) {\n    class NotificationsWrapper extends React.Component {\n        render() {\n            return (\n                <SnackbarProvider maxSnack={MAX_SNACK}>\n                    <WrappedComponent {...this.props} />\n                </SnackbarProvider>\n            );\n        }\n    }\n    NotificationsWrapper.displayName = `WithSnackbarNotifications(${getDisplayName(WrappedComponent)})`;\n\n    return NotificationsWrapper;\n}\n\nexport default withSnackbarNotifications;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OptionStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateOption':\n                this.items.set(update.name, update.value);\n\n                this.emit('updateOption', update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(name) {\n        return this.items.get(name);\n    }\n}\n\nconst store = new OptionStore();\nwindow.option = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport OptionStore from '../Stores/OptionStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass UserStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateUser': {\n                this.set(update.user);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateUserFullInfo':\n                this.setFullInfo(update.user_id, update.user_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateUserStatus': {\n                let user = this.get(update.user_id);\n                if (user) {\n                    this.assign(user, { status: update.status });\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateOpenUser': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n\n    getMyId() {\n        const myId = OptionStore.get('my_id');\n        if (!myId) return null;\n        if (!myId.value) return null;\n\n        return myId.value;\n    }\n\n    get(userId) {\n        return this.items.get(userId);\n    }\n\n    set(user) {\n        this.items.set(user.id, user);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new UserStore();\nwindow.user = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport dateFormat from 'dateformat';\nimport { getLetters, getSize } from './Common';\nimport { PROFILE_PHOTO_BIG_SIZE, PROFILE_PHOTO_SMALL_SIZE, SERVICE_NOTIFICATIONS_USER_ID } from '../Constants';\nimport UserStore from '../Stores/UserStore';\n\nfunction getUserStatus(user) {\n    if (!user) return null;\n    if (!user.status) return null;\n\n    if (user.id === SERVICE_NOTIFICATIONS_USER_ID) {\n        return 'service notifications';\n    }\n\n    if (user.type && user.type['@type'] === 'userTypeBot') {\n        return 'bot';\n    }\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 'last seen a long time ago';\n        }\n        case 'userStatusLastMonth': {\n            return 'last seen within a month';\n        }\n        case 'userStatusLastWeek': {\n            return 'last seen within a week';\n        }\n        case 'userStatusOffline': {\n            let { was_online } = user.status;\n            if (!was_online) return 'offline';\n\n            const now = new Date();\n            const wasOnline = new Date(was_online * 1000);\n            if (wasOnline > now) {\n                return 'last seen just now';\n            }\n\n            let diff = new Date(now - wasOnline);\n\n            // within a minute\n            if (diff.getTime() / 1000 < 60) {\n                return 'last seen just now';\n            }\n\n            // within an hour\n            if (diff.getTime() / 1000 < 60 * 60) {\n                const minutes = Math.floor(diff.getTime() / 1000 / 60);\n                return `last seen ${minutes === 1 ? '1 minute' : minutes + ' minutes'} ago`;\n            }\n\n            // today\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > today) {\n                // up to 6 hours ago\n                if (diff.getTime() / 1000 < 6 * 60 * 60) {\n                    const hours = Math.floor(diff.getTime() / 1000 / 60 / 60);\n                    return `last seen ${hours === 1 ? '1 hour' : hours + ' hours'} ago`;\n                }\n\n                // other\n                return `last seen today at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            // yesterday\n            let yesterday = new Date();\n            yesterday.setDate(now.getDate() - 1);\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > yesterday) {\n                return `last seen yesterday at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            return `last seen ${dateFormat(wasOnline, 'dd.mm.yyyy')}`;\n        }\n        case 'userStatusOnline': {\n            return 'online';\n        }\n        case 'userStatusRecently': {\n            return 'last seen recently';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserOnline(user) {\n    if (!user) return false;\n\n    const { id, status, type } = user;\n    if (!status) return false;\n    if (!type) return false;\n    if (id === SERVICE_NOTIFICATIONS_USER_ID) return false;\n\n    return status['@type'] === 'userStatusOnline' && type['@type'] !== 'userTypeBot';\n}\n\nfunction getUserFullName(user) {\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name && user.last_name) return `${user.first_name} ${user.last_name}`;\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction getUserShortName(userId) {\n    const user = UserStore.get(userId);\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserBlocked(userId) {\n    const fullInfo = UserStore.getFullInfo(userId);\n    if (fullInfo) {\n        return fullInfo.is_blocked;\n    }\n\n    return false;\n}\n\nfunction getUserLetters(user) {\n    if (!user) return null;\n\n    let title = getUserFullName(user);\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return user.first_name ? user.first_name.charAt(0) : user.last_name ? user.last_name.charAt(0) : '';\n}\n\nfunction getUserStatusOrder(user) {\n    if (!user) return 0;\n    if (!user.status) return 0;\n    if (user.type['@type'] === 'userTypeBot') return 0;\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 1;\n        }\n        case 'userStatusLastMonth': {\n            return 10;\n        }\n        case 'userStatusLastWeek': {\n            return 100;\n        }\n        case 'userStatusOffline': {\n            return user.status.was_online;\n        }\n        case 'userStatusOnline': {\n            return user.status.expires;\n        }\n        case 'userStatusRecently': {\n            return 1000;\n        }\n    }\n}\n\nfunction getProfilePhoto(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { id, sizes } = userProfilePhoto;\n    if (!sizes) return null;\n    if (!sizes.length) return null;\n\n    const smallPhotoSize = getSize(sizes, PROFILE_PHOTO_SMALL_SIZE);\n    const bigPhotoSize = getSize(sizes, PROFILE_PHOTO_BIG_SIZE);\n\n    return {\n        '@type': 'profilePhoto',\n        id: id,\n        small: smallPhotoSize.photo,\n        big: bigPhotoSize.photo\n    };\n}\n\nfunction getProfilePhotoDateHint(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { added_date } = userProfilePhoto;\n    if (!added_date) return null;\n\n    const date = new Date(added_date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy');\n}\n\nexport {\n    getUserStatus,\n    isUserOnline,\n    getUserFullName,\n    isUserBlocked,\n    getUserLetters,\n    getUserStatusOrder,\n    getProfilePhoto,\n    getProfilePhotoDateHint,\n    getUserShortName\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass SupergroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateSupergroup':\n                this.set(update.supergroup);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateSupergroupFullInfo':\n                this.setFullInfo(update.supergroup_id, update.supergroup_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(id) {\n        return this.items.get(id);\n    }\n\n    set(supergroup) {\n        this.items.set(supergroup.id, supergroup);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new SupergroupStore();\nwindow.supergroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\n\nclass InputTypingManager {\n    constructor(chatId, timeoutCallback) {\n        this.actions = new Map();\n        this.timerId = null;\n        this.chatId = chatId;\n        this.timeoutCallback = timeoutCallback;\n\n        this.handleTimer = this.handleTimer.bind(this);\n        this.addAction = this.addAction.bind(this);\n        this.clearAction = this.clearAction.bind(this);\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\n    }\n\n    handleTimer() {\n        let now = new Date();\n        let expiredActions = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expiredActions.push(key);\n        }\n\n        for (let key of expiredActions) {\n            this.actions.delete(key);\n        }\n\n        let update = {\n            '@type': 'updateUserChatAction',\n            chat_id: this.chatId,\n            action: { '@type': 'chatActionTimerUpdate' }\n        };\n\n        this.timeoutCallback(update);\n        // ChatStore.emit('updateUserChatAction', update);\n\n        this.setActionsTimeout();\n    }\n\n    addAction(userId, action) {\n        let expire = new Date();\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\n\n        this.actions.set(userId, { expire: expire, action: action });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n\n    setActionsTimeout() {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    }\n\n    clearAction(userId) {\n        this.actions.delete(userId);\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n}\n\nexport default InputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport InputTypingManager from '../Utils/InputTypingManager';\nimport UserStore from './UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass ChatStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.typingManagers = new Map();\n        this.onlineMemberCount = new Map();\n        this.skippedUpdates = [];\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateConnectionState': {\n                if (update.state['@type'] === 'connectionStateUpdating') {\n                    this.updating = true;\n                    this.skippedUpdates = [];\n                } else {\n                    this.updating = false;\n                    if (this.skippedUpdates.length > 0) {\n                        TdLibController.parameters.fastUpdating = false;\n                        this.emitUpdate({\n                            '@type': 'clientUpdateFastUpdatingComplete',\n                            updates: this.skippedUpdates\n                        });\n                        this.skippedUpdates = [];\n                    }\n                }\n                break;\n            }\n            case 'updateChatDefaultDisableNotification': {\n                //TODO: handle updateChatDefaultDisableNotification\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOnlineMemberCount': {\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatDraftMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        draft_message: update.draft_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsMarkedAsUnread': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        is_marked_as_unread: update.is_marked_as_unread\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsPinned': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_pinned: update.is_pinned\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsSponsored': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_sponsored: update.is_sponsored\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatLastMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        last_message: update.last_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatNotificationSettings': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        notification_settings: update.notification_settings\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOrder': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { order: update.order });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPhoto': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { photo: update.photo });\n\n                    switch (chat.type['@type']) {\n                        case 'chatTypeBasicGroup': {\n                            break;\n                        }\n                        case 'chatTypeSupergroup': {\n                            break;\n                        }\n                        case 'chatTypePrivate':\n                        case 'chatTypeSecret': {\n                            const user = UserStore.get(chat.type.user_id);\n                            if (user) {\n                                UserStore.assign(user, { profile_photo: update.photo });\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadInbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_inbox_message_id: update.last_read_inbox_message_id,\n                        unread_count: update.unread_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadOutbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_outbox_message_id: update.last_read_outbox_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReplyMarkup': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        reply_markup_message_id: update.reply_markup_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatTitle': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { title: update.title });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatUnreadMentionCount': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateNewChat': {\n                this.set(update.chat);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateSecretChat': {\n                //TODO: handle updateSecretChat\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUnreadChatCount': {\n                //TODO: handle updateUnreadChatCount\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUserChatAction': {\n                let typingManager = this.getTypingManager(update.chat_id);\n                if (!typingManager) {\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\n                    this.setTypingManager(update.chat_id, typingManager);\n                }\n\n                const key = update.user_id;\n                if (update.action['@type'] === 'chatActionCancel') {\n                    typingManager.clearAction(key);\n                } else {\n                    typingManager.addAction(key, update.action);\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateMessageMentionRead': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n\n                    //chat.unread_mention_count = update.unread_mention_count;\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateClearHistory': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateOpenChat': {\n                this.emitUpdate(update);\n                break;\n            }\n        }\n    };\n\n    emitUpdate = update => {\n        this.emit(update['@type'], update);\n    };\n\n    emitFastUpdate = update => {\n        if (this.updating && TdLibController.parameters.fastUpdating) {\n            this.skippedUpdates.push(update);\n            return;\n        }\n\n        this.emit(update['@type'], update);\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        //Object.assign(source1, source2);\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    get(chatId) {\n        return this.items.get(chatId);\n    }\n\n    set(chat) {\n        this.items.set(chat.id, chat);\n    }\n\n    setOnlineMemberCount(chatId, onlineMemberCount) {\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\n    }\n\n    getOnlineMemberCount(chatId) {\n        return this.onlineMemberCount.get(chatId) || 0;\n    }\n\n    getTypingManager(chatId) {\n        return this.typingManagers.get(chatId);\n    }\n\n    setTypingManager(chatId, typingManager) {\n        return this.typingManagers.set(chatId, typingManager);\n    }\n}\n\nconst store = new ChatStore();\nwindow.chat = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport { getLocationId } from '../Utils/Message';\nimport { FILE_PRIORITY, THUMBNAIL_PRIORITY } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst useReadFile = true;\n\nclass FileStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.callbacks = [];\n\n        this.db = null;\n        this.urls = new WeakMap();\n        this.items = new Map();\n        this.blobItems = new Map();\n        this.locationItems = new Map();\n\n        this.downloads = new Map();\n        this.uploads = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            case 'updateFile': {\n                this.set(update.file);\n\n                this.onUpdateFile(update);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateAuthorizationState': {\n                await this.onUpdateAuthorizationState(update);\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateAudioThumbnailBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateAudioBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateDocumentBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdateAuthorizationState = async update => {\n        if (!update) return;\n        if (!update.authorization_state) return;\n\n        if (update.authorization_state['@type'] === 'authorizationStateWaitTdlibParameters') {\n            await this.initDB();\n        }\n    };\n\n    onUpdateFile = update => {\n        if (!update) return;\n\n        const { file } = update;\n        if (!file) return;\n\n        this.handleDownloads(file);\n        this.handleUploads(file);\n    };\n\n    handleDownloads = file => {\n        const { arr, id, idb_key, local } = file;\n        delete file.arr;\n\n        if (!this.downloads.has(id)) return;\n        if (!local.is_downloading_completed) return;\n        if (!useReadFile && !idb_key && !arr) return;\n\n        const items = this.downloads.get(id);\n        if (!items) return;\n\n        this.downloads.delete(id);\n\n        const store = this.getStore();\n\n        items.forEach(item => {\n            switch (item['@type']) {\n                case 'chat': {\n                    this.handleChat(store, item, file, arr);\n                    break;\n                }\n                case 'message': {\n                    this.handleMessage(store, item, file, arr);\n                    break;\n                }\n                case 'sticker': {\n                    this.handleSticker(store, item, file, arr, null);\n                    break;\n                }\n                case 'user': {\n                    this.handleUser(store, item, file, arr);\n                    break;\n                }\n                default:\n                    console.error('FileStore.onUpdateFile unhandled item', item);\n                    break;\n            }\n        });\n    };\n\n    handleUploads = file => {\n        const { id, remote } = file;\n        delete file.arr;\n\n        if (!this.uploads.has(id)) return;\n        if (remote.is_uploading_completed) return;\n\n        this.uploads.delete(id);\n    };\n\n    handleChat = (store, chat, file, arr) => {\n        if (!chat) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateChatPhotoBlob(chat.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, chat)\n        );\n    };\n\n    handleUser = (store, user, file, arr) => {\n        if (!user) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateUserPhotoBlob(user.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, user)\n        );\n    };\n\n    handleMessage = (store, message, file, arr) => {\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.handleAnimation(store, animation, file, arr, message);\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n\n                this.handleAudio(store, audio, file, arr, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.handleDocument(store, document, file, arr, message);\n                break;\n            }\n            case 'messageGame': {\n                const { game } = content;\n\n                this.handleGame(store, game, file, arr, message);\n                break;\n            }\n            case 'messageLocation': {\n                const { location } = content;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageSticker': {\n                const { sticker } = content;\n\n                this.handleSticker(store, sticker, file, arr, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) break;\n\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    this.handleAnimation(store, animation, file, arr, message);\n                }\n\n                if (audio) {\n                    this.handleAudio(store, audio, file, arr, message);\n                }\n\n                if (document) {\n                    this.handleDocument(store, document, file, arr, message);\n                }\n\n                if (photo) {\n                    this.handlePhoto(store, photo, file, arr, message);\n                }\n\n                if (sticker) {\n                    this.handleSticker(store, sticker, file, arr, message);\n                }\n\n                if (video) {\n                    this.handleVideo(store, video, file, arr, message);\n                }\n\n                if (voice_note) {\n                    this.handleVoiceNote(store, voice_note, file, arr, message);\n                }\n\n                if (video_note) {\n                    this.handleVideoNote(store, video_note, file, arr, message);\n                }\n\n                break;\n            }\n            case 'messageVenue': {\n                const { venue } = content;\n                const { location } = venue;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.handleVideo(store, video, file, arr, message);\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n\n                this.handleVideoNote(store, video_note, file, arr, message);\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n\n                this.handleVoiceNote(store, voice_note, file, arr, message);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    handleGame = (store, game, file, arr, message) => {\n        if (!game) return;\n\n        const { animation, photo } = game;\n        if (photo) {\n            this.handlePhoto(store, photo, file, arr, message);\n        }\n\n        if (animation) {\n            this.handleAnimation(store, animation, file, arr, message);\n        }\n    };\n\n    handlePhoto = (store, photo, file, arr, obj) => {\n        if (photo) {\n            for (let i = 0; i < photo.sizes.length; i++) {\n                const photoSize = photo.sizes[i];\n                if (photoSize) {\n                    const source = photoSize.photo;\n                    if (source && source.id === file.id) {\n                        this.getLocalFile(\n                            store,\n                            source,\n                            arr,\n                            () => this.updatePhotoBlob(obj.chat_id, obj.id, file.id),\n                            () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                        );\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n    handleAudio = (store, audio, file, arr, obj) => {\n        if (audio.album_cover_thumbnail) {\n            const source = audio.album_cover_thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (audio.audio) {\n            const source = audio.audio;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleDocument = (store, document, file, arr, obj) => {\n        if (document.thumbnail) {\n            const { photo: source } = document.thumbnail;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (document.document) {\n            const { document: source } = document;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleLocation = (store, location, file, arr, obj) => {\n        const locationId = getLocationId(location);\n        if (locationId) {\n            const source = this.getLocationFile(locationId);\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateLocationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleSticker = (store, sticker, file, arr, obj) => {\n        if (sticker.thumbnail) {\n            const source = sticker.thumbnail.photo;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerThumbnailBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj || sticker)\n                );\n            }\n        }\n\n        if (sticker.sticker) {\n            const source = sticker.sticker;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj || sticker)\n                );\n            }\n        }\n    };\n\n    handleVoiceNote = (store, voiceNote, file, arr, obj) => {\n        if (voiceNote.voice) {\n            const source = voiceNote.voice;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVoiceNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideoNote = (store, videoNote, file, arr, obj) => {\n        if (videoNote.thumbnail) {\n            const source = videoNote.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (videoNote.video) {\n            const source = videoNote.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideo = (store, video, file, arr, obj) => {\n        if (video.thumbnail) {\n            const source = video.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (video.video) {\n            const source = video.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleAnimation = (store, animation, file, arr, obj) => {\n        if (animation.thumbnail) {\n            const source = animation.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (animation.animation) {\n            const source = animation.animation;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    async initDB(callback) {\n        /*if (this.store) return;\n            if (this.initiatingDB) return;\n\n            this.initiatingDB = true;\n            this.store = localForage.createInstance({\n                name: 'tdlib'\n            });\n            this.initiatingDB = false;\n\n            return;*/\n        if (this.db) {\n            console.log('[FileStore] db exists');\n            if (callback) callback();\n            return;\n        }\n\n        if (this.initiatingDB) {\n            console.log('[FileStore] add callback');\n            if (callback) this.callbacks.push(callback);\n            return;\n        }\n\n        console.log('[FileStore] start initDB');\n\n        this.initiatingDB = true;\n        this.db = await this.openDB().catch(error => console.log('[FileStore] initDB error', error));\n        this.initiatingDB = false;\n\n        console.log('[FileStore] stop initDB');\n\n        if (this.callbacks.length) {\n            console.log('[FileStore] invoke callbacks count=' + this.callbacks.length);\n            for (let i = 0; i < this.callbacks.length; i++) {\n                this.callbacks[i]();\n            }\n            this.callbacks = [];\n        }\n    }\n\n    openDB() {\n        return new Promise((resolve, reject) => {\n            const request = window.indexedDB.open('tdlib');\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n        });\n    }\n\n    getStore() {\n        return this.db.transaction(['keyvaluepairs'], 'readonly').objectStore('keyvaluepairs');\n    }\n\n    getReadWriteStore() {\n        if (useReadFile) {\n            return undefined;\n        }\n        return this.db.transaction(['keyvaluepairs'], 'readwrite').objectStore('keyvaluepairs');\n    }\n\n    deleteLocalFile = (store, file) => {};\n\n    getLocalFile(store, file, arr, callback, faultCallback) {\n        if (useReadFile) {\n            (async file => {\n                const response = await TdLibController.send({\n                    '@type': 'readFile',\n                    file_id: file.id\n                });\n                console.log(`readFile file_id=${file.id} result`, response);\n                this.setBlob(file.id, response.data);\n            })(file).then(callback, faultCallback);\n            return;\n        }\n\n        let idb_key = file.idb_key;\n        if (!idb_key) {\n            file = this.get(file.id) || file;\n            idb_key = file.idb_key;\n        }\n\n        if (!idb_key && !arr) {\n            faultCallback();\n            return;\n        }\n\n        if (arr) {\n            file.blob = new Blob([arr]);\n            this.setBlob(file.id, file.blob);\n            callback();\n            return;\n        }\n\n        if (file.blob) {\n            //callback();\n            return;\n        }\n\n        // if (this.getBlob(file.id)){\n        //     return;\n        // }\n\n        const request = store.get(idb_key);\n        request.onsuccess = event => {\n            const blob = event.target.result;\n\n            if (blob) {\n                file.blob = blob;\n                this.setBlob(file.id, file.blob);\n                callback();\n            } else {\n                faultCallback();\n            }\n        };\n        request.onerror = () => {\n            faultCallback();\n        };\n    }\n\n    getRemoteFile(fileId, priority, obj) {\n        const items = this.downloads.get(fileId) || [];\n        if (items.some(x => x === obj)) return;\n\n        items.push(obj);\n        this.downloads.set(fileId, items);\n\n        TdLibController.send({\n            '@type': 'downloadFile',\n            file_id: fileId,\n            priority: priority\n        });\n    }\n\n    cancelGetRemoteFile(fileId, obj) {\n        if (!this.downloads.has(fileId)) return;\n\n        if (!obj) {\n            this.downloads.delete(fileId);\n        } else {\n            const items = this.downloads.get(fileId).filter(x => x !== obj);\n            this.downloads.set(fileId, items);\n        }\n\n        TdLibController.send({\n            '@type': 'cancelDownloadFile',\n            file_id: fileId,\n            only_if_pending: false\n        });\n    }\n\n    uploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            let items = this.uploads.get(fileId);\n            items.push(obj);\n        } else {\n            this.uploads.set(fileId, [obj]);\n        }\n\n        console.log('[perf] uploadFile file_id=' + fileId);\n    }\n\n    cancelUploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            this.uploads.delete(fileId);\n            console.log('cancel_upload_message id=' + obj.id);\n            TdLibController.send({\n                '@type': 'deleteMessages',\n                chat_id: obj.chat_id,\n                message_ids: [obj.id],\n                revoke: true\n            });\n        }\n    }\n\n    get = fileId => {\n        return this.items.get(fileId);\n    };\n\n    set = file => {\n        this.items.set(file.id, file);\n    };\n\n    getBlob = fileId => {\n        return this.blobItems.get(fileId);\n    };\n\n    setBlob = (fileId, blob) => {\n        this.blobItems.set(fileId, blob);\n    };\n\n    deleteBlob = fileId => {\n        this.blobItems.delete(fileId);\n    };\n\n    getLocationFile = locationId => {\n        const fileId = this.locationItems.get(locationId);\n\n        return this.get(fileId);\n    };\n\n    setLocationFile = (locationId, file) => {\n        this.locationItems.set(locationId, file.id);\n\n        this.set(file);\n    };\n\n    getBlobUrl = blob => {\n        if (!blob) {\n            return null;\n        }\n\n        if (this.urls.has(blob)) {\n            return this.urls.get(blob);\n        }\n\n        const url = URL.createObjectURL(blob);\n        this.urls.set(blob, url);\n\n        return url;\n    };\n\n    deleteBlobUrl = blob => {\n        if (this.urls.has(blob)) {\n            this.urls.delete(blob);\n        }\n    };\n\n    updatePhotoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdatePhotoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioThumbnailBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioThumbnailBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVoiceNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVoiceNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDocumentBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateLocationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateLocationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateDocumentThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateUserPhotoBlob(userId, fileId) {\n        this.emit('clientUpdateUserBlob', {\n            userId: userId,\n            fileId: fileId\n        });\n    }\n\n    updateChatPhotoBlob(chatId, fileId) {\n        this.emit('clientUpdateChatBlob', {\n            chatId: chatId,\n            fileId: fileId\n        });\n    }\n}\n\nconst store = new FileStore();\nwindow.file = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './FileProgress.css';\n\nconst circleStyle = { circle: 'file-progress-circle' };\n\nclass FileProgress extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.completeAnimation = false;\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { download, upload, icon, thumbnailSrc } = this.props;\n\n        if (nextProps.thumbnailSrc !== thumbnailSrc) {\n            return true;\n        }\n\n        if (nextProps.icon !== icon) {\n            return true;\n        }\n\n        if (this.isDownloading(nextState.file, nextState.prevFile) && !download) {\n            return false;\n        }\n\n        if (this.isUploading(nextState.file, nextState.prevFile) && !upload) {\n            return false;\n        }\n\n        const nextLocal = nextState.file ? nextState.file.local : null;\n        const nextIdbKey = nextState.file ? nextState.file.idb_key : null;\n        const prevLocal = this.state.prevFile ? this.state.prevFile.local : null;\n        const prevIdbKey = this.state.prevFile ? this.state.prevFile.idb_key : null;\n        const isDownloadingCompleted =\n            prevLocal && nextLocal && !prevLocal.is_downloading_completed && nextLocal.is_downloading_completed;\n        const receiveIdbKey = nextIdbKey && !prevIdbKey;\n\n        if (nextState.file.id === this.state.file.id && isDownloadingCompleted && receiveIdbKey) {\n            return false;\n        }\n\n        if (nextState.file !== this.state.file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== this.state.prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.mount = true;\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        this.mount = false;\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    isDownloading = (file, prevFile) => {\n        if (!this.props.download) return false;\n\n        const wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n        const isActive = file && file.local && file.local.is_downloading_active;\n\n        return wasActive || isActive;\n    };\n\n    isUploading = (file, prevFile) => {\n        if (!this.props.upload) return false;\n\n        const wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n        const isActive = file && file.remote && file.remote.is_uploading_active;\n\n        return wasActive || isActive;\n    };\n\n    getProgressParams = (file, prevFile) => {\n        const { local, remote } = file;\n\n        let wasActive = false;\n        let isActive = false;\n        let isCompleted = false;\n        let progressSize = 0;\n        let size = 0;\n        if (this.isDownloading(file, prevFile)) {\n            wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n            isActive = local.is_downloading_active;\n            isCompleted = local.is_downloading_completed;\n            progressSize = local.downloaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isDownloading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else if (this.isUploading(file, prevFile)) {\n            wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n            isActive = remote.is_uploading_active;\n            isCompleted = remote.is_uploading_completed;\n            progressSize = remote.uploaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isUploading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else {\n            // console.log(\n            //     `FileProgress.getProgressParams none id=${file.id} download=${this.props.download} upload=${\n            //         this.props.upload\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        }\n\n        return [wasActive, isActive, isCompleted, progressSize, size];\n    };\n\n    render() {\n        let { thumbnailSrc, cancelButton, zIndex, icon, completeIcon } = this.props;\n        const { file, prevFile } = this.state;\n        if (!file) return null;\n\n        const [wasActive, isActive, isCompleted, progressSize, size] = this.getProgressParams(file, prevFile);\n\n        let inProgress = isActive;\n        let progress = 0;\n        if (isActive) {\n            progress = progressSize && size ? 100 - ((size - progressSize) / size) * 100 : 1;\n        }\n\n        const startCompleteAnimation = wasActive && !isActive;\n        if (startCompleteAnimation) {\n            this.completeAnimation = true;\n            // console.log('FileProgress.render animationComplete=true');\n            progress = isCompleted ? 100 : 0;\n            inProgress = true;\n            setTimeout(() => {\n                this.completeAnimation = false;\n                if (!this.mount) return;\n                // console.log('FileProgress.render animationComplete=false');\n\n                this.setState({ prevFile: null });\n            }, ANIMATION_DURATION_300MS);\n        }\n\n        const style = {\n            zIndex: zIndex,\n            background: !thumbnailSrc && typeof thumbnailSrc !== 'undefined' ? null : 'rgba(0, 0, 0, 0.25)'\n        };\n\n        const isDownloadingCompleted =\n            file &&\n            file.local &&\n            (file.local.is_downloading_completed || file.idb_key || file.local.is_uploading_completed) &&\n            !this.completeAnimation &&\n            !isActive;\n\n        // console.log(\n        //     `FileProgress.render \\\\\n        //     id=${file.id} showProgress=${inProgress} progress=${progress} \\\\\n        //     was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} \\\\\n        //     progress_size=${progressSize} size=${size} complete_animation=${this.completeAnimation} \\\\\n        //     is_downloading_completed=${isDownloadingCompleted}\n        //     completeIcon=${completeIcon}`,\n        //     file,\n        //     prevFile\n        // );\n        //cancelButton = true;\n        //inProgress = true;\n\n        if (isDownloadingCompleted) {\n            // console.log('FileProgress.render completeIcon');\n            if (completeIcon) {\n                return (\n                    <div className='file-progress' style={style}>\n                        <div className='file-progress-icon'>{completeIcon}</div>\n                    </div>\n                );\n            }\n\n            return null;\n        }\n\n        if (inProgress || this.completeAnimation) {\n            // console.log('FileProgress.render inProgressIcon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-indicator'>\n                        <CircularProgress\n                            classes={circleStyle}\n                            variant='static'\n                            value={progress}\n                            size={42}\n                            thickness={2}\n                        />\n                    </div>\n                    {cancelButton && (\n                        <div className='file-progress-icon'>\n                            <CloseIcon />\n                        </div>\n                    )}\n                </div>\n            );\n        }\n\n        if (icon) {\n            // console.log('FileProgress.render icon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-icon'>{icon}</div>\n                </div>\n            );\n        }\n\n        return null;\n    }\n}\n\nFileProgress.propTypes = {\n    file: PropTypes.object.isRequired,\n    thumbnailSrc: PropTypes.object,\n    cancelButton: PropTypes.bool,\n    download: PropTypes.bool,\n    upload: PropTypes.bool,\n    zIndex: PropTypes.number,\n\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nFileProgress.defaultProps = {\n    cancelButton: false,\n    download: true,\n    upload: false\n};\n\nexport default FileProgress;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass MessageStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.selectedItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateNewMessage':\n                this.set(update.message);\n                this.emit('updateNewMessage', update);\n                break;\n            case 'updateDeleteMessages':\n                this.emit('updateDeleteMessages', update);\n                break;\n            case 'updateMessageEdited': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        message.reply_markup = update.reply_markup;\n                        message.edit_date = update.edit_date;\n                    }\n                }\n                this.emit('updateMessageEdited', update);\n                break;\n            }\n            case 'updateMessageViews': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message && update.views > message.views) {\n                        message.views = update.views;\n                    }\n                }\n                this.emit('updateMessageViews', update);\n                break;\n            }\n            case 'updateMessageContent': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        update.old_content = message.content;\n                        message.content = update.new_content;\n                    }\n                }\n                this.emit('updateMessageContent', update);\n                break;\n            }\n            case 'updateMessageContentOpened': {\n                const { chat_id, message_id } = update;\n\n                const message = this.get(chat_id, message_id);\n                if (message) {\n                    const { content } = message;\n                    switch (content['@type']) {\n                        case 'messageVoiceNote': {\n                            message.content.is_listened = true;\n                            break;\n                        }\n                        case 'messageVideoNote': {\n                            message.content.is_viewed = true;\n                            break;\n                        }\n                    }\n                }\n\n                this.emit('updateMessageContentOpened', update);\n                break;\n            }\n            case 'updateMessageSendSucceeded': {\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n\n                this.set(update.message);\n                this.emit('updateMessageSendSucceeded', update);\n                break;\n            }\n            case 'updateMessageSendFailed': {\n                if (update.message.sending_state) {\n                    update.message.sending_state.error_code = update.error_code;\n                    update.message.sending_state.error_message = update.error_message;\n                }\n\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                        if (message.sending_state) {\n                            message.sending_state.error_code = update.error_code;\n                            message.sending_state.error_message = update.error_message;\n                        }\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n                this.emit('updateMessageSendFailed', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMessageHighlighted': {\n                this.emit('clientUpdateMessageHighlighted', update);\n                break;\n            }\n            case 'clientUpdateMessageSelected': {\n                if (update.selected) {\n                    this.selectedItems.set(`chatId=${update.chatId}_messageId=${update.messageId}`, {\n                        chatId: update.chatId,\n                        messageId: update.messageId\n                    });\n                } else {\n                    this.selectedItems.delete(`chatId=${update.chatId}_messageId=${update.messageId}`);\n                }\n\n                this.emit('clientUpdateMessageSelected', update);\n                break;\n            }\n            case 'clientUpdateClearSelection': {\n                this.selectedItems.clear();\n\n                this.emit('clientUpdateClearSelection', update);\n                break;\n            }\n            case 'clientUpdateChatId': {\n                if (this.selectedItems.size > 0) {\n                    this.selectedItems.clear();\n\n                    this.emit('clientUpdateClearSelection', { '@type': 'clientUpdateClearSelection' });\n                }\n\n                break;\n            }\n            case 'clientUpdateReply': {\n                this.emit('clientUpdateReply', update);\n                break;\n            }\n            case 'clientUpdateMessagesInView': {\n                this.emit('clientUpdateMessagesInView', update);\n                break;\n            }\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    load(chatId, messageId) {\n        TdLibController.send({\n            '@type': 'getMessage',\n            chat_id: chatId,\n            message_id: messageId\n        })\n            .then(message => {\n                this.set(message);\n                this.emit('getMessageResult', message);\n            })\n            .catch(error => {\n                const deletedMessage = {\n                    '@type': 'deletedMessage',\n                    chat_id: chatId,\n                    id: messageId,\n                    content: null\n                };\n                this.set(deletedMessage);\n                this.emit('getMessageResult', deletedMessage);\n            });\n    }\n\n    get(chatId, messageId) {\n        let chat = this.items.get(chatId);\n        if (!chat) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        let message = chat.get(messageId);\n        if (!message) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        return message;\n    }\n\n    set(message) {\n        let chat = this.items.get(message.chat_id);\n        if (!chat) {\n            chat = new Map();\n            this.items.set(message.chat_id, chat);\n        }\n\n        chat.set(message.id, message);\n    }\n\n    setItems(messages) {\n        for (let i = 0; i < messages.length; i++) {\n            this.set(messages[i]);\n        }\n    }\n}\n\nconst store = new MessageStore();\nwindow.message = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { getPhotoSize, getPhotoThumbnailSize, getSize } from './Common';\nimport { getChatUserId } from './Chat';\nimport { getProfilePhoto } from './User';\nimport { getLocationId } from './Message';\nimport {\n    FILE_PRIORITY,\n    LOCATION_HEIGHT,\n    LOCATION_SCALE,\n    LOCATION_WIDTH,\n    LOCATION_ZOOM,\n    PHOTO_BIG_SIZE,\n    PHOTO_SIZE,\n    PRELOAD_ANIMATION_SIZE,\n    PRELOAD_AUDIO_SIZE,\n    PRELOAD_DOCUMENT_SIZE,\n    PRELOAD_STICKER_SIZE,\n    PRELOAD_VIDEO_SIZE,\n    PRELOAD_VIDEONOTE_SIZE,\n    PRELOAD_VOICENOTE_SIZE,\n    THUMBNAIL_PRIORITY\n} from '../Constants';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getSizeString(size) {\n    if (!size) return `0 B`;\n\n    if (size < 1024) {\n        return `${size} B`;\n    }\n\n    if (size < 1024 * 1024) {\n        return `${(size / 1024).toFixed(1)} KB`;\n    }\n\n    if (size < 1024 * 1024 * 1024) {\n        return `${(size / 1024 / 1024).toFixed(1)} MB`;\n    }\n\n    return `${(size / 1024 / 1024 / 1024).toFixed(1)} GB`;\n}\n\nfunction getFileSize(file) {\n    if (!file) return null;\n\n    let size = file.size;\n    if (!size) return null;\n\n    return getSizeString(size);\n}\n\nfunction getBigPhoto(photo) {\n    if (!photo) return null;\n\n    return photo.big;\n}\n\nfunction saveData(data, filename, mime) {\n    let blob = new Blob([data], { type: mime || 'application/octet-stream' });\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nfunction saveBlob(blob, filename) {\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nasync function loadReplies(store, chatId, messageIds) {\n    if (!chatId) return;\n    if (!messageIds) return;\n    if (!messageIds.length) return;\n\n    const result = await TdLibController.send({\n        '@type': 'getMessages',\n        chat_id: chatId,\n        message_ids: messageIds\n    });\n\n    result.messages = result.messages.map((message, i) => {\n        return (\n            message || {\n                '@type': 'deletedMessage',\n                chat_id: chatId,\n                id: messageIds[i],\n                content: null\n            }\n        );\n    });\n\n    MessageStore.setItems(result.messages);\n\n    for (let i = messageIds.length - 1; i >= 0; i--) {\n        MessageStore.emit('getMessageResult', MessageStore.get(chatId, messageIds[i]));\n    }\n\n    store = FileStore.getStore();\n\n    loadReplyContents(store, result.messages);\n}\n\nfunction loadReplyContents(store, messages) {\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) break;\n\n                    const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n\n                    if (photo) {\n                        loadPhotoContent(store, photo, message);\n                        break;\n                    }\n\n                    if (animation) {\n                        loadAnimationThumbnailContent(store, animation, message);\n                        break;\n                    }\n\n                    if (audio) {\n                        loadAudioThumbnailContent(store, audio, message);\n                        break;\n                    }\n\n                    if (document) {\n                        loadDocumentThumbnailContent(store, document, message);\n                        break;\n                    }\n\n                    if (sticker) {\n                        loadStickerThumbnailContent(store, sticker, message);\n                        break;\n                    }\n\n                    if (video) {\n                        loadVideoThumbnailContent(store, video, message);\n                        break;\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteThumbnailContent(store, video_note, message);\n                        break;\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadAudioContent(store, audio, message, useFileSize = true) {\n    if (!audio) return;\n    if (!message) return;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_AUDIO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAudioThumbnailContent(store, audio, message) {\n    if (!audio) return false;\n    if (!message) return false;\n\n    const { album_cover_thumbnail: photoSize } = audio;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadAnimationContent(store, animation, message, useFileSize = true) {\n    if (!animation) return;\n    if (!message) return;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_ANIMATION_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAnimationThumbnailContent(store, animation, message) {\n    if (!animation) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = animation;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadContactContent(store, contact, message) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { user_id } = contact;\n    const user = UserStore.get(user_id);\n    if (!user) return;\n\n    loadUserContent(store, user);\n}\n\nfunction loadDocumentContent(store, document, message, useFileSize = true) {\n    if (!document) return;\n    if (!message) return;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_DOCUMENT_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadDocumentThumbnailContent(store, document, message) {\n    if (!document) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = document;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadGameContent(store, game, message, useFileSize = true) {\n    if (!game) return;\n    if (!message) return;\n\n    const { animation } = game;\n\n    loadAnimationContent(store, animation, message, useFileSize);\n}\n\nfunction loadGameThumbnailContent(store, game, message) {\n    if (!game) return false;\n    if (!message) return false;\n\n    const { photo, animation } = game;\n    if (loadAnimationThumbnailContent(store, animation, message)) {\n        return true;\n    }\n\n    loadPhotoContent(store, photo, message);\n    return true;\n}\n\nasync function loadLocationContent(store, location, message) {\n    if (!location) return;\n    if (!message) return;\n\n    const locationId = getLocationId(location);\n    if (!locationId) return;\n\n    let file = FileStore.getLocationFile(locationId);\n    if (!file) {\n        file = await TdLibController.send({\n            '@type': 'getMapThumbnailFile',\n            location: location,\n            zoom: LOCATION_ZOOM,\n            width: LOCATION_WIDTH,\n            height: LOCATION_HEIGHT,\n            scale: LOCATION_SCALE,\n            chat_id: message.chat_id\n        });\n        FileStore.setLocationFile(locationId, file);\n\n        store = FileStore.getStore();\n    }\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateLocationBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadBigPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getSize(sizes, PHOTO_BIG_SIZE);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getPhotoSize(sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoThumbnailContent(store, photo, message) {\n    if (!photo) return false;\n    if (!message) return false;\n\n    const photoSize = getPhotoThumbnailSize(photo.sizes);\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadStickerContent(store, sticker, message, useFileSize = true) {\n    if (!sticker) return;\n\n    let { sticker: file } = sticker;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    const chatId = message ? message.chat_id : 0;\n    const messageId = message ? message.id : 0;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerBlob(chatId, messageId, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_STICKER_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message || sticker);\n            }\n        }\n    );\n}\n\nfunction loadStickerThumbnailContent(store, sticker, message) {\n    if (!sticker) return false;\n\n    const { thumbnail: photoSize } = sticker;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    const chatId = message ? message.chat_id : 0;\n    const messageId = message ? message.id : 0;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerThumbnailBlob(chatId, messageId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message || sticker)\n    );\n\n    return true;\n}\n\nfunction loadVideoContent(store, video, message, useFileSize = true) {\n    if (!video) return;\n    if (!message) return;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoThumbnailContent(store, video, message) {\n    if (!video) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = video;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVideoNoteContent(store, videoNote, message, useFileSize = true) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEONOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoNoteThumbnailContent(store, videoNote, message) {\n    if (!videoNote) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = videoNote;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVoiceNoteContent(store, voiceNote, message, useFileSize = true) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVoiceNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VOICENOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadMessageContents(store, messages) {\n    const users = new Map();\n    let chatId = 0;\n    const replies = new Map();\n\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { chat_id, content, sender_user_id, reply_to_message_id } = message;\n\n        if (sender_user_id) {\n            users.set(sender_user_id, sender_user_id);\n        }\n\n        if (reply_to_message_id) {\n            chatId = chat_id;\n            replies.set(reply_to_message_id, reply_to_message_id);\n        }\n\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioContent(store, audio, message);\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageContact': {\n                    const { contact } = content;\n\n                    loadContactContent(store, contact, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message);\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameContent(store, game, message);\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messageLocation': {\n                    const { location } = content;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (audio) {\n                        loadAudioContent(store, audio, message);\n                        loadPhoto = !loadAudioThumbnailContent(store, audio, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message);\n                        loadPhoto = !loadDocumentThumbnailContent(store, document, message);\n                    }\n\n                    if (sticker) {\n                        loadStickerContent(store, sticker, message);\n                        loadPhoto = !loadStickerThumbnailContent(store, sticker, message);\n                    }\n\n                    if (video) {\n                        // loadVideoContent(store, video, message); // start loading only on video click event\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteContent(store, video_note, message);\n                        loadPhoto = !loadVideoNoteThumbnailContent(store, video_note, message);\n                    }\n\n                    if (voice_note) {\n                        loadVoiceNoteContent(store, voice_note, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                        loadPhotoContent(store, photo, message);\n                        loadPhotoThumbnailContent(store, photo, message);\n                    }\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    loadPhotoContent(store, photo, message);\n                    loadPhotoThumbnailContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerContent(store, sticker, message);\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageVenue': {\n                    const { venue } = content;\n                    const { location } = venue;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    // loadVideoContent(store, video, message); // start loading only on video click event\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteContent(store, video_note, message);\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n                case 'messageVoiceNote': {\n                    const { voice_note } = content;\n\n                    loadVoiceNoteContent(store, voice_note, message);\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        }\n    }\n\n    loadUsersContent(store, [...users.keys()]);\n    loadReplies(store, chatId, [...replies.keys()]);\n}\n\nfunction saveOrDownload(file, fileName, obj, callback) {\n    if (!file) return;\n    if (!fileName) return;\n\n    if (file.arr) {\n        saveData(file.arr, fileName);\n        return;\n    }\n\n    let blob = FileStore.getBlob(file.id) || file.blob;\n    if (blob) {\n        saveBlob(blob, fileName);\n        return;\n    }\n\n    download(file, obj, () => {\n        if (callback) callback();\n\n        blob = FileStore.getBlob(file.id) || file.blob;\n        if (blob) {\n            saveBlob(blob, fileName);\n        }\n    });\n}\n\nfunction download(file, obj, callback) {\n    if (!file) return;\n    const { id, local } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) {\n        return;\n    }\n\n    if (local.is_downloading_completed) {\n        const store = FileStore.getStore();\n\n        FileStore.getLocalFile(store, file, null, callback, () => {\n            if (local.can_be_downloaded) {\n                FileStore.getRemoteFile(file.id, FILE_PRIORITY, obj);\n            }\n        });\n        return;\n    }\n\n    if (local.can_be_downloaded) {\n        FileStore.getRemoteFile(id, FILE_PRIORITY, obj);\n    }\n}\n\nfunction getMediaPreviewFile(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation && animation.thumbnail) {\n                return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, video, photo } = web_page;\n\n                if (animation && animation.thumbnail) {\n                    return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (video && video.thumbnail) {\n                    return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n                }\n\n                if (photo) {\n                    return getMediaFile(chatId, messageId, PHOTO_SIZE);\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video.thumbnail) {\n                return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n            }\n            break;\n        }\n        default: {\n            return [0, 0, null];\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction getMediaFile(chatId, messageId, size) {\n    if (!size) return [0, 0, null];\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                return [animation.width, animation.height, animation.animation];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, photo, video } = web_page;\n                if (animation) {\n                    return [animation.width, animation.height, animation.animation];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (photo) {\n                    const photoSize = getSize(photo.sizes, size);\n                    if (photoSize) {\n                        return [photoSize.width, photoSize.height, photoSize.photo];\n                    }\n                    break;\n                }\n\n                if (video) {\n                    return [video.width, video.height, video.video];\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                return [video.width, video.height, video.video];\n            }\n            break;\n        }\n        default: {\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction cancelLoadMediaViewerContent(messages) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messagePhoto': {\n                    const { photo } = content;\n                    if (!photo) break;\n\n                    // preview\n                    /*let [previewId, previewPid, previewIdbKey] = getPhotoPreviewFile(message);\n                    if (previewPid) {\n                        let preview = this.getPreviewPhotoSize(message.content.photo.sizes);\n                        if (!preview.blob){\n                            FileStore.getLocalFile(store, preview, null,\n                                () => MessageStore.updateMessagePhoto(message.id),\n                                () => { if (loadRemote)  FileStore.getRemoteFile(previewId, 2, message); },\n                                'load_contents_preview_',\n                                message.id);\n\n                        }\n                    }*/\n\n                    const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n                    if (!photoSize) break;\n\n                    const { photo: file } = photoSize;\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) return;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n                    if (!video) break;\n\n                    if (video.thumbnail) {\n                        const { photo: file } = video.thumbnail;\n                        const blob = file.blob || FileStore.getBlob(file.id);\n                        if (blob) break;\n\n                        FileStore.cancelGetRemoteFile(file.id);\n                    }\n\n                    const { video: file } = video;\n                    if (!file) break;\n\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) break;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (web_page) {\n                        const { video } = web_page;\n\n                        if (video) {\n                            if (video.thumbnail) {\n                                const { photo: file } = video.thumbnail;\n                                const blob = file.blob || FileStore.getBlob(file.id);\n                                if (blob) break;\n\n                                FileStore.cancelGetRemoteFile(file.id);\n                            }\n\n                            const { video: file } = video;\n                            if (!file) break;\n\n                            const blob = file.blob || FileStore.getBlob(file.id);\n                            if (blob) break;\n\n                            FileStore.cancelGetRemoteFile(file.id);\n                        }\n                    }\n\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadMediaViewerContent(messages, useSizeLimit = false) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    const store = FileStore.getStore();\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message, useSizeLimit);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message, useSizeLimit);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, document, photo, video } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message, useSizeLimit);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message, useSizeLimit);\n                        loadPhoto = false;\n                    }\n\n                    if (video) {\n                        loadVideoContent(store, video, message, useSizeLimit);\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    loadVideoContent(store, video, message, useSizeLimit);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction cancelPreloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    cancelLoadMediaViewerContent([history[index]]);\n    cancelLoadMediaViewerContent(messages);\n}\n\nfunction preloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    loadMediaViewerContent([history[index]], false);\n    loadMediaViewerContent(messages, true);\n}\n\nfunction loadUserFileContent(store, file, userId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateUserPhotoBlob(userId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, user)\n    );\n}\n\nfunction loadChatFileContent(store, file, chatId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateChatPhotoBlob(chatId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, chat)\n    );\n}\n\nfunction loadProfileMediaViewerContent(chatId, photos) {\n    if (!photos) return;\n\n    const store = FileStore.getStore();\n\n    photos.forEach(photo => {\n        switch (photo['@type']) {\n            case 'chatPhoto': {\n                const { small, big } = photo;\n\n                loadChatFileContent(store, small, chatId);\n                loadChatFileContent(store, big, chatId);\n                break;\n            }\n            case 'profilePhoto': {\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n            case 'userProfilePhoto': {\n                photo = getProfilePhoto(photo);\n                if (!photo) break;\n\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n        }\n    });\n}\n\nfunction preloadProfileMediaViewerContent(chatId, index, history) {\n    if (!history.length) return;\n\n    const items = [];\n    if (index > 0) {\n        items.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        items.push(history[index + 1]);\n    }\n    if (index >= 0 && index < history.length) {\n        items.push(history[index]);\n    }\n\n    loadProfileMediaViewerContent(chatId, items);\n}\n\nfunction loadUserContent(store, userId) {\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const { profile_photo } = user;\n    if (!profile_photo) return;\n\n    const { small: file } = profile_photo;\n\n    loadUserFileContent(store, file, userId);\n}\n\nfunction loadUsersContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadUserContent(store, id));\n}\n\nfunction loadChatContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { photo } = chat;\n    if (!photo) return;\n\n    const { small: file } = photo;\n\n    loadChatFileContent(store, file, chatId);\n}\n\nfunction loadChatsContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadChatContent(store, id));\n}\n\nfunction loadDraftContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { draft_message } = chat;\n    if (!draft_message) return;\n\n    const { reply_to_message_id } = draft_message;\n    if (!reply_to_message_id) return;\n\n    loadReplies(store, chatId, [reply_to_message_id]);\n}\n\nfunction loadStickerSetContent(store, stickerSet) {\n    if (!stickerSet) return;\n\n    const { stickers } = stickerSet;\n    loadStickersContent(store, stickers);\n}\n\nfunction loadStickersContent(store, stickers) {\n    if (!stickers) return;\n\n    stickers.forEach(sticker => {\n        loadStickerThumbnailContent(store, sticker, null);\n    });\n}\n\nfunction isGifMimeType(mimeType) {\n    return mimeType && mimeType.toLowerCase() === 'image/gif';\n}\n\nfunction getSrc(file) {\n    const blob = getBlob(file);\n\n    return FileStore.getBlobUrl(blob) || '';\n}\n\nfunction getBlob(file) {\n    return file ? FileStore.getBlob(file.id) || file.blob : null;\n}\n\nfunction getDownloadedSize(file) {\n    if (!file) return '0';\n    if (!file.local) return '0';\n    if (!file.local.is_downloading_active) return '0';\n\n    return getSizeString(file.local.downloaded_size);\n}\n\nfunction getUploadedSize(file) {\n    if (!file) return '0';\n    if (!file.remote) return '0';\n    if (!file.remote.is_uploading_active) return '0';\n\n    return getSizeString(file.remote.uploaded_size);\n}\n\nfunction getExtension(fileName) {\n    if (!fileName) {\n        return '';\n    }\n\n    const parts = fileName.split('.');\n    if (parts.length === 1 || (parts[0] === '' && parts.length === 2)) {\n        return '';\n    }\n    return parts.pop().toLowerCase();\n}\n\nexport {\n    getFileSize,\n    getSizeString,\n    saveData,\n    saveBlob,\n    loadMessageContents,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    cancelLoadMediaViewerContent,\n    cancelPreloadMediaViewerContent,\n    loadProfileMediaViewerContent,\n    preloadProfileMediaViewerContent,\n    loadDraftContent,\n    loadUserContent,\n    loadChatContent,\n    loadChatsContent,\n    loadUsersContent,\n    loadStickerContent,\n    loadStickersContent,\n    loadStickerSetContent,\n    saveOrDownload,\n    download,\n    getMediaFile,\n    getMediaPreviewFile,\n    isGifMimeType,\n    getSrc,\n    getBlob,\n    getDownloadedSize,\n    getUploadedSize,\n    getExtension\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport FileProgress from '../../Components/Viewer/FileProgress';\nimport { getSrc } from '../../Utils/File';\nimport FileStore from '../../Stores/FileStore';\nimport './DocumentTile.css';\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.primary.main,\n        borderRadius: '50%',\n        width: 48,\n        height: 48\n    }\n});\n\nclass DocumentTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    onClientUpdateDocumentThumbnailBlob = update => {\n        const { thumbnail } = this.props;\n        if (!thumbnail) return;\n\n        const file = thumbnail.photo;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { classes, thumbnail, file, icon, completeIcon, openMedia } = this.props;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const className = classNames('tile-photo', { 'document-tile-background': !thumbnailSrc });\n\n        return (\n            <div className='document-tile' onClick={openMedia}>\n                {thumbnailSrc ? (\n                    <img className={className} src={thumbnailSrc} draggable={false} alt='' />\n                ) : (\n                    <div className={classes.background} />\n                )}\n                {file && (\n                    <FileProgress\n                        file={file}\n                        thumbnailSrc={thumbnailSrc}\n                        download\n                        upload\n                        cancelButton\n                        zIndex={1}\n                        icon={icon}\n                        completeIcon={completeIcon}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nDocumentTile.propTypes = {\n    thumbnail: PropTypes.object,\n    file: PropTypes.object,\n    openMedia: PropTypes.func,\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nexport default withStyles(styles, { withTheme: true })(DocumentTile);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport { getSearchMessagesFilter, openMedia } from '../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_NORMAL, PLAYER_VOLUME_NORMAL } from '../Constants';\nimport MessageStore from './MessageStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport { getRandomInt } from '../Utils/Common';\n\nconst RepeatEnum = Object.freeze({\n    NONE: 'NONE',\n    REPEAT: 'REPEAT',\n    REPEAT_ONE: 'REPEAT_ONE'\n});\n\nexport { RepeatEnum };\n\nclass PlayerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        const cookies = new Cookies();\n        let playbackRate = cookies.get('playbackRate');\n        let volume = cookies.get('volume');\n        playbackRate =\n            playbackRate && Number(playbackRate) >= 1 && Number(playbackRate) <= 2\n                ? Number(playbackRate)\n                : PLAYER_PLAYBACKRATE_NORMAL;\n        volume = volume && Number(volume) >= 0 && Number(volume) <= 1 ? Number(volume) : PLAYER_VOLUME_NORMAL;\n\n        this.playbackRate = playbackRate;\n        this.volume = volume;\n        this.repeat = RepeatEnum.NONE;\n        this.shuffle = false;\n\n        this.playlist = null;\n        this.message = null;\n        this.time = null;\n        this.videoStream = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            default:\n                break;\n        }\n    };\n\n    close = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaClose'\n        });\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMediaClose': {\n                this.playlist = null;\n                this.message = null;\n                this.time = null;\n                this.videoStream = null;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaActive': {\n                const { chatId, messageId } = update;\n\n                const message = MessageStore.get(chatId, messageId);\n                if (!message) return;\n\n                this.message = message;\n\n                this.emit(update['@type'], update);\n\n                this.getPlaylist(chatId, messageId);\n                break;\n            }\n            case 'clientUpdateMediaVolume': {\n                const { volume } = update;\n\n                this.volume = volume;\n\n                const cookies = new Cookies();\n                cookies.set('volume', volume);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaRepeat': {\n                const { repeat } = update;\n\n                this.repeat = repeat;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaShuffle': {\n                const { shuffle } = update;\n\n                this.shuffle = shuffle;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaybackRate': {\n                const { playbackRate } = update;\n\n                this.playbackRate = playbackRate;\n\n                const cookies = new Cookies();\n                cookies.set('playbackRate', playbackRate);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlay': {\n                this.playing = true;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaTitleMouseOver': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPause': {\n                this.playing = false;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaStop': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaNext': {\n                this.emit(update['@type'], update);\n\n                this.moveToNextMedia(false);\n                break;\n            }\n            case 'clientUpdateMediaPrev': {\n                this.emit(update['@type'], update);\n\n                this.moveToPrevMedia();\n                break;\n            }\n            case 'clientUpdateMediaEnding': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaEnd': {\n                this.emit(update['@type'], update);\n\n                if (update.moveNext) {\n                    if (this.moveToNextMedia(true)) {\n                    } else {\n                        this.close();\n                    }\n                } else {\n                    this.close();\n                }\n                break;\n            }\n            case 'clientUpdateMediaTime': {\n                const { duration, currentTime, timestamp } = update;\n\n                this.time = {\n                    currentTime: currentTime,\n                    duration: duration,\n                    timestamp: timestamp\n                };\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaCaptureStream': {\n                this.videoStream = update.stream;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPlay': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPause': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerEnded': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistLoading': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistPrev': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylist': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistNext': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    moveToPrevMedia = () => {\n        if (!this.playlist) return;\n        if (!this.message) return;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return;\n\n        if (index + 1 < messages.length) {\n            const message = messages[index + 1];\n\n            openMedia(message.chat_id, message.id, false);\n        }\n    };\n\n    moveToNextMedia = useRepeatShuffle => {\n        if (!this.playlist) return false;\n        if (!this.message) return false;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return false;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        let nextIndex = -1;\n        if (!useRepeatShuffle) {\n            nextIndex = index - 1;\n        } else {\n            switch (this.repeat) {\n                case RepeatEnum.NONE: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1;\n                    }\n                    break;\n                }\n                case RepeatEnum.REPEAT_ONE: {\n                    nextIndex = index;\n                    break;\n                }\n                case RepeatEnum.REPEAT: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1 >= 0 ? index - 1 : messages.length - 1;\n                    }\n                    break;\n                }\n            }\n        }\n\n        if (nextIndex >= 0) {\n            const message = messages[nextIndex];\n\n            openMedia(message.chat_id, message.id, false);\n            return true;\n        }\n\n        return false;\n    };\n\n    getPlaylist = async (chatId, messageId) => {\n        const { playlist: currentPlaylist } = this;\n\n        if (currentPlaylist) {\n            const { messages } = currentPlaylist;\n            if (messages && messages.findIndex(x => x.chat_id === chatId && x.id === messageId) !== -1) {\n                return;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylistLoading',\n            chatId: chatId,\n            messageId: messageId\n        });\n\n        const filter = getSearchMessagesFilter(chatId, messageId);\n        if (!filter) {\n            this.playlist = {\n                chatId: chatId,\n                messageId: messageId,\n                totalCount: 1,\n                messages: [MessageStore.get(chatId, messageId)]\n            };\n\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylist',\n                playlist: this.playlist\n            });\n\n            return;\n        }\n\n        const result = await TdLibController.send({\n            '@type': 'searchChatMessages',\n            chat_id: chatId,\n            query: '',\n            sender_user_id: 0,\n            from_message_id: messageId,\n            offset: -50,\n            limit: 100,\n            filter: filter\n        });\n\n        MessageStore.setItems(result.messages);\n\n        const { total_count, messages } = result;\n\n        this.playlist = {\n            chatId: chatId,\n            messageId: messageId,\n            totalCount: total_count,\n            messages: messages\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylist',\n            playlist: this.playlist\n        });\n    };\n}\n\nconst store = new PlayerStore();\nwindow.player = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport { getDurationString } from '../../../Utils/Common';\nimport FileStore from '../../../Stores/FileStore';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './AudioAction.css';\n\nclass AudioAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration, file } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n        const currentFile = FileStore.get(file.id) || file;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            timeString: this.getTimeString(currentTime, duration, active, currentFile),\n\n            prevFile: null,\n            file: currentFile\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, timeString, file, prevFile } = this.state;\n\n        if (nextState.timeString !== timeString) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                timeString: this.getTimeString(update.currentTime, update.duration || duration, active, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                timeString: this.getTimeString(active ? currentTime : 0, duration, true, file)\n            });\n        } else if (active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    getTimeString = (currentTime, duration, active, file) => {\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        return active && isDownloadingCompleted ? `${currentTimeString}/${durationString}` : `${durationString}`;\n    };\n\n    render() {\n        const { file, timeString } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='audio-action'>\n                {!isDownloadingCompleted && <span>{`${sizeString}, `}</span>}\n                <span>{timeString}</span>\n            </div>\n        );\n    }\n}\n\nAudioAction.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired,\n    file: PropTypes.object.isRequired\n};\n\nexport default AudioAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { THUMBNAIL_BLURRED_SIZE } from '../Constants';\n\nfunction isBlurredThumbnail(thumbnail) {\n    if (!thumbnail) return false;\n\n    return Math.max(thumbnail.width, thumbnail.height) < THUMBNAIL_BLURRED_SIZE;\n}\n\nfunction getAudioTitle(audio) {\n    if (!audio) return null;\n\n    const { file_name, title, performer } = audio;\n    const trimmedTitle = title ? title.trim() : '';\n    const trimmedPerformer = performer ? performer.trim() : '';\n\n    return trimmedTitle || trimmedPerformer\n        ? `${trimmedPerformer || 'Unknown Artist'}  ${trimmedTitle || 'Unknown Track'}`\n        : file_name;\n}\n\nexport { isBlurredThumbnail, getAudioTitle };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './DocumentAction.css';\n\nclass DocumentAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { file, prevFile } = this.state;\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    render() {\n        const { file } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='document-action'>\n                <span>{sizeString}</span>\n            </div>\n        );\n    }\n}\n\nDocumentAction.propTypes = {\n    file: PropTypes.object.isRequired\n};\n\nexport default DocumentAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport DocumentAction from './DocumentAction';\nimport { getExtension } from '../../../Utils/File';\nimport './Document.css';\n\nclass Document extends React.Component {\n    render() {\n        const { document, openMedia } = this.props;\n        if (!document) return null;\n\n        const { thumbnail, file_name } = document;\n        const file = document.document;\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={<InsertDriveFileIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a\n                            className='document-name'\n                            onClick={openMedia}\n                            title={file_name}\n                            data-name={file_name}\n                            data-ext={'.' + getExtension(file_name)}>\n                            {file_name}\n                        </a>\n                    </div>\n                    <DocumentAction file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nDocument.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    document: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Document;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getAudioTitle } from '../../../Utils/Media';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './Audio.css';\nimport InsertDriveFileIcon from './Document';\n\nclass Audio extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, audio, openMedia } = this.props;\n        const { playing } = this.state;\n        if (!audio) return null;\n\n        const { album_cover_thumbnail, duration, audio: file } = audio;\n\n        const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={album_cover_thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a className='document-name' onClick={openMedia} title={title}>\n                            {title}\n                        </a>\n                    </div>\n                    <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nAudio.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    audio: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Audio;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getFitSize } from '../../../Utils/Common';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFileSize, getSrc, isGifMimeType } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './Animation.css';\n\nclass Animation extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateAnimationBlob = update => {\n        const { animation } = this.props.animation;\n        const { fileId } = update;\n\n        if (!animation) return;\n\n        if (animation.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateAnimationThumbnailBlob = update => {\n        const { thumbnail } = this.props.animation;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, t } = this.props;\n        const { thumbnail, animation, mime_type, width, height } = this.props.animation;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(animation);\n\n        const isBlurred = isBlurredThumbnail(thumbnail);\n        const isGif = isGifMimeType(mime_type);\n\n        return (\n            <div className='animation' style={style} onClick={openMedia}>\n                {src ? (\n                    isGif ? (\n                        <img className='media-viewer-content-image' style={style} src={src} alt='' />\n                    ) : (\n                        <video\n                            ref={this.videoRef}\n                            className='media-viewer-content-image'\n                            src={src}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                        />\n                    )\n                ) : (\n                    <>\n                        <img\n                            className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                            style={style}\n                            src={thumbnailSrc}\n                            alt=''\n                        />\n                        <div className='animation-meta'>{getFileSize(animation)}</div>\n                    </>\n                )}\n                <FileProgress\n                    file={animation}\n                    download\n                    upload\n                    cancelButton\n                    icon={<div className='animation-play'>{t('AttachGif')}</div>}\n                />\n            </div>\n        );\n    }\n}\n\nAnimation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    animation: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nAnimation.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withTranslation()(Animation);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getUserLetters } from '../../Utils/User';\nimport { loadChatContent } from '../../Utils/File';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './UserTileControl.css';\n\nclass UserTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.userId !== this.props.userId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onClientUpdateUserBlob = update => {\n        const { userId } = this.props;\n\n        if (userId === update.userId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    //console.log('UserTileControl.onClientUpdateChatBlob user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    if (!update.photo) {\n                        //console.log('UserTileControl.onUpdateChatPhoto user_id=' + userId);\n                        this.forceUpdate();\n                    } else {\n                        const store = FileStore.getStore();\n                        loadChatContent(store, chat);\n                    }\n                }\n            }\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId && !chat.photo) {\n                    //console.log('UserTileControl.onUpdateChatTitle user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    handleSelect = event => {\n        const { userId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(userId);\n    };\n\n    render() {\n        const { userId, onSelect } = this.props;\n        let { user } = this.props;\n        if (!userId && !user) return null;\n\n        user = UserStore.get(userId) || user;\n        if (!user) return null;\n\n        const { profile_photo } = user;\n\n        const letters = getUserLetters(user);\n        const blob = profile_photo && profile_photo.small ? FileStore.getBlob(profile_photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n        const tileColor = `tile_color_${(Math.abs(userId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return src ? (\n            <img className={className} src={src} draggable={false} alt='' onClick={this.handleSelect} />\n        ) : (\n            <div className={className} onClick={this.handleSelect}>\n                <span className='tile-text'>{letters}</span>\n            </div>\n        );\n    }\n}\n\nUserTileControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    user: PropTypes.object,\n    onSelect: PropTypes.func\n};\n\nexport default UserTileControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from '../../Tile/UserTileControl';\nimport { formatPhoneNumber } from '../../../Utils/Common';\nimport { getUserFullName } from '../../../Utils/User';\nimport UserStore from '../../../Stores/UserStore';\nimport './Contact.css';\n\nclass Contact extends React.Component {\n    render() {\n        const { contact, openMedia } = this.props;\n        if (!contact) return null;\n\n        const { user_id, first_name, last_name, phone_number } = contact;\n\n        const user = UserStore.get(user_id) || {\n            '@type': 'user',\n            type: { '@type': 'userTypeRegular' },\n            id: user_id,\n            first_name: first_name,\n            last_name: last_name\n        };\n\n        const fullName = getUserFullName(user);\n        const number = formatPhoneNumber(phone_number);\n\n        return (\n            <div className='contact'>\n                <div className='contact-tile'>\n                    <UserTileControl userId={user_id} user={user} />\n                </div>\n                <div className='contact-content'>\n                    <div className='contact-name'>\n                        {user_id > 0 ? <a onClick={openMedia}>{fullName}</a> : <span>{fullName}</span>}\n                    </div>\n                    <div className='contact-phone'>{number}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nContact.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    contact: PropTypes.object.isRequired,\n    openMedia: PropTypes.func\n};\n\nexport default Contact;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getSize, getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_SIZE, PHOTO_DISPLAY_SIZE, PHOTO_THUMBNAIL_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Photo.css';\n\nclass Photo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { photo, size, thumbnailSize } = props;\n        const photoSize = getSize(photo.sizes, size);\n        const thumbnail = getSize(photo.sizes, thumbnailSize);\n\n        this.state = {\n            photoSize: photoSize,\n            thumbnail: thumbnail\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { photoSize } = this.state;\n        const { fileId } = update;\n\n        if (!photoSize) return;\n\n        if (photoSize.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, showProgress, style } = this.props;\n        const { thumbnail, photoSize } = this.state;\n\n        if (!photoSize) return null;\n\n        const src = getSrc(photoSize.photo);\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitPhotoSize = getFitSize(photoSize, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const photoStyle = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height,\n            ...style\n        };\n\n        return (\n            <div className='photo' style={photoStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='photo-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('photo-image', { 'media-blurred': isBlurred })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n                {showProgress && <FileProgress file={photoSize.photo} download upload cancelButton />}\n            </div>\n        );\n    }\n}\n\nPhoto.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n    showProgress: PropTypes.bool,\n\n    size: PropTypes.number,\n    thumbnailSize: PropTypes.number,\n    displaySize: PropTypes.number,\n    style: PropTypes.object\n};\n\nPhoto.defaultProps = {\n    size: PHOTO_SIZE,\n    thumbnailSize: PHOTO_THUMBNAIL_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    showProgress: true\n};\n\nexport default Photo;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst borderStyle = theme => ({\n    borderColor: {\n        borderColor: theme.palette.divider\n    }\n});\n\nconst accentStyles = theme => ({\n    accentColorDark: {\n        color: theme.palette.primary.main\n    },\n    accentBackgroundLight: {\n        background: theme.palette.primary.light\n    }\n});\n\nexport { borderStyle, accentStyles };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Photo from './Photo';\nimport Animation from './Animation';\nimport { accentStyles } from '../../Theme';\nimport { getFormattedText } from '../../../Utils/Message';\nimport { getFitSize, getSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Game.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Game extends React.Component {\n    getContent = () => {\n        const { chatId, messageId, game, size, displaySize, openMedia } = this.props;\n        if (!game) return null;\n\n        const { photo, animation } = game;\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />;\n            }\n        }\n\n        if (photo) {\n            let style = {\n                width: 0,\n                height: 0\n            };\n            const photoSize = getSize(photo.sizes, size);\n            if (photoSize) {\n                const fitPhotoSize = getFitSize(photoSize, displaySize);\n                if (fitPhotoSize) {\n                    style.width = fitPhotoSize.width;\n                    style.height = fitPhotoSize.height;\n                }\n            }\n\n            return <Photo chatId={chatId} messageId={messageId} photo={photo} style={style} openMedia={openMedia} />;\n        }\n\n        return null;\n    };\n\n    render() {\n        const { classes, game } = this.props;\n        if (!game) return null;\n\n        const { title, text, description } = game;\n        const formattedText = getFormattedText(text);\n\n        return (\n            <div className='game'>\n                <div className={classNames('game-border', classes.accentBackgroundLight)} />\n                <div className='game-wrapper'>\n                    {title && <div className={classNames('game-title', classes.accentColorDark)}>{title}</div>}\n                    {formattedText && <div className='game-text'>{formattedText}</div>}\n                    {description && <div className='game-description'>{description}</div>}\n                    {this.getContent()}\n                </div>\n            </div>\n        );\n    }\n}\n\nGame.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    game: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nGame.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withStyles(styles)(Game);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { getLocationId } from '../../../Utils/Message';\nimport { getSrc } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './Location.css';\n\nclass Location extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    onClientUpdateLocationBlob = update => {\n        const { fileId } = update;\n        const { location } = this.props;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        if (!file) return;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { location } = this.props;\n        if (!location) return null;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        const src = getSrc(file);\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <a href={source} target='_blank' rel='noopener noreferrer'>\n                <div className='location-wrapper'>\n                    <img className='location-image' draggable={false} alt={source} src={src} />\n                    <div className='location-icon'>\n                        <RoomIcon fontSize='large' color='primary' />\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n\nLocation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    location: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Location;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Radio from '@material-ui/core/Radio';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport './PollRadio.css';\n\nconst styles = {\n    progressRoot: {\n        position: 'absolute',\n        top: 8,\n        left: 8,\n        pointerEvents: 'none'\n    },\n    radioRoot: {\n        padding: 6\n    },\n    icon: {\n        color: 'transparent'\n    }\n};\n\nclass PollRadio extends React.Component {\n    render() {\n        const { classes, chosen, beingChosen, hidden, onChange } = this.props;\n\n        return (\n            <div className={classNames('poll-radio', { 'poll-radio-hidden': hidden })}>\n                <Radio\n                    classes={{ root: classes.radioRoot }}\n                    color='primary'\n                    checked={chosen || beingChosen}\n                    onChange={onChange}\n                    checkedIcon={<RadioButtonCheckedIcon classes={{ root: beingChosen ? classes.icon : null }} />}\n                />\n                {beingChosen && <CircularProgress size={20} thickness={4.4} classes={{ root: classes.progressRoot }} />}\n            </div>\n        );\n    }\n}\n\nPollRadio.propTypes = {\n    chosen: PropTypes.bool.isRequired,\n    beingChosen: PropTypes.bool.isRequired,\n    hidden: PropTypes.bool\n};\n\nexport default withStyles(styles)(PollRadio);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ANIMATION_DURATION_200MS } from './../../../Constants';\nimport './PollPercentage.css';\n\nclass PollPercentage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handle = null;\n\n        const { value } = props;\n\n        this.state = {\n            from: value,\n            to: value,\n            animated: value,\n\n            prevPropsValue: value\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { closed, value } = this.props;\n        const { animated } = this.state;\n\n        if (closed !== nextProps.closed) {\n            return true;\n        }\n\n        if (value !== nextProps.value) {\n            return true;\n        }\n\n        if (animated !== nextState.animated) {\n            return true;\n        }\n\n        return false;\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.value !== state.prevPropsValue) {\n            return {\n                startTime: Date.now(),\n                from: state.animated,\n                to: props.value,\n\n                prevPropsValue: props.value\n            };\n        }\n\n        return null;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevProps.value !== this.props.value) {\n            this.updateAnimation();\n        }\n    }\n\n    componentWillUnmount() {\n        this.stopAnimation();\n    }\n\n    updateAnimation = () => {\n        this.stopAnimation();\n\n        this.handle = requestAnimationFrame(this.onAnimationFrame);\n    };\n\n    stopAnimation = () => {\n        if (!this.handle) return;\n\n        cancelAnimationFrame(this.handle);\n        this.handle = null;\n    };\n\n    onAnimationFrame = () => {\n        const { startTime, from, to } = this.state;\n\n        const timePassed = Date.now() - startTime;\n\n        if (timePassed >= ANIMATION_DURATION_200MS) {\n            this.setState({ animated: to });\n            this.stopAnimation();\n        } else {\n            const animated = from + Math.floor(((to - from) * timePassed) / ANIMATION_DURATION_200MS);\n            this.setState({ animated });\n            this.handle = requestAnimationFrame(this.onAnimationFrame);\n        }\n    };\n\n    render() {\n        const { chosen, closed, onClick } = this.props;\n        const { animated } = this.state;\n\n        return (\n            <div className={classNames('poll-percentage', { 'poll-percentage-subtitle': !chosen })}>\n                {!closed && chosen ? (\n                    <a className='poll-percentage-action' onClick={onClick}>\n                        {animated + '%'}\n                    </a>\n                ) : (\n                    <>{animated + '%'}</>\n                )}\n            </div>\n        );\n    }\n}\n\nPollPercentage.propTypes = {\n    value: PropTypes.number.isRequired,\n    chosen: PropTypes.bool,\n    closed: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default PollPercentage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport PollRadio from './PollRadio';\nimport PollPercentage from './PollPercentage';\nimport { borderStyle } from '../../Theme';\nimport './PollOption.css';\n\nconst styles = theme => ({\n    progressRoot: {\n        backgroundColor: 'transparent',\n        margin: '2px 0 0 38px',\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        bottom: 0\n    },\n    progressBar: {\n        transition: 'transform .2s linear'\n    },\n    ...borderStyle(theme)\n});\n\nclass PollOption extends React.Component {\n    getTitleString = (count, t = key => key) => {\n        const { canBeSelected } = this.props;\n        if (canBeSelected) return null;\n\n        if (!count) return t('NoVotes').toLowerCase();\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleClick = event => {\n        const { canBeSelected, onVote } = this.props;\n        if (!canBeSelected) return;\n\n        event.stopPropagation();\n\n        onVote();\n    };\n\n    handleCancel = event => {\n        const { onUnvote } = this.props;\n\n        event.stopPropagation();\n\n        onUnvote();\n    };\n\n    render() {\n        const { classes, option, onChange, canBeSelected, closed, maxVoterCount, t } = this.props;\n        if (!option) return null;\n\n        const { text, voter_count, vote_percentage, is_chosen, is_being_chosen } = option;\n\n        let value = 1.5;\n        if (voter_count) {\n            value = (voter_count / maxVoterCount) * 100;\n        }\n\n        return (\n            <div className='poll-option' onClick={this.handleClick}>\n                <div\n                    className={classNames(\n                        'poll-option-wrapper',\n                        canBeSelected ? 'poll-option-unselected' : 'poll-option-selected'\n                    )}>\n                    <div className='poll-option-text-wrapper' title={this.getTitleString(voter_count, t)}>\n                        <PollPercentage\n                            value={vote_percentage}\n                            chosen={is_chosen}\n                            closed={closed}\n                            onClick={this.handleCancel}\n                        />\n                        <PollRadio\n                            hidden={!canBeSelected}\n                            chosen={is_chosen}\n                            beingChosen={is_being_chosen}\n                            onChange={onChange}\n                        />\n                        <div className='poll-option-text'>{text}</div>\n                    </div>\n                </div>\n                <div className={classNames('poll-option-bottom-border', { [classes.borderColor]: canBeSelected })} />\n                <LinearProgress\n                    classes={{ root: classes.progressRoot, bar: classes.progressBar }}\n                    color='primary'\n                    variant='determinate'\n                    value={canBeSelected ? 0 : Math.max(1.5, value)}\n                />\n            </div>\n        );\n    }\n}\n\nPollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onVote: PropTypes.func.isRequired,\n    onUnvote: PropTypes.func.isRequired,\n    canBeSelected: PropTypes.bool,\n    closed: PropTypes.bool,\n    maxVoterCount: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(PollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Popover from '@material-ui/core/Popover';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport PollOption from './PollOption';\nimport { cancelPollAnswer, setPollAnswer, stopPoll } from '../../../Actions/Poll';\nimport MessageStore from './../../../Stores/MessageStore';\nimport './Poll.css';\n\nclass Poll extends React.Component {\n    state = {\n        dialog: false,\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    getTotalVoterCountString = (count, t = key => key) => {\n        if (!count) return t('NoVotes');\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleVote = index => {\n        const { chatId, messageId } = this.props;\n\n        setPollAnswer(chatId, messageId, [index]);\n    };\n\n    handleUnvote = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId, poll } = this.props;\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.handleCloseContextMenu();\n        }\n\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        cancelPollAnswer(chatId, messageId);\n    };\n\n    handleStopPoll = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n        const { dialog } = this.state;\n\n        if (dialog) {\n            this.setState({ dialog: false });\n        }\n\n        stopPoll(chatId, messageId);\n    };\n\n    handleDialog = event => {\n        const { dialog } = this.state;\n        if (dialog) return;\n\n        this.setState({\n            dialog: true,\n            contextMenu: false\n        });\n    };\n\n    handleCloseDialog = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ dialog: false });\n    };\n\n    handleContextMenu = event => {\n        const { poll } = this.props;\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            this.setState({\n                contextMenu: true,\n                left: event.clientX,\n                top: event.clientY\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    render() {\n        const { chatId, messageId, poll, t } = this.props;\n        const { left, top, contextMenu, dialog } = this.state;\n        const { question, options, total_voter_count, is_closed } = poll;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const canUnvote = !is_closed && options.some(x => x.is_chosen || x.is_being_chosen);\n        const canStopPoll = message && message.can_be_edited;\n        const canBeSelected = !is_closed && options.every(x => !x.is_chosen);\n        const maxVoterCount = Math.max(...options.map(x => x.voter_count));\n\n        return (\n            <div className='poll' onContextMenu={this.handleContextMenu}>\n                <div className='poll-question'>\n                    <span className='poll-question-title'>{question}</span>\n                    <span className='subtitle'>{is_closed ? t('FinalResults') : t('AnonymousPoll')}</span>\n                </div>\n                <div className='poll-options'>\n                    {options.map((x, index) => (\n                        <PollOption\n                            key={index}\n                            option={x}\n                            canBeSelected={canBeSelected}\n                            closed={is_closed}\n                            maxVoterCount={maxVoterCount}\n                            onVote={() => this.handleVote(index)}\n                            onUnvote={this.handleUnvote}\n                        />\n                    ))}\n                </div>\n                <div className='poll-total-count subtitle'>{this.getTotalVoterCountString(total_voter_count, t)}</div>\n                <Popover\n                    open={contextMenu && (canUnvote || canStopPoll)}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}>\n                    <MenuList onClick={e => e.stopPropagation()}>\n                        {canUnvote && <MenuItem onClick={this.handleUnvote}>{t('Unvote')}</MenuItem>}\n                        {canStopPoll && <MenuItem onClick={this.handleDialog}>{t('StopPoll')}</MenuItem>}\n                    </MenuList>\n                </Popover>\n                <Dialog\n                    transitionDuration={0}\n                    open={dialog}\n                    onClose={this.handleCloseDialog}\n                    aria-labelledby='form-dialog-title'>\n                    <DialogTitle id='form-dialog-title'>{t('StopPollAlertTitle')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>{t('StopPollAlertText')}</DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDialog} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handleStopPoll} color='primary'>\n                            {t('Stop')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nPoll.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    poll: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default withTranslation()(Poll);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function setPollAnswer(chatId, messageId, optionIds) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: optionIds\n    });\n}\n\nexport function cancelPollAnswer(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: []\n    });\n}\n\nexport function stopPoll(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'stopPoll',\n        chat_id: chatId,\n        message_id: messageId,\n        reply_markup: null\n    });\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { STICKER_DISPLAY_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Sticker.css';\n\nclass Sticker extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.on('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.removeListener('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    onClientUpdateStickerBlob = update => {\n        const { sticker } = this.props.sticker;\n        const { fileId } = update;\n\n        if (!sticker) return;\n\n        if (sticker.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateStickerThumbnailBlob = update => {\n        const { thumbnail } = this.props.sticker;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { className, displaySize, blur, sticker: source, style, openMedia } = this.props;\n        const { thumbnail, sticker, width, height } = source;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(sticker);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitSize = getFitSize({ width: width, height: height }, displaySize);\n        if (!fitSize) return null;\n\n        const stickerStyle = {\n            width: fitSize.width,\n            height: fitSize.height,\n            ...style\n        };\n\n        return (\n            <div className={classNames('sticker', className)} style={stickerStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='sticker-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('sticker-image', { 'media-blurred': isBlurred && blur })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nSticker.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number,\n    sticker: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n    blur: PropTypes.bool,\n    displaySize: PropTypes.number\n};\n\nSticker.defaultProps = {\n    chatId: 0,\n    messageId: 0,\n    openMedia: () => {},\n    blur: true,\n    displaySize: STICKER_DISPLAY_SIZE\n};\n\nexport default Sticker;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Location from './Location';\nimport './Venue.css';\n\nclass Venue extends React.Component {\n    render() {\n        const { chatId, messageId, venue, openMedia } = this.props;\n        if (!venue) return null;\n\n        const { title, address, location } = venue;\n        if (!location) return null;\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <div className='venue'>\n                <Location chatId={chatId} messageId={messageId} location={location} openMedia={openMedia} />\n                <div className='venue-content'>\n                    <a href={source} target='_blank' rel='noopener noreferrer'>\n                        <div className='venue-title'>{title}</div>\n                    </a>\n                    <div className='venue-subtitle'>{address}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVenue.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    venue: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Venue;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { getFitSize, getDurationString } from '../../../Utils/Common';\nimport { getFileSize } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Video.css';\n\nclass Video extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    onClientUpdateVideoThumbnailBlob = update => {\n        const { thumbnail } = this.props.video;\n        const { fileId } = update;\n\n        if (!thumbnail) return;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia } = this.props;\n        const { thumbnail, video, width, height, duration } = this.props.video;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const file = thumbnail ? thumbnail.photo : null;\n        const blob = file ? FileStore.getBlob(file.id) || file.blob : null;\n        const src = FileStore.getBlobUrl(blob);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        return (\n            <div className='video' style={style} onClick={openMedia}>\n                <img\n                    className={classNames('video-preview', { 'media-blurred': isBlurred })}\n                    style={style}\n                    src={src}\n                    alt=''\n                />\n                <div className='video-play'>\n                    <PlayArrowIcon />\n                </div>\n                <div className='video-meta'>{getDurationString(duration) + ' ' + getFileSize(video)}</div>\n            </div>\n        );\n    }\n}\n\nVideo.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    video: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideo.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default Video;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isContentOpened } from '../../../Utils/Message';\nimport MessageStore from '../../../Stores/MessageStore';\n\nclass MediaStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            isOpened: isContentOpened(chatId, messageId)\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    onUpdateMessageContentOpened = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chat_id && messageId === update.message_id) {\n            this.setState({ isOpened: isContentOpened(chatId, messageId) });\n        }\n    };\n\n    render() {\n        const { icon, openedIcon } = this.props;\n        const { isOpened } = this.state;\n\n        return isOpened ? openedIcon : icon;\n    }\n}\n\nMediaStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    icon: PropTypes.node,\n    openedIcon: PropTypes.node\n};\n\nMediaStatus.defaultProps = {\n    icon: null,\n    openedIcon: null\n};\n\nexport default MediaStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FileProgress from '../../Viewer/FileProgress';\nimport MediaStatus from './MediaStatus';\nimport { getFileSize, getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getDurationString } from '../../../Utils/Common';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './VideoNote.css';\n\nconst circleStyle = {\n    circle: 'video-note-progress-circle'\n};\n\nclass VideoNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { chatId, messageId } = props;\n        const { video } = props.videoNote;\n\n        const { time, message, videoStream } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            srcObject: active ? videoStream : null,\n            src: getSrc(video),\n            currentTime: active && time ? time.currentTime : 0.0,\n            videoDuration: active && time ? time.duration : 0.0\n        };\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    updateVideoSrc() {\n        const { srcObject, src } = this.state;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        if (srcObject) {\n            //player.scr = null;\n            player.srcObject = srcObject;\n            return;\n        }\n\n        const stream = player.srcObject;\n        if (stream) {\n            //console.log('clientUpdate release srcObject');\n            const tracks = stream.getTracks();\n\n            tracks.forEach(track => {\n                //console.log('clientUpdate release track');\n                track.stop();\n            });\n        }\n\n        if (player.srcObject) {\n            //console.log('clientUpdate release video.srcObject');\n            player.srcObject = null;\n        }\n        if (player.src !== src) {\n            player.src = src;\n        }\n    }\n\n    componentDidMount() {\n        this.updateVideoSrc();\n\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                if (this.state.active) {\n                    return;\n                }\n\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaCaptureStream = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({ srcObject: update.stream }, () => {\n                    this.updateVideoSrc();\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({\n                    currentTime: update.currentTime,\n                    videoDuration: update.duration\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n        const { video } = this.props.videoNote;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (this.state.active) {\n            } else {\n                this.setState({\n                    active: true,\n                    currentTime: null\n                });\n            }\n        } else if (this.state.active) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteBlob = update => {\n        const { video } = this.props.videoNote;\n        const { fileId } = update;\n\n        if (!video) return;\n\n        if (video.id === fileId) {\n            this.setState(\n                {\n                    src: getSrc(video)\n                },\n                () => {\n                    this.updateVideoSrc();\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteThumbnailBlob = update => {\n        const { thumbnail } = this.props.videoNote;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleCanPlay = () => {\n        // const player = this.videoRef.current;\n        // if (player){\n        //     if (this.state.active){\n        //         player.muted = false;\n        //     }\n        //     else{\n        //         player.muted = true;\n        //     }\n        // }\n    };\n\n    render() {\n        const { displaySize, chatId, messageId, openMedia } = this.props;\n        const { active, currentTime, videoDuration } = this.state;\n        const { thumbnail, video, duration } = this.props.videoNote;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const style = { width: 200, height: 200 };\n        if (!style) return null;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(video);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        let progress = 0;\n        if (videoDuration && currentTime) {\n            const progressTime = currentTime + 0.25;\n            progress = (progressTime / videoDuration) * 100;\n        }\n\n        return (\n            <div\n                className={classNames('video-note', { 'video-note-playing': active })}\n                style={style}\n                onClick={openMedia}>\n                {src ? (\n                    <>\n                        <video\n                            ref={this.videoRef}\n                            className={classNames('media-viewer-content-image', 'video-note-round')}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                            onCanPlay={this.handleCanPlay}\n                        />\n                        <div className='video-note-player'>\n                            <div className='video-note-progress'>\n                                <CircularProgress\n                                    classes={circleStyle}\n                                    variant='static'\n                                    value={progress}\n                                    size={200}\n                                    thickness={1}\n                                />\n                            </div>\n                            <div className='animation-meta'>\n                                {getDurationString(active ? Math.floor(currentTime) : duration)}\n                                <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                            </div>\n                            <div className='video-note-muted'>\n                                <VolumeOffIcon />\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='video-note-round'>\n                            <img\n                                className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                                style={style}\n                                src={thumbnailSrc}\n                                alt=''\n                            />\n                        </div>\n                        <div className='animation-meta'>\n                            {getDurationString(duration) + ' ' + getFileSize(video)}\n                            <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                        </div>\n                        <div className='video-note-muted'>\n                            <VolumeOffIcon />\n                        </div>\n                    </>\n                )}\n                <FileProgress file={video} download upload cancelButton icon={<ArrowDownwardIcon />} />\n            </div>\n        );\n    }\n}\n\nVideoNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    videoNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideoNote.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default VideoNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Slider from '@material-ui/lab/Slider';\nimport { PLAYER_PROGRESS_TIMEOUT_MS } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNoteSlider.css';\n\nconst styles = {\n    slider: {\n        maxWidth: 216\n    },\n    track: {\n        transition: 'width 0ms linear 0ms, height 0ms linear 0ms, transform 0ms linear 0ms'\n    },\n    thumbWrapper: {\n        transition: 'transform 0ms linear 0ms'\n    },\n    thumb: {\n        transition: 'transform 0ms linear 0ms, box-shadow 0ms linear 0ms'\n    }\n};\n\nclass VoiceNoteSlider extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            value: this.getValue(currentTime, audioDuration, active)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, value } = this.state;\n\n        if (nextState.value !== value) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    reset = () => {\n        const { duration } = this.props;\n        const { value } = this.state;\n\n        if (value === 1) {\n            this.setState({\n                active: false,\n                currentTime: 0\n            });\n\n            setTimeout(() => {\n                const { currentTime } = this.state;\n                if (!currentTime) {\n                    this.setState({\n                        value: this.getValue(0, duration, false)\n                    });\n                }\n            }, PLAYER_PROGRESS_TIMEOUT_MS);\n        } else {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                value: this.getValue(0, duration, false)\n            });\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.reset();\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                value: this.getValue(update.currentTime, update.duration || duration, active)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                value: this.getValue(active ? currentTime : 0, duration, true)\n            });\n        } else if (active) {\n            this.reset();\n        }\n    };\n\n    getValue = (currentTime, duration, active) => {\n        return active ? currentTime / duration : 0;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { value } = this.state;\n\n        return (\n            <div className='voice-note-slider'>\n                <Slider\n                    className={classes.slider}\n                    classes={{\n                        track: classes.track,\n                        thumbWrapper: classes.thumbWrapper,\n                        thumb: classes.thumb\n                    }}\n                    min={0}\n                    max={1}\n                    value={value}\n                />\n            </div>\n        );\n    }\n}\n\nVoiceNoteSlider.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(VoiceNoteSlider);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport MediaStatus from './MediaStatus';\nimport VoiceNoteSlider from './VoiceNoteSlider';\nimport FileProgress from '../../Viewer/FileProgress';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNote.css';\n\nclass VoiceNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, voiceNote, openMedia, classes } = this.props;\n        const { playing } = this.state;\n        if (!voiceNote) return null;\n\n        const { duration, voice: file } = voiceNote;\n\n        //const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={null}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='voice-note-content'>\n                    <VoiceNoteSlider chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                    <div className='voice-note-meta'>\n                        <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                        <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0'} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVoiceNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    voiceNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default VoiceNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function openUser(userId, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenUser',\n        userId,\n        popup\n    });\n}\n\nexport function openChat(chatId, messageId = null, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenChat',\n        chatId,\n        messageId,\n        popup\n    });\n}\n\nexport function highlightMessage(chatId, messageId) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageHighlighted',\n        chatId,\n        messageId\n    });\n}\n\nexport function selectMessage(chatId, messageId, selected) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageSelected',\n        chatId,\n        messageId,\n        selected\n    });\n}\n","\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass Currency{\n    constructor(){\n        this.list = new Map([\n            [\"AED\", \".\"],\n            [\"AFN\", \"\"],\n            [\"ARS\", \"$\"],\n            [\"AUD\", \"$\"],\n            [\"AZN\", \"\"],\n            [\"BND\", \"B$\"],\n            [\"BRL\", \"R$\"],\n            [\"CAD\", \"$\"],\n            [\"CHF\", \"Fr\"],\n            [\"CLP\", \"$\"],\n            [\"CNY\", \"\"],\n            [\"COP\", \"$\"],\n            [\"EGP\", \"E\"],\n            [\"EUR\", \"\"],\n            [\"GBP\", \"\"],\n            [\"HKD\", \"$\"],\n            [\"IDR\", \"Rp\"],\n            [\"ILS\", \"\"],\n            [\"INR\", \"\"],\n            [\"ISK\", \"kr\"],\n            [\"JPY\", \"\"],\n            [\"KRW\", \"\"],\n            [\"KZT\", \"\"],\n            [\"MXN\", \"$\"],\n            [\"MYR\", \"RM\"],\n            [\"NOK\", \"kr\"],\n            [\"NZD\", \"$\"],\n            [\"PHP\", \"\"],\n            [\"RUB\", \"\"],\n            [\"SAR\", \"SR\"],\n            [\"SEK\", \"kr\"],\n            [\"SGD\", \"$\"],\n            [\"TRY\", \"\"],\n            [\"TTD\", \"$\"],\n            [\"TWD\", \"$\"],\n            [\"TZS\", \"TSh\"],\n            [\"UAH\", \"\"],\n            [\"UGX\", \"USh\"],\n            [\"USD\", \"$\"],\n            [\"UYU\", \"$\"],\n            [\"VND\", \"\"],\n            [\"YER\", \"\"],\n            [\"ZAR\", \"R\"],\n            [\"IRR\", \"\"],\n            [\"IQD\", \".\"],\n            [\"VEF\", \"Bs.F.\"]\n        ]);\n    }\n\n    get(currency){\n        return this.list.get(currency);\n    }\n\n    set(currency, symbol){\n        this.list.set(currency, symbol);\n    }\n\n    getPow(currency){\n        if (currency === 'CLF'){\n            return 4;\n        }\n        if (['BHD', 'IQD', 'JOD', 'KWD', 'LYD', 'OMR', 'TND'].includes(currency)){\n            return 3;\n        }\n        if (['BIF', 'BYR', 'CLP', 'CVE', 'DJF', 'GNF', 'ISK', 'JPY', 'KMF', 'KRW', 'MGA', 'PYG', 'RWF', 'UGX', 'UYI', 'VND', 'VUV', 'XAF', 'XOF', 'XPF'].includes(currency)){\n            return 0;\n        }\n        if (currency === 'MRO'){\n            return 1;\n        }\n\n        return 2;\n    }\n\n    getString(totalAmount, currency){\n        const amount = (totalAmount/Math.pow(10.0, this.getPow(currency))).toFixed(2);\n        return `${amount} ${this.get(currency)}`;\n    }\n}\n\nlet currency = new Currency();\nexport default currency;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport { getUserFullName } from '../../Utils/User';\nimport { getChatTitle, isPrivateChat } from '../../Utils/Chat';\nimport { openUser as openUserCommand, openChat as openChatCommand } from '../../Actions/Client';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageAuthor.css';\n\nclass MessageAuthor extends React.Component {\n    handleSelect = event => {\n        const { chatId, userId, openUser, openChat } = this.props;\n\n        if (openUser && userId) {\n            event.stopPropagation();\n\n            openUserCommand(userId, true);\n            return;\n        }\n\n        if (openChat && chatId) {\n            event.stopPropagation();\n\n            openChatCommand(chatId, null, true);\n            return;\n        }\n    };\n\n    render() {\n        const { t, chatId, userId, openUser, openChat } = this.props;\n\n        const user = UserStore.get(userId);\n        if (user) {\n            const tileColor = isPrivateChat(chatId)\n                ? 'message-author-color'\n                : `user_color_${(Math.abs(userId) % 8) + 1}`;\n            const className = classNames([tileColor], 'message-author');\n\n            const fullName = getUserFullName(user);\n\n            return openUser ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (chat) {\n            const className = classNames('message-author-color', 'message-author');\n\n            const fullName = getChatTitle(chatId, false, t);\n\n            return openChat ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        return null;\n    }\n}\n\nMessageAuthor.propTypes = {\n    chatId: PropTypes.number,\n    userId: PropTypes.number,\n    openUser: PropTypes.bool,\n    openChat: PropTypes.bool\n};\n\nMessageAuthor.defaultProps = {\n    openUser: false,\n    openChat: false\n};\n\nexport default withTranslation()(MessageAuthor);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Currency from './Currency';\nimport MessageAuthor from '../Components/Message/MessageAuthor';\nimport ChatStore from '../Stores/ChatStore';\nimport UserStore from '../Stores/UserStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport MessageStore from '../Stores/MessageStore';\n\nlet serviceMap = new Map();\nserviceMap.set('messageBasicGroupChatCreate', 'messageBasicGroupChatCreate');\nserviceMap.set('messageChatAddMembers', 'messageChatAddMembers');\nserviceMap.set('messageChatChangePhoto', 'messageChatChangePhoto');\nserviceMap.set('messageChatChangeTitle', 'messageChatChangeTitle');\nserviceMap.set('messageChatDeleteMember', 'messageChatDeleteMember');\nserviceMap.set('messageChatDeletePhoto', 'messageChatDeletePhoto');\nserviceMap.set('messageChatJoinByLink', 'messageChatJoinByLink');\nserviceMap.set('messageChatSetTtl', 'messageChatSetTtl');\nserviceMap.set('messageChatUpgradeFrom', 'messageChatUpgradeFrom');\nserviceMap.set('messageChatUpgradeTo', 'messageChatUpgradeTo');\nserviceMap.set('messageContactRegistered', 'messageContactRegistered');\nserviceMap.set('messageCustomServiceAction', 'messageCustomServiceAction');\nserviceMap.set('messageGameScore', 'messageGameScore');\nserviceMap.set('messagePassportDataReceived', 'messagePassportDataReceived');\nserviceMap.set('messagePassportDataSent', 'messagePassportDataSent');\nserviceMap.set('messagePaymentSuccessful', 'messagePaymentSuccessful');\nserviceMap.set('messagePaymentSuccessfulBot', 'messagePaymentSuccessfulBot');\nserviceMap.set('messagePinMessage', 'messagePinMessage');\nserviceMap.set('messageScreenshotTaken', 'messageScreenshotTaken');\nserviceMap.set('messageSupergroupChatCreate', 'messageSupergroupChatCreate');\nserviceMap.set('messageUnsupported', 'messageUnsupported');\nserviceMap.set('messageWebsiteConnected', 'messageWebsiteConnected');\n\nfunction isServiceMessage(message) {\n    if (!message) return false;\n    if (!message.content) return false;\n\n    return serviceMap.has(message.content['@type']) || message.ttl > 0;\n}\n\nfunction getTTLString(ttl) {\n    if (ttl < 60) {\n        const seconds = ttl === 1 ? 'second' : 'seconds';\n        return `${ttl} ${seconds}`;\n    }\n    if (ttl < 60 * 60) {\n        const minutes = Math.floor(ttl / 60) === 1 ? 'minute' : 'minutes';\n        return `${ttl} ${minutes}`;\n    }\n    if (ttl < 24 * 60 * 60) {\n        const hours = Math.floor(ttl / 60 / 60) === 1 ? 'hour' : 'hours';\n        return `${ttl} ${hours}`;\n    }\n    if (ttl < 7 * 24 * 60 * 60) {\n        const days = Math.floor(ttl / 60 / 60 / 24) === 1 ? 'day' : 'days';\n        return `${ttl} ${days}`;\n    }\n    if (ttl === 7 * 24 * 60 * 60) {\n        return '1 week';\n    }\n\n    return `${ttl} seconds`;\n}\n\nfunction getPassportElementTypeString(type) {\n    switch (type['@type']) {\n        case 'passportElementTypeAddress': {\n            return 'Address';\n        }\n        case 'passportElementTypeBankStatement': {\n            return 'Bank Statement';\n        }\n        case 'passportElementTypeDriverLicense': {\n            return 'Driver Licence';\n        }\n        case 'passportElementTypeEmailAddress': {\n            return 'Email';\n        }\n        case 'passportElementTypeIdentityCard': {\n            return 'Identity Card';\n        }\n        case 'passportElementTypeInternalPassport': {\n            return 'Internal Passport';\n        }\n        case 'passportElementTypePassport': {\n            return 'Passport';\n        }\n        case 'passportElementTypePassportRegistration': {\n            return 'Passport Registration';\n        }\n        case 'passportElementTypePersonalDetails': {\n            return 'Personal details';\n        }\n        case 'passportElementTypePhoneNumber': {\n            return 'Phone Number';\n        }\n        case 'passportElementTypeRentalAgreement': {\n            return 'Tenancy Agreement';\n        }\n        case 'passportElementTypeTemporaryRegistration': {\n            return 'Temporary Registration';\n        }\n        case 'passportElementTypeUtilityBill': {\n            return 'Utility Bill';\n        }\n    }\n\n    return '';\n}\n\nfunction getMessageAuthor(message, openUser) {\n    if (!message) return null;\n\n    const { chat_id, sender_user_id } = message;\n\n    if (sender_user_id !== 0) {\n        return <MessageAuthor userId={sender_user_id} openUser={openUser} />;\n    }\n\n    const chat = ChatStore.get(chat_id);\n    if (!chat) return null;\n\n    return chat.title;\n}\n\nfunction getServiceMessageContent(message, openUser = false) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    const isOutgoing = message.sender_user_id === UserStore.getMyId();\n    const chat = ChatStore.get(message.chat_id);\n    const isChannel = chat.type['@type'] === 'chatTypeSupergroup' && chat.type.is_channel;\n\n    const { ttl, sender_user_id, content } = message;\n    if (ttl > 0) {\n        switch (content['@type']) {\n            case 'messagePhoto': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing photo. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing photo. Please view it on your mobile'}\n                    </>\n                );\n            }\n            case 'messageVideo': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing video. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing video. Please view it on your mobile'}\n                    </>\n                );\n            }\n            default: {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing message. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing message. Please view it on your mobile'}\n                    </>\n                );\n            }\n        }\n    }\n\n    switch (content['@type']) {\n        case 'messageBasicGroupChatCreate': {\n            const { title } = ChatStore.get(message.chat_id);\n\n            if (isOutgoing) {\n                return `You created group ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group ${title}`}\n                </>\n            );\n        }\n        case 'messageChatAddMembers': {\n            const members = content.member_user_ids\n                .map(x => <MessageAuthor key={x} userId={x} openUser={openUser} />)\n                .reduce((accumulator, current, index, array) => {\n                    const separator = index === array.length - 1 ? ' and ' : ', ';\n                    return accumulator === null ? [current] : [...accumulator, separator, current];\n                }, null);\n\n            if (isOutgoing) {\n                return content.member_user_ids.length === 1 && content.member_user_ids[0] === UserStore.getMyId() ? (\n                    'You joined the group'\n                ) : (\n                    <>\n                        {'You added '}\n                        {members}\n                    </>\n                );\n            }\n\n            return content.member_user_ids.length === 1 && content.member_user_ids[0] === message.sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' added '}\n                    {members}\n                </>\n            );\n        }\n        case 'messageChatChangePhoto': {\n            if (isChannel) {\n                return 'Channel photo updated';\n            }\n\n            if (isOutgoing) {\n                return 'You updated group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` updated group photo`}\n                </>\n            );\n        }\n        case 'messageChatChangeTitle': {\n            const { title } = content;\n\n            if (isChannel) {\n                return `Channel name was changed to ${title}`;\n            }\n\n            if (isOutgoing) {\n                return `You changed group name to ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` changed group name to ${title}`}\n                </>\n            );\n        }\n        case 'messageChatDeleteMember': {\n            if (isOutgoing) {\n                return content.user_id === UserStore.getMyId() ? (\n                    'You left the group'\n                ) : (\n                    <>\n                        {'You removed '}\n                        <MessageAuthor userId={content.user_id} openUser={openUser} />\n                    </>\n                );\n            }\n\n            return content.user_id === sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' left the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed '}\n                    <MessageAuthor userId={content.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messageChatDeletePhoto': {\n            if (isChannel) {\n                return 'Channel photo removed';\n            }\n\n            if (isOutgoing) {\n                return 'You removed group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed group photo'}\n                </>\n            );\n        }\n        case 'messageChatJoinByLink': {\n            if (isOutgoing) {\n                return 'You joined the group via invite link';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group via invite link'}\n                </>\n            );\n        }\n        case 'messageChatSetTtl': {\n            const { ttl } = content;\n            const ttlString = getTTLString(ttl);\n\n            if (ttl <= 0) {\n                if (isOutgoing) {\n                    return 'You disabled the self-destruct timer';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' disabled the self-destruct timer'}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You set the self-destruct timer to ${ttlString}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` set the self-destruct timer to ${ttlString}`}\n                </>\n            );\n        }\n        case 'messageChatUpgradeFrom': {\n            return 'The group was upgraded to a supergroup';\n        }\n        case 'messageChatUpgradeTo': {\n            return 'Group migrated to a supergroup';\n        }\n        case 'messageContactRegistered': {\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' just joined Telegram'}\n                </>\n            );\n        }\n        case 'messageCustomServiceAction': {\n            return content.text;\n        }\n        case 'messageGameScore': {\n            const messageGame = MessageStore.get(message.chat_id, content.game_message_id);\n            if (\n                messageGame &&\n                messageGame.content &&\n                messageGame.content['@type'] === 'messageGame' &&\n                messageGame.content.game\n            ) {\n                const { game } = messageGame.content;\n\n                if (isOutgoing) {\n                    return `You scored ${content.score} in ${game.title}`;\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={messageGame.sender_user_id} openUser={openUser} />\n                        {` scored ${content.score} in ${game.title}`}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You scored ${content.score}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` scored ${content.score}`}\n                </>\n            );\n        }\n        case 'messagePassportDataReceived': {\n            return 'Telegram Passport data received';\n        }\n        case 'messagePassportDataSent': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const passportElementTypes = content.types\n                .map(x => getPassportElementTypeString(x))\n                .reduce((accumulator, current) => {\n                    return accumulator === null ? [current] : [...accumulator, ', ', current];\n                }, null);\n\n            return (\n                <>\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                    {' received the following documents: '}\n                    {passportElementTypes}\n                </>\n            );\n        }\n        case 'messagePaymentSuccessful': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const messageInvoice = MessageStore.get(message.chat_id, content.invoice_message_id);\n            if (\n                messageInvoice &&\n                messageInvoice.content &&\n                messageInvoice.content['@type'] === 'messageInvoice' &&\n                messageInvoice.content.invoice\n            ) {\n                const { invoice } = messageInvoice.content;\n\n                return (\n                    <>\n                        {`You have just successfully transferred ${Currency.getString(\n                            content.total_amount,\n                            content.currency\n                        )} to `}\n                        <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                        {` for ${invoice.title}`}\n                    </>\n                );\n            }\n\n            return (\n                <>\n                    {`You have just successfully transferred ${Currency.getString(\n                        content.total_amount,\n                        content.currency\n                    )} to `}\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return 'Payment successful';\n        }\n        case 'messagePinMessage': {\n            const author = getMessageAuthor(message, openUser);\n            const pinnedMessage = MessageStore.get(message.chat_id, content.message_id);\n            if (!pinnedMessage || !pinnedMessage.content) {\n                return (\n                    <>\n                        {author}\n                        {' pinned a message'}\n                    </>\n                );\n            }\n\n            let pinnedContent = ' pinned a message';\n            if (isServiceMessage(pinnedMessage)) {\n                pinnedContent = ' pinned a service message';\n            } else {\n                switch (pinnedMessage.content['@type']) {\n                    case 'messageAnimation': {\n                        pinnedContent = ' pinned a GIF';\n                        break;\n                    }\n                    case 'messageAudio': {\n                        pinnedContent = ' pinned a track';\n                        break;\n                    }\n                    case 'messageCall': {\n                        pinnedContent = ' pinned a call';\n                        break;\n                    }\n                    case 'messageContact': {\n                        pinnedContent = ' pinned a contact';\n                        break;\n                    }\n                    case 'messageDocument': {\n                        pinnedContent = ' pinned a file';\n                        break;\n                    }\n                    case 'messageExpiredPhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messageExpiredVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageGame': {\n                        pinnedContent = ' pinned a game';\n                        break;\n                    }\n                    case 'messageInvoice': {\n                        pinnedContent = ' pinned an invoice';\n                        break;\n                    }\n                    case 'messageLocation': {\n                        pinnedContent = ' pinned a map';\n                        break;\n                    }\n                    case 'messagePhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messagePoll': {\n                        pinnedContent = ' pinned a poll';\n                        break;\n                    }\n                    case 'messageSticker': {\n                        pinnedContent = ' pinned a sticker';\n                        break;\n                    }\n                    case 'messageText': {\n                        const maxLength = 16;\n                        const text = pinnedMessage.content.text.text;\n                        if (text.length <= maxLength) {\n                            pinnedContent = ` pinned ${text}`;\n                        } else {\n                            pinnedContent = ` pinned ${text.substring(0, maxLength)}...`;\n                        }\n\n                        break;\n                    }\n                    case 'messageUnsupported': {\n                        pinnedContent = ' pinned unsupported message';\n                        break;\n                    }\n                    case 'messageVenue': {\n                        pinnedContent = ' pinned a venue';\n                        break;\n                    }\n                    case 'messageVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageVideoNote': {\n                        pinnedContent = ' pinned a video message';\n                        break;\n                    }\n                    case 'messageVoiceNote': {\n                        pinnedContent = ' pinned a voice message';\n                        break;\n                    }\n                }\n            }\n\n            return (\n                <>\n                    {author}\n                    {pinnedContent}\n                </>\n            );\n        }\n        case 'messageScreenshotTaken': {\n            if (isOutgoing) {\n                return 'You took a screenshot!';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' took a screenshot!'}\n                </>\n            );\n        }\n        case 'messageSupergroupChatCreate': {\n            const { title } = content;\n\n            if (isChannel) {\n                return 'Channel created';\n            }\n\n            if (isOutgoing) {\n                return `You created group ${title}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group ${title}`}\n                </>\n            );\n        }\n        case 'messageUnsupported': {\n            return 'Unsupported message';\n        }\n        case 'messageWebsiteConnected': {\n            return `You allowed this bot to message you when you logged in on ${content.domain_name}.`;\n        }\n    }\n\n    return `[${message.content['@type']}]`;\n}\n\nexport { isServiceMessage, getServiceMessageContent };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport Audio from '../Components/Message/Media/Audio';\nimport Animation from '../Components/Message/Media/Animation';\nimport Contact from '../Components/Message/Media/Contact';\nimport Document from '../Components/Message/Media/Document';\nimport Game from '../Components/Message/Media/Game';\nimport Location from '../Components/Message/Media/Location';\nimport Photo from '../Components/Message/Media/Photo';\nimport Poll from '../Components/Message/Media/Poll';\nimport Sticker from '../Components/Message/Media/Sticker';\nimport Venue from '../Components/Message/Media/Venue';\nimport Video from '../Components/Message/Media/Video';\nimport VideoNote from '../Components/Message/Media/VideoNote';\nimport VoiceNote from '../Components/Message/Media/VoiceNote';\nimport { getChatTitle } from './Chat';\nimport { openUser } from './../Actions/Client';\nimport { getPhotoSize, getSize } from './Common';\nimport { download, saveOrDownload } from './File';\nimport { getAudioTitle } from './Media';\nimport { getServiceMessageContent } from './ServiceMessage';\nimport { getUserFullName } from './User';\nimport { LOCATION_HEIGHT, LOCATION_SCALE, LOCATION_WIDTH, LOCATION_ZOOM } from '../Constants';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getAuthor(message) {\n    if (!message) return null;\n\n    const { forward_info } = message;\n\n    if (forward_info) {\n        switch (forward_info['@type']) {\n            case 'messageForwardedFromUser': {\n                if (forward_info.sender_user_id > 0) {\n                    const user = UserStore.get(forward_info.sender_user_id);\n                    if (user) {\n                        return getUserFullName(user);\n                    }\n                }\n                break;\n            }\n            case 'messageForwardedPost': {\n                const chat = ChatStore.get(forward_info.chat_id);\n                if (chat) {\n                    return chat.title;\n                }\n                break;\n            }\n        }\n    }\n\n    return getTitle(message);\n}\n\nfunction getTitle(message) {\n    if (!message) return null;\n\n    const { sender_user_id, chat_id } = message;\n\n    if (sender_user_id) {\n        const user = UserStore.get(sender_user_id);\n        if (user) {\n            return getUserFullName(user);\n        }\n    }\n\n    if (chat_id) {\n        const chat = ChatStore.get(chat_id);\n        if (chat) {\n            return chat.title;\n        }\n    }\n\n    return null;\n}\n\nfunction substring(text, start, end) {\n    if (start < 0) start = 0;\n    if (start > text.length - 1) start = text.length - 1;\n    if (end < start) end = start;\n    if (end > text.length) end = text.length;\n\n    return text.substring(start, end);\n}\n\nfunction stopPropagation(event) {\n    event.stopPropagation();\n}\n\nfunction getFormattedText(text) {\n    if (text['@type'] !== 'formattedText') return null;\n    if (!text.text) return null;\n    if (!text.entities) return text.text;\n\n    let result = [];\n    let index = 0;\n    for (let i = 0; i < text.entities.length; i++) {\n        let beforeEntityText = substring(text.text, index, text.entities[i].offset);\n        if (beforeEntityText) {\n            result.push(beforeEntityText);\n        }\n\n        let entityText = substring(\n            text.text,\n            text.entities[i].offset,\n            text.entities[i].offset + text.entities[i].length\n        );\n        switch (text.entities[i].type['@type']) {\n            case 'textEntityTypeUrl': {\n                let url = entityText.startsWith('http') ? entityText : 'http://' + entityText;\n                let decodedUrl;\n                try {\n                    decodedUrl = decodeURI(entityText);\n                } catch (error) {\n                    console.error('uri: ' + entityText + '\\n' + error);\n                    decodedUrl = entityText;\n                }\n\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {decodedUrl}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeTextUrl': {\n                let url = text.entities[i].type.url.startsWith('http')\n                    ? text.entities[i].type.url\n                    : 'http://' + text.entities[i].type.url;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeBold':\n                result.push(<strong key={text.entities[i].offset}>{entityText}</strong>);\n                break;\n            case 'textEntityTypeItalic':\n                result.push(<em key={text.entities[i].offset}>{entityText}</em>);\n                break;\n            case 'textEntityTypeCode':\n                result.push(<code key={text.entities[i].offset}>{entityText}</code>);\n                break;\n            case 'textEntityTypePre':\n                result.push(\n                    <pre key={text.entities[i].offset}>\n                        <code>{entityText}</code>\n                    </pre>\n                );\n                break;\n            case 'textEntityTypeMention':\n                result.push(\n                    <a key={text.entities[i].offset} onClick={stopPropagation} href={`#/im?p=${entityText}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeMentionName':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`#/im?p=u${text.entities[i].type.user_id}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeHashtag':\n                let hashtag = entityText.length > 0 && entityText[0] === '#' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://search_hashtag?hashtag=${hashtag}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeEmailAddress':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`mailto:${entityText}`}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeBotCommand':\n                let command = entityText.length > 0 && entityText[0] === '/' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://bot_command?command=${command}&bot=`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            default:\n                result.push(entityText);\n                break;\n        }\n\n        index += beforeEntityText.length + entityText.length;\n    }\n\n    if (index < text.text.length) {\n        let afterEntityText = text.text.substring(index);\n        if (afterEntityText) {\n            result.push(afterEntityText);\n        }\n    }\n\n    return result;\n}\n\nfunction getText(message) {\n    if (!message) return null;\n\n    let text = [];\n\n    const { content } = message;\n\n    if (\n        content &&\n        content['@type'] === 'messageText' &&\n        content.text &&\n        content.text['@type'] === 'formattedText' &&\n        content.text.text\n    ) {\n        text = getFormattedText(content.text);\n    } else {\n        //text.push('[' + message.content['@type'] + ']');//JSON.stringify(x);\n        if (content && content.caption && content.caption['@type'] === 'formattedText' && content.caption.text) {\n            text.push('\\n');\n            let formattedText = getFormattedText(content.caption);\n            if (formattedText) {\n                text = text.concat(formattedText);\n            }\n        }\n    }\n\n    return text;\n}\n\nfunction getWebPage(message) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    return message.content.web_page;\n}\n\nfunction getDate(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    let date = new Date(message.date * 1000);\n\n    return dateFormat(date, 'H:MM'); //date.toDateString();\n}\n\nfunction getDateHint(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    const date = new Date(message.date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy'); //date.toDateString();\n}\n\nfunction getMedia(message, openMedia) {\n    if (!message) return null;\n\n    const { chat_id, id, content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation':\n            return <Animation chatId={chat_id} messageId={id} animation={content.animation} openMedia={openMedia} />;\n        case 'messageAudio':\n            return <Audio chatId={chat_id} messageId={id} audio={content.audio} openMedia={openMedia} />;\n        case 'messageContact':\n            return <Contact chatId={chat_id} messageId={id} contact={content.contact} openMedia={openMedia} />;\n        case 'messageDocument':\n            return <Document chatId={chat_id} messageId={id} document={content.document} openMedia={openMedia} />;\n        case 'messageGame':\n            return <Game chatId={chat_id} messageId={id} game={content.game} openMedia={openMedia} />;\n        case 'messageLocation':\n            return <Location chatId={chat_id} messageId={id} location={content.location} openMedia={openMedia} />;\n        case 'messagePhoto':\n            return <Photo chatId={chat_id} messageId={id} photo={content.photo} openMedia={openMedia} />;\n        case 'messagePoll':\n            return <Poll chatId={chat_id} messageId={id} poll={content.poll} openMedia={openMedia} />;\n        case 'messageSticker':\n            return <Sticker chatId={chat_id} messageId={id} sticker={content.sticker} openMedia={openMedia} />;\n        case 'messageText':\n            return null;\n        case 'messageVenue':\n            return <Venue chatId={chat_id} messageId={id} venue={content.venue} openMedia={openMedia} />;\n        case 'messageVideo':\n            return <Video chatId={chat_id} messageId={id} video={content.video} openMedia={openMedia} />;\n        case 'messageVideoNote':\n            return <VideoNote chatId={chat_id} messageId={id} videoNote={content.video_note} openMedia={openMedia} />;\n        case 'messageVoiceNote':\n            return <VoiceNote chatId={chat_id} messageId={id} voiceNote={content.voice_note} openMedia={openMedia} />;\n        default:\n            return '[' + content['@type'] + ']';\n    }\n}\n\nfunction isForwardOriginHidden(forwardInfo) {\n    if (!forwardInfo) return false;\n\n    const { origin } = forwardInfo;\n    if (!origin) return false;\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            return false;\n        }\n        case 'messageForwardOriginHiddenUser': {\n            return true;\n        }\n        case 'messageForwardOriginChannel': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction getForwardTitle(forwardInfo, t = key => key) {\n    if (!forwardInfo) return '';\n\n    const { origin } = forwardInfo;\n    if (!origin) return '';\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            const { sender_user_id } = origin;\n\n            const user = UserStore.get(sender_user_id);\n            return getUserFullName(user);\n        }\n        case 'messageForwardOriginHiddenUser': {\n            const { sender_name } = origin;\n\n            return sender_name;\n        }\n        case 'messageForwardOriginChannel': {\n            const { chat_id, author_signature } = origin;\n\n            return getChatTitle(chat_id, false, t) + (author_signature ? ` (${author_signature})` : '');\n        }\n    }\n\n    return '';\n}\n\nfunction getUnread(message) {\n    if (!message) return false;\n    if (!message.chat_id) return false;\n    if (!message.is_outgoing) return false;\n\n    let chat = ChatStore.get(message.chat_id);\n    if (!chat) return false;\n\n    return chat.last_read_outbox_message_id < message.id;\n}\n\nfunction getSenderUserId(message) {\n    if (!message) return null;\n\n    return message.sender_user_id;\n}\n\nfunction filterMessages(result, history) {\n    if (result.messages.length === 0) return;\n    if (history.length === 0) return;\n\n    const map = history.reduce(function(accumulator, current) {\n        accumulator.set(current.id, current.id);\n        return accumulator;\n    }, new Map());\n\n    result.messages = result.messages.filter(x => !map.has(x.id));\n}\n\nfunction getContent(message, t = key => key) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    let caption = '';\n    if (content.caption && content.caption.text) {\n        caption = `, ${content.caption.text}`;\n    }\n\n    if (message.ttl > 0) {\n        return getServiceMessageContent(message);\n    }\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return t('AttachGif') + caption;\n        }\n        case 'messageAudio': {\n            return t('AttachMusic') + caption;\n        }\n        case 'messageBasicGroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCall': {\n            return t('Call') + caption;\n        }\n        case 'messageChatAddMembers': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangeTitle': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeleteMember': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeletePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatJoinByLink': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatSetTtl': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeFrom': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeTo': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageContact': {\n            return t('AttachContact') + caption;\n        }\n        case 'messageContactRegistered': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCustomServiceAction': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageDocument': {\n            return t('AttachDocument') + caption;\n        }\n        case 'messageExpiredPhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messageExpiredVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageGame': {\n            return t('AttachGame') + caption;\n        }\n        case 'messageGameScore': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageInvoice': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageLocation': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messagePassportDataReceived': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePassportDataSent': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessful': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messagePoll': {\n            const { poll } = content;\n\n            return ' ' + (poll.question || t('Poll')) + caption;\n        }\n        case 'messagePinMessage': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageScreenshotTaken': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            let emoji = '';\n            if (sticker && sticker.emoji) {\n                emoji = sticker.emoji;\n            }\n\n            return t('AttachSticker') + (emoji ? ` ${emoji}` : '') + caption;\n        }\n        case 'messageSupergroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageText': {\n            return content.text.text + caption;\n        }\n        case 'messageUnsupported': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageVenue': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messageVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageVideoNote': {\n            return t('AttachRound') + caption;\n        }\n        case 'messageVoiceNote': {\n            return t('AttachAudio') + caption;\n        }\n        case 'messageWebsiteConnected': {\n            return getServiceMessageContent(message);\n        }\n        default: {\n            return t('UnsupportedAttachment');\n        }\n    }\n}\n\nfunction isMediaContent(content) {\n    if (!content) return false;\n\n    return content['@type'] === 'messagePhoto';\n}\n\nfunction getLocationId(location) {\n    if (!location) return null;\n\n    const { longitude, latitude } = location;\n    return `loc=${latitude},${longitude}&size=${LOCATION_WIDTH},${LOCATION_HEIGHT}&scale=${LOCATION_SCALE}&zoom=${LOCATION_ZOOM}`;\n}\n\nfunction isVideoMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideo': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.video);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isLottieMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (!web_page) return false;\n\n            const { document } = web_page;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isAnimationMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.animation);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isContentOpened(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return true;\n\n    const { content } = message;\n    if (!content) return true;\n\n    switch (content['@type']) {\n        case 'messageVoiceNote': {\n            return content.is_listened;\n        }\n        case 'messageVideoNote': {\n            return content.is_viewed;\n        }\n        default: {\n            return true;\n        }\n    }\n}\n\nfunction getMediaTitle(message) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return getAudioTitle(audio);\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return getAudioTitle(audio);\n                }\n                break;\n            }\n        }\n    }\n\n    return getAuthor(message);\n}\n\nfunction hasAudio(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction hasVideoNote(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { video_note } = web_page;\n                if (video_note) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction getSearchMessagesFilter(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return {\n                    '@type': 'searchMessagesFilterAudio'\n                };\n            }\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                return {\n                    '@type': 'searchMessagesFilterVoiceNote'\n                };\n            }\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return null;\n\n                return {\n                    '@type': 'searchMessagesFilterVideoNote'\n                };\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio, voice_note, video_note } = web_page;\n                if (audio) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterAudio'\n                    };\n                }\n\n                if (voice_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVoiceNote'\n                    };\n                }\n\n                if (video_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVideoNote'\n                    };\n                }\n                break;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction openAnimation(animation, message, fileCancel) {\n    if (!animation) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    // download file at loadMediaViewerContent instead\n    // download(file, message, FileStore.updateAnimationBlob(chat_id, id, file.id));\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openAudio(audio, message, fileCancel) {\n    if (!audio) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateAudioBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openChatPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openContact(contact, message, fileCancel) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    openUser(contact.userId);\n}\n\nfunction openDocument(document, message, fileCancel) {\n    if (!document) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    if (isLottieMessage(chat_id, id)) {\n        TdLibController.send({\n            '@type': 'openMessageContent',\n            chat_id: chat_id,\n            message_id: id\n        });\n\n        ApplicationStore.setMediaViewerContent({\n            chatId: chat_id,\n            messageId: id\n        });\n    } else {\n        saveOrDownload(file, document.file_name, message);\n    }\n}\n\nfunction openGame(game, message, fileCancel) {\n    if (!game) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const { animation } = game;\n    if (animation) {\n        let { animation: file } = animation;\n        if (!file) return;\n\n        file = FileStore.get(file.id) || file;\n        if (fileCancel && file.local.is_downloading_active) {\n            FileStore.cancelGetRemoteFile(file.id, message);\n            return;\n        } else if (fileCancel && file.remote.is_uploading_active) {\n            FileStore.cancelUploadFile(file.id, message);\n            return;\n        }\n\n        download(file, message, () => FileStore.updateAnimationBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nasync function openSticker(sticker, message, fileCancel) {\n    if (!sticker) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    const { set_id } = sticker;\n    if (!set_id) return;\n\n    const stickerSet = await TdLibController.send({\n        '@type': 'getStickerSet',\n        set_id\n    });\n\n    if (!stickerSet) return;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateStickerSet',\n        stickerSet\n    });\n}\n\nfunction openVideo(video, message, fileCancel) {\n    if (!video) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVideoNote(videoNote, message, fileCancel) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updateVideoNoteBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVoiceNote(voiceNote, message, fileCancel) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateVoiceNoteBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openMedia(chatId, messageId, fileCancel = true) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                openAnimation(animation, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                openAudio(audio, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openChatPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageContact': {\n            const { contact } = content;\n            if (contact) {\n                openContact(contact, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                openDocument(document, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (game) {\n                openGame(game, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (sticker) {\n                openSticker(sticker, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    openAnimation(animation, message, fileCancel);\n                }\n\n                if (audio) {\n                    openAudio(audio, message, fileCancel);\n                }\n\n                if (document) {\n                    openDocument(document, message, fileCancel);\n                }\n\n                if (sticker) {\n                    openSticker(sticker, message, fileCancel);\n                }\n\n                if (video) {\n                    openVideo(video, message, fileCancel);\n                }\n\n                if (video_note) {\n                    openVideoNote(video_note, message, fileCancel);\n                }\n\n                if (voice_note) {\n                    openVoiceNote(voice_note, message, fileCancel);\n                }\n\n                if (photo) {\n                    openPhoto(photo, message, fileCancel);\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                openVideo(video, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                openVideoNote(video_note, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                openVoiceNote(voice_note, message, fileCancel);\n            }\n\n            break;\n        }\n    }\n}\n\nfunction isDeletedMessage(message) {\n    return message && message['@type'] === 'deletedMessage';\n}\n\nfunction getReplyPhotoSize(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (!animation) return null;\n\n            const { thumbnail } = animation;\n            return thumbnail || null;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (!audio) return null;\n\n            const { album_cover_thumbnail } = audio;\n            return album_cover_thumbnail || null;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return null;\n\n            const { thumbnail } = document;\n            return thumbnail || null;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (!game) return null;\n\n            const { animation, photo } = game;\n            if (animation) {\n                const { thumbnail } = animation;\n                if (thumbnail) {\n                    return thumbnail;\n                }\n            }\n\n            if (photo) {\n                return getPhotoSize(photo.sizes);\n            }\n\n            return null;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (!sticker) return null;\n\n            const { thumbnail } = sticker;\n            return thumbnail || null;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n                if (photo) {\n                    return getPhotoSize(photo.sizes);\n                }\n                if (animation) {\n                    const { thumbnail } = animation;\n                    return thumbnail || null;\n                }\n                if (audio) {\n                    const { album_cover_thumbnail } = audio;\n                    return album_cover_thumbnail || null;\n                }\n                if (document) {\n                    const { thumbnail } = document;\n                    return thumbnail || null;\n                }\n                if (sticker) {\n                    const { thumbnail } = sticker;\n                    return thumbnail || null;\n                }\n                if (video) {\n                    const { thumbnail } = video;\n                    return thumbnail || null;\n                }\n                if (video_note) {\n                    const { thumbnail } = video_note;\n                    return thumbnail || null;\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (!video) return null;\n\n            const { thumbnail } = video;\n            return thumbnail || null;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (!video_note) return null;\n\n            const { thumbnail } = video_note;\n            return thumbnail || null;\n        }\n    }\n\n    return null;\n}\n\nexport {\n    getAuthor,\n    getTitle,\n    getText,\n    getFormattedText,\n    getWebPage,\n    getContent,\n    getDate,\n    getDateHint,\n    getMedia,\n    isForwardOriginHidden,\n    getForwardTitle,\n    getUnread,\n    getSenderUserId,\n    filterMessages,\n    isMediaContent,\n    isDeletedMessage,\n    isVideoMessage,\n    isAnimationMessage,\n    isLottieMessage,\n    getLocationId,\n    isContentOpened,\n    getMediaTitle,\n    hasAudio,\n    hasVideoNote,\n    getSearchMessagesFilter,\n    openMedia,\n    getReplyPhotoSize\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass BasicGroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateBasicGroup': {\n                this.set(update.basic_group);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateBasicGroupFullInfo':\n                this.setFullInfo(update.basic_group_id, update.basic_group_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(groupId) {\n        return this.items.get(groupId);\n    }\n\n    set(group) {\n        this.items.set(group.id, group);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new BasicGroupStore();\nwindow.basicgroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport PollIcon from '@material-ui/icons/Poll';\nimport { canSendDocuments, canSendPhotos, canSendPolls, isPrivateChat } from '../../Utils/Chat';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        margin: '8px 0'\n    }\n};\n\nclass AttachButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleAttachPhoto = () => {\n        this.handleMenuClose();\n\n        const { onAttachPhoto } = this.props;\n        if (!onAttachPhoto) return;\n\n        setTimeout(() => onAttachPhoto(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachDocument = () => {\n        this.handleMenuClose();\n\n        const { onAttachDocument } = this.props;\n        if (!onAttachDocument) return;\n\n        setTimeout(() => onAttachDocument(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachPoll = () => {\n        this.handleMenuClose();\n\n        const { onAttachPoll } = this.props;\n        if (!onAttachPoll) return;\n\n        onAttachPoll();\n    };\n\n    render() {\n        const { classes, t, chatId } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton}\n                    aria-label='Attach'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <AttachFileIcon className='inputbox-attach-icon' />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleMenuClose}>\n                    <MenuItem onClick={this.handleAttachPhoto} disabled={!canSendPhotos(chatId)}>\n                        <ListItemIcon>\n                            <PhotoIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachPhoto')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleAttachDocument} disabled={!canSendDocuments(chatId)}>\n                        <ListItemIcon>\n                            <InsertDriveFileIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachDocument')} />\n                    </MenuItem>\n                    {!isPrivateChat(chatId) && (\n                        <MenuItem onClick={this.handleAttachPoll} disabled={!canSendPolls(chatId)}>\n                            <ListItemIcon>\n                                <PollIcon />\n                            </ListItemIcon>\n                            <ListItemText inset primary={t('Poll')} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </>\n        );\n    }\n}\n\nAttachButton.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onAttachDocument: PropTypes.func.isRequired,\n    onAttachPhoto: PropTypes.func.isRequired,\n    onAttachPoll: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(AttachButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport function focusNode(node, toEnd = false) {\n    if (!node) return;\n\n    if (toEnd && node.childNodes && node.childNodes.length > 0) {\n        const lastNode = node.childNodes[node.childNodes.length - 1];\n        const range = document.createRange();\n        range.setStart(lastNode, lastNode.length);\n        range.collapse(true);\n\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        node.scrollTop = node.scrollHeight;\n    }\n\n    node.focus();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst keys = {\n    backspace: 8,\n    shift: 16,\n    ctrl: 17,\n    alt: 18,\n    delete: 46,\n    cmd: 91,\n    leftArrow: 37,\n    upArrow: 38,\n    rightArrow: 39,\n    downArrow: 40\n};\n\nexport const utils = {\n    special: {},\n    navigational: {},\n    isSpecial(e) {\n        return typeof this.special[e.keyCode] !== 'undefined';\n    },\n    isNavigational(e) {\n        return typeof this.navigational[e.keyCode] !== 'undefined';\n    }\n};\n\nutils.special[keys['backspace']] = true;\nutils.special[keys['shift']] = true;\nutils.special[keys['ctrl']] = true;\nutils.special[keys['alt']] = true;\nutils.special[keys['delete']] = true;\n\nutils.navigational[keys['upArrow']] = true;\nutils.navigational[keys['downArrow']] = true;\nutils.navigational[keys['leftArrow']] = true;\nutils.navigational[keys['rightArrow']] = true;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { borderStyle } from '../Theme';\nimport { POLL_OPTION_HINT_LENGTH, POLL_OPTION_LENGTH, POLL_OPTION_MAX_LENGTH } from '../../Constants';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollOption.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    counterRoot: {\n        position: 'absolute',\n        right: 24,\n        bottom: 6,\n        minWidth: 28,\n        userSelect: 'none'\n    },\n    ...borderStyle(theme)\n});\n\nclass CreatePollOption extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.optionTextRef = React.createRef();\n\n        this.state = {\n            remainLength: POLL_OPTION_MAX_LENGTH\n        };\n    }\n\n    getText = () => {\n        return this.optionTextRef.current.innerText;\n    };\n\n    focus = (toEnd = false) => {\n        const node = this.optionTextRef.current;\n\n        focusNode(node, toEnd);\n    };\n\n    handleDelete = () => {\n        const { option, onDelete } = this.props;\n        if (!option) return;\n        if (!onDelete) return;\n\n        onDelete(option.id);\n    };\n\n    handleInput = event => {\n        const { option } = this.props;\n\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const length = node.dataset.length;\n        const maxLength = node.dataset.maxLength;\n        const text = this.getText();\n\n        this.setState({\n            remainLength: length - text.length\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollOption',\n            id: option.id,\n            text\n        });\n    };\n\n    handleKeyDown = event => {\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = this.getText();\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Backspace': {\n                const text = this.getText();\n                if (!text) {\n                    const { option, onDelete } = this.props;\n                    if (onDelete) {\n                        onDelete(option.id, true);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'Enter': {\n                const { option, onFocusNext } = this.props;\n                if (option && onFocusNext) {\n                    onFocusNext(option.id);\n                }\n\n                event.preventDefault();\n                return false;\n            }\n            case 'ArrowUp': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const firstChild = node.childNodes && node.childNodes.length > 0 ? node.childNodes[0] : null;\n\n                if (!firstChild || (selection.anchorNode === firstChild && !selection.anchorOffset)) {\n                    const { option, onFocusPrev } = this.props;\n                    if (onFocusPrev) {\n                        onFocusPrev(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    const { option, onFocusNext } = this.props;\n                    if (onFocusNext) {\n                        onFocusNext(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = this.getText();\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        pasteText = pasteText.replace('\\r\\n', '\\n').replace('\\n', ' ');\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength } = this.state;\n\n        return (\n            <div className='create-poll-option'>\n                <div\n                    ref={this.optionTextRef}\n                    id='create-poll-option-text'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Option')}\n                    data-length={POLL_OPTION_LENGTH}\n                    data-max-length={POLL_OPTION_MAX_LENGTH}\n                    onInput={this.handleInput}\n                    onKeyDown={this.handleKeyDown}\n                    onPaste={this.handlePaste}\n                />\n                <div className='create-poll-option-delete-button'>\n                    <IconButton className={classes.iconButton} onClick={this.handleDelete}>\n                        <CloseIcon fontSize='small' />\n                    </IconButton>\n                </div>\n                <div className={classNames('create-poll-option-bottom-border', { [classes.borderColor]: true })} />\n                {remainLength <= POLL_OPTION_LENGTH - POLL_OPTION_HINT_LENGTH && (\n                    <Typography\n                        align='center'\n                        className={classes.counterRoot}\n                        color={remainLength >= 0 ? 'textSecondary' : 'error'}\n                        variant='subtitle1'>\n                        {remainLength}\n                    </Typography>\n                )}\n            </div>\n        );\n    }\n}\n\nCreatePollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onFocusPrev: PropTypes.func.isRequired,\n    onFocusNext: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { POLL_OPTION_LENGTH, POLL_QUESTION_LENGTH } from '../Constants';\n\nexport function isValidPoll(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (!isValidQuestion(question)) return false;\n\n    const noneEmptyOptions = options.filter(x => Boolean(x.text));\n    if (noneEmptyOptions.length <= 1) return false;\n\n    return noneEmptyOptions.every(isValidOption);\n}\n\nfunction isValidQuestion(question) {\n    if (!question) return false;\n\n    return question.length <= POLL_QUESTION_LENGTH;\n}\n\nfunction isValidOption(option) {\n    if (!option) return false;\n    if (!option.text) return false;\n\n    return option.text.length <= POLL_OPTION_LENGTH;\n}\n\nexport function hasPollData(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (question) return true;\n\n    return options.some(x => Boolean(x.text));\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport { isValidPoll } from '../Utils/Poll';\n\nclass PollStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.poll = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {};\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateNewPoll': {\n                this.set({\n                    id: Date.now(),\n                    question: '',\n                    options: []\n                });\n\n                this.emit('clientUpdateNewPoll', update);\n                break;\n            }\n            case 'clientUpdatePollQuestion': {\n                const { question } = update;\n\n                this.assign(this.poll, { question });\n\n                this.emit('clientUpdatePollQuestion', update);\n                break;\n            }\n            case 'clientUpdatePollOption': {\n                const { id, text } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.map(x => (x.id === id ? { ...x, text } : { ...x })) });\n\n                this.emit('clientUpdatePollOption', update);\n                break;\n            }\n            case 'clientUpdateNewPollOption': {\n                const { option } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: [...options, option] });\n                this.emit('clientUpdateNewPollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePollOption': {\n                const { id } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.filter(x => x.id !== id) });\n                this.emit('clientUpdateDeletePollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePoll': {\n                this.set(null);\n\n                this.emit('clientUpdateDeletePoll', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    set(poll) {\n        this.poll = poll;\n    }\n\n    getInputMessagePoll() {\n        if (!this.poll) return null;\n        if (!isValidPoll(this.poll)) return null;\n        const { question, options } = this.poll;\n\n        return {\n            '@type': 'inputMessagePoll',\n            question,\n            options: options.filter(x => Boolean(x.text)).map(x => x.text)\n        };\n    }\n}\n\nconst store = new PollStore();\nwindow.poll = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport CreatePollOption from './CreatePollOption';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { hasPollData, isValidPoll } from '../../Utils/Poll';\nimport {\n    POLL_OPTIONS_MAX_COUNT,\n    POLL_QUESTION_HINT_LENGTH,\n    POLL_QUESTION_LENGTH,\n    POLL_QUESTION_MAX_LENGTH\n} from '../../Constants';\nimport PollStore from '../../Stores/PollStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollDialog.css';\n\nconst styles = theme => ({\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    contentRoot: {\n        width: 300\n    },\n    dividerRoot: {\n        margin: '8px -24px'\n    },\n    listRoot: {\n        margin: '0 -24px'\n    },\n    listItem: {\n        padding: '11px 24px',\n        color: '#8e9396',\n        height: 48\n    },\n    typographyRoot: {}\n});\n\nclass CreatePollDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.questionRef = React.createRef();\n        this.optionsRefMap = new Map();\n\n        this.state = {\n            poll: null,\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH\n        };\n    }\n\n    componentDidMount() {\n        PollStore.on('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.on('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.on('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    componentWillUnmount() {\n        PollStore.removeListener('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.removeListener('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.removeListener('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    handleClientUpdateNewPoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH,\n            poll\n        });\n    };\n\n    handleClientUpdatePollQuestion = update => {\n        const { poll } = PollStore;\n\n        const node = this.questionRef.current;\n        const length = node.dataset.length;\n        const innerText = node.innerText;\n\n        this.setState({\n            remainLength: length - innerText.length,\n            poll\n        });\n    };\n\n    handleClientUpdatePoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll });\n    };\n\n    handleClientUpdateNewPollOption = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll }, () => {\n            setTimeout(() => {\n                const node = this.optionsRefMap.get(poll.options.length - 1);\n\n                node.focus(true);\n            });\n        });\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { poll } = this.state;\n\n        if (poll && !prevState.poll) {\n            setTimeout(() => {\n                focusNode(this.questionRef.current, true);\n            }, 0);\n        }\n    }\n\n    handleKeyDown = event => {\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = node.innerText;\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Enter': {\n                if (!event.shiftKey) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = node.innerText;\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    handleInput = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        //const length = node.dataset.length;\n\n        const innerText = node.innerText;\n        const innerHtml = node.innerHTML;\n\n        if (innerHtml === '<br>') {\n            node.innerText = '';\n        }\n\n        // this.setState({\n        //     remainLength: length - innerText.length\n        // });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollQuestion',\n            question: innerText\n        });\n    };\n\n    handleAddOption = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n        if (options.length >= POLL_OPTIONS_MAX_COUNT) return;\n\n        const option = {\n            id: Date.now(),\n            text: ''\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPollOption',\n            option\n        });\n    };\n\n    handleDeleteOption = (id, backspace = false) => {\n        if (backspace) {\n            this.handleDeleteByBackspace(id);\n        } else {\n            this.handleDelete(id);\n        }\n    };\n\n    handleDelete = id => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePollOption',\n            id\n        });\n    };\n\n    handleDeleteByBackspace = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n        let deleteOption = true;\n        for (let i = index; i < options.length; i++) {\n            const { text } = options[i];\n            if (text) {\n                deleteOption = false;\n                break;\n            }\n        }\n\n        if (deleteOption) {\n            this.handleDeleteOption(id);\n        }\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, true);\n            return;\n        }\n\n        prevNode.focus(true);\n    };\n\n    handleFocusPrevOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, false);\n            return;\n        }\n\n        prevNode.focus(false);\n    };\n\n    handleFocusNextOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const nextIndex = index + 1;\n\n        const nextNode = this.optionsRefMap.get(nextIndex);\n        if (!nextNode) {\n            const text = index >= 0 && index < options.length ? options[index].text : '';\n            if (options.length && !text) {\n                return;\n            }\n\n            this.handleAddOption();\n            return;\n        }\n\n        nextNode.focus(nextNode, true);\n    };\n\n    getHint = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const addCount = POLL_OPTIONS_MAX_COUNT - options.length;\n\n        if (addCount <= 0) {\n            return 'You have added the maximum number of options.';\n        }\n        if (addCount === 1) {\n            return 'You can add 1 more option.';\n        }\n\n        return `You can add ${POLL_OPTIONS_MAX_COUNT - options.length} more options.`;\n    };\n\n    handleClose = () => {\n        const { poll } = this.state;\n\n        if (hasPollData(poll)) {\n            this.setState({ confirm: true });\n        } else {\n            this.handleConfirmationDone();\n        }\n    };\n\n    handleSend = () => {\n        const { onSend } = this.props;\n\n        const inputMessagePoll = PollStore.getInputMessagePoll();\n        if (!inputMessagePoll) return;\n\n        onSend(inputMessagePoll);\n\n        this.handleConfirmationDone();\n    };\n\n    handleConfirmationClose = () => {\n        this.setState({ confirm: false });\n    };\n\n    handleConfirmationDone = () => {\n        this.handleConfirmationClose();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePoll'\n        });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength, confirm, poll } = this.state;\n        if (!poll) return null;\n\n        const options = poll ? poll.options : [];\n\n        this.optionsRefMap.clear();\n        const items = options.map((x, i) => (\n            <CreatePollOption\n                ref={el => this.optionsRefMap.set(i, el)}\n                key={x.id}\n                option={x}\n                onDelete={this.handleDeleteOption}\n                onFocusPrev={this.handleFocusPrevOption}\n                onFocusNext={this.handleFocusNextOption}\n            />\n        ));\n\n        const canAddOption = POLL_OPTIONS_MAX_COUNT - options.length > 0;\n        const hint = this.getHint();\n\n        return (\n            <>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open\n                    transitionDuration={0}\n                    onClose={this.handleClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('NewPoll')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>\n                        <div className='create-poll-dialog-question-title'>\n                            <Typography color='primary' variant='subtitle1' style={{ flexGrow: 1 }}>\n                                {t('Question')}\n                            </Typography>\n                            {remainLength <= POLL_QUESTION_LENGTH - POLL_QUESTION_HINT_LENGTH && (\n                                <Typography color={remainLength >= 0 ? 'textSecondary' : 'error'} variant='subtitle1'>\n                                    {remainLength}\n                                </Typography>\n                            )}\n                        </div>\n                        <div\n                            ref={this.questionRef}\n                            id='create-poll-dialog-question'\n                            contentEditable\n                            suppressContentEditableWarning\n                            placeholder={t('QuestionHint')}\n                            data-length={POLL_QUESTION_LENGTH}\n                            data-max-length={POLL_QUESTION_MAX_LENGTH}\n                            onPaste={this.handlePaste}\n                            onKeyDown={this.handleKeyDown}\n                            onInput={this.handleInput}\n                        />\n                        <Divider className={classes.dividerRoot} />\n                        <Typography color='primary' variant='subtitle1'>\n                            {t('PollOptions')}\n                        </Typography>\n                        <List classes={{ root: classes.listRoot }}>\n                            {items}\n                            {canAddOption && (\n                                <ListItem\n                                    selected={false}\n                                    className={classes.listItem}\n                                    button\n                                    onClick={this.handleAddOption}>\n                                    <ListItemText disableTypography primary={t('AddAnOption')} />\n                                </ListItem>\n                            )}\n                        </List>\n                        <Typography>{hint}</Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleClose}>\n                            {t('Cancel')}\n                        </Button>\n                        {isValidPoll(poll) && (\n                            <Button color='primary' onClick={this.handleSend}>\n                                {t('Send')}\n                            </Button>\n                        )}\n                    </DialogActions>\n                </Dialog>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open={confirm}\n                    transitionDuration={0}\n                    onClose={this.handleConfirmationClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('CancelPollAlertTitle')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>{t('CancelPollAlertText')}</DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleConfirmationClose}>\n                            {t('Cancel')}\n                        </Button>\n                        <Button color='primary' onClick={this.handleConfirmationDone}>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nCreatePollDialog.propTypes = {\n    onSend: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getSrc } from '../../Utils/File';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport { hasVideoNote } from '../../Utils/Message';\nimport FileStore from '../../Stores/FileStore';\nimport './ReplyTile.css';\n\nclass ReplyTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return;\n\n        const { photo } = photoSize;\n        if (!photo) return;\n\n        if (update.chatId === chatId && update.messageId === messageId && update.fileId === photo.id) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return null;\n\n        const { photo } = photoSize;\n        if (!photo) return null;\n\n        const src = getSrc(photo);\n        const isBlurred = isBlurredThumbnail(photo);\n        const isVideoNote = hasVideoNote(chatId, messageId);\n\n        return (\n            <div className='reply-tile'>\n                <img\n                    className={classNames(\n                        'reply-tile-photo',\n                        { 'reply-tile-photo-round': isVideoNote },\n                        { 'reply-tile-photo-loading': !src },\n                        { 'media-blurred': isBlurred }\n                    )}\n                    draggable={false}\n                    src={src}\n                    alt=''\n                />\n            </div>\n        );\n    }\n}\n\nReplyTile.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photoSize: PropTypes.object.isRequired\n};\n\nexport default ReplyTile;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ReplyTile from '../Tile/ReplyTile';\nimport { getContent, getTitle, isDeletedMessage, getReplyPhotoSize } from '../../Utils/Message';\nimport { accentStyles } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './Reply.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Reply extends React.Component {\n    componentDidMount() {\n        MessageStore.on('getMessageResult', this.onGetMessageResult);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('getMessageResult', this.onGetMessageResult);\n    }\n\n    onGetMessageResult = result => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === result.chat_id && messageId === result.id) {\n            this.forceUpdate();\n        }\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    handleOpen = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n        if (isDeletedMessage(message)) return null;\n\n        openChat(chatId, messageId);\n    };\n\n    render() {\n        const { classes, t, chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        let title = !message ? null : getTitle(message);\n        let content = !message ? t('Loading') : getContent(message, t);\n        const photoSize = getReplyPhotoSize(chatId, messageId);\n\n        if (isDeletedMessage(message)) {\n            title = null;\n            content = t('DeletedMessage');\n        }\n\n        return (\n            <div className='reply' onMouseDown={this.handleOpen} onClick={this.handleClick}>\n                <div className='reply-wrapper'>\n                    <div className={classNames('reply-border', classes.accentBackgroundLight)} />\n                    {photoSize && <ReplyTile chatId={chatId} messageId={messageId} photoSize={photoSize} />}\n                    <div className='reply-content'>\n                        {title && (\n                            <div className={classNames('reply-content-title', classes.accentColorDark)}>{title}</div>\n                        )}\n                        <div className='reply-content-subtitle'>{content}</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nReply.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Reply);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Reply from '../Message/Reply';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxHeader.css';\n\nconst styles = theme => ({\n    replyIcon: {\n        padding: 12,\n        color: theme.palette.action.active\n    },\n    closeIconButton: {\n        margin: 0\n    }\n});\n\nclass InputBoxHeader extends React.Component {\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateReply',\n            chatId: this.props.chatId,\n            messageId: 0\n        });\n    };\n\n    render() {\n        const { classes, chatId, messageId } = this.props;\n        if (!chatId) return null;\n        if (!messageId) return null;\n\n        return (\n            <div className='inputbox-header'>\n                <div className='inputbox-header-left-column'>\n                    <ReplyIcon className={classes.replyIcon} />\n                </div>\n                <div className='inputbox-header-middle-column'>\n                    <Reply chatId={chatId} messageId={messageId} />\n                </div>\n                <div className='inputbox-header-right-column'>\n                    <IconButton className={classes.closeIconButton} aria-label='Close' onClick={this.handleClose}>\n                        <CloseIcon />\n                    </IconButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nInputBoxHeader.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(InputBoxHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n    constructor(chatId) {\n        this.chatId = chatId;\n        this.lastAction = null;\n    }\n\n    setTyping(action) {\n        if (!this.chatId) return;\n\n        if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n            let now = new Date();\n            now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n            if (this.lastTypingDate && this.lastTypingDate > now) {\n                return;\n            }\n        }\n\n        this.lastAction = action;\n        this.lastTypingDate = new Date();\n\n        TdLibController.send({\n            '@type': 'sendChatAction',\n            chat_id: this.chatId,\n            action: action\n        });\n    }\n}\n\nexport default OutputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass StickerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.stickerSet = null;\n        this.hint = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateInstalledStickerSets': {\n                const { sticker_set_ids } = update;\n                if (this.stickerSet) {\n                    const { id, is_installed } = this.stickerSet;\n                    if (is_installed !== sticker_set_ids.some(x => x === id)) {\n                        this.assign(this.stickerSet, { is_installed: !is_installed });\n                    }\n                }\n\n                this.emit('updateInstalledStickerSets', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateStickerSend': {\n                this.emit('clientUpdateStickerSend', update);\n                break;\n            }\n            case 'clientUpdateStickersHint': {\n                const { hint } = update;\n\n                this.hint = hint;\n\n                this.emit('clientUpdateStickersHint', update);\n                break;\n            }\n            case 'clientUpdateStickerSet': {\n                const { stickerSet } = update;\n\n                this.stickerSet = stickerSet;\n\n                this.emit('clientUpdateStickerSet', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new StickerStore();\nwindow.sticker = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport emojiRegex from 'emoji-regex';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AttachButton from './../ColumnMiddle/AttachButton';\nimport CreatePollDialog from '../Dialog/CreatePollDialog';\n//import EmojiPickerButton from './../ColumnMiddle/EmojiPickerButton';\nimport InputBoxHeader from './InputBoxHeader';\nimport OutputTypingManager from '../../Utils/OutputTypingManager';\nimport { getSize, readImageSize } from '../../Utils/Common';\nimport { getChatDraft, getChatDraftReplyToMessageId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport { PHOTO_SIZE } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxControl.css';\n\nconst EmojiPickerButton = React.lazy(() => import('./../ColumnMiddle/EmojiPickerButton'));\n\nconst styles = theme => ({\n    iconButton: {\n        margin: '8px 0'\n    },\n    closeIconButton: {\n        margin: 0\n    },\n    ...borderStyle(theme)\n});\n\nclass InputBoxControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.attachDocumentRef = React.createRef();\n        this.attachPhotoRef = React.createRef();\n        this.newMessageRef = React.createRef();\n\n        const chatId = ApplicationStore.getChatId();\n\n        this.innerHTML = null;\n        this.state = {\n            chatId: chatId,\n            replyToMessageId: getChatDraftReplyToMessageId(chatId),\n            openPasteDialog: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.t !== t) {\n            return true;\n        }\n\n        if (nextState.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.replyToMessageId !== replyToMessageId) {\n            return true;\n        }\n\n        if (nextState.openPasteDialog !== openPasteDialog) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        //console.log('Perf componentDidMount');\n\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.on('clientUpdateReply', this.onClientUpdateReply);\n        StickerStore.on('clientUpdateStickerSend', this.onClientUpdateStickerSend);\n\n        this.setInputFocus();\n        this.setDraft();\n        this.handleInput();\n    }\n\n    componentWillUnmount() {\n        const newChatDraftMessage = this.getNewChatDraftMessage(this.state.chatId, this.state.replyToMessageId);\n        this.setChatDraftMessage(newChatDraftMessage);\n\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.removeListener('clientUpdateReply', this.onClientUpdateReply);\n        StickerStore.removeListener('clientUpdateStickerSend', this.onClientUpdateStickerSend);\n    }\n\n    onClientUpdateStickerSend = update => {\n        const { sticker: item } = update;\n        if (!item) return;\n\n        const { sticker, thumbnail, width, height } = item;\n        if (!sticker) return;\n\n        this.newMessageRef.current.innerText = null;\n        this.newMessageRef.current.textContent = null;\n        this.innerHTML = null;\n\n        const content = {\n            '@type': 'inputMessageSticker',\n            sticker: {\n                '@type': 'inputFileId',\n                id: sticker.id\n            },\n            width,\n            height\n        };\n\n        if (thumbnail) {\n            const { width: thumbnailWidth, height: thumbnailHeight, photo } = thumbnail;\n\n            content.thumbnail = {\n                thumbnail: {\n                    '@type': 'inputFileId',\n                    id: photo.id\n                },\n                width: thumbnailWidth,\n                height: thumbnailHeight\n            };\n        }\n\n        this.onSendInternal(content, true, result => {});\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickersHint',\n            hint: null\n        });\n    };\n\n    onClientUpdateReply = update => {\n        const { chatId: currentChatId } = this.state;\n        const { chatId, messageId } = update;\n\n        if (currentChatId !== chatId) {\n            return;\n        }\n\n        this.setState({ replyToMessageId: messageId });\n\n        if (messageId) {\n            this.setInputFocus();\n        }\n    };\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.state;\n        if (chatId === update.nextChatId) return;\n\n        this.innerHTML = null;\n        this.setState({\n            chatId: update.nextChatId,\n            replyToMessageId: getChatDraftReplyToMessageId(update.nextChatId),\n            openPasteDialog: false\n        });\n    };\n\n    setDraft = () => {\n        const { chatId } = this.state;\n\n        const element = this.newMessageRef.current;\n\n        const draft = getChatDraft(chatId);\n        if (draft) {\n            element.innerText = draft.text;\n            this.innerHTML = draft.text;\n        } else {\n            element.innerText = null;\n            this.innerHTML = null;\n        }\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        //console.log('Perf componentDidUpdate');\n        this.setChatDraftMessage(snapshot);\n\n        if (prevState.chatId !== this.state.chatId) {\n            this.setInputFocus();\n            this.setDraft();\n            this.handleInput();\n        }\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        if (prevState.chatId === this.state.chatId) return null;\n\n        return this.getNewChatDraftMessage(prevState.chatId, prevState.replyToMessageId);\n    }\n\n    setInputFocus = () => {\n        setTimeout(() => {\n            if (this.newMessageRef.current) {\n                const element = this.newMessageRef.current;\n\n                if (element.childNodes.length > 0) {\n                    const range = document.createRange();\n                    range.setStart(element.childNodes[0], element.childNodes[0].length);\n                    range.collapse(true);\n\n                    const selection = window.getSelection();\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                }\n                element.focus();\n            }\n        }, 100);\n    };\n\n    setChatDraftMessage = chatDraftMessage => {\n        if (!chatDraftMessage) return;\n\n        const { chatId, draftMessage } = chatDraftMessage;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'setChatDraftMessage',\n            chat_id: chatId,\n            draft_message: draftMessage\n        });\n    };\n\n    getNewChatDraftMessage = (chatId, replyToMessageId) => {\n        let chat = ChatStore.get(chatId);\n        if (!chat) return;\n        const newDraft = this.getInputText();\n\n        let previousDraft = '';\n        let previousReplyToMessageId = 0;\n        const { draft_message } = chat;\n        if (draft_message && draft_message.input_message_text && draft_message.input_message_text.text) {\n            const { reply_to_message_id, input_message_text } = draft_message;\n\n            previousReplyToMessageId = reply_to_message_id;\n            if (input_message_text && input_message_text.text) {\n                previousDraft = input_message_text.text.text;\n            }\n        }\n\n        if (newDraft !== previousDraft || replyToMessageId !== previousReplyToMessageId) {\n            const draftMessage = {\n                '@type': 'draftMessage',\n                reply_to_message_id: replyToMessageId,\n                input_message_text: {\n                    '@type': 'inputMessageText',\n                    text: {\n                        '@type': 'formattedText',\n                        text: newDraft,\n                        entities: null\n                    },\n                    disable_web_page_preview: true,\n                    clear_draft: false\n                }\n            };\n\n            return { chatId: chatId, draftMessage: draftMessage };\n        }\n\n        return null;\n    };\n\n    handleSubmit = () => {\n        let text = this.getInputText();\n\n        this.newMessageRef.current.innerText = null;\n        this.newMessageRef.current.textContent = null;\n        this.innerHTML = null;\n\n        if (!text) return;\n\n        const content = {\n            '@type': 'inputMessageText',\n            text: {\n                '@type': 'formattedText',\n                text: text,\n                entities: null\n            },\n            disable_web_page_preview: false,\n            clear_draft: true\n        };\n\n        this.onSendInternal(content, false, result => {});\n    };\n\n    handleAttachPoll = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPoll'\n        });\n    };\n\n    handleAttachPhoto = () => {\n        if (!this.attachPhotoRef) return;\n\n        this.attachPhotoRef.current.click();\n    };\n\n    handleAttachPhotoComplete = () => {\n        let files = this.attachPhotoRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            readImageSize(file, result => {\n                this.handleSendPhoto(result);\n            });\n        });\n\n        this.attachPhotoRef.current.value = '';\n    };\n\n    handleAttachDocument = () => {\n        if (!this.attachDocumentRef) return;\n\n        this.attachDocumentRef.current.click();\n    };\n\n    handleAttachDocumentComplete = () => {\n        let files = this.attachDocumentRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.attachDocumentRef.current.value = '';\n    };\n\n    getInputText() {\n        let innerText = this.newMessageRef.current.innerText;\n        let innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        return innerText;\n    }\n\n    handleKeyUp = () => {\n        const { chatId } = this.state;\n\n        if (isMeChat(chatId)) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        if (!innerText) return;\n\n        const typingManager = chat.OutputTypingManager || (chat.OutputTypingManager = new OutputTypingManager(chat.id));\n\n        typingManager.setTyping({ '@type': 'chatActionTyping' });\n    };\n\n    handleKeyDown = e => {\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n        this.innerHTML = innerHTML;\n\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            this.handleSubmit();\n        }\n    };\n\n    handleSendPhoto = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessagePhoto',\n            photo: { '@type': 'inputFileBlob', name: file.name, data: file },\n            width: file.photoWidth,\n            height: file.photoHeight\n        };\n\n        this.onSendInternal(content, true, result => {\n            const cachedMessage = MessageStore.get(result.chat_id, result.id);\n            if (cachedMessage != null) {\n                this.handleSendingMessage(cachedMessage, file);\n            }\n\n            FileStore.uploadFile(result.content.photo.sizes[0].photo.id, result);\n        });\n    };\n\n    handleSendPoll = poll => {\n        this.onSendInternal(poll, true, () => {});\n    };\n\n    handleSendDocument = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessageDocument',\n            document: { '@type': 'inputFileBlob', name: file.name, data: file }\n        };\n\n        this.onSendInternal(content, true, result => FileStore.uploadFile(result.content.document.document.id, result));\n    };\n\n    handlePaste = event => {\n        const items = (event.clipboardData || event.originalEvent.clipboardData).items;\n\n        const files = [];\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].kind.indexOf('file') === 0) {\n                files.push(items[i].getAsFile());\n            }\n        }\n\n        if (files.length > 0) {\n            event.preventDefault();\n\n            this.files = files;\n            this.setState({ openPasteDialog: true });\n            return;\n        }\n\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n            this.innerHTML = plainText;\n            return;\n        }\n    };\n\n    handlePasteContinue = () => {\n        this.handleClosePaste();\n\n        const files = this.files;\n        if (!files) return;\n        if (!files.length) return;\n\n        files.forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.files = null;\n    };\n\n    handleClosePaste = () => {\n        this.setState({ openPasteDialog: false });\n    };\n\n    handleSendingMessage = (message, blob) => {\n        if (message && message.sending_state && message.sending_state['@type'] === 'messageSendingStatePending') {\n            if (message.content && message.content['@type'] === 'messagePhoto' && message.content.photo) {\n                let size = getSize(message.content.photo.sizes, PHOTO_SIZE);\n                if (!size) return;\n\n                let file = size.photo;\n                if (file && file.local && file.local.is_downloading_completed && !file.blob) {\n                    file.blob = blob;\n                    FileStore.updatePhotoBlob(message.chat_id, message.id, file.id);\n                }\n            }\n        }\n    };\n\n    onSendInternal = async (content, clearDraft, callback) => {\n        const { chatId, replyToMessageId } = this.state;\n\n        if (!chatId) return;\n        if (!content) return;\n\n        try {\n            await ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${chatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: chatId,\n                reply_to_message_id: replyToMessageId,\n                input_message_content: content\n            });\n\n            this.setState({ replyToMessageId: 0 }, () => {\n                if (clearDraft) {\n                    const newChatDraftMessage = this.getNewChatDraftMessage(\n                        this.state.chatId,\n                        this.state.replyToMessageId\n                    );\n                    this.setChatDraftMessage(newChatDraftMessage);\n                }\n            });\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: chatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    handleEmojiSelect = emoji => {\n        if (!emoji) return;\n\n        this.newMessageRef.current.innerText += emoji.native;\n        this.handleInput();\n    };\n\n    handleInput = async event => {\n        const innerText = this.newMessageRef.current.innerText;\n        if (!innerText || innerText.length > 11) {\n            const { hint } = StickerStore;\n            if (hint) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateStickersHint',\n                    hint: null\n                });\n            }\n\n            return;\n        }\n\n        const t0 = performance.now();\n        const regex = emojiRegex();\n        let match = regex.exec(innerText);\n        const t1 = performance.now();\n        console.log('Matched ' + (t1 - t0) + 'ms', match);\n        if (!match || innerText !== match[0]) {\n            const { hint } = StickerStore;\n            if (hint) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateStickersHint',\n                    hint: null\n                });\n            }\n\n            return;\n        }\n\n        const stickers = await TdLibController.send({\n            '@type': 'searchStickers',\n            emoji: match[0],\n            limit: 100\n        });\n        console.log('Matched stickers', match[0], stickers);\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickersHint',\n            hint: {\n                emoji: match[0],\n                stickers\n            }\n        });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        const content = this.innerHTML !== null ? this.innerHTML : null;\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'inputbox')}>\n                    <InputBoxHeader chatId={chatId} messageId={replyToMessageId} />\n                    <div className='inputbox-wrapper'>\n                        <div className='inputbox-left-column'>\n                            <React.Suspense fallback={<div>Loading...</div>}>\n                                <EmojiPickerButton onSelect={this.handleEmojiSelect} />\n                            </React.Suspense>\n                        </div>\n                        <div className='inputbox-middle-column'>\n                            <div\n                                id='inputbox-message'\n                                ref={this.newMessageRef}\n                                key={new Date()}\n                                placeholder={t('Message')}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                                onInput={this.handleInput}>\n                                {content}\n                            </div>\n                        </div>\n                        <div className='inputbox-right-column'>\n                            <input\n                                ref={this.attachDocumentRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                onChange={this.handleAttachDocumentComplete}\n                            />\n                            <input\n                                ref={this.attachPhotoRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                accept='image/*'\n                                onChange={this.handleAttachPhotoComplete}\n                            />\n                            <AttachButton\n                                chatId={chatId}\n                                onAttachPhoto={this.handleAttachPhoto}\n                                onAttachDocument={this.handleAttachDocument}\n                                onAttachPoll={this.handleAttachPoll}\n                            />\n\n                            {/*<IconButton>*/}\n                            {/*<KeyboardVoiceIcon />*/}\n                            {/*</IconButton>*/}\n                            <IconButton className={classes.iconButton} aria-label='Send' onClick={this.handleSubmit}>\n                                <SendIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                {!isPrivateChat(chatId) && <CreatePollDialog onSend={this.handleSendPoll} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={openPasteDialog}\n                    onClose={this.handleClosePaste}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>{t('AppName')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {this.files && this.files.length > 1\n                                ? 'Are you sure you want to send files?'\n                                : 'Are you sure you want to send file?'}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClosePaste} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handlePasteContinue} color='primary'>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(InputBoxControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { borderStyle } from '../Theme';\nimport './FooterCommand.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass FooterCommand extends React.Component {\n    render() {\n        const { classes, command, onCommand } = this.props;\n\n        return (\n            <div className={classNames(classes.borderColor, 'footer-command-wrapper')}>\n                <div className='footer-command-actions'>\n                    <Button color='primary' className={classes.button} onClick={onCommand}>\n                        {command}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(FooterCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { isChatMuted } from '../../Utils/Chat';\nimport { debounce } from '../../Utils/Common';\nimport {\n    MUTED_VALUE_MAX,\n    NOTIFICATIONS_DEBOUNCE_DELAY_MS,\n    MUTED_VALUE_MIN\n} from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass NotificationsControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = props;\n        const chat = ChatStore.get(chatId);\n        const isMuted = isChatMuted(chat);\n\n        this.state = {\n            prevChatId: chatId,\n            isMuted: isMuted\n        };\n\n        this.debouncedSetChatNotificationSettings = debounce(this.setChatNotificationSettings, NOTIFICATIONS_DEBOUNCE_DELAY_MS);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n            const chat = ChatStore.get(chatId);\n            const isMuted = isChatMuted(chat);\n\n            return {\n                prevChatId: props.chatId,\n                isMuted: isMuted\n            };\n        }\n        return null;\n    }\n\n    componentDidMount() {\n        ChatStore.on('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onUpdateChatNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n\n        this.setState({ isMuted: isChatMuted(chat) });\n    };\n\n    onUpdateScopeNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (\n                    chat.type['@type'] === 'chatTypeBasicGroup' ||\n                    chat.type['@type'] === 'chatTypeSupergroup'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (\n                    chat.type['@type'] === 'chatTypePrivate' ||\n                    chat.type['@type'] === 'chatTypeSecret'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n        }\n    };\n\n    handleSetChatNotifications = () => {\n        this.setState({ isMuted: !this.state.isMuted });\n        this.debouncedSetChatNotificationSettings();\n    };\n\n    setChatNotificationSettings = () => {\n        const { chatId } = this.props;\n        const { isMuted } = this.state;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.notification_settings) return;\n\n        const isMutedPrev = isChatMuted(chat);\n        if (isMutedPrev === isMuted) {\n            return;\n        }\n\n        const muteFor = isMuted ? MUTED_VALUE_MAX : MUTED_VALUE_MIN;\n        const newNotificationSettings = {\n            ...chat.notification_settings,\n            use_default_mute_for: false,\n            mute_for: muteFor\n        };\n\n        TdLibController.send({\n            '@type': 'setChatNotificationSettings',\n            chat_id: chatId,\n            notification_settings: newNotificationSettings\n        });\n    };\n}\n\nexport default NotificationsControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FooterCommand from './FooterCommand';\nimport NotificationsControl from './NotificationsControl';\n\nclass NotificationsCommandControl extends NotificationsControl {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { isMuted } = this.state;\n        const command = isMuted ? 'unmute' : 'mute';\n\n        return (\n            <FooterCommand\n                command={command}\n                onCommand={this.handleSetChatNotifications}/>\n        );\n    }\n\n}\n\nexport default NotificationsCommandControl;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport InputBoxControl from './InputBoxControl';\nimport FooterCommand from './FooterCommand';\nimport NotificationsCommandControl from './NotificationsCommandControl';\nimport { hasBasicGroupId, hasSupergroupId } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Footer.css';\n\nclass Footer extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n\n        if (hasBasicGroupId(chatId, update.basic_group.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n\n        if (hasSupergroupId(chatId, update.supergroup.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleJoin = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'joinChat',\n            chat_id: chatId\n        });\n    };\n\n    handleDeleteAndExit = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: true\n        });\n\n        // TdLibController\n        //     .send({\n        //         '@type': 'leaveChat',\n        //         chat_id: this.props.chatId\n        //     });\n    };\n\n    render() {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                if (basicGroup && basicGroup.status) {\n                    switch (basicGroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return null;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (basicGroup.status.is_member) {\n                                if (!basicGroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'chatTypePrivate': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSecret': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup && supergroup.status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                        }\n                        case 'chatMemberStatusMember': {\n                            if (supergroup.is_channel) {\n                                return <NotificationsCommandControl chatId={chatId} />;\n                            } else {\n                                return <InputBoxControl />;\n                            }\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (supergroup.status.is_member) {\n                                if (!supergroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n}\n\nexport default Footer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport { getUserFullName, getUserShortName, getUserStatus, isUserOnline } from './User';\nimport { getSupergroupStatus } from './Supergroup';\nimport { getBasicGroupStatus } from './BasicGroup';\nimport { getLetters } from './Common';\nimport { getContent } from './Message';\nimport { isServiceMessage } from './ServiceMessage';\nimport UserStore from '../Stores/UserStore';\nimport ChatStore from '../Stores/ChatStore';\nimport BasicGroupStore from '../Stores/BasicGroupStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport InputBoxControl from '../Components/ColumnMiddle/Footer';\n\nfunction getGroupChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    let size = inputTypingManager.actions.size;\n    if (size > 2) {\n        return `${size} people are typing`;\n    } else if (size > 1) {\n        let firstUser;\n        let secondUser;\n        for (let userId of inputTypingManager.actions.keys()) {\n            if (!firstUser) {\n                firstUser = UserStore.get(userId);\n            } else if (!secondUser) {\n                secondUser = UserStore.get(userId);\n                break;\n            }\n        }\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n        secondUser = secondUser.first_name ? secondUser.first_name : secondUser.second_name;\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        return `${firstUser} and ${secondUser} are typing`;\n    } else {\n        let firstUser;\n        if (inputTypingManager.actions.size >= 1) {\n            for (let userId of inputTypingManager.actions.keys()) {\n                if (!firstUser) {\n                    firstUser = UserStore.get(userId);\n                    break;\n                }\n            }\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            let action = inputTypingManager.actions.values().next().value.action;\n            switch (action['@type']) {\n                case 'chatActionRecordingVideo':\n                    return `${firstUser} is recording a video`;\n                case 'chatActionRecordingVideoNote':\n                    return `${firstUser} is recording a video message`;\n                case 'chatActionRecordingVoiceNote':\n                    return `${firstUser} is recording a voice message`;\n                case 'chatActionStartPlayingGame':\n                    return `${firstUser} is playing a game`;\n                case 'chatActionUploadingDocument':\n                    return `${firstUser} is sending a file`;\n                case 'chatActionUploadingPhoto':\n                    return `${firstUser} is sending a photo`;\n                case 'chatActionUploadingVideo':\n                    return `${firstUser} is sending a video`;\n                case 'chatActionUploadingVideoNote':\n                    return `${firstUser} is sending a video message`;\n                case 'chatActionUploadingVoiceNote':\n                    return `${firstUser} is sending a voice message`;\n                case 'chatActionChoosingContact':\n                case 'chatActionChoosingLocation':\n                case 'chatActionTyping':\n                default:\n                    return `${firstUser} is typing`;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getPrivateChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    if (inputTypingManager.actions.size >= 1) {\n        let action = inputTypingManager.actions.values().next().value.action;\n        switch (action['@type']) {\n            case 'chatActionRecordingVideo':\n                return 'recording a video';\n            case 'chatActionRecordingVideoNote':\n                return 'recording a video message';\n            case 'chatActionRecordingVoiceNote':\n                return 'recording a voice message';\n            case 'chatActionStartPlayingGame':\n                return 'playing a game';\n            case 'chatActionUploadingDocument':\n                return 'sending a file';\n            case 'chatActionUploadingPhoto':\n                return 'sending a photo';\n            case 'chatActionUploadingVideo':\n                return 'sending a video';\n            case 'chatActionUploadingVideoNote':\n                return 'sending a video message';\n            case 'chatActionUploadingVoiceNote':\n                return 'sending a voice message';\n            case 'chatActionChoosingContact':\n            case 'chatActionChoosingLocation':\n            case 'chatActionTyping':\n            default:\n                return 'typing';\n        }\n    }\n\n    return null;\n}\n\nfunction getChatTypingString(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    let typingManager = ChatStore.getTypingManager(chat.id);\n    if (!typingManager) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const typingString = getPrivateChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            const typingString = getGroupChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n    }\n\n    return null;\n}\n\nfunction getMessageSenderFullName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n    if (!message.sender_user_id) return null;\n\n    const user = UserStore.get(message.sender_user_id);\n    if (!user) return null;\n\n    return getUserFullName(user);\n}\n\nfunction getMessageSenderName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n\n    const chat = ChatStore.get(message.chat_id);\n    if (chat && chat.type['@type'] !== 'chatTypeBasicGroup' && chat.type['@type'] !== 'chatTypeSupergroup') {\n        return null;\n    }\n\n    return getUserShortName(message.sender_user_id);\n}\n\nfunction getLastMessageSenderName(chat) {\n    if (!chat) return null;\n\n    return getMessageSenderName(chat.last_message);\n}\n\nfunction getLastMessageContent(chat, t = key => key) {\n    if (!chat) return null;\n\n    const { last_message } = chat;\n    if (!last_message) return null;\n\n    return getContent(last_message, t);\n}\n\nfunction getChatUnreadMessageIcon(chat) {\n    if (!chat) return false;\n    if (!chat.last_message) return false;\n\n    return chat.last_message.is_outgoing && chat.last_message.id > chat.last_read_outbox_message_id;\n}\n\nfunction getChatUnreadCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_count) return null;\n\n    return chat.unread_count;\n}\n\nfunction getChatUnreadMentionCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_mention_count) return null;\n\n    return chat.unread_mention_count;\n}\n\nfunction isChatMuted(chat) {\n    return getChatMuteFor(chat) > 0;\n}\n\nfunction getChatMuteFor(chat) {\n    if (!chat) return 0;\n\n    if (chat.use_default_mute_for) {\n        switch (chat.type) {\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopePrivateChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopeGroupChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n        }\n    } else {\n        if (!chat.notification_settings) return 0;\n\n        return chat.notification_settings.mute_for;\n    }\n}\n\nfunction getMessageDate(message) {\n    const date = new Date(message.date * 1000);\n\n    const dayStart = new Date();\n    dayStart.setHours(0, 0, 0, 0);\n    if (date > dayStart) {\n        return dateFormat(date, 'H:MM');\n    }\n\n    const now = new Date();\n    const day = now.getDay();\n    const weekStart = now.getDate() - day + (day === 0 ? -6 : 1);\n    const monday = new Date(now.setDate(weekStart));\n    if (date > monday) {\n        return dateFormat(date, 'ddd');\n    }\n\n    return dateFormat(date, 'd.mm.yyyy');\n}\n\nfunction getLastMessageDate(chat) {\n    if (!chat) return null;\n    if (!chat.last_message) return null;\n    if (!chat.last_message.date) return null;\n    if (showChatDraft(chat.id)) return null;\n\n    return getMessageDate(chat.last_message);\n}\n\nfunction getChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    const { type } = chat;\n    if (!type) return null;\n\n    switch (type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup) {\n                return getBasicGroupStatus(basicGroup, chatId);\n            }\n\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(type.user_id);\n            if (user) {\n                return getUserStatus(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                return getSupergroupStatus(supergroup, chatId);\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatSubtitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return null;\n    }\n\n    const chatTypingString = getChatTypingString(chatId);\n    if (chatTypingString) {\n        return chatTypingString;\n    }\n\n    return getChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatLetters(chat) {\n    if (!chat) return null;\n\n    let title = chat.title || 'Deleted account';\n    if (title.length === 0) return null;\n\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return chat.title.charAt(0);\n}\n\nfunction isAccentChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return isUserOnline(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isAccentChatSubtitle(chatId) {\n    const typingString = getChatTypingString(chatId);\n    if (typingString) return false;\n\n    return isAccentChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatUsername(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.username;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.username;\n            }\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatPhoneNumber(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.phone_number;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return null;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatBio(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const fullInfo = UserStore.getFullInfo(chat.type.user_id);\n            if (fullInfo) {\n                return fullInfo.bio;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const fullInfo = SupergroupStore.getFullInfo(chat.type.supergroup_id);\n            if (fullInfo) {\n                return fullInfo.description;\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction isPrivateChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isGroupChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChannelChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n\n            return supergroup && supergroup.is_channel;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChatMember(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return supergroup.status.is_member;\n                    }\n                }\n            }\n        }\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return basicGroup.status.is_member;\n                    }\n                }\n            }\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction getChatTitle(chatId, showSavedMessages = false, t = key => key) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isMeChat(chatId) && showSavedMessages) {\n        return t('SavedMessages');\n    }\n\n    return chat.title || t('HiddenName');\n}\n\nfunction isMeChat(chatId) {\n    const fallbackValue = false;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            return UserStore.getMyId() === chat.type.user_id;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getGroupChatMembers(chatId) {\n    const fallbackValue = [];\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n            if (fullInfo) {\n                return fullInfo.members || fallbackValue;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            break;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            break;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getChatFullInfo(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n    if (!chat.type) return;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeSecret': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeBasicGroup': {\n            TdLibController.send({\n                '@type': 'getBasicGroupFullInfo',\n                basic_group_id: chat.type.basic_group_id\n            });\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            TdLibController.send({\n                '@type': 'getSupergroupFullInfo',\n                supergroup_id: chat.type.supergroup_id\n            });\n            break;\n        }\n    }\n}\n\nfunction hasBasicGroupId(chatId, basicGroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeBasicGroup' && type.basic_group_id === basicGroupId;\n}\n\nfunction isSupergroup(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeSupergroup';\n}\n\nfunction getSupergroupId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    if (type && type['@type'] === 'chatTypeSupergroup') {\n        return type.supergroup_id;\n    }\n\n    return 0;\n}\n\nfunction hasSupergroupId(chatId, supergroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return isSupergroup(chatId) && type.supergroup_id === supergroupId;\n}\n\nfunction hasUserId(chatId, userId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return (\n        type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') && type.user_id === userId\n    );\n}\n\nfunction getChatUserId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return 0;\n\n    const { type } = chat;\n\n    return type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') ? type.user_id : 0;\n}\n\nfunction getPhotoFromChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isPrivateChat(chatId)) {\n        const user = UserStore.get(getChatUserId(chatId));\n        if (user) {\n            return user.profile_photo;\n        }\n    }\n\n    return chat.photo;\n}\n\nfunction canSendFiles(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction getChatShortTitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return 'Saved Messages';\n    }\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return chat.title;\n        }\n        case 'chatTypeSupergroup': {\n            return chat.title;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return getUserShortName(chat.type.user_id);\n        }\n    }\n\n    return null;\n}\n\nfunction getGroupChatMembersCount(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup) {\n                return basicGroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return 0;\n        }\n    }\n\n    return 0;\n}\n\nfunction canClearHistory(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return !Boolean(supergroup.username);\n            }\n\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction canDeleteChat(chatId) {\n    return !isMeChat(chatId);\n}\n\nfunction canSendPhotos(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendDocuments(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendPolls(chatId) {\n    return true;\n}\n\nfunction canSendMessages(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction showChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n    const draft = getChatDraft(chatId);\n\n    return draft && chat.unread_count === 0 && chat.unread_mention_count === 0;\n}\n\nfunction getChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            const { input_message_text } = draft_message;\n            if (input_message_text) {\n                return input_message_text.text;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getChatDraftReplyToMessageId(chatId) {\n    let replyToMessageId = 0;\n    const chat = ChatStore.get(chatId);\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            replyToMessageId = draft_message.reply_to_message_id;\n        }\n    }\n\n    console.log('getChatDraft', replyToMessageId);\n    return replyToMessageId;\n}\n\nexport {\n    showChatDraft,\n    getChatDraft,\n    getChatDraftReplyToMessageId,\n    getChatTypingString,\n    getChatUnreadMessageIcon,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatMuteFor,\n    getChatSubtitle,\n    getChatSubtitleWithoutTyping,\n    getLastMessageSenderName,\n    getMessageSenderName,\n    getMessageSenderFullName,\n    getLastMessageContent,\n    getLastMessageDate,\n    getMessageDate,\n    getChatLetters,\n    isAccentChatSubtitle,\n    isAccentChatSubtitleWithoutTyping,\n    isChatMuted,\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isPrivateChat,\n    isGroupChat,\n    isChannelChat,\n    isChatMember,\n    getChatTitle,\n    getGroupChatMembers,\n    getChatFullInfo,\n    hasBasicGroupId,\n    hasSupergroupId,\n    isSupergroup,\n    getSupergroupId,\n    hasUserId,\n    getChatUserId,\n    getPhotoFromChat,\n    getChatShortTitle,\n    getGroupChatMembersCount,\n    isMeChat,\n    canClearHistory,\n    canDeleteChat,\n    canSendFiles,\n    canSendMessages,\n    canSendPhotos,\n    canSendDocuments,\n    canSendPolls\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getBasicGroupStatus(basicGroup, chatId) {\n    if (!basicGroup) return null;\n\n    const { status, member_count: count } = basicGroup;\n\n    if (status && (status['@type'] === 'chatMemberStatusBanned' || status['@type'] === 'chatMemberStatusLeft')) {\n        return 'group is inaccessible';\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getBasicGroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getSupergroupStatus(supergroup, chatId) {\n    if (!supergroup) return null;\n\n    let { status, is_channel, member_count: count } = supergroup;\n\n    if (status && status['@type'] === 'chatMemberStatusBanned') {\n        return is_channel ? 'channel is inaccessible' : 'group is inaccessible';\n    }\n\n    if (!count) {\n        const fullInfo = SupergroupStore.getFullInfo(supergroup.id);\n        if (fullInfo) {\n            count = fullInfo.member_count;\n        }\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getSupergroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { isUserOnline } from '../../Utils/User';\nimport { getChatUserId } from '../../Utils/Chat';\nimport UserStore from './../../Stores/UserStore';\nimport './ChatStatus.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        borderRadius: '50%',\n        overflow: 'hidden'\n    },\n    icon: {\n        background: 'transparent',\n        width: '100%',\n        height: '100%',\n        boxSizing: 'border-box'\n    },\n    iconIndicator: {\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        background: '#80d066'\n    }\n});\n\nclass ChatStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const userId = getChatUserId(props.chatId);\n        const user = UserStore.get(userId);\n\n        this.state = {\n            userId: userId,\n            online: isUserOnline(user)\n        };\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.state;\n        const { user_id } = update;\n        if (user_id !== userId) return;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n\n        this.setState({\n            online: isUserOnline(user)\n        });\n    };\n\n    render() {\n        const { classes, size, borderSize, className } = this.props;\n        const { online } = this.state;\n        if (!online) return null;\n\n        return (\n            <div className={classNames(className, classes.root)} style={{ width: size, height: size }}>\n                <div className={classes.icon} style={{ padding: borderSize }}>\n                    <div className={classes.iconIndicator} />\n                </div>\n            </div>\n        );\n    }\n}\n\nChatStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    borderSize: PropTypes.number\n};\n\nChatStatus.defaultProps = {\n    size: 12,\n    borderSize: 2\n};\n\nexport default withStyles(styles)(ChatStatus);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\nimport ChatStatus from './ChatStatus';\nimport { getChatLetters, getChatUserId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { loadChatContent } from '../../Utils/File';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './ChatTileControl.css';\n\nconst styles = {\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {}\n};\n\nclass ChatTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { chatId } = this.props;\n        const { chat_id } = update;\n\n        if (chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    handleSelect = event => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(chatId);\n    };\n\n    render() {\n        const { classes, chatId, showOnline, showSavedMessages, onSelect } = this.props;\n\n        if (isMeChat(chatId) && showSavedMessages) {\n            const className = classNames('tile-photo', 'tile_color_4', { pointer: onSelect });\n            return (\n                <div className={className} onClick={this.handleSelect}>\n                    <div className='tile-saved-messages'>\n                        <BookmarkBorderIcon />\n                    </div>\n                </div>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { photo } = chat;\n\n        const letters = getChatLetters(chat);\n        const blob = photo && photo.small ? FileStore.getBlob(photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n\n        const tileColor = `tile_color_${(Math.abs(chatId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return (\n            <div className='chat-tile' onClick={this.handleSelect}>\n                {src ? (\n                    <img className={className} src={src} draggable={false} alt='' />\n                ) : (\n                    <div className={className}>\n                        <span className='tile-text'>{letters}</span>\n                    </div>\n                )}\n                {showOnline && isPrivateChat(chatId) && (\n                    <ChatStatus classes={{ root: classes.statusRoot, icon: classes.statusIcon }} chatId={chatId} />\n                )}\n            </div>\n        );\n    }\n}\n\nChatTileControl.propTypes = {\n    classes: PropTypes.object,\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool,\n    showOnline: PropTypes.bool\n};\n\nChatTileControl.defaultProps = {\n    showSavedMessages: true,\n    showOnline: false\n};\n\nexport default withStyles(styles, { withTheme: true })(ChatTileControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './ForwardTargetChat.css';\n\nconst styles = theme => ({\n    border: {\n        borderColor: theme.palette.primary.main\n    },\n    markSelected: {\n        boxShadow: 'inset 0 0 0 10px ' + theme.palette.primary.main,\n        border: '2px solid ' + theme.palette.background.paper\n    },\n    markUnselected: {\n        boxShadow: 'inset 0 0 0 0 ' + theme.palette.primary.main,\n        border: '2px solid transparent'\n    }\n});\n\nclass ForwardTargetChat extends React.Component {\n    render() {\n        const { classes, chatId, selected, onSelect } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, true);\n\n        return (\n            <div\n                className={classNames('forward-target-chat', { 'forward-target-chat-selected': selected })}\n                onClick={onSelect}>\n                <div className='forward-target-chat-tile'>\n                    <div className='forward-target-chat-tile-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                    </div>\n                    {selected && <div className={classNames('forward-target-chat-selection', classes.border)} />}\n                    <div\n                        className={classNames(\n                            'forward-target-chat-mark',\n                            selected ? classes.markSelected : classes.markUnselected\n                        )}\n                    />\n                    <div className='forward-target-chat-mark-icon' />\n                </div>\n                <div className='forward-target-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nForwardTargetChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    selected: PropTypes.bool,\n    onSelect: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(ForwardTargetChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nlet cyrillicInput = null;\n\nfunction getCyrillicInputMap() {\n    return new Map([\n        ['q', ''],\n        ['w', ''],\n        ['e', ''],\n        ['r', ''],\n        ['t', ''],\n        ['y', ''],\n        ['u', ''],\n        ['i', ''],\n        ['o', ''],\n        ['p', ''],\n        ['[', ''],\n        [']', ''],\n        ['a', ''],\n        ['s', ''],\n        ['d', ''],\n        ['f', ''],\n        ['g', ''],\n        ['h', ''],\n        ['j', ''],\n        ['k', ''],\n        ['l', ''],\n        [';', ''],\n        [\"'\", ''],\n        ['\\\\', ''],\n        ['z', ''],\n        ['x', ''],\n        ['c', ''],\n        ['v', ''],\n        ['b', ''],\n        ['n', ''],\n        ['m', ''],\n        [',', ''],\n        ['.', '']\n    ]);\n}\n\nfunction getCyrillicInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    cyrillicInput = cyrillicInput || getCyrillicInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (cyrillicInput.has(input[i])) {\n            output += cyrillicInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nlet latinInput = null;\n\nfunction getLatinInputMap() {\n    return new Map([\n        ['', 'q'],\n        ['', 'w'],\n        ['', 'e'],\n        ['', 'r'],\n        ['', 't'],\n        ['', 'y'],\n        ['', 'u'],\n        ['', 'i'],\n        ['', 'o'],\n        ['', 'p'],\n        ['', '['],\n        ['', ']'],\n        ['', 'a'],\n        ['', 's'],\n        ['', 'd'],\n        ['', 'f'],\n        ['', 'g'],\n        ['', 'h'],\n        ['', 'j'],\n        ['', 'k'],\n        ['', 'l'],\n        ['', ';'],\n        ['', \"'\"],\n        ['', '\\\\'],\n        ['', 'z'],\n        ['', 'x'],\n        ['', 'c'],\n        ['', 'v'],\n        ['', 'b'],\n        ['', 'n'],\n        ['', 'm'],\n        ['', ','],\n        ['', '.']\n    ]);\n}\n\nfunction getLatinInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    latinInput = latinInput || getLatinInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (latinInput.has(input[i])) {\n            output += latinInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nexport { getCyrillicInput, getLatinInput };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport ForwardTargetChat from '../Tile/ForwardTargetChat';\nimport { canSendMessages, getChatTitle, getChatUsername, isSupergroup } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { getCyrillicInput, getLatinInput } from '../../Utils/Language';\nimport { borderStyle } from '../Theme';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport UserStore from '../../Stores/UserStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ForwardDialog.css';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    dialog: {\n        color: theme.palette.text.primary\n    },\n    dialogContent: {\n        padding: 0,\n        display: 'flex',\n        position: 'relative'\n    },\n    searchList: {\n        background: theme.palette.background.paper\n    },\n    ...borderStyle(theme)\n});\n\nclass ForwardDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: [],\n            savedMessages: null\n        };\n\n        this.searchRef = React.createRef();\n        this.messageRef = React.createRef();\n\n        this.targetChats = new Map();\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        this.setSearchFocus();\n    }\n\n    loadContent = async () => {\n        this.getPublicMessageLink();\n\n        const promises = [];\n        const getChatsPromise = TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 100\n        });\n        promises.push(getChatsPromise);\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        });\n        promises.push(savedMessagesPromise);\n\n        const [chats, savedMessages] = await Promise.all(promises.map(x => x.catch(e => null)));\n\n        this.setState({\n            chatIds: chats.chat_ids,\n            savedMessages: savedMessages\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats.chat_ids);\n    };\n\n    getPublicMessageLink = async () => {\n        const { chatId, messageIds } = this.props;\n        if (!chatId) return;\n        if (!messageIds) return;\n        if (messageIds.length > 1) return;\n        if (!isSupergroup(chatId)) return;\n        if (!getChatUsername(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getPublicMessageLink',\n            chat_id: chatId,\n            message_id: messageIds[0],\n            for_album: false\n        });\n\n        this.setState({\n            publicMessageLink: result\n        });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: null\n        });\n    };\n\n    handleCopyLink = () => {\n        const { t } = this.props;\n        const { publicMessageLink } = this.state;\n\n        if (!publicMessageLink) return;\n        if (!publicMessageLink.link) return;\n\n        const key = `copy_link_${publicMessageLink.link}`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        copy(publicMessageLink.link);\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    getForwardPhotoSize = (chatId, messageIds) => {\n        if (messageIds.length !== 1) return null;\n\n        const message = MessageStore.get(chatId, messageIds[0]);\n        if (!message) return null;\n\n        const { can_be_forwarded, content } = message;\n        if (!can_be_forwarded && content['@type'] === 'messageChatChangePhoto') {\n            const { photo } = content;\n            if (!photo) return null;\n\n            const { sizes } = photo;\n            if (sizes && sizes.length) {\n                return sizes[sizes.length - 1];\n            }\n        }\n\n        return null;\n    };\n\n    handleSend = () => {\n        this.handleClose();\n\n        const { chatId, messageIds, photoSize, link } = this.props;\n        if (!chatId && !messageIds && !messageIds && !photoSize && !link) return;\n\n        const text = this.getInnerText(this.messageRef.current);\n\n        this.targetChats.forEach(targetChatId => {\n            if (link) {\n                if (text) {\n                    TdLibController.send({\n                        '@type': 'sendMessage',\n                        chat_id: targetChatId,\n                        reply_to_message_id: 0,\n                        disable_notifications: false,\n                        from_background: false,\n                        reply_markup: null,\n                        input_message_content: {\n                            '@type': 'inputMessageText',\n                            text: {\n                                '@type': 'formattedText',\n                                text: text,\n                                entities: null\n                            },\n                            disable_web_page_preview: true,\n                            clear_draft: false\n                        }\n                    });\n                }\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: link,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n\n                return;\n            }\n\n            const size = photoSize || this.getForwardPhotoSize(chatId, messageIds);\n            if (size) {\n                const { width, height, photo } = size;\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessagePhoto',\n                        photo: {\n                            '@type': 'inputFileId',\n                            id: photo.id\n                        },\n                        thumbnail: null,\n                        added_sticker_file_ids: [],\n                        width: width,\n                        height: height,\n                        caption: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        ttl: 0\n                    }\n                });\n\n                return;\n            }\n\n            if (text) {\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n            }\n\n            TdLibController.send({\n                '@type': 'forwardMessages',\n                chat_id: targetChatId,\n                from_chat_id: chatId,\n                message_ids: messageIds,\n                disable_notifications: false,\n                from_background: false,\n                as_album: false\n            });\n        });\n    };\n\n    handleChangeSelection = chatId => {\n        if (this.targetChats.has(chatId)) {\n            this.targetChats.delete(chatId);\n        } else {\n            this.targetChats.set(chatId, chatId);\n        }\n\n        console.log(this.targetChats);\n\n        this.forceUpdate();\n    };\n\n    getInnerText = div => {\n        const innerText = div.innerText;\n        const innerHTML = div.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            div.innerHTML = '';\n        }\n\n        return innerText;\n    };\n\n    handleSearchKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleSearchKeyUp = () => {\n        const { chatIds, savedMessages } = this.state;\n\n        const innerHTML = this.searchRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchRef.current.innerHTML = '';\n        }\n\n        const innerText = this.getInnerText(this.searchRef.current).trim();\n        if (!innerText) {\n            this.setState({ searchText: null, searchResults: [] });\n            return;\n        }\n\n        const latinText = getLatinInput(innerText);\n        const cyrillicText = getCyrillicInput(innerText);\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const searchResults = chatsSource.filter(\n            x =>\n                this.hasSearchText(x, innerText) ||\n                (latinText && this.hasSearchText(x, latinText)) ||\n                (cyrillicText && this.hasSearchText(x, cyrillicText))\n        );\n\n        this.setState({ searchText: innerText, searchResults: searchResults });\n    };\n\n    handleSearchPaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    handleMessageKeyUp = () => {\n        const innerHTML = this.messageRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.messageRef.current.innerHTML = '';\n        }\n    };\n\n    handleMessagePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    hasSearchText = (chatId, searchText) => {\n        const { t } = this.props;\n        const { savedMessages } = this.state;\n\n        if (savedMessages && chatId === savedMessages.id) {\n            const title = getChatTitle(chatId, true, t) || '';\n            if (title.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n                return true;\n            }\n        }\n\n        const title1 = getChatTitle(chatId, false, t) || '';\n        if (title1.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        const username = getChatUsername(chatId) || '';\n        if (username.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        return false;\n    };\n\n    setSearchFocus = () => {\n        setTimeout(() => {\n            if (this.searchRef.current) {\n                const element = this.searchRef.current;\n\n                element.focus();\n            }\n        }, 100);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatIds, searchText, searchResults, savedMessages, publicMessageLink } = this.state;\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const chats = chatsSource.map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        const foundChats = (searchResults || []).map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        return (\n            <Dialog\n                open\n                onClose={this.handleClose}\n                aria-labelledby='forward-dialog-title'\n                aria-describedby='forward-dialog-description'\n                className={classes.dialog}>\n                <DialogTitle id='forward-dialog-title'>{t('ShareSendTo')}</DialogTitle>\n                <div\n                    ref={this.searchRef}\n                    id='forward-dialog-search'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Search')}\n                    onKeyDown={this.handleSearchKeyDown}\n                    onKeyUp={this.handleSearchKeyUp}\n                    onPaste={this.handleSearchPaste}\n                />\n                <div className={classNames(classes.borderColor, 'forward-dialog-content')}>\n                    <div className='forward-dialog-list'>{chats}</div>\n                    {searchText && (\n                        <div className={classNames(classes.searchList, 'forward-dialog-search-list')}>{foundChats}</div>\n                    )}\n                </div>\n                {this.targetChats.size > 0 && (\n                    <div\n                        ref={this.messageRef}\n                        id='forward-dialog-message'\n                        contentEditable\n                        suppressContentEditableWarning\n                        placeholder={t('ShareComment')}\n                        onKeyUp={this.handleMessageKeyUp}\n                        onPaste={this.handleMessagePaste}\n                    />\n                )}\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    {this.targetChats.size > 0 && (\n                        <Button onClick={this.handleSend} color='primary' autoFocus>\n                            {t('Send')}\n                        </Button>\n                    )}\n                    {!this.targetChats.size && publicMessageLink && (\n                        <Button onClick={this.handleCopyLink} color='primary'>\n                            {t('CopyLink')}\n                        </Button>\n                    )}\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nForwardDialog.propTypes = {\n    chatId: PropTypes.number,\n    messageIds: PropTypes.array,\n    photoSize: PropTypes.object\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ForwardDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport './NotificationTimer.css';\n\nclass NotificationTimer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            seconds: this.props.timeout / 1000,\n            value: 0\n        };\n    }\n\n    componentDidMount() {\n        this.startTime = new Date();\n        this.expire = this.startTime;\n        this.expire.setMilliseconds(this.expire.getMilliseconds() + this.props.timeout);\n        this.timerId = setInterval(this.handleTimer, 100);\n    }\n\n    handleTimer = () => {\n        const now = new Date();\n        const seconds = this.expire - now;\n        const value = 100 - (seconds / this.props.timeout) * 100;\n        // console.log(`NotificationTimer ms=${seconds} value=${value}`);\n        this.setState({\n            seconds: seconds > 0 ? seconds : 0,\n            value: value > 100 ? 100 : value\n        });\n\n        if (now >= this.expire) {\n            if (this.timerId) {\n                clearInterval(this.timerId);\n                this.timerId = null;\n            }\n        }\n    };\n\n    componentWillUnmount() {\n        if (this.timerId) {\n            clearInterval(this.timerId);\n            this.timerId = null;\n        }\n    }\n\n    render() {\n        const { value, seconds } = this.state;\n\n        return (\n            <div className='notification-timer'>\n                <div className='notification-timer-text'>\n                    <Typography color='inherit'>{(seconds / 1000).toFixed()}</Typography>\n                </div>\n                <div className='notification-timer-progress'>\n                    <CircularProgress size={32} value={100 - value} variant='static' />\n                </div>\n            </div>\n        );\n    }\n}\n\nNotificationTimer.propTypes = {\n    timeout: PropTypes.number.isRequired\n};\n\nexport default NotificationTimer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withSnackbar } from 'notistack';\nimport { compose } from 'recompose';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport { canClearHistory, canDeleteChat, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MainMenuButton.css';\n\nconst styles = theme => ({\n    menuIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n});\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'right'\n};\n\nconst menuTransformOrigin = {\n    vertical: 'top',\n    horizontal: 'right'\n};\n\nclass LeaveChatDialog extends React.Component {\n    getDeleteDialogText = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return `Are you sure you want to leave group ${chat.title}?`;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel\n                        ? `Are you sure you want to leave channel ${chat.title}?`\n                        : `Are you sure you want to leave group ${chat.title}?`;\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return `Are you sure you want to delete chat with ${getChatShortTitle(chatId)}?`;\n            }\n        }\n\n        return null;\n    };\n\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            {this.getDeleteDialogText(chatId)}\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass ClearHistoryDialog extends React.Component {\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            Are you sure you want clear history?\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            anchorEl: null,\n            openDelete: false,\n            openClearHistory: false\n        };\n    }\n\n    handleButtonClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleChatInfo = () => {\n        this.handleMenuClose();\n        setTimeout(() => this.props.openChatDetails(), 150);\n    };\n\n    handleClearHistory = () => {\n        this.handleMenuClose();\n\n        this.setState({ openClearHistory: true });\n    };\n\n    handleClearHistoryContinue = result => {\n        this.setState({ openClearHistory: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = 'Messages deleted';\n        const request = {\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: false\n        };\n\n        this.handleScheduledAction(chatId, 'clientUpdateClearHistory', message, request);\n    };\n\n    handleLeave = () => {\n        this.handleMenuClose();\n\n        this.setState({ openDelete: true });\n    };\n\n    handleLeaveContinue = result => {\n        this.setState({ openDelete: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = this.getLeaveChatNotification(chatId);\n        const request = isPrivateChat(chatId)\n            ? { '@type': 'deleteChatHistory', chat_id: chatId, remove_from_chat_list: true }\n            : { '@type': 'leaveChat', chat_id: chatId };\n\n        this.handleScheduledAction(chatId, 'clientUpdateLeaveChat', message, request);\n    };\n\n    handleScheduledAction = (chatId, clientUpdateType, message, request) => {\n        if (!clientUpdateType) return;\n\n        const key = `${clientUpdateType} chatId=${chatId}`;\n        const action = async () => {\n            try {\n                await TdLibController.send(request);\n            } finally {\n                TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n            }\n        };\n        const cancel = () => {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n        };\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS, action, cancel)) {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: true });\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS - 2 * TRANSITION_DELAY,\n                action: [\n                    <IconButton key='progress' color='inherit' className='progress-button'>\n                        <NotificationTimer timeout={NOTIFICATION_AUTO_HIDE_DURATION_MS} />\n                    </IconButton>,\n                    <Button\n                        key='undo'\n                        color='primary'\n                        size='small'\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        UNDO\n                    </Button>\n                ]\n            });\n        }\n    };\n\n    getLeaveChatTitle = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Delete and exit';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Leave channel' : 'Leave group';\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Delete conversation';\n            }\n        }\n\n        return null;\n    };\n\n    getLeaveChatNotification = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return 'Chat deleted';\n        if (!chat.type) return 'Chat deleted';\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Chat deleted';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Left channel' : 'Left group';\n                }\n\n                return 'Chat deleted';\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Chat deleted';\n            }\n        }\n\n        return 'Chat deleted';\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, openDelete, openClearHistory } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n        const clearHistory = canClearHistory(chatId);\n        const deleteChat = canDeleteChat(chatId);\n        const leaveChatTitle = this.getLeaveChatTitle(chatId);\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleButtonClick}>\n                    <MoreVertIcon />\n                </IconButton>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}\n                    transformOrigin={menuTransformOrigin}>\n                    <MenuItem onClick={this.handleChatInfo}>Chat info</MenuItem>\n                    {clearHistory && <MenuItem onClick={this.handleClearHistory}>Clear history</MenuItem>}\n                    {deleteChat && leaveChatTitle && <MenuItem onClick={this.handleLeave}>{leaveChatTitle}</MenuItem>}\n                </Menu>\n                <LeaveChatDialog chatId={chatId} open={openDelete} onClose={this.handleLeaveContinue} />\n                <ClearHistoryDialog chatId={chatId} open={openClearHistory} onClose={this.handleClearHistoryContinue} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles),\n    withSnackbar\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { getUserStatus, isUserOnline } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserStatusControl.css';\n\nconst styles = theme => ({\n    userStatusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    userStatusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass UserStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        this.state = {\n            prevUserId: userId,\n            status: getUserStatus(user),\n            isAccent: isUserOnline(user)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.userId !== state.prevUserId) {\n            const { userId } = props;\n            const user = UserStore.get(userId);\n\n            return {\n                prevUserId: userId,\n                status: getUserStatus(user),\n                isAccent: isUserOnline(user)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { userId, theme } = this.props;\n        const { status, isAccent } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.userId !== userId) {\n            return true;\n        }\n\n        if (nextState.status !== status) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        if (userId === update.user_id) {\n            this.setState({ status: getUserStatus(user), isAccent: isUserOnline(user) });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { status, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames('dialog-content', classes.userStatusSubtitle, {\n                    'accent-color': isAccent,\n                    [classes.userStatusAccentSubtitle]: isAccent\n                })}>\n                {status}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(UserStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from './UserTileControl';\nimport UserStatusControl from './UserStatusControl';\nimport { getUserFullName } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserControl.css';\n\nclass UserControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.userId !== this.props.userId;\n    }\n\n    handleClick = () => {\n        const { userId, onSelect } = this.props;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n        if (!onSelect) return;\n\n        onSelect(user);\n    };\n\n    render() {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        const fullName = getUserFullName(user);\n\n        return (\n            <div className='user' onClick={this.handleClick}>\n                <div className='user-wrapper'>\n                    <UserTileControl userId={userId} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <div className='dialog-title'>{fullName}</div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <UserStatusControl userId={userId} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nUserControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default UserControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { getChatTitle } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogTitleControl.css';\n\nclass DialogTitleControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { t, chatId, showSavedMessages } = this.props;\n\n        const title = getChatTitle(chatId, showSavedMessages, t);\n\n        return <div className='dialog-title'>{title}</div>;\n    }\n}\n\nDialogTitleControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogTitleControl.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withTranslation()(DialogTitleControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { getChatSubtitleWithoutTyping, isAccentChatSubtitleWithoutTyping } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport './DialogStatusControl.css';\n\nconst styles = theme => ({\n    statusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    statusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass DialogStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            subtitle: getChatSubtitleWithoutTyping(chatId),\n            isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n\n            return {\n                prevChatId: chatId,\n                subtitle: getChatSubtitleWithoutTyping(chatId),\n                isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.subtitle !== subtitle) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateUserStatus = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        let updateSubtitle = false;\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(x => x.user_id === update.user_id);\n                    if (member) {\n                        updateSubtitle = true;\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n\n        if (updateSubtitle) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    updateSubtitle = chat => {\n        this.setState({\n            subtitle: getChatSubtitleWithoutTyping(chat.id),\n            isAccent: isAccentChatSubtitleWithoutTyping(chat.id)\n        });\n    };\n\n    onUpdateUserFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames(\n                    'dialog-status',\n                    isAccent ? classes.statusAccentSubtitle : classes.statusSubtitle\n                )}>\n                {subtitle}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogStatusControl from './DialogStatusControl';\nimport ChatStore from '../../Stores/ChatStore';\nimport './ChatControl.css';\n\nclass ChatControl extends React.Component {\n    constructor(props) {\n        super(props);\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId } = this.props;\n            this.state = {\n                chat: ChatStore.get(chatId)\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.chatId !== this.props.chatId;\n    }\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        onSelect(chat);\n    };\n\n    render() {\n        const { chatId, onTileSelect, showStatus, showSavedMessages } = this.props;\n\n        return (\n            <div className='chat' onClick={this.handleClick}>\n                <div className='chat-wrapper'>\n                    <ChatTileControl chatId={chatId} onSelect={onTileSelect} showSavedMessages={showSavedMessages} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} showSavedMessages={showSavedMessages} />\n                        </div>\n                        {showStatus && !showSavedMessages && (\n                            <div className='tile-second-row'>\n                                <DialogStatusControl chatId={chatId} />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nChatControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool,\n    showStatus: PropTypes.bool,\n    onSelect: PropTypes.func,\n    onTileSelect: PropTypes.func\n};\n\nChatControl.defaultProps = {\n    showSavedMessages: true,\n    showStatus: true\n};\n\nexport default ChatControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './ChatDetailsHeader.css';\nimport { isChannelChat, isPrivateChat } from '../../Utils/Chat';\n\nconst styles = {\n    leftIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    rightIconButton: {\n        margin: '8px 12px 8px -2px'\n    }\n};\n\nclass ChatDetailsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, chatId, t, backButton, onClick, onClose } = this.props;\n\n        let info = t('ChatInfo');\n        if (isPrivateChat(chatId)) {\n            info = t('Info');\n        } else if (isChannelChat(chatId)) {\n            info = t('ChannelInfo');\n        }\n\n        return (\n            <div className='header-master'>\n                {backButton && (\n                    <IconButton className={classes.leftIconButton} onClick={onClose}>\n                        <ArrowBackIcon />\n                    </IconButton>\n                )}\n                <div className='header-status grow cursor-pointer' onClick={onClick}>\n                    <span className='header-status-content'>{info}</span>\n                </div>\n                {!backButton && (\n                    <IconButton className={classes.rightIconButton} onClick={onClose}>\n                        <CloseIcon />\n                    </IconButton>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(ChatDetailsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport Switch from '@material-ui/core/Switch';\nimport Typography from '@material-ui/core/Typography';\nimport NotificationsControl from '../ColumnMiddle/NotificationsControl';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass NotificationsListItem extends NotificationsControl {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, t } = this.props;\n        const { isMuted } = this.state;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={this.handleSetChatNotifications}>\n                <ListItemIcon>{!isMuted ? <NotificationsActiveIcon /> : <NotificationsIcon />}</ListItemIcon>\n                <ListItemText\n                    primary={\n                        <Typography variant='inherit' noWrap>\n                            {t('Notifications')}\n                        </Typography>\n                    }\n                />\n                <ListItemSecondaryAction>\n                    <Switch color='primary' onChange={this.handleSetChatNotifications} checked={!isMuted} />\n                </ListItemSecondaryAction>\n            </ListItem>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(NotificationsListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { isUserBlocked } from '../../Utils/User';\nimport { isChannelChat, isChatMember, isGroupChat } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass MoreListItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n        this.state = {\n            prevChatId: chatId,\n            openMore: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                openMore: false\n            };\n        }\n\n        return null;\n    }\n\n    handleMoreClick = () => {\n        this.setState({ openMore: !this.state.openMore });\n    };\n\n    handleSendMessage = () => {\n        const currentChatId = ApplicationStore.getChatId();\n        const { chatId } = this.props;\n        if (currentChatId === chatId) {\n            //this.dialogDetails.current.scrollToBottom();\n        } else {\n            TdLibController.setChatId(chatId);\n        }\n    };\n\n    handleBlock = () => {\n        const { chatId } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        const { user_id } = chat.type;\n        if (!user_id) return;\n\n        TdLibController.send({\n            '@type': isUserBlocked(user_id) ? 'unblockUser' : 'blockUser',\n            user_id: user_id\n        });\n    };\n\n    render() {\n        const { t, chatId, classes } = this.props;\n        const { openMore } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const isGroup = isGroupChat(chatId);\n        let isBlocked = false;\n        if (!isGroup && chat.type) {\n            isBlocked = isUserBlocked(chat.type.user_id);\n        }\n        const isMember = isChatMember(chatId);\n        const isChannel = isChannelChat(chatId);\n\n        return (\n            <>\n                <ListItem button className={classes.listItem} onClick={this.handleMoreClick}>\n                    <ListItemIcon>\n                        <MoreHorizIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary={\n                            <Typography variant='inherit' noWrap>\n                                {t('More')}\n                            </Typography>\n                        }\n                    />\n                    {openMore ? <ExpandLess /> : <ExpandMore />}\n                </ListItem>\n                <Collapse in={openMore} timeout='auto' unmountOnExit>\n                    <List component='div' disablePadding>\n                        {!isGroup && (\n                            <>\n                                <ListItem button className={classes.listItem} onClick={this.handleSendMessage}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {t('SendMessage')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                                <ListItem button className={classes.listItem} onClick={this.handleBlock}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography color='secondary' variant='inherit' noWrap>\n                                                {isBlocked ? t('Unblock') : t('BlockContact')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            </>\n                        )}\n                        {isGroup && isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {isChannel ? t('LeaveChannel') : t('DeleteChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                        {isGroup && !isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {t('ReportChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                </Collapse>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MoreListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withSnackbar } from 'notistack';\nimport { withTranslation } from 'react-i18next';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\nimport CallIcon from '@material-ui/icons/Call';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport Button from '@material-ui/core/Button';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '../ColumnMiddle/MainMenuButton';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport UserControl from '../Tile/UserControl';\nimport ChatControl from '../Tile/ChatControl';\nimport ChatDetailsHeader from './ChatDetailsHeader';\nimport NotificationsListItem from './NotificationsListItem';\nimport MoreListItem from './MoreListItem';\nimport {\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isGroupChat,\n    getGroupChatMembers,\n    getChatFullInfo,\n    isPrivateChat,\n    getChatUserId,\n    isMeChat\n} from '../../Utils/Chat';\nimport { getUserStatusOrder } from '../../Utils/User';\nimport { loadUsersContent, loadChatsContent } from '../../Utils/File';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport { openChat } from '../../Actions/Client';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport OptionStore from '../../Stores/OptionStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatDetails.css';\n\nconst styles = theme => ({\n    closeIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    nested: {\n        // paddingLeft: theme.spacing.unit * 4,\n    },\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    listItem: {\n        padding: '11px 22px'\n    }\n});\n\nclass ChatDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.chatDetailsListRef = React.createRef();\n\n        const { chatId } = this.props;\n\n        this.members = new Map();\n        this.state = {\n            prevChatId: chatId,\n            hasGroupsInCommon: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                hasGroupsInCommon: false\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = list;\n        const snapshot = {\n            scrollTop: scrollTop,\n            scrollHeight: scrollHeight,\n            offsetHeight: offsetHeight\n        };\n\n        console.log(\n            `[ChatDetails] getSnapshotBeforeUpdate chatId=${chatId} scrollTop=${scrollTop} scrollHeight=${scrollHeight} offsetHeight=${offsetHeight}`\n        );\n\n        return snapshot;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.hasGroupsInCommon !== hasGroupsInCommon) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId } = this.props;\n        if (prevProps.chatId !== chatId) {\n            this.handleSelectChat();\n        }\n\n        console.log('chatDetailsListRef', this.chatDetailsListRef);\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n        console.log(\n            `[ChatDetails] componentDidUpdate before chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n        list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n        console.log(\n            `[ChatDetails] componentDidUpdate after chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n    }\n\n    componentDidMount() {\n        this.handleSelectChat();\n\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.handleSelectChat();\n\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserStatus = update => {\n        if (this.members.has(update.user_id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelectChat = () => {\n        this.getFullInfo();\n\n        this.getGroupsInCommon();\n\n        this.loadChatContents();\n    };\n\n    loadChatContents = () => {\n        const { chatId } = this.props;\n\n        const store = FileStore.getStore();\n\n        loadChatsContent(store, [chatId]);\n        const members = getGroupChatMembers(chatId).map(x => x.user_id);\n        loadUsersContent(store, members);\n    };\n\n    getFullInfo = () => {\n        const { chatId } = this.props;\n\n        getChatFullInfo(chatId);\n    };\n\n    getGroupsInCommon = async () => {\n        const { chatId } = this.props;\n\n        const isGroup = isGroupChat(chatId);\n        if (isGroup) return;\n\n        const isMe = isMeChat(chatId);\n        if (isMe) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: getChatUserId(chatId),\n            offset_chat_id: 0,\n            limit: 1\n        });\n\n        this.setState({ hasGroupsInCommon: result.chat_ids.length > 0 });\n    };\n\n    handleUsernameHint = () => {\n        const { t, chatId } = this.props;\n        const username = getChatUsername(chatId);\n        if (!username) return;\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n        const usernameLink = telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/';\n\n        copy(usernameLink + username);\n\n        const key = `${chatId}_copy_username`;\n        const message = t('TextCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handlePhoneHint = () => {\n        const { t, chatId } = this.props;\n        const phoneNumber = getChatPhoneNumber(chatId);\n        if (!phoneNumber) return;\n\n        copy(formatPhoneNumber(phoneNumber));\n\n        const key = `${chatId}_copy_phone`;\n        const message = t('PhoneCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleHeaderClick = () => {\n        this.chatDetailsListRef.current.scrollTop = 0;\n    };\n\n    handleOpenViewer = () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.photo) return;\n\n        ApplicationStore.setProfileMediaViewerContent({ chatId: chatId });\n    };\n\n    handleOpenChat = () => {\n        const { chatId, popup } = this.props;\n\n        openChat(chatId, null, false);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    getContentHeight = () => {\n        if (!this.chatDetailsListRef) return 0;\n\n        return this.chatDetailsListRef.current.clientHeight;\n    };\n\n    render() {\n        const {\n            t,\n            className,\n            chatId,\n            classes,\n            onOpenSharedMedia,\n            onOpenGroupsInCommon,\n            popup,\n            backButton,\n            onClose\n        } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) {\n            return (\n                <div className='chat-details'>\n                    <ChatDetailsHeader onClose={onClose} />\n                    <div ref={this.chatDetailsListRef} className='chat-details-list' />\n                </div>\n            );\n        }\n\n        const username = getChatUsername(chatId);\n        const phoneNumber = getChatPhoneNumber(chatId);\n        const bio = getChatBio(chatId);\n        const isGroup = isGroupChat(chatId);\n        const isMe = isMeChat(chatId);\n\n        const members = getGroupChatMembers(chatId);\n        const users = [];\n        this.members = new Map();\n        members.forEach(member => {\n            const user = UserStore.get(member.user_id);\n            if (user) {\n                this.members.set(user.id, user.id);\n                users.push(user);\n            }\n        });\n\n        const sortedUsers = users.sort((x, y) => {\n            return getUserStatusOrder(y) - getUserStatusOrder(x);\n        });\n        const items = sortedUsers.map(user => (\n            <ListItem button className={classes.listItem} key={user.id}>\n                <UserControl userId={user.id} onSelect={this.handleSelectUser} />\n            </ListItem>\n        ));\n\n        const { photo } = chat;\n\n        const content = (\n            <>\n                <ChatDetailsHeader\n                    chatId={chatId}\n                    backButton={backButton}\n                    onClose={onClose}\n                    onClick={this.handleHeaderClick}\n                />\n                <div ref={this.chatDetailsListRef} className='chat-details-list'>\n                    <div className='chat-details-info'>\n                        <ChatControl\n                            chatId={chatId}\n                            showStatus={popup}\n                            showSavedMessages={!popup}\n                            onTileSelect={photo ? this.handleOpenViewer : null}\n                        />\n                    </div>\n                    {(username || phoneNumber || bio) && (\n                        <List>\n                            {username && (\n                                <ListItem button className={classes.listItem} onClick={this.handleUsernameHint}>\n                                    <ListItemIcon>\n                                        <AlternateEmailIcon />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {username}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            )}\n                            {phoneNumber && (\n                                <>\n                                    <ListItem button className={classes.listItem} onClick={this.handlePhoneHint}>\n                                        <ListItemIcon>\n                                            <CallIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {formatPhoneNumber(phoneNumber)}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                </>\n                            )}\n                            {bio && (\n                                <ListItem className={classes.listItem}>\n                                    <ListItemIcon>\n                                        <ErrorOutlineIcon className='chat-details-info-icon' />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={bio}\n                                        style={{ whiteSpace: 'pre-wrap', wordWrap: 'break-word' }}\n                                    />\n                                </ListItem>\n                            )}\n                        </List>\n                    )}\n                    <Divider />\n                    <List>\n                        {!isMe && <NotificationsListItem chatId={chatId} />}\n                        {isGroup && <MoreListItem chatId={chatId} />}\n                        {!isGroup && (\n                            <ListItem button className={classes.listItem} onClick={this.handleOpenChat}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='primary' variant='inherit' noWrap>\n                                            {t('SendMessage').toUpperCase()}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    <Divider />\n                    <List>\n                        <ListItem button disabled className={classes.listItem} onClick={onOpenSharedMedia}>\n                            <ListItemIcon>\n                                <PhotoIcon />\n                            </ListItemIcon>\n                            <ListItemText\n                                primary={\n                                    <Typography variant='inherit' noWrap>\n                                        {t('SharedMedia')}\n                                    </Typography>\n                                }\n                            />\n                        </ListItem>\n                        {hasGroupsInCommon && (\n                            <ListItem button className={classes.listItem} onClick={onOpenGroupsInCommon}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography variant='inherit' noWrap>\n                                            {t('GroupsInCommon')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    {items.length > 0 && (\n                        <>\n                            <Divider />\n                            <List>{items}</List>\n                        </>\n                    )}\n                </div>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className={classNames('chat-details', className)}>{content}</div>;\n    }\n}\n\nChatDetails.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    popup: PropTypes.bool,\n    onClose: PropTypes.func,\n    onOpenSharedMedia: PropTypes.func,\n    onOpenGroupsInCommon: PropTypes.func\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withSnackbar,\n    withRestoreRef()\n);\n\nexport default enhance(ChatDetails);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './GroupsInCommonHeader.css';\n\nconst styles = {\n    backIconButton: {\n        margin: '8px -2px 8px 12px'\n    }\n};\n\nclass GroupsInCommonHeader extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, onClose } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton className={classes.backIconButton} onClick={onClose}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Groups in common</span>\n                </div>\n            </div>\n        );\n    }\n}\n\nGroupsInCommonHeader.propTypes = {\n    onClose: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(GroupsInCommonHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatControl from '../Tile/ChatControl';\nimport GroupsInCommonHeader from './GroupsInCommonHeader';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './GroupsInCommon.css';\n\nclass GroupsInCommon extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: []\n        };\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n\n        const userId = getChatUserId(chatId);\n        if (!userId) return;\n\n        TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: userId,\n            offset_chat_id: 0,\n            limit: 100\n        }).then(result => {\n            const store = FileStore.getStore();\n            loadChatsContent(store, result.chat_ids);\n\n            this.setState({ chatIds: result.chat_ids });\n        });\n    }\n\n    handleSelect = chat => {\n        const { popup } = this.props;\n\n        openChat(chat.id);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    render() {\n        const { minHeight, onClose, popup } = this.props;\n        const { chatIds } = this.state;\n\n        const chats = chatIds.map(x => (\n            <ListItem button key={x}>\n                <ChatControl chatId={x} onSelect={this.handleSelect} />\n            </ListItem>\n        ));\n\n        const content = (\n            <>\n                <GroupsInCommonHeader onClose={onClose} />\n                <div className='groups-in-common-list' style={{ minHeight }}>\n                    {chats}\n                </div>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className='groups-in-common'>{content}</div>;\n    }\n}\n\nGroupsInCommon.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    popup: PropTypes.bool,\n    minHeight: PropTypes.number\n};\n\nGroupsInCommon.defaultProps = {\n    popup: false,\n    minHeight: 0\n};\n\nexport default GroupsInCommon;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './SharedMediaHeaderControl.css';\n\nconst styles = {\n    backIconButton: {\n        margin: '8px -2px 8px 12px'\n    }\n};\n\nclass SharedMediaHeaderControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, close } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton className={classes.backIconButton} onClick={close}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Shared Media</span>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(SharedMediaHeaderControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport SharedMediaHeaderControl from './SharedMediaHeaderControl';\nimport './SharedMedia.css';\nimport PropTypes from 'prop-types';\nimport GroupsInCommon from './GroupsInCommon';\n\nclass SharedMedia extends React.Component {\n    state = {\n        value: 0\n    };\n\n    handleChange = (event, value) => {\n        this.setState({ value });\n    };\n\n    render() {\n        const { onClose, popup } = this.props;\n        const { value } = this.state;\n\n        const content = (\n            <>\n                <SharedMediaHeaderControl close={onClose} />\n                <Tabs\n                    value={value}\n                    onChange={this.handleChange}\n                    indicatorColor='primary'\n                    textColor='primary'\n                    scrollable\n                    scrollButtons='off'\n                    fullWidth>\n                    <Tab label='Media' style={{ minWidth: '40px' }} />\n                    <Tab label='Docs' style={{ minWidth: '40px' }} />\n                    <Tab label='Links' style={{ minWidth: '40px' }} />\n                    <Tab label='Audio' style={{ minWidth: '40px' }} />\n                </Tabs>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className='shared-media'>{content}</div>;\n    }\n}\n\nSharedMedia.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    popup: PropTypes.bool,\n    minHeight: PropTypes.number\n};\n\nSharedMedia.defaultProps = {\n    popup: false,\n    minHeight: 0\n};\n\nexport default SharedMedia;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ChatDetails from './ChatDetails';\nimport GroupsInCommon from './GroupsInCommon';\nimport SharedMedia from './SharedMedia';\nimport { borderStyle } from '../Theme';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfo.css';\n\n// const styles = (theme) => ({\n//     borderColor: {\n//         borderColor: theme.palette.divider\n//     }\n// });\n\nclass ChatInfo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.detailsRef = React.createRef();\n\n        const { popup } = props;\n\n        this.state = {\n            chatId: popup ? ApplicationStore.dialogChatId : ApplicationStore.chatId\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { popup } = this.props;\n        if (popup) return;\n\n        this.setState({\n            chatId: update.nextChatId,\n            userChatId: null,\n            openSharedMedia: false,\n            openGroupsInCommon: false\n        });\n    };\n\n    handelOpenSharedMedia = () => {\n        this.setState({ openSharedMedia: true });\n    };\n\n    handleCloseSharedMedia = () => {\n        this.setState({ openSharedMedia: false });\n    };\n\n    handleOpenGroupsInCommon = height => {\n        console.log('ChatInfo.handleOpenGroupsInCommon', height);\n        this.setState({ openGroupsInCommon: true });\n    };\n\n    handleCloseGroupsInCommon = () => {\n        this.setState({ openGroupsInCommon: false });\n    };\n\n    handleCloseChatDetails = () => {\n        const { popup } = this.props;\n        const { userChatId } = this.state;\n        if (userChatId) {\n            this.setState({ userChatId: null });\n        } else if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        } else {\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n    };\n\n    handleSelectUser = async user => {\n        if (!user) return;\n\n        let chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: user.id,\n            force: true\n        });\n\n        chat = ChatStore.get(chat.id) || chat;\n        if (!chat) return;\n\n        this.setState({ userChatId: chat.id });\n    };\n\n    render() {\n        const { classes, className, popup } = this.props;\n        const { chatId, userChatId, openSharedMedia, openGroupsInCommon } = this.state;\n        const currentChatId = chatId || userChatId;\n        const minHeight = this.detailsRef && this.detailsRef.current ? this.detailsRef.current.getContentHeight() : 0;\n\n        let content = null;\n        if (openSharedMedia) {\n            content = (\n                <SharedMedia\n                    chatId={currentChatId}\n                    popup={popup}\n                    minHeight={minHeight}\n                    onClose={this.handleCloseSharedMedia}\n                />\n            );\n        } else if (openGroupsInCommon) {\n            content = (\n                <GroupsInCommon\n                    chatId={currentChatId}\n                    popup={popup}\n                    minHeight={minHeight}\n                    onClose={this.handleCloseGroupsInCommon}\n                />\n            );\n        } else {\n            content = (\n                <ChatDetails\n                    ref={this.detailsRef}\n                    chatId={currentChatId}\n                    popup={popup}\n                    backButton={userChatId === chatId}\n                    onOpenSharedMedia={this.handelOpenSharedMedia}\n                    onOpenGroupsInCommon={this.handleOpenGroupsInCommon}\n                    onClose={this.handleCloseChatDetails}\n                />\n            );\n        }\n\n        return popup ? (\n            <>{content}</>\n        ) : (\n            <div className={classNames(classes.borderColor, { 'right-column': !popup }, className)}>{content}</div>\n        );\n    }\n}\n\nChatInfo.propTypes = {\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    popup: PropTypes.bool\n};\n\nChatInfo.defaultProps = {\n    className: null,\n    classes: null,\n    popup: false\n};\n\nexport default withStyles(borderStyle)(ChatInfo);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './TopChat.css';\n\nconst styles = {\n    userStatusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    }\n};\n\nclass TopChat extends React.PureComponent {\n    render() {\n        const { classes, chatId, onSelect, showSavedMessages } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, showSavedMessages);\n\n        return (\n            <div className='top-chat'>\n                <ChatTileControl chatId={chatId} onSelect={onSelect} showSavedMessages={showSavedMessages} showOnline />\n                <div className='top-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nTopChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool\n};\n\nTopChat.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withStyles(styles)(TopChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport './RecentlyFoundChat.css';\n\nconst styles = {\n    listItem: {\n        padding: '0px'\n    }\n};\n\nclass RecentlyFoundChat extends React.PureComponent {\n    render() {\n        const { chatId, onClick, classes } = this.props;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div className='recently-found-chat'>\n                    <div className='chat-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                        <div className='dialog-inner-wrapper'>\n                            <div className='tile-first-row'>\n                                <DialogTitleControl chatId={chatId} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nRecentlyFoundChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default withStyles(styles)(RecentlyFoundChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classNames from 'classnames';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getChatUsername, getGroupChatMembersCount } from '../../Utils/Chat';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundPublicChat.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    listItemSelected: {\n        backgroundColor: theme.palette.primary.main + '!important'\n    },\n    foundPublicChatSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundPublicChat extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            previousChatId: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { nextChatId, previousChatId } = update;\n\n        this.setState({\n            nextChatId: nextChatId,\n            previousChatId: previousChatId\n        });\n    };\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        onSelect(chatId);\n    };\n\n    render() {\n        const { chatId, onClick, classes } = this.props;\n        const selectedChatId = this.state.nextChatId;\n\n        const username = getChatUsername(chatId);\n        const membersCount = getGroupChatMembersCount(chatId);\n        let subscribersString = '';\n        if (membersCount > 0) {\n            subscribersString = membersCount === 1 ? ', 1 subscriber' : `, ${membersCount} subscribers`;\n        }\n\n        return (\n            <ListItem button classes={{ root: classes.listItem }} onClick={onClick}>\n                <div\n                    className={classNames('found-public-chat', {\n                        [classes.listItemSelected]: chatId === selectedChatId,\n                        'accent-background': chatId === selectedChatId\n                    })}\n                    onClick={this.handleClick}>\n                    <ChatTileControl chatId={chatId} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundPublicChatSubtitle)}>\n                                @{username}\n                                {subscribersString}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundPublicChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(FoundPublicChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatTileControl from './ChatTileControl';\nimport UserTileControl from './UserTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getMessageDate, getMessageSenderFullName, getMessageSenderName } from '../../Utils/Chat';\nimport { getContent } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundMessage.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    accentBackground: {\n        background: theme.palette.primary.main + '!important'\n    },\n    foundMessageSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            nextMessageId: ApplicationStore.getMessageId()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId && nextState.nextMessageId === messageId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId && nextState.previousMessageId === messageId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            ...update\n        });\n    };\n\n    render() {\n        const { chatId, messageId, chatSearch, onClick, classes, t } = this.props;\n        const selectedChatId = this.state.nextChatId;\n        const selectedMessageId = this.state.nextMessageId;\n        const message = MessageStore.get(chatId, messageId);\n\n        const { sender_user_id } = message;\n\n        const date = getMessageDate(message);\n        const senderName = getMessageSenderName(message);\n        const senderFullName = getMessageSenderFullName(message);\n        const content = getContent(message, t) || '\\u00A0';\n\n        const tile =\n            sender_user_id && chatSearch ? (\n                <UserTileControl userId={sender_user_id} />\n            ) : (\n                <ChatTileControl chatId={chatId} />\n            );\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div\n                    className={classNames(\n                        'found-message',\n                        { [classes.accentBackground]: chatId === selectedChatId && messageId === selectedMessageId },\n                        { 'accent-background': chatId === selectedChatId && messageId === selectedMessageId }\n                    )}>\n                    {tile}\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            {chatSearch && senderFullName ? (\n                                <div className='dialog-title'>{senderFullName}</div>\n                            ) : (\n                                <DialogTitleControl chatId={chatId} />\n                            )}\n                            <div className={classNames('dialog-meta-date', classes.foundMessageSubtitle)}>{date}</div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundMessageSubtitle)}>\n                                {\n                                    <>\n                                        {!chatSearch && senderName && (\n                                            <span className='dialog-content-accent'>{senderName}: </span>\n                                        )}\n                                        {content}\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundMessage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    chatSearch: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(FoundMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './SearchCaption.css';\n\nconst styles = theme => ({\n    searchCaption: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] + '!important' : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    },\n    searchCaptionCommand: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    }\n});\n\nfunction SearchCaption(props) {\n    const { caption, command, onClick, classes } = props;\n\n    return (\n        <div className={classNames('search-caption', classes.searchCaption)}>\n            <div className='search-caption-title'>{caption}</div>\n            {Boolean(command) && (\n                <a className={classes.searchCaptionCommand} onClick={onClick}>\n                    {command}\n                </a>\n            )}\n        </div>\n    );\n}\n\nSearchCaption.propTypes = {\n    caption: PropTypes.string.isRequired,\n    command: PropTypes.string,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchCaption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport ChatControl from '../../Tile/ChatControl';\nimport TopChat from '../../Tile/TopChat';\nimport RecentlyFoundChat from '../../Tile/RecentlyFoundChat';\nimport FoundPublicChat from '../../Tile/FoundPublicChat';\nimport FoundMessage from '../../Tile/FoundMessage';\nimport SearchCaption from './SearchCaption';\nimport { loadChatsContent, loadUsersContent } from '../../../Utils/File';\nimport { filterMessages } from '../../../Utils/Message';\nimport { getCyrillicInput, getLatinInput } from '../../../Utils/Language';\nimport { orderCompare } from '../../../Utils/Common';\nimport { USERNAME_LENGTH_MIN } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport FileStore from '../../../Stores/FileStore';\nimport ChatStore from '../../../Stores/ChatStore';\nimport UserStore from '../../../Stores/UserStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './Search.css';\n\nconst styles = theme => ({\n    closeSearchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    listItem: {\n        padding: '0px'\n    },\n    search: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    }\n});\n\nclass Search extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n\n        const { chatId, text } = this.props;\n\n        this.state = {\n            prevPropsChatId: chatId,\n            prevPropsText: text,\n\n            top: null,\n            recentlyFound: null,\n            local: null,\n            global: null,\n            messages: null\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevPropsChatId || props.text !== state.prevPropsText) {\n            return {\n                prevPropsChatId: props.chatId,\n                prevPropsText: props.text,\n\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        ApplicationStore.on('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    onClientUpdateSearchText = update => {\n        const { text } = update;\n\n        const trimmedText = text.trim();\n\n        if (!trimmedText) {\n            this.loadContent();\n        } else {\n            this.searchText(trimmedText);\n        }\n    };\n\n    concatSearchResults = results => {\n        const arr = [];\n        const map = new Map();\n\n        for (let i = 0; i < results.length; i++) {\n            let result = results[i].chat_ids;\n            if (result) {\n                for (let j = 0; j < result.length; j++) {\n                    if (!map.has(result[j])) {\n                        map.set(result[j], result[j]);\n                        arr.push(result[j]);\n                    }\n                }\n            }\n        }\n\n        arr.sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        return arr;\n    };\n\n    searchText = async text => {\n        this.sessionId = new Date();\n        this.text = text;\n        const sessionId = this.sessionId;\n        let store = null;\n\n        const { chatId } = this.props;\n        const { savedMessages } = this.state;\n\n        if (!chatId) {\n            const promises = [];\n            const localPromise = TdLibController.send({\n                '@type': 'searchChats',\n                query: text,\n                limit: 100\n            });\n            promises.push(localPromise);\n\n            const latinText = getLatinInput(text);\n            if (latinText) {\n                const latinLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: latinText,\n                    limit: 100\n                });\n                promises.push(latinLocalPromise);\n            }\n\n            const cyrillicText = getCyrillicInput(text);\n            if (cyrillicText) {\n                const cyrillicLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: cyrillicText,\n                    limit: 100\n                });\n                promises.push(cyrillicLocalPromise);\n            }\n\n            const results = await Promise.all(promises.map(x => x.catch(e => null)));\n            const local = this.concatSearchResults(results);\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            if (savedMessages) {\n                const { t } = this.props;\n\n                const searchText = text.toUpperCase();\n                const savedMessagesStrings = ['SAVED MESSAGES', t('SavedMessages').toUpperCase()];\n\n                if (\n                    savedMessagesStrings.some(el => el.includes(searchText)) ||\n                    (latinText && savedMessagesStrings.some(el => el.includes(latinText.toUpperCase())))\n                ) {\n                    local.splice(0, 0, savedMessages.id);\n                }\n            }\n\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: local,\n                global: null,\n                messages: null\n            });\n\n            store = FileStore.getStore();\n            loadChatsContent(store, local);\n\n            if (text.length >= USERNAME_LENGTH_MIN) {\n                const globalPromises = [];\n\n                const globalPromise = TdLibController.send({\n                    '@type': 'searchPublicChats',\n                    query: text\n                });\n                globalPromises.push(globalPromise);\n\n                if (latinText) {\n                    const globalLatinPromise = TdLibController.send({\n                        '@type': 'searchPublicChats',\n                        query: latinText\n                    });\n                    globalPromises.push(globalLatinPromise);\n                }\n\n                const globalResults = await Promise.all(globalPromises.map(x => x.catch(e => null)));\n                const global = this.concatSearchResults(globalResults);\n\n                if (sessionId !== this.sessionId) {\n                    return;\n                }\n\n                this.setState({\n                    global: global\n                });\n\n                store = FileStore.getStore();\n                loadChatsContent(store, global);\n            }\n        }\n\n        let messages = [];\n        if (chatId) {\n            messages = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: text,\n                sender_user_id: 0,\n                from_message_id: 0,\n                offset: 0,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            messages = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: text,\n                offset_date: 0,\n                offset_chat_id: 0,\n                offset_message_id: 0,\n                limit: 50\n            });\n        }\n\n        MessageStore.setItems(messages.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: messages\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < messages.messages.length; i++) {\n            chats.set(messages.messages[i].chat_id, messages.messages[i].chat_id);\n            if (messages.messages[i].sender_user_id) {\n                users.set(messages.messages[i].sender_user_id, messages.messages[i].sender_user_id);\n            }\n        }\n\n        store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    loadContent = async () => {\n        const { chatId } = this.props;\n        if (chatId) {\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            });\n\n            return;\n        }\n\n        const topPromise = TdLibController.send({\n            '@type': 'getTopChats',\n            category: { '@type': 'topChatCategoryUsers' },\n            limit: 30\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const recentlyFoundPromise = TdLibController.send({\n            '@type': 'searchChats',\n            query: '',\n            limit: 100\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        }).catch(error => {});\n\n        const [top, recentlyFound, savedMessages] = await Promise.all([\n            topPromise,\n            recentlyFoundPromise,\n            savedMessagesPromise\n        ]);\n\n        this.setState({\n            top: top,\n            recentlyFound: recentlyFound,\n            savedMessages: savedMessages,\n            local: null,\n            global: null,\n            messages: null\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, top.chat_ids);\n        loadChatsContent(store, recentlyFound.chat_ids);\n    };\n\n    handleRecentlyFound = async () => {\n        const chats = await TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 20\n        });\n\n        for (let i = chats.chat_ids.length - 1; i >= 0; i--) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chats.chat_ids[i]\n            });\n        }\n    };\n\n    handleClearRecentlyFound = event => {\n        event.stopPropagation();\n\n        TdLibController.send({\n            '@type': 'clearRecentlyFoundChats'\n        });\n\n        this.setState({ recentlyFound: null });\n    };\n\n    handleSelectMessage = (chatId, messageId, addToRecent, keepOpen) => {\n        const { onSelectMessage } = this.props;\n\n        if (addToRecent) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chatId\n            });\n        }\n\n        onSelectMessage(chatId, messageId, keepOpen);\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            this.onLoadPrevious();\n        }\n    };\n\n    getOffset = messages => {\n        const length = messages ? messages.messages.length : 0;\n\n        const offsetDate = length > 0 ? messages.messages[length - 1].date : 0;\n        const offsetChatId = length > 0 ? messages.messages[length - 1].chat_id : 0;\n        const offsetMessageId = length > 0 ? messages.messages[length - 1].id : 0;\n\n        return {\n            offset_date: offsetDate,\n            offset_chat_id: offsetChatId,\n            offset_message_id: offsetMessageId\n        };\n    };\n\n    concatMessages = (messages, result) => {\n        if (!result) return messages;\n        if (!result.messages.length) return messages;\n\n        if (!messages) return result;\n        if (!messages.messages.length) return result;\n\n        return {\n            total_count: result.total_count,\n            messages: messages.messages.concat(result.messages)\n        };\n    };\n\n    onLoadPrevious = async () => {\n        if (this.loading) return;\n\n        const { chatId } = this.props;\n\n        const sessionId = this.sessionId;\n\n        const { messages } = this.state;\n\n        const offset = this.getOffset(messages);\n\n        this.loading = true;\n        let result = [];\n        if (chatId) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: this.text,\n                sender_user_id: 0,\n                from_message_id: offset.offset_message_id,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            result = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: this.text,\n                ...offset,\n                limit: 50\n            });\n        }\n        this.loading = false;\n\n        filterMessages(result, messages ? messages.messages : []);\n\n        MessageStore.setItems(result.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: this.concatMessages(messages, result)\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < result.messages.length; i++) {\n            chats.set(result.messages[i].chat_id, result.messages[i].chat_id);\n            if (result.messages[i].sender_user_id) {\n                users.set(result.messages[i].sender_user_id, result.messages[i].sender_user_id);\n            }\n        }\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    handleTopChatsScroll = event => {\n        event.stopPropagation();\n    };\n\n    handleClose = () => {\n        const { onClose } = this.props;\n\n        onClose();\n    };\n\n    render() {\n        const { classes, chatId } = this.props;\n        const { top, recentlyFound, local, global, messages } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const topChats =\n            top && top.chat_ids\n                ? top.chat_ids.map(x => (\n                      <TopChat key={x} chatId={x} onSelect={() => this.handleSelectMessage(x, null, false, false)} />\n                  ))\n                : [];\n\n        const recentlyFoundChats =\n            recentlyFound && recentlyFound.chat_ids\n                ? recentlyFound.chat_ids.map(x => (\n                      <RecentlyFoundChat\n                          key={x}\n                          chatId={x}\n                          onClick={() => this.handleSelectMessage(x, null, true, false)}\n                      />\n                  ))\n                : [];\n\n        const localChats = local\n            ? local.map(x => (\n                  <RecentlyFoundChat\n                      key={x}\n                      chatId={x}\n                      onClick={() => this.handleSelectMessage(x, null, true, false)}\n                  />\n              ))\n            : [];\n\n        const globalChats = global\n            ? global.map(x => (\n                  <FoundPublicChat key={x} chatId={x} onClick={() => this.handleSelectMessage(x, null, true, true)} />\n              ))\n            : [];\n\n        const globalMessages =\n            messages && messages.messages\n                ? messages.messages.map(x => (\n                      <FoundMessage\n                          key={`${x.chat_id}_${x.id}`}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          chatSearch={Boolean(chatId)}\n                          onClick={() => this.handleSelectMessage(x.chat_id, x.id, false, true)}\n                      />\n                  ))\n                : [];\n\n        let messagesCaption = 'No messages found';\n        if (messages && messages.total_count) {\n            messagesCaption = messages.total_count === 1 ? 'Found 1 message' : `Found ${messages.total_count} messages`;\n        }\n\n        return (\n            <div ref={this.listRef} className={classNames(classes.search, 'search')} onScroll={this.handleScroll}>\n                {chat && (\n                    <div className='search-chat'>\n                        <SearchCaption caption='Search messages in' />\n                        <div className='search-chat-wrapper'>\n                            <div className='search-chat-control'>\n                                <ChatControl chatId={chatId} showStatus={false} />\n                            </div>\n                            <IconButton\n                                className={classes.closeSearchIconButton}\n                                aria-label='Search'\n                                onMouseDown={this.handleClose}>\n                                <CloseIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                )}\n                {topChats.length > 0 && (\n                    <div className='search-top-chats'>\n                        <SearchCaption caption='People' />\n                        <div className='search-top-chats-list' onScroll={this.handleTopChatsScroll}>\n                            <div className='search-top-chats-placeholder' />\n                            {topChats}\n                            <div className='search-top-chats-placeholder' />\n                        </div>\n                    </div>\n                )}\n                {recentlyFoundChats.length > 0 && (\n                    <div className='search-recently-found-chats'>\n                        <SearchCaption caption='Recent' command='Clear' onClick={this.handleClearRecentlyFound} />\n                        {recentlyFoundChats}\n                    </div>\n                )}\n                {localChats.length > 0 && (\n                    <div className='search-local-chats'>\n                        <SearchCaption caption='Chats and contacts' />\n                        {localChats}\n                    </div>\n                )}\n                {globalChats.length > 0 && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption='Global search' />\n                        {globalChats}\n                    </div>\n                )}\n                {messages && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption={messagesCaption} />\n                        {globalMessages}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nSearch.propTypes = {\n    chatId: PropTypes.number,\n    text: PropTypes.string,\n    onSelectMessage: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Search);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport red from '@material-ui/core/colors/red';\nimport orange from '@material-ui/core/colors/orange';\nimport amber from '@material-ui/core/colors/amber';\nimport green from '@material-ui/core/colors/green';\nimport blue from '@material-ui/core/colors/blue';\nimport indigo from '@material-ui/core/colors/indigo';\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    },\n    redRoot: {\n        color: red[600],\n        '&$checked': {\n            color: red[500]\n        }\n    },\n    orangeRoot: {\n        color: orange[600],\n        '&$checked': {\n            color: orange[500]\n        }\n    },\n    amberRoot: {\n        color: amber[600],\n        '&$checked': {\n            color: amber[500]\n        }\n    },\n    greenRoot: {\n        color: green[600],\n        '&$checked': {\n            color: green[500]\n        }\n    },\n    blueRoot: {\n        color: blue[600],\n        '&$checked': {\n            color: blue[500]\n        }\n    },\n    indigoRoot: {\n        color: indigo[600],\n        '&$checked': {\n            color: indigo[500]\n        }\n    },\n    deepPurpleRoot: {\n        color: deepPurple[600],\n        '&$checked': {\n            color: deepPurple[500]\n        }\n    },\n    checked: {}\n});\n\nclass ThemePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            type: this.props.theme.palette.type,\n            color: this.getColorString(this.props.theme.palette.primary.main)\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ type: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: event.target.value,\n            primary: this.getColor(this.state.color)\n        });\n    };\n\n    handleAccentChange = event => {\n        this.setState({ color: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: this.state.type,\n            primary: this.getColor(event.target.value)\n        });\n    };\n\n    getColorString = value => {\n        switch (value) {\n            case red['500']:\n                return 'red';\n            case orange['500']:\n                return 'orange';\n            case amber['500']:\n                return 'amber';\n            case green['500']:\n                return 'green';\n            case blue['500']:\n                return 'blue';\n            case indigo['500']:\n                return 'indigo';\n            case deepPurple['500']:\n                return 'deepPurple';\n        }\n\n        return null;\n    };\n\n    getColor = value => {\n        switch (value) {\n            case 'red':\n                return red;\n            case 'orange':\n                return orange;\n            case 'amber':\n                return amber;\n            case 'green':\n                return green;\n            case 'blue':\n                return blue;\n            case 'indigo':\n                return indigo;\n            case 'deepPurple':\n                return deepPurple;\n        }\n\n        return null;\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { type, color } = this.state;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onClose={this.handleClose}\n                aria-labelledby='alert-dialog-title'\n                aria-describedby='alert-dialog-description'>\n                <DialogTitle id='alert-dialog-title'>Appearance</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Theme\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='theme'\n                            name='theme1'\n                            className={classes.group}\n                            value={type}\n                            onChange={this.handleChange}>\n                            <FormControlLabel value='light' control={<Radio color='primary' />} label='Light' />\n                            <FormControlLabel value='dark' control={<Radio color='primary' />} label='Dark' />\n                        </RadioGroup>\n                    </FormControl>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Accent\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='accent'\n                            name='accent1'\n                            className={classes.group}\n                            value={color}\n                            onChange={this.handleAccentChange}>\n                            <FormControlLabel\n                                value='red'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.redRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Red'\n                            />\n                            <FormControlLabel\n                                value='orange'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.orangeRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Orange'\n                            />\n                            <FormControlLabel\n                                value='amber'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.amberRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Amber'\n                            />\n                            <FormControlLabel\n                                value='green'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.greenRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Green'\n                            />\n                            <FormControlLabel\n                                value='blue'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.blueRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Blue'\n                            />\n                            <FormControlLabel\n                                value='indigo'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.indigoRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Indigo'\n                            />\n                            <FormControlLabel\n                                value='deepPurple'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.deepPurpleRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Deep Purple'\n                            />\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nThemePicker.propTypes = {};\n\nexport default withStyles(styles, { withTheme: true })(ThemePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport TdLibController from '../../Controllers/TdLibController';\nimport LocalizationStore from '../../Stores/LocalizationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    }\n});\n\nclass LanguagePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { i18n } = props;\n        const language = i18n ? i18n.language : null;\n\n        this.state = {\n            open: false,\n            language: language || 'en'\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ language: event.target.value });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: event.target.value });\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { open, language } = this.state;\n        const info = LocalizationStore.info || { language_packs: [] };\n\n        const languages = info.language_packs.map(x => (\n            <FormControlLabel\n                key={x.id}\n                value={x.id}\n                control={<Radio color='primary' />}\n                label={`${x.name}\\xa0(${x.native_name})`}\n            />\n        ));\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={open}\n                onClose={this.handleClose}\n                aria-labelledby='language-dialog-title'\n                aria-describedby='language-dialog-description'>\n                <DialogTitle id='language-dialog-title'>{t('Language')}</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset'>\n                        <RadioGroup\n                            aria-label='language'\n                            name='language1'\n                            value={language}\n                            onChange={this.handleChange}>\n                            {languages}\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nLanguagePicker.propTypes = {};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withRestoreRef()\n);\n\nexport default enhance(LanguagePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { arrayBufferToBase64 } from './Utils/Common';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default async function register() {\n    console.log('[SW] Register');\n\n    if (FIRST_START_OPTIMIZATIONS) {\n        const cookies = new Cookies();\n        cookies.set('register', true);\n    }\n\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        const serviceWorkerName =\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\n        console.log(`[SW] Service worker url: ${swUrl}`);\n\n        if (!isLocalhost) {\n            // Is not local host. Just register service worker\n            await registerValidSW(swUrl);\n        } else {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            await checkValidServiceWorker(swUrl);\n        }\n    }\n}\n\nasync function registerValidSW(swUrl) {\n    console.log('[SW] RegisterValidSW');\n    try {\n        const registration = await navigator.serviceWorker.register(swUrl);\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        console.log('[SW] New content is available; please refresh.');\n\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\n                    } else {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        console.log('[SW] Content is cached for offline use.');\n                    }\n                }\n            };\n        };\n\n        await subscribeNotifications(registration);\n    } catch (error) {\n        console.error('[SW] Error during service worker registration: ', error);\n    }\n}\n\nasync function subscribeNotifications(registration) {\n    try {\n        let pushSubscription = await registration.pushManager.getSubscription();\n        if (pushSubscription) await pushSubscription.unsubscribe();\n\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\n\n        const { endpoint } = pushSubscription;\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\n\n        if (endpoint && p256dh_base64url && auth_base64url) {\n            const { authorizationState } = ApplicationStore;\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n                await TdLibController.send({\n                    '@type': 'registerDevice',\n                    device_token: {\n                        '@type': 'deviceTokenWebPush',\n                        endpoint: endpoint,\n                        p256dh_base64url: p256dh_base64url,\n                        auth_base64url: auth_base64url\n                    },\n                    other_user_ids: []\n                });\n            }\n        }\n    } catch (error) {\n        console.error('[SW] Error during service worker push subscription: ', error);\n    }\n}\n\nasync function checkValidServiceWorker(swUrl) {\n    console.log('[SW] CheckValidServiceWorker');\n    // Check if the service worker can be found. If it can't reload the page.\n    try {\n        const response = await fetch(swUrl);\n\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            const registration = await navigator.serviceWorker.ready;\n            await registration.unregister();\n\n            window.location.reload();\n        } else {\n            // Service worker found. Proceed as normal.\n            await registerValidSW(swUrl);\n        }\n    } catch (error) {\n        console.log('[SW] No internet connection found. App is running in offline mode.');\n    }\n}\n\nexport async function unregister() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.unregister();\n    }\n}\n\nexport async function update() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.update();\n    }\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ThemePicker from './ThemePicker';\nimport LanguagePicker from './LanguagePicker';\nimport { update } from '../../registerServiceWorker';\nimport { isAuthorizationReady } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n};\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'left'\n};\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            anchorEl: null\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleMenuOpen = event => {\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleLogOut = () => {\n        this.handleMenuClose();\n\n        this.props.onLogOut();\n    };\n\n    handleCheckUpdates = async () => {\n        this.handleMenuClose();\n\n        await update();\n    };\n\n    handleAppearance = event => {\n        this.handleMenuClose();\n\n        this.themePicker.open();\n    };\n\n    handleLanguage = event => {\n        this.handleMenuClose();\n\n        this.languagePicker.open();\n    };\n\n    setRef = ref => {\n        console.log(this);\n        this.languagePicker = ref;\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { anchorEl, authorizationState } = this.state;\n\n        const mainMenuControl = isAuthorizationReady(authorizationState) ? (\n            <>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}>\n                    <MenuItem onClick={this.handleCheckUpdates}>{t('UpdateTelegram')}</MenuItem>\n                    <MenuItem onClick={this.handleAppearance}>{t('Appearance')}</MenuItem>\n                    <MenuItem onClick={this.handleLanguage}>{t('Language')}</MenuItem>\n                    <MenuItem onClick={this.handleLogOut}>{t('LogOut')}</MenuItem>\n                </Menu>\n            </>\n        ) : null;\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleMenuOpen}>\n                    <MenuIcon />\n                </IconButton>\n                {mainMenuControl}\n                <ThemePicker innerRef={ref => (this.themePicker = ref)} />\n                <LanguagePicker ref={ref => (this.languagePicker = ref)} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Button,\n    IconButton\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport MainMenuButton from './MainMenuButton';\nimport { debounce, isAuthorizationReady, throttle } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport '../ColumnMiddle/Header.css';\n\nconst styles = {\n    headerIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    dialogText: {\n        whiteSpace: 'pre-wrap'\n    }\n};\n\nclass DialogsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.searchInput = React.createRef();\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            open: false\n        };\n\n        this.handleInput = debounce(this.handleInput, 250);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.openSearch && this.props.openSearch !== prevProps.openSearch) {\n            setTimeout(() => {\n                if (this.searchInput.current) {\n                    this.searchInput.current.focus();\n                }\n            }, 250);\n        }\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleLogOut = () => {\n        this.setState({ open: true });\n    };\n\n    handleDone = () => {\n        this.handleClose();\n        TdLibController.logOut();\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    handleSearch = () => {\n        const { onSearch, openSearch } = this.props;\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        onSearch(!openSearch);\n    };\n\n    handleKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleKeyUp = () => {\n        const innerText = this.searchInput.current.innerText;\n        const innerHTML = this.searchInput.current.innerHTML;\n\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchInput.current.innerHTML = '';\n        }\n\n        ApplicationStore.emit('clientUpdateSearchText', { text: innerText });\n    };\n\n    handlePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    render() {\n        const { classes, onClick, openSearch, t } = this.props;\n        const { open } = this.state;\n\n        const confirmLogoutDialog = open ? (\n            <Dialog transitionDuration={0} open={open} onClose={this.handleClose} aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText className={classes.dialogText}>{t('AreYouSureLogout')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        return (\n            <div className='header-master'>\n                {!openSearch ? (\n                    <>\n                        <MainMenuButton onLogOut={this.handleLogOut} />\n                        {confirmLogoutDialog}\n                        <div className='header-status grow cursor-pointer' onClick={onClick}>\n                            <span className='header-status-content'>{t('AppName')}</span>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='header-search-input grow'>\n                            <div\n                                id='header-search-inputbox'\n                                ref={this.searchInput}\n                                placeholder={t('Search')}\n                                key={Date()}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                            />\n                        </div>\n                    </>\n                )}\n                <IconButton\n                    className={classes.headerIconButton}\n                    aria-label={t('Search')}\n                    onMouseDown={this.handleSearch}>\n                    <SpeedDialIcon open={openSearch} icon={<SearchIcon />} openIcon={<CloseIcon />} />\n                </IconButton>\n            </div>\n        );\n    }\n}\n\nDialogsHeader.propTypes = {\n    openSearch: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    onSearch: PropTypes.func.isRequired,\n    onSearchTextChange: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles)\n);\n\nexport default enhance(DialogsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport {\n    getChatTypingString,\n    getChatDraft,\n    getLastMessageSenderName,\n    getLastMessageContent,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogContentControl.css';\n\nclass DialogContentControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateUserChatAction', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n\n        if (this.clearHistory) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        let contentControl = null;\n        const typingString = getChatTypingString(chatId);\n        if (typingString) {\n            contentControl = <span className='dialog-content-accent'>{typingString}</span>;\n        }\n\n        if (!contentControl) {\n            const draft = getChatDraft(chatId);\n            if (showChatDraft(chatId)) {\n                const text = draft.text || '\\u00A0';\n\n                contentControl = (\n                    <>\n                        <span className='dialog-content-draft'>{t('Draft') + ': '}</span>\n                        {text}\n                    </>\n                );\n            }\n        }\n\n        if (!contentControl) {\n            const content = getLastMessageContent(chat, t) || '\\u00A0';\n            const senderName = getLastMessageSenderName(chat);\n            contentControl = (\n                <>\n                    {senderName && <span className='dialog-content-accent'>{senderName}: </span>}\n                    {content}\n                </>\n            );\n        }\n\n        return <div className='dialog-content'>{contentControl}</div>;\n    }\n}\n\nexport default withTranslation()(DialogContentControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport {\n    getChatMuteFor,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatUnreadMessageIcon,\n    isChatMuted,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogBadgeControl.css';\n\nconst styles = theme => ({\n    dialogBadge: {\n        background: theme.palette.primary.main\n    }\n});\n\nclass DialogBadgeControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatReadOutbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatReadOutbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateScopeNotificationSettings = update => {\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (chat.type['@type'] === 'chatTypeBasicGroup' || chat.type['@type'] === 'chatTypeSupergroup') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n        }\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { classes, chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { draft_message } = chat;\n\n        const unreadMessageIcon = getChatUnreadMessageIcon(chat);\n        const unreadCount = getChatUnreadCount(chat);\n        const unreadMentionCount = getChatUnreadMentionCount(chat);\n        const showUnreadCount = unreadCount > 1 || (unreadCount === 1 && unreadMentionCount < 1);\n        const showDraftChat = showChatDraft(chat.id);\n        const muteClassName = isChatMuted(chat) ? 'dialog-badge-muted' : '';\n\n        return (\n            <>\n                {unreadMessageIcon && !showDraftChat && <i className='dialog-badge-unread' />}\n                {unreadMentionCount && (\n                    <div className={classNames('dialog-badge', classes.dialogBadge)}>\n                        <div className='dialog-badge-mention'>@</div>\n                    </div>\n                )}\n                {showUnreadCount ? (\n                    <div className={classNames(muteClassName, 'dialog-badge', classes.dialogBadge)}>\n                        <span className='dialog-badge-text'>{unreadCount}</span>\n                    </div>\n                ) : chat.is_pinned && !unreadMessageIcon ? (\n                    <i className='dialog-badge-pinned' />\n                ) : null}\n            </>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogBadgeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getLastMessageDate } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogMetaControl.css';\n\nclass DialogMetaControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.on('updateMessageMentionRead', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.removeListener('updateMessageMentionRead', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        const date = getLastMessageDate(chat);\n\n        return <>{date && <div className='dialog-meta-date'>{date}</div>}</>;\n    }\n}\nexport default DialogMetaControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogContentControl from './DialogContentControl';\nimport DialogBadgeControl from './DialogBadgeControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogMetaControl from './DialogMetaControl';\nimport { openChat } from '../../Actions/Client';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogControl.css';\n\nconst styles = theme => ({\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {},\n    dialogActive: {\n        color: '#fff', //theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '& $statusRoot': {\n            background: theme.palette.primary.main\n        }\n    },\n    dialog: {\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main + '22',\n            '& $statusRoot': {\n                background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n            },\n            '& $statusIcon': {\n                background: theme.palette.primary.main + '22'\n            }\n        }\n    }\n});\n\nclass DialogControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialog = React.createRef();\n\n        const chat = ChatStore.get(this.props.chatId);\n        this.state = {\n            chat: chat\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.hidden !== this.props.hidden) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.previousChatId || chatId === update.nextChatId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelect = () => {\n        openChat(this.props.chatId);\n    };\n\n    render() {\n        const { classes, chatId, showSavedMessages, hidden } = this.props;\n\n        if (hidden) return null;\n\n        const currentChatId = ApplicationStore.getChatId();\n        const isSelected = currentChatId === chatId;\n\n        return (\n            <div\n                ref={this.dialog}\n                className={classNames(\n                    isSelected ? classes.dialogActive : classes.dialog,\n                    isSelected ? 'dialog-active' : 'dialog'\n                )}\n                onMouseDown={this.handleSelect}>\n                <div className='dialog-wrapper'>\n                    <ChatTileControl\n                        chatId={chatId}\n                        showSavedMessages={showSavedMessages}\n                        showOnline\n                        classes={{ statusRoot: classes.statusRoot, statusIcon: classes.statusIcon }}\n                    />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                            <DialogMetaControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <DialogContentControl chatId={chatId} />\n                            <DialogBadgeControl chatId={chatId} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nDialogControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    hidden: PropTypes.bool,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogControl.defaultProps = {\n    hidden: false,\n    showSavedMessages: true\n};\n\nexport default withStyles(styles, { withTheme: true })(DialogControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport DialogControl from '../Tile/DialogControl';\nimport { CHAT_SLICE_LIMIT } from '../../Constants';\nimport { loadChatsContent } from '../../Utils/File';\nimport { itemsInView, orderCompare, throttle } from '../../Utils/Common';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './DialogsList.css';\n\nclass DialogsList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.hiddenChats = new Map();\n\n        this.listRef = React.createRef();\n\n        this.state = {\n            chats: [],\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chats !== this.state.chats) {\n            return true;\n        }\n\n        return false;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { current: list } = this.listRef;\n\n        return { scrollTop: list.scrollTop };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { current: list } = this.listRef;\n        const { scrollTop } = snapshot;\n\n        list.scrollTop = scrollTop;\n    }\n\n    componentDidMount() {\n        this.loadFirstSlice();\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.on('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.removeListener('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    onClientUpdateLeaveChat = update => {\n        if (update.inProgress) {\n            this.hiddenChats.set(update.chatId, update.chatId);\n        } else {\n            this.hiddenChats.delete(update.chatId);\n        }\n\n        this.forceUpdate();\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state }, () => this.loadFirstSlice());\n    };\n\n    onFastUpdatingComplete = update => {\n        this.onLoadNext(true);\n        // this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    onUpdateConnectionState = update => {\n        console.log(this);\n        const newConnectionState = update.state;\n        const { connectionState } = this.state;\n\n        this.setState({ connectionState: newConnectionState });\n\n        const updatingCompleted =\n            connectionState &&\n            connectionState['@type'] === 'connectionStateUpdating' &&\n            newConnectionState['@type'] !== 'connectionStateUpdating';\n        if (!updatingCompleted) return;\n\n        const hasSkippedUpdates = ChatStore.skippedUpdates.length > 0;\n        if (!hasSkippedUpdates) return;\n\n        ChatStore.skippedUpdates = [];\n        this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    loadFirstSlice = async () => {\n        const { authorizationState } = this.state;\n        if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n            await FileStore.initDB(() => this.onLoadNext());\n        }\n    };\n\n    onUpdateChatOrder = update => {\n        // NOTE: updateChatOrder is primary used to delete chats with order=0\n        // In all other cases use updateChatLastMessage\n\n        if (update.order !== '0') return;\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) {\n            return;\n        }\n\n        // unselect deleted chat\n        if (update.chat_id === ApplicationStore.getChatId()) {\n            TdLibController.setChatId(0);\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n\n        let chatIds = [];\n        for (let i = 0; i < this.state.chats.length; i++) {\n            let chat = ChatStore.get(this.state.chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds);\n    };\n\n    onUpdate = update => {\n        const { chat_id, order } = update;\n        if (order === '0') return;\n        const chat = ChatStore.get(chat_id);\n        if (!chat || chat.order === '0') {\n            return;\n        }\n\n        const { chats } = this.state;\n\n        let newChatIds = [];\n        if (chats.length > 0) {\n            const existingChat = chats.find(x => x === chat_id);\n            if (!existingChat) {\n                const minChatOrder = ChatStore.get(chats[chats.length - 1]).order;\n                if (orderCompare(minChatOrder, chat.order) === 1) {\n                    return;\n                }\n                newChatIds.push(chat.id);\n            }\n        }\n\n        // get last chat.order values\n        let chatIds = [];\n        for (let i = 0; i < chats.length; i++) {\n            let chat = ChatStore.get(chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds, newChatIds, () => {\n            this.loadChatContents(newChatIds);\n        });\n    };\n\n    reorderChats(chatIds, newChatIds = [], callback) {\n        const orderedChatIds = chatIds.concat(newChatIds).sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        if (!DialogsList.isDifferentOrder(this.state.chats, orderedChatIds)) {\n            return;\n        }\n\n        this.setState({ chats: orderedChatIds }, callback);\n    }\n\n    static isDifferentOrder(oldChatIds, newChatIds) {\n        if (oldChatIds.length === newChatIds.length) {\n            for (let i = 0; i < oldChatIds.length; i++) {\n                if (oldChatIds[i] !== newChatIds[i]) return true;\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list && list.scrollTop + list.offsetHeight >= list.scrollHeight) {\n            this.onLoadNext();\n        }\n    };\n\n    onLoadNext = async (replace = false) => {\n        const { chats } = this.state;\n\n        if (this.loading) return;\n\n        let offsetOrder = '9223372036854775807'; // 2^63\n        let offsetChatId = 0;\n        if (!replace && chats && chats.length > 0) {\n            const chat = ChatStore.get(chats[chats.length - 1]);\n            if (chat) {\n                offsetOrder = chat.order;\n                offsetChatId = chat.id;\n            }\n        }\n\n        this.loading = true;\n        const result = await TdLibController.send({\n            '@type': 'getChats',\n            offset_chat_id: offsetChatId,\n            offset_order: offsetOrder,\n            limit: CHAT_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        //TODO: replace result with one-way data flow\n\n        if (result.chat_ids.length > 0 && result.chat_ids[0] === offsetChatId) {\n            result.chat_ids.shift();\n        }\n\n        if (replace) {\n            this.replaceChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        } else {\n            this.appendChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        }\n    };\n\n    loadChatContents(chats) {\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats);\n    }\n\n    appendChats(chats, callback) {\n        if (chats.length === 0) return;\n\n        this.setState({ chats: this.state.chats.concat(chats) }, callback);\n    }\n\n    replaceChats(chats, callback) {\n        this.setState({ chats: chats }, callback);\n    }\n\n    scrollToTop() {\n        const list = this.listRef.current;\n        list.scrollTop = 0;\n    }\n\n    render() {\n        const { chats } = this.state;\n\n        const dialogs = chats.map(x => <DialogControl key={x} chatId={x} hidden={this.hiddenChats.has(x)} />);\n\n        /*<Scrollbars*/\n        /*ref={this.listRef}*/\n        /*onScroll={this.handleScroll}*/\n        /*autoHide*/\n        /*autoHideTimeout={500}*/\n        /*autoHideDuration={300}>*/\n        /*{chats}*/\n        /*</Scrollbars>*/\n\n        return (\n            <div ref={this.listRef} className='dialogs-list' onScroll={this.handleScroll}>\n                {dialogs}\n            </div>\n        );\n    }\n}\n\nexport default DialogsList;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    root: {\n        margin: 0,\n        padding: '24px',\n        width: '100%',\n        borderRadius: 0,\n        color: 'white',\n        maxHeight: '65px'\n    }\n};\n\nclass UpdatePanel extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            newContentAvailable: false\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    onClientUpdateNewContentAvailable = () => {\n        this.setState({ newContentAvailable: true });\n    };\n\n    handleUpdate = () => {\n        if (this.handled) return;\n\n        this.handled = true;\n        setTimeout(() => {\n            window.location.reload();\n        }, 250);\n    };\n\n    render() {\n        const { newContentAvailable } = this.state;\n        const { classes } = this.props;\n\n        const content = newContentAvailable ? (\n            <Button variant='contained' color='primary' className={classes.root} onClick={this.handleUpdate}>\n                Update\n            </Button>\n        ) : null;\n\n        return <>{content}</>;\n    }\n}\n\nexport default withStyles(styles)(UpdatePanel);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Search from './Search/Search';\nimport DialogsHeader from './DialogsHeader';\nimport DialogsList from './DialogsList';\nimport UpdatePanel from './UpdatePanel';\nimport { borderStyle } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Dialogs.css';\n\nclass Dialogs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialogsList = React.createRef();\n\n        this.state = {\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible,\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.isChatDetailsVisible !== this.state.isChatDetailsVisible) {\n            return true;\n        }\n\n        if (nextState.openSearch !== this.state.openSearch) {\n            return true;\n        }\n\n        if (nextState.searchChatId !== this.state.searchChatId) {\n            return true;\n        }\n\n        if (nextState.searchText !== this.state.searchText) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.on('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.removeListener('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    onClientUpdateThemeChange = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateSearchChat = update => {\n        this.setState({\n            openSearch: true,\n            searchChatId: update.chatId,\n            searchText: null\n        });\n    };\n\n    handleHeaderClick = () => {\n        this.dialogsList.current.scrollToTop();\n    };\n\n    handleSearch = visible => {\n        this.setState({\n            openSearch: visible,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSelectMessage = (chatId, messageId, openSearch) => {\n        const { onSelectChat } = this.props;\n\n        openChat(chatId, messageId);\n\n        onSelectChat(chatId, messageId);\n\n        const searchChatId = openSearch ? this.state.searchChatId : 0;\n        const searchText = openSearch ? this.state.searchText : null;\n\n        this.setState({\n            openSearch: openSearch,\n            searchChatId: searchChatId,\n            searchText: searchText\n        });\n    };\n\n    handleClose = () => {\n        this.setState({\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSearchTextChange = text => {\n        this.setState({\n            searchText: text\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { isChatDetailsVisible, openSearch, searchChatId, searchText } = this.state;\n\n        return (\n            <div\n                className={classNames(classes.borderColor, 'dialogs', {\n                    'dialogs-third-column': isChatDetailsVisible\n                })}>\n                <DialogsHeader\n                    openSearch={openSearch}\n                    onClick={this.handleHeaderClick}\n                    onSearch={this.handleSearch}\n                    onSearchTextChange={this.handleSearchTextChange}\n                />\n                <div className='dialogs-content'>\n                    <DialogsList ref={this.dialogsList} />\n                    {openSearch && (\n                        <Search\n                            chatId={searchChatId}\n                            text={searchText}\n                            onSelectMessage={this.handleSelectMessage}\n                            onClose={this.handleClose}\n                        />\n                    )}\n                </div>\n                <UpdatePanel />\n            </div>\n        );\n    }\n}\n\nDialogs.propTypes = {\n    onSelectChat: PropTypes.func.isRequired\n};\n\nexport default withStyles(borderStyle)(Dialogs);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox/';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { borderStyle } from '../Theme';\nimport { canSendMessages, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderCommand.css';\n\nconst styles = theme => ({\n    buttonLeft: {\n        margin: '14px 0 14px 14px',\n        minWidth: '100px'\n    },\n    buttonRight: {\n        margin: '14px 14px 14px 0',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderCommand extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            openDeleteDialog: false\n        };\n    }\n\n    handleCancel = () => {\n        TdLibController.clientUpdate({ '@type': 'clientUpdateClearSelection' });\n    };\n\n    handleDelete = () => {\n        let canBeDeletedForAllUsers = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n            if (!message.can_be_deleted_for_all_users) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n        }\n\n        this.setState({\n            openDeleteDialog: true,\n            canBeDeletedForAllUsers: canBeDeletedForAllUsers,\n            revoke: canBeDeletedForAllUsers\n        });\n    };\n\n    handleDeleteContinue = () => {\n        const { revoke } = this.state;\n\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: id,\n            message_ids: messageIds,\n            revoke: revoke\n        });\n    };\n\n    handleRevokeChange = () => {\n        this.setState({ revoke: !this.state.revoke });\n    };\n\n    handleCloseDelete = () => {\n        this.setState({ openDeleteDialog: false });\n    };\n\n    handleForward = () => {\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: id,\n                messageIds: messageIds\n            }\n        });\n    };\n\n    handleReply = () => {\n        if (MessageStore.selectedItems.size !== 1) return;\n\n        const { chatId, messageId } = MessageStore.selectedItems.values().next().value;\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateReply', chatId: chatId, messageId: messageId });\n    };\n\n    render() {\n        const { classes, t, count } = this.props;\n        const { openDeleteDialog, canBeDeletedForAllUsers, revoke } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n\n        let canBeDeleted = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeleted = false;\n                break;\n            }\n            if (!message.can_be_deleted_only_for_self && !message.can_be_deleted_for_all_users) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        let canBeForwarded = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeForwarded = false;\n                break;\n            }\n            if (!message.can_be_forwarded) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        const canBeReplied = count === 1 && canSendMessages(chatId);\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'header-command')}>\n                    {canBeForwarded && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleForward}>\n                            {count <= 1 ? t('Forward') : `${t('Forward')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeDeleted && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleDelete}>\n                            {count <= 1 ? t('Delete') : `${t('Delete')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeReplied && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleReply}>\n                            {t('Reply')}\n                        </Button>\n                    )}\n                    <div className='header-command-space' />\n                    <Button color='primary' className={classes.buttonRight} onClick={this.handleCancel}>\n                        {t('Cancel')}\n                    </Button>\n                </div>\n                <Dialog\n                    transitionDuration={0}\n                    open={openDeleteDialog}\n                    onClose={this.handleCloseDelete}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>Confirm</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {count === 1\n                                ? 'Are you sure you want to delete 1 message?'\n                                : `Are you sure you want to delete ${count} messages?`}\n                        </DialogContentText>\n                        {canBeDeletedForAllUsers && (\n                            <FormControlLabel\n                                control={\n                                    <Checkbox checked={revoke} onChange={this.handleRevokeChange} color='primary' />\n                                }\n                                label={\n                                    isPrivateChat(chatId) ? `Delete for ${getChatShortTitle(chatId)}` : 'Delete for all'\n                                }\n                            />\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDelete} color='primary'>\n                            Cancel\n                        </Button>\n                        <Button onClick={this.handleDeleteContinue} color='primary'>\n                            Ok\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nHeaderCommand.propTypes = {\n    count: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(HeaderCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport MainMenuButton from './MainMenuButton';\nimport HeaderCommand from './HeaderCommand';\nimport { getChatSubtitle, getChatTitle, isAccentChatSubtitle, isMeChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Header.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px'\n    },\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    messageSearchIconButton: {\n        margin: '8px 0 8px 12px'\n    },\n    moreIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    headerStatusAccentTitle: {\n        color: theme.palette.primary.dark + '!important'\n    },\n    ...borderStyle(theme)\n});\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState !== this.state) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.on('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.on('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.removeListener('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateChatOnlineMemberCount = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onClientUpdateMessageSelected = update => {\n        this.setState({ selectionCount: MessageStore.selectedItems.size });\n    };\n\n    onClientUpdateChatId = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateConnectionState = update => {\n        this.setState({ connectionState: update.state });\n    };\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    onUpdateChatTitle = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateUserStatus = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(x => x.user_id === update.user_id);\n                    if (member) {\n                        this.forceUpdate();\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n    };\n\n    onUpdateUserChatAction = update => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (currentChatId === update.chat_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    openChatDetails = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.changeChatDetailsVisibility(true);\n    };\n\n    handleSearchChat = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.searchChat(chatId);\n    };\n\n    localize = str => {\n        const { t } = this.props;\n\n        return t(str)\n            .replace('...', '')\n            .replace('', '');\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { authorizationState, connectionState, selectionCount } = this.state;\n\n        if (selectionCount) {\n            return <HeaderCommand count={selectionCount} />;\n        }\n\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n\n        const isAccentSubtitle = isAccentChatSubtitle(chatId);\n        let title = getChatTitle(chatId, true, t);\n        let subtitle = getChatSubtitle(chatId, true);\n        let showProgressAnimation = false;\n\n        if (connectionState) {\n            switch (connectionState['@type']) {\n                case 'connectionStateConnecting':\n                    title = this.localize('Connecting');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateConnectingToProxy':\n                    title = this.localize('Connecting to proxy');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateReady':\n                    break;\n                case 'connectionStateUpdating':\n                    title = this.localize('Updating');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateWaitingForNetwork':\n                    title = this.localize('Waiting for network');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed':\n                    break;\n                case ' authorizationStateClosing':\n                    break;\n                case 'authorizationStateLoggingOut':\n                    title = this.localize('Logging out');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateReady':\n                    break;\n                case 'authorizationStateWaitCode':\n                    break;\n                case 'authorizationStateWaitEncryptionKey':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateWaitPassword':\n                    break;\n                case 'authorizationStateWaitPhoneNumber':\n                    break;\n                case 'authorizationStateWaitTdlibParameters':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else {\n            title = this.localize('Loading');\n            subtitle = '';\n            showProgressAnimation = true;\n        }\n\n        return (\n            <div className={classNames(classes.borderColor, 'header-details')}>\n                <div\n                    className={classNames('header-status', 'grow', chat ? 'cursor-pointer' : 'cursor-default')}\n                    onClick={this.openChatDetails}>\n                    <span className='header-status-content'>{title}</span>\n                    {showProgressAnimation && (\n                        <>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                        </>\n                    )}\n                    <span\n                        className={classNames('header-status-title', {\n                            [classes.headerStatusAccentTitle]: isAccentSubtitle\n                        })}>\n                        {subtitle}\n                    </span>\n                    <span className='header-status-tail' />\n                </div>\n                {chat && (\n                    <>\n                        <IconButton\n                            className={classes.messageSearchIconButton}\n                            aria-label='Search'\n                            onClick={this.handleSearchChat}>\n                            <SearchIcon />\n                        </IconButton>\n                        <MainMenuButton openChatDetails={this.openChatDetails} />\n                    </>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(Header);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\nimport VolumeDownIcon from '@material-ui/icons/VolumeDown';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport IconButton from '@material-ui/core/IconButton';\nimport Slider from '@material-ui/lab/Slider';\nimport { borderStyle } from '../Theme';\nimport { PLAYER_VOLUME_NORMAL } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './VolumeButton.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    root: {\n        display: 'flex',\n        height: 100,\n        padding: '13px 0',\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    slider: {\n        padding: '0 13px'\n    },\n    ...borderStyle(theme)\n});\n\nclass VolumeButton extends React.Component {\n    state = {\n        anchorEl: null,\n        value: PlayerStore.volume,\n        prevValue: PlayerStore.volume,\n        dragging: false,\n        buttonOver: false,\n        popupOver: false\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    onClientUpdateMediaVolume = update => {\n        const { volume, prevVolume } = update;\n\n        if (prevVolume === undefined) {\n            this.setState({ value: volume });\n        } else {\n            this.setState({ value: volume, prevValue: prevVolume });\n        }\n    };\n\n    handlePopoverOpen = anchorEl => {\n        this.setState({ anchorEl: anchorEl });\n    };\n\n    handlePopoverClose = () => {\n        const { dragging, buttonOver, popupOver } = this.state;\n\n        if (dragging) return;\n        if (buttonOver) return;\n        if (popupOver) return;\n\n        this.setState({ anchorEl: null });\n    };\n\n    handleMouseEnter = (event, openPopover) => {\n        this.setState({ buttonOver: true });\n\n        if (openPopover) {\n            this.handlePopoverOpen(event.currentTarget);\n        }\n    };\n\n    handleMouseLeave = () => {\n        this.setState({ buttonOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handlePopupMouseLeave = () => {\n        this.setState({ popupOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handleVoiceClick = () => {\n        const { value, prevValue } = this.state;\n        const nextValue = value > 0 ? 0 : prevValue || PLAYER_VOLUME_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaVolume',\n            volume: nextValue\n        });\n    };\n\n    handleChange = (event, value) => {\n        const { dragging, prevValue } = this.state;\n\n        if (dragging) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                volume: value\n            });\n        } else {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                prevVolume: value > 0 ? value : prevValue,\n                volume: value\n            });\n        }\n    };\n\n    handleDragStart = () => {\n        const { value } = this.state;\n\n        this.setState({\n            dragging: true,\n            prevValue: value\n        });\n    };\n\n    handleDragEnd = () => {\n        const { value, prevValue } = this.state;\n\n        this.setState(\n            {\n                dragging: false,\n                prevValue: value > 0 ? value : prevValue\n            },\n            () => {\n                this.handlePopoverClose();\n            }\n        );\n    };\n\n    getVolumeIcon = value => {\n        if (value === 0) {\n            return <VolumeOffIcon fontSize='small' />;\n        }\n\n        if (value < 0.25) {\n            return <VolumeMuteIcon fontSize='small' />;\n        }\n\n        if (value < 0.5) {\n            return <VolumeDownIcon fontSize='small' />;\n        }\n\n        return <VolumeUpIcon fontSize='small' />;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, value } = this.state;\n        const open = Boolean(anchorEl);\n\n        return (\n            <div\n                onMouseEnter={e => this.handleMouseEnter(e, true)}\n                onMouseLeave={this.handleMouseLeave}\n                style={{\n                    position: 'relative',\n                    background: 'transparent'\n                }}>\n                <IconButton className={classes.iconButton} color='primary' onClick={this.handleVoiceClick}>\n                    {this.getVolumeIcon(value)}\n                </IconButton>\n                <div\n                    style={{\n                        position: 'absolute',\n                        background: 'transparent',\n                        visibility: open ? 'visible' : 'hidden',\n                        zIndex: 1\n                    }}\n                    onMouseEnter={e => this.handleMouseEnter(e, false)}\n                    onMouseLeave={this.handlePopupMouseLeave}>\n                    <div\n                        className={classNames(classes.borderColor, classes.root)}\n                        style={{\n                            marginTop: 8,\n                            borderWidth: 1,\n                            borderStyle: 'solid'\n                        }}>\n                        <Slider\n                            classes={{ container: classes.slider }}\n                            min={0}\n                            max={1}\n                            value={value}\n                            onChange={this.handleChange}\n                            onDragStart={this.handleDragStart}\n                            onDragEnd={this.handleDragEnd}\n                            vertical\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(VolumeButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport PlayerStore, { RepeatEnum } from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass RepeatButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { repeat } = PlayerStore;\n\n        this.state = {\n            repeat\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    onClientUpdateMediaRepeat = update => {\n        const { repeat } = update;\n\n        this.setState({ repeat });\n    };\n\n    handleRepeat = () => {\n        const { repeat } = this.state;\n\n        let nextRepeat = repeat;\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                nextRepeat = RepeatEnum.REPEAT;\n                break;\n            }\n            case RepeatEnum.REPEAT: {\n                nextRepeat = RepeatEnum.REPEAT_ONE;\n                break;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                nextRepeat = RepeatEnum.NONE;\n                break;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaRepeat',\n            repeat: nextRepeat\n        });\n    };\n\n    getIcon = repeat => {\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                return <RepeatOneIcon fontSize='small' />;\n            }\n            default: {\n                return <RepeatIcon fontSize='small' />;\n            }\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { repeat } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={repeat === RepeatEnum.NONE ? 'default' : 'primary'}\n                onClick={this.handleRepeat}>\n                {this.getIcon(repeat)}\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(RepeatButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass ShuffleButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { shuffle } = PlayerStore;\n\n        this.state = {\n            shuffle\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    onClientUpdateMediaShuffle = update => {\n        const { shuffle } = update;\n\n        this.setState({ shuffle });\n    };\n\n    handleShuffle = () => {\n        const { shuffle } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaShuffle',\n            shuffle: !shuffle\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { shuffle } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={!shuffle ? 'default' : 'primary'}\n                onClick={this.handleShuffle}>\n                <ShuffleIcon fontSize='small' />\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(ShuffleButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\nclass PlaybackRateButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { playbackRate } = PlayerStore;\n\n        this.state = {\n            playbackRate\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        this.setState({ playbackRate });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playbackRate } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={playbackRate > PLAYER_PLAYBACKRATE_NORMAL ? 'primary' : 'default'}\n                onClick={this.handlePlaybackRate}>\n                <div className='header-player-playback-icon'>2X</div>\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(PlaybackRateButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getDurationString } from '../../Utils/Common';\nimport PlayerStore from '../../Stores/PlayerStore';\n\nclass Time extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentTime: 0,\n            duration: 0,\n            timeString: this.getTimeString(0, 0)\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    onClientUpdateMediaTime = update => {\n        const { currentTime } = update;\n\n        this.setState({\n            currentTime: currentTime,\n            currentTimeString: getDurationString(Math.floor(currentTime || 0))\n        });\n    };\n\n    getTimeString = (currentTime, duration) => {\n        const type = 0;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        //return type === 0 ? `${currentTimeString}/${durationString}` : `${durationString}`;\n\n        return currentTimeString;\n    };\n\n    render() {\n        const { currentTimeString } = this.state;\n\n        return <>{currentTimeString}</>;\n    }\n}\n\nexport default Time;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { getMedia, openMedia } from '../../Utils/Message';\nimport { borderStyle } from '../Theme';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Playlist.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    ...borderStyle(theme)\n});\n\nclass Playlist extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n        this.itemRefMap = new Map();\n\n        const { message, playlist } = PlayerStore;\n\n        this.chatId = message ? message.chat_id : 0;\n        this.messageId = message ? message.id : 0;\n\n        this.state = {\n            open: false,\n            titleMouseOver: false,\n            playlistMouseOver: false,\n            playlist: playlist\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { open } = this.state;\n\n        if (!prevState.open && open) {\n            this.scrollToActive();\n        }\n    }\n\n    scrollToActive = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        const { messageId } = this;\n        if (!messageId) return;\n\n        const item = this.itemRefMap.get(messageId);\n        if (!item) return;\n\n        const node = ReactDOM.findDOMNode(item);\n        if (!node) return;\n\n        list.scrollTop = node.offsetTop - 15;\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.on('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.removeListener('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    onClientUpdateMediaTitleMouseOver = update => {\n        const { over } = update;\n\n        if (over) {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryOpen();\n                }\n            );\n        } else {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryClose();\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n    };\n\n    onClientUpdateMediaPlaylistLoading = update => {\n        const { chatId, messageId } = this;\n\n        if (update.chatId === chatId && update.messageId === messageId) {\n            this.setState({\n                playlist: null\n            });\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { chatId, messageId } = this;\n        const { playlist } = update;\n\n        if (chatId === playlist.chatId && messageId === playlist.messageId) {\n            this.setState({\n                playlist: playlist\n            });\n        }\n    };\n\n    tryOpen = () => {\n        clearTimeout(this.openTimeout);\n\n        this.openTimeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    tryClose = () => {\n        clearTimeout(this.timeout);\n\n        this.timeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    handleMouseEnter = () => {\n        this.setState({\n            playlistMouseOver: true,\n            open: true\n        });\n    };\n\n    handleMouseLeave = () => {\n        this.setState(\n            {\n                playlistMouseOver: false\n            },\n            () => {\n                this.tryClose();\n            }\n        );\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        if (list.scrollTop === 0) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistNext'\n            });\n        } else if (list.scrollHeight === list.scrollTop + list.offsetHeight) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistPrev'\n            });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        const { open, playlist } = this.state;\n        if (!open) return null;\n        if (!playlist) return null;\n\n        const { messages } = playlist;\n        if (!messages) return null;\n        if (messages.length <= 1) return null;\n\n        this.itemRefMap.clear();\n\n        return (\n            <div className='playlist'>\n                <div className={classNames('playlist-wrapper', classes.root, classes.borderColor)}>\n                    <div\n                        ref={this.listRef}\n                        className='playlist-items'\n                        onMouseEnter={this.handleMouseEnter}\n                        onMouseLeave={this.handleMouseLeave}\n                        onScroll={this.handleScroll}>\n                        {playlist.messages\n                            .slice(0)\n                            .reverse()\n                            .map(x => (\n                                <div key={x.id} ref={el => this.itemRefMap.set(x.id, el)} className='playlist-item'>\n                                    {getMedia(x, () => openMedia(x.chat_id, x.id))}\n                                </div>\n                            ))}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(Playlist);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeButton from '../Player/VolumeButton';\nimport RepeatButton from '../Player/RepeatButton';\nimport ShuffleButton from '../Player/ShuffleButton';\nimport PlaybackRateButton from './PlaybackRateButton';\nimport Time from '../Player/Time';\nimport Playlist from '../Player/Playlist';\nimport { borderStyle } from '../Theme';\nimport { getSrc } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport { getDurationString } from '../../Utils/Common';\nimport { getDate, getDateHint, getMediaTitle, hasAudio } from '../../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL, PLAYER_STARTTIME } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderPlayer.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderPlayer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { message, playlist } = PlayerStore;\n\n        this.startTime = PLAYER_STARTTIME;\n\n        this.state = {\n            currentTime: 0,\n            currentTimeString: getDurationString(0),\n            message: message,\n            playlist: playlist,\n            playing: false,\n            src: this.getMediaSrc(message)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { theme } = this.props;\n        const { message, playlist, src, playing } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.message !== message) {\n            return true;\n        }\n\n        if (nextState.playlist !== playlist) {\n            return true;\n        }\n\n        if (nextState.src !== src) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.on('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.on('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.removeListener('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.removeListener('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.playbackRate = playbackRate;\n    };\n\n    onClientUpdateMediaVolume = update => {\n        const { volume } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.volume = volume;\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.playingMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n    };\n\n    onClientUpdateMediaViewerEnded = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPause = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPlay = update => {\n        this.playingMediaViewer = true;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.pause();\n    };\n\n    startPlayingFile = (file, message) => {\n        const { chat_id, id } = message;\n\n        this.setState(\n            {\n                src: this.getMediaSrc(message)\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (this.playingMediaViewer) {\n                        player.pause();\n\n                        TdLibController.clientUpdate({\n                            '@type': 'clientUpdateMediaPause',\n                            chatId: chat_id,\n                            messageId: id\n                        });\n                    }\n                }\n            }\n        );\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId } = update;\n        const { message } = this.state;\n\n        if (!message) return;\n\n        const { chat_id, id, content } = message;\n        if (!content) return;\n        if (chatId !== chat_id || messageId !== id) return;\n\n        switch (content['@type']) {\n            case 'messageText': {\n                const { web_page } = content;\n                if (web_page) {\n                    const { audio, voice_note, video_note } = web_page;\n\n                    if (audio) {\n                        const file = audio.audio;\n                        if (file) {\n                            this.startPlayingFile(file, message);\n                        }\n                    }\n\n                    if (voice_note) {\n                        const { voice } = voice_note;\n                        if (voice) {\n                            this.startPlayingFile(voice, message);\n                        }\n                    }\n\n                    if (video_note) {\n                        const { video } = video_note;\n                        if (video) {\n                            this.startPlayingFile(video, message);\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        this.startPlayingFile(file, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        this.startPlayingFile(voice, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        this.startPlayingFile(video, message);\n                    }\n                }\n\n                break;\n            }\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { playlist } = update;\n        const { chatId, messageId } = playlist;\n        const { message } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            this.setState({ playlist: playlist });\n        }\n    };\n\n    onClientUpdateMediaClose = update => {\n        this.setState({\n            message: null,\n            playlist: null,\n            playing: false,\n            src: null\n        });\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n        const { message, src } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            if (src) {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (player.paused) {\n                        player.play();\n                    } else {\n                        player.pause();\n                    }\n                }\n            }\n        } else {\n            const src = this.getMediaSrc(PlayerStore.message);\n            const playing = Boolean(src);\n            const playlist = PlayerStore.playlist;\n            this.setState(\n                {\n                    message: PlayerStore.message,\n                    playlist: PlayerStore.playlist,\n                    playing: playing,\n                    src: src\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (player) {\n                        player.currentTime = this.startTime;\n                        if (this.playingMediaViewer) {\n                            player.pause();\n\n                            //this.handleVideoPause();\n                        }\n                    }\n                }\n            );\n        }\n    };\n\n    handlePrev = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPrev'\n        });\n    };\n\n    handlePlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaActive',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handleNext = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaNext'\n        });\n    };\n\n    getMediaSrc = message => {\n        if (message) {\n            const { content } = message;\n            if (content) {\n                const { audio, voice_note, video_note, web_page } = content;\n\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        return getSrc(file);\n                    }\n                }\n\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        return getSrc(voice);\n                    }\n                }\n\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        return getSrc(video);\n                    }\n                }\n\n                if (web_page) {\n                    if (web_page.audio) {\n                        const file = web_page.audio.audio;\n                        if (file) {\n                            return getSrc(file);\n                        }\n                    }\n\n                    if (web_page.voice_note) {\n                        const { voice } = web_page.voice_note;\n                        if (voice) {\n                            return getSrc(voice);\n                        }\n                    }\n\n                    if (web_page.video_note) {\n                        const { video } = web_page.video_note;\n                        if (video) {\n                            return getSrc(video);\n                        }\n                    }\n                }\n            }\n        }\n\n        return '';\n    };\n\n    handleEnded = (moveNext = true) => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaEnding',\n            chatId: message.chat_id,\n            messageId: message.id,\n            moveNext: moveNext\n        });\n\n        this.setState(\n            {\n                //playing: false,\n                //message: null,\n                //src: null\n            },\n            () => {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateMediaEnd',\n                    chatId: message.chat_id,\n                    messageId: message.id,\n                    moveNext: moveNext\n                });\n            }\n        );\n    };\n\n    handleVideoEnded = () => {\n        this.handleEnded(true);\n    };\n\n    handleClose = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            player.pause();\n        }\n\n        this.handleEnded(false);\n    };\n\n    handleTimeUpdate = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        this.setState({\n            currentTime: player.currentTime,\n            currentTimeString: getDurationString(Math.floor(player.currentTime || 0))\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTime',\n            chatId: message.chat_id,\n            messageId: message.id,\n            duration: player.duration,\n            currentTime: player.currentTime,\n            timestamp: Date.now()\n        });\n    };\n\n    handleCanPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        const { playbackRate, volume } = PlayerStore;\n\n        const { chat_id, id } = message;\n        const audio = hasAudio(chat_id, id);\n\n        player.playbackRate = audio ? PLAYER_PLAYBACKRATE_NORMAL : playbackRate;\n        player.volume = volume;\n        player.muted = false;\n\n        if (audio) {\n            return;\n        }\n\n        let stream = null;\n        if ('captureStream' in player) {\n            stream = player.captureStream();\n        } else if ('mozCaptureStream' in player) {\n            stream = player.mozCaptureStream();\n        }\n\n        if (!stream) {\n            return;\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaCaptureStream',\n            chatId: message.chat_id,\n            messageId: message.id,\n            stream: stream\n        });\n    };\n\n    handleVideoPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: true\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlay',\n            chatId: message.chat_id,\n            messageId: message.id,\n            currentTime: player.currentTime,\n            duration: player.duration,\n            timestamp: Date.now()\n        });\n    };\n\n    handleVideoPause = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: false\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPause',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        this.setState(\n            {\n                playbackRate: nextPlaybackRate\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (!player) return;\n\n                player.playbackRate = nextPlaybackRate;\n            }\n        );\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    hasPrev = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index + 1 < playlist.messages.length;\n    };\n\n    hasNext = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index - 1 >= 0;\n    };\n\n    handleTitleMouseEnter = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: true\n        });\n    };\n\n    handleTitleMouseLeave = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: false\n        });\n    };\n\n    handleTitleClick = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        openChat(message.chat_id, message.id);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playing, message, playlist, src } = this.state;\n\n        let audio = false;\n        if (message) {\n            const { chat_id, id } = message;\n            audio = hasAudio(chat_id, id);\n        }\n\n        const title = getMediaTitle(message);\n        const dateHint = getDateHint(message);\n        const date = getDate(message);\n        const showDate = !audio;\n        const showPlaybackRate = !audio;\n        const showRepeat = audio;\n        const showShuffle = audio;\n        const hasPrev = this.hasPrev(message, playlist);\n        const hasNext = this.hasNext(message, playlist);\n\n        return (\n            <>\n                <video\n                    className='header-player-video'\n                    ref={this.videoRef}\n                    src={src}\n                    autoPlay={true}\n                    controls={false}\n                    width={44}\n                    height={44}\n                    onCanPlay={this.handleCanPlay}\n                    onPlay={this.handleVideoPlay}\n                    onPause={this.handleVideoPause}\n                    onTimeUpdate={this.handleTimeUpdate}\n                    onEnded={this.handleVideoEnded}\n                />\n                {message && (\n                    <div className={classNames(classes.borderColor, 'header-player')}>\n                        <IconButton\n                            disabled={!hasPrev}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handlePrev}>\n                            <SkipPreviousIcon fontSize='small' />\n                        </IconButton>\n                        <IconButton\n                            className={classes.iconButton}\n                            color='primary'\n                            disabled={!src}\n                            onClick={this.handlePlay}>\n                            {playing ? <PauseIcon /> : <PlayArrowIcon />}\n                        </IconButton>\n                        <IconButton\n                            disabled={!hasNext}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handleNext}>\n                            <SkipNextIcon fontSize='small' />\n                        </IconButton>\n                        <Playlist />\n                        <div\n                            className='header-player-content'\n                            onMouseEnter={this.handleTitleMouseEnter}\n                            onMouseLeave={this.handleTitleMouseLeave}\n                            onClick={this.handleTitleClick}>\n                            <div className='header-player-title'>\n                                {title}\n                                {showDate && (\n                                    <span title={dateHint}>\n                                        &nbsp;\n                                        {date}\n                                    </span>\n                                )}\n                            </div>\n                            &nbsp;\n                            <Time />\n                        </div>\n                        <VolumeButton />\n                        {showPlaybackRate && <PlaybackRateButton />}\n                        {showRepeat && <RepeatButton />}\n                        {showShuffle && <ShuffleButton />}\n                        <IconButton className={classes.iconButton} onClick={this.handleClose}>\n                            <CloseIcon fontSize='small' />\n                        </IconButton>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(HeaderPlayer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './FilesDropTarget.css';\n\nclass FilesDropTarget extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dragging: ApplicationStore.getDragging()\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    onClientUpdateDragging = update => {\n        this.setState({ dragging: ApplicationStore.getDragging() });\n    };\n\n    handleDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n\n        this.handleAttachDocumentComplete(event.dataTransfer.files);\n    };\n\n    handleDragLeave = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n    };\n\n    handleAttachDocumentComplete = files => {\n        if (files.length === 0) return;\n\n        for (let i = 0; i < files.length; i++) {\n            let file = files[i];\n            const content = {\n                '@type': 'inputMessageDocument',\n                document: { '@type': 'inputFileBlob', name: file.name, data: file }\n            };\n\n            this.onSendInternal(content, result => FileStore.uploadFile(result.content.document.document.id, result));\n        }\n    };\n\n    onSendInternal = async (content, callback) => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (!currentChatId) return;\n        if (!content) return;\n\n        try {\n            ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${currentChatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: currentChatId,\n                reply_to_message_id: 0,\n                input_message_content: content\n            });\n\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: currentChatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    render() {\n        const { dragging } = this.state;\n\n        return (\n            <>\n                {dragging && (\n                    <div\n                        className='files-drop-target'\n                        onDragEnter={this.handleDragEnter}\n                        onDragLeave={this.handleDragLeave}\n                        onDrop={this.handleDrop}>\n                        <div className='files-drop-target-wrapper'>\n                            <div className='files-drop-target-text'>\n                                <div className='files-drop-target-title'>Drop files here</div>\n                                <div className='files-drop-target-subtitle'>to send them without compression</div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nFilesDropTarget.propTypes = {};\n\nexport default FilesDropTarget;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nfunction arrowGenerator(color) {\n    return {\n        '&[x-placement*=\"bottom\"] $arrow': {\n            top: 0,\n            left: 0,\n            marginTop: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '0 1em 1em 1em',\n                borderColor: `transparent transparent ${color} transparent`\n            }\n        },\n        '&[x-placement*=\"top\"] $arrow': {\n            bottom: 0,\n            left: 0,\n            marginBottom: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 0 1em',\n                borderColor: `${color} transparent transparent transparent`\n            }\n        },\n        '&[x-placement*=\"right\"] $arrow': {\n            left: 0,\n            marginLeft: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 1em 0',\n                borderColor: `transparent ${color} transparent transparent`\n            }\n        },\n        '&[x-placement*=\"left\"] $arrow': {\n            right: 0,\n            marginRight: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 0 1em 1em',\n                borderColor: `transparent transparent transparent ${color}`\n            }\n        }\n    };\n}\n\nconst styles = theme => ({\n    forwardColor: {\n        color: theme.palette.primary.main\n    },\n    arrowPopper: arrowGenerator(theme.palette.grey[700]),\n    arrow: {\n        position: 'absolute',\n        fontSize: 6,\n        width: '3em',\n        height: '3em',\n        '&::before': {\n            content: '\"\"',\n            margin: 'auto',\n            display: 'block',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid'\n        }\n    },\n    tooltip: {\n        margin: '6px 0 26px 0'\n    }\n});\n\nclass Forward extends React.Component {\n    state = {\n        arrowRef: null\n    };\n\n    handleArrowRef = node => {\n        this.setState({\n            arrowRef: node\n        });\n    };\n\n    openForward = event => {\n        event.stopPropagation();\n\n        const { forwardInfo } = this.props;\n        if (!forwardInfo) return null;\n\n        const { origin } = forwardInfo;\n\n        switch (origin['@type']) {\n            case 'messageForwardOriginUser': {\n                const { sender_user_id } = origin;\n\n                openUser(sender_user_id, true);\n                break;\n            }\n            case 'messageForwardOriginHiddenUser': {\n                break;\n            }\n            case 'messageForwardOriginChannel': {\n                const { chat_id, message_id } = origin;\n\n                openChat(chat_id, message_id, true);\n                break;\n            }\n        }\n    };\n\n    render() {\n        const { t, classes, forwardInfo } = this.props;\n        const { arrowRef } = this.state;\n\n        const title = getForwardTitle(forwardInfo, t);\n        const tooltip = isForwardOriginHidden(forwardInfo) ? (\n            <>\n                {t('HidAccount')}\n                <span className={classes.arrow} ref={this.handleArrowRef} />\n            </>\n        ) : (\n            ''\n        );\n\n        return (\n            <div className={classNames('message-author', classes.forwardColor, 'forward')}>\n                {`${t('ForwardedMessage')}\\n${t('From')} `}\n                <Tooltip\n                    title={tooltip}\n                    classes={{ popper: classes.arrowPopper, tooltip: classes.tooltip }}\n                    PopperProps={{\n                        popperOptions: {\n                            modifiers: {\n                                arrow: {\n                                    enabled: Boolean(arrowRef),\n                                    element: arrowRef\n                                }\n                            }\n                        }\n                    }}\n                    placement='top'>\n                    <a onClick={this.openForward}>{title}</a>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nForward.propTypes = {\n    forwardInfo: PropTypes.object.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Forward);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageStatus.css';\n\nclass MessageStatus extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleUpdateMessageSend = this.handleUpdateMessageSend.bind(this);\n        this.handleUpdateChatReadOutbox = this.handleUpdateChatReadOutbox.bind(this);\n\n        this.state = {\n            sendingState: props.sendingState,\n            unread: true\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.on('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.on('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    handleUpdateMessageSend(payload) {\n        if (this.props.messageId === payload.old_message_id && payload.message) {\n            this.newMessageId = payload.message.id;\n            this.setState({ sendingState: payload.message.sending_state });\n        }\n    }\n\n    handleUpdateChatReadOutbox(payload) {\n        if (\n            this.props.chatId === payload.chat_id &&\n            ((this.props.newMessageId && this.props.newMessageId <= payload.last_read_outbox_message_id) ||\n                this.props.messageId <= payload.last_read_outbox_message_id)\n        ) {\n            this.setState({ sendingState: null, unread: false });\n        }\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.removeListener('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    render() {\n        let stateClassName = 'messagestatus-succeded';\n        if (this.state.sendingState) {\n            stateClassName =\n                this.state.sendingState['@type'] === 'messageSendingStateFailed'\n                    ? 'messagestatus-failed'\n                    : 'messagestatus-pending';\n        }\n\n        return this.state.unread && <i className={classNames('messagestatus-icon', stateClassName)} />;\n    }\n}\n\nexport default MessageStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './UnreadSeparator.css';\n\nconst styles = theme => ({\n    unreadSeparator: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary : '#8096a8'\n    }\n});\n\nfunction UnreadSeparator(props) {\n    const { classes } = props;\n\n    return <div className={classNames('unread-separator', classes.unreadSeparator)}>Unread messages</div>;\n}\n\nexport default withStyles(styles)(UnreadSeparator);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Animation from './Animation';\nimport Photo from './Photo';\nimport Video from './Video';\nimport Audio from './Audio';\nimport Document from './Document';\nimport VoiceNote from './VoiceNote';\nimport VideoNote from './VideoNote';\nimport Sticker from './Sticker';\nimport { getSize } from '../../../Utils/Common';\nimport { accentStyles } from '../../Theme';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_DISPLAY_SMALL_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './WebPage.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass WebPage extends React.Component {\n    getContent = () => {\n        const { classes, chatId, messageId, size, displaySize, displaySmallSize, openMedia } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const {\n            site_name,\n            title,\n            description,\n            url,\n            photo,\n            animation,\n            video,\n            audio,\n            document,\n            voice_note,\n            video_note,\n            sticker,\n            type\n        } = web_page;\n\n        if (sticker) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Sticker chatId={chatId} messageId={messageId} sticker={sticker} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (voice_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VoiceNote chatId={chatId} messageId={messageId} voiceNote={voice_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (video_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VideoNote chatId={chatId} messageId={messageId} videoNote={video_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (audio) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Audio chatId={chatId} messageId={messageId} audio={audio} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (document) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Document chatId={chatId} messageId={messageId} document={document} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (video) {\n            if (video.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Video chatId={chatId} messageId={messageId} video={video} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (photo) {\n            const photoSize = getSize(photo.sizes, size);\n            const smallPhoto =\n                (type === 'article' || type === 'photo') &&\n                (site_name || title || description) &&\n                photoSize &&\n                photoSize.width === photoSize.height;\n\n            const style = smallPhoto\n                ? {\n                      float: 'right',\n                      marginLeft: 6,\n                      marginBottom: 6\n                  }\n                : {};\n            return (\n                <>\n                    {smallPhoto && (\n                        <Photo\n                            displaySize={displaySmallSize}\n                            style={style}\n                            chatId={chatId}\n                            messageId={messageId}\n                            photo={photo}\n                            openMedia={openMedia}\n                        />\n                    )}\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    {!smallPhoto && <Photo chatId={chatId} messageId={messageId} photo={photo} openMedia={openMedia} />}\n                </>\n            );\n        }\n\n        return (\n            <>\n                {site_name && (\n                    <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                )}\n                {title && <div className='web-page-title'>{title}</div>}\n                {description && <div className='web-page-description'>{description}</div>}\n            </>\n        );\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div className='web-page'>\n                <div className={classNames('web-page-border', classes.accentBackgroundLight)} />\n                <div className='web-page-wrapper'>{this.getContent()}</div>\n            </div>\n        );\n    }\n}\n\nWebPage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number,\n    displaySmallSize: PropTypes.number,\n    openMedia: PropTypes.func\n};\n\nWebPage.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    displaySmallSize: PHOTO_DISPLAY_SMALL_SIZE\n};\n\nexport default withStyles(styles)(WebPage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Reply from './Reply';\nimport Forward from './Forward';\nimport MessageStatus from './MessageStatus';\nimport MessageAuthor from './MessageAuthor';\nimport UserTileControl from '../Tile/UserTileControl';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport UnreadSeparator from './UnreadSeparator';\nimport WebPage from './Media/WebPage';\nimport {\n    getDate,\n    getDateHint,\n    getText,\n    getMedia,\n    getUnread,\n    getSenderUserId,\n    getWebPage,\n    openMedia\n} from '../../Utils/Message';\nimport { canSendMessages } from '../../Utils/Chat';\nimport { openUser, openChat, selectMessage } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Message.css';\n\nconst styles = theme => ({\n    messageAuthorColor: {\n        color: theme.palette.primary.main\n    },\n    messageSelected: {\n        backgroundColor: theme.palette.primary.main + '22'\n    },\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass Message extends Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                selected: false,\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                selected: false,\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { contextMenu, selected, highlighted } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.contextMenu !== contextMenu) {\n            return true;\n        }\n\n        if (nextState.selected !== selected) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.on('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.removeListener('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    onClientUpdateClearSelection = update => {\n        if (!this.state.selected) return;\n\n        this.setState({ selected: false });\n    };\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    onClientUpdateMessageSelected = update => {\n        const { chatId, messageId } = this.props;\n        const { selected } = update;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ selected, highlighted: false });\n        }\n    };\n\n    onUpdateMessageEdited = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageViews = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId !== chat_id) return;\n        if (messageId !== message_id) return;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messagePoll': {\n                this.forceUpdate();\n                break;\n            }\n        }\n    };\n\n    handleSelectUser = userId => {\n        openUser(userId, true);\n    };\n\n    handleSelectChat = chatId => {\n        openChat(chatId, true);\n    };\n\n    handleSelection = () => {\n        if (!this.mouseDown) return;\n\n        const selection = window.getSelection().toString();\n        if (selection) return;\n\n        const { chatId, messageId } = this.props;\n\n        const selected = !MessageStore.selectedItems.has(`chatId=${chatId}_messageId=${messageId}`);\n        selectMessage(chatId, messageId, selected);\n    };\n\n    handleDateClick = e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        const canBeReplied = canSendMessages(chatId);\n        if (canBeReplied) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateReply',\n                chatId: chatId,\n                messageId: messageId\n            });\n            return;\n        }\n\n        const canBeForwarded = message && message.can_be_forwarded;\n        if (canBeForwarded) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateForward',\n                info: {\n                    chatId: chatId,\n                    messageIds: [messageId]\n                }\n            });\n        }\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    handleMouseDown = () => {\n        this.mouseDown = true;\n    };\n\n    handleMouseOver = () => {\n        this.mouseDown = false;\n    };\n\n    handleMouseOut = () => {\n        this.mouseOut = false;\n    };\n\n    render() {\n        const { t, classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { contextMenu, left, top, selected, highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty message]</div>;\n\n        const { sending_state, views, edit_date, reply_to_message_id, forward_info } = message;\n\n        const text = getText(message);\n        const webPage = getWebPage(message);\n        const date = getDate(message);\n        const dateHint = getDateHint(message);\n        const media = getMedia(message, this.openMedia);\n        this.unread = getUnread(message);\n        const senderUserId = getSenderUserId(message);\n\n        const tile = senderUserId ? (\n            <UserTileControl userId={senderUserId} onSelect={this.handleSelectUser} />\n        ) : (\n            <ChatTileControl chatId={chatId} onSelect={this.handleSelectChat} />\n        );\n\n        const messageClassName = classNames(\n            'message',\n            { 'message-selected': selected },\n            { [classes.messageSelected]: selected },\n            // { 'message-highlighted': highlighted && !selected },\n            { [classes.messageHighlighted]: highlighted && !selected }\n        );\n\n        return (\n            <div\n                className={messageClassName}\n                onMouseOver={this.handleMouseOver}\n                onMouseOut={this.handleMouseOut}\n                onMouseDown={this.handleMouseDown}\n                onClick={this.handleSelection}\n                onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='message-wrapper'>\n                    <i className='message-select-tick' />\n                    {this.unread && (\n                        <MessageStatus chatId={chatId} messageId={messageId} sendingState={sending_state} />\n                    )}\n                    {tile}\n                    <div className='message-content'>\n                        <div className='message-title'>\n                            {!forward_info && <MessageAuthor chatId={chatId} openChat userId={senderUserId} openUser />}\n                            {forward_info && <Forward forwardInfo={forward_info} />}\n                            <div className='message-meta'>\n                                <span>&nbsp;</span>\n                                {views > 0 && (\n                                    <>\n                                        <i className='message-views-icon' />\n                                        <span className='message-views'>\n                                            &nbsp;\n                                            {views}\n                                            &nbsp; &nbsp;\n                                        </span>\n                                    </>\n                                )}\n                                {edit_date > 0 && <span>{t('EditedMessage')}&nbsp;</span>}\n                                <a className='message-date' onClick={this.handleDateClick}>\n                                    <span title={dateHint}>{date}</span>\n                                </a>\n                            </div>\n                        </div>\n                        {Boolean(reply_to_message_id) && <Reply chatId={chatId} messageId={reply_to_message_id} />}\n                        {media}\n                        <div className='message-text'>{text}</div>\n                        {webPage && <WebPage chatId={chatId} messageId={messageId} openMedia={this.openMedia} />}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Message);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport UnreadSeparator from './UnreadSeparator';\nimport Photo from './Media/Photo';\nimport { openMedia } from '../../Utils/Message';\nimport { getServiceMessageContent } from '../../Utils/ServiceMessage';\nimport MessageStore from '../../Stores/MessageStore';\nimport './ServiceMessage.css';\n\nconst chatPhotoStyle = {\n    width: 64,\n    height: 64,\n    borderRadius: '50%',\n    margin: '-8px auto 16px auto'\n};\n\nconst styles = theme => ({\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass ServiceMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    render() {\n        const { classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty service message]</div>;\n\n        const { content } = message;\n        if (!content) return <div>[empty service message]</div>;\n\n        const { photo } = content;\n\n        const text = getServiceMessageContent(message, true);\n\n        const messageClassName = classNames('service-message', { [classes.messageHighlighted]: highlighted });\n\n        return (\n            <div className={messageClassName} onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='service-message-wrapper'>\n                    <div className='service-message-content'>{text}</div>\n                </div>\n                {photo && (\n                    <Photo\n                        chatId={chatId}\n                        messageId={messageId}\n                        photo={photo}\n                        style={chatPhotoStyle}\n                        openMedia={this.openMedia}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(ServiceMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LinkIcon from '@material-ui/icons/Link';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport OptionStore from '../../Stores/OptionStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    }\n});\n\nclass ShareStickerSetButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.handleOpen(event.currentTarget);\n    };\n\n    handleOpen = anchorEl => {\n        this.setState({ anchorEl });\n    };\n\n    handleClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleCopyLink = () => {\n        this.handleClose();\n\n        const { t } = this.props;\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        copy(link);\n\n        const key = `${link}_copy_stickers_link`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    getStickersLink = stickerSet => {\n        if (!stickerSet) return '';\n\n        const { name } = stickerSet;\n        if (!name) return '';\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n\n        return (telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/') + 'addstickers/' + name;\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes, t } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handleShare = () => {\n        this.handleClose();\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { link }\n        });\n    };\n\n    render() {\n        const { classes, t, className } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton + ' ' + className}\n                    aria-label='Share'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <MoreIcon />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleClose}>\n                    <MenuItem onClick={this.handleCopyLink}>\n                        <ListItemIcon>\n                            <LinkIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('CopyLink')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleShare}>\n                        <ListItemIcon>\n                            <ShareIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('StickersShare')} />\n                    </MenuItem>\n                </Menu>\n            </>\n        );\n    }\n}\n\nShareStickerSetButton.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ShareStickerSetButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport ShareStickerSetButton from './ShareStickerSetButton';\nimport Sticker from '../Message/Media/Sticker';\nimport { loadStickerContent, loadStickerSetContent } from '../../Utils/File';\nimport { STICKER_PREVIEW_DISPLAY_SIZE, STICKER_SMALL_DISPLAY_SIZE } from '../../Constants';\nimport StickerStore from '../../Stores/StickerStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickerSetDialog.css';\n\nconst styles = theme => ({\n    contentRoot: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        maxHeight: 480,\n        padding: '0 12px 24px',\n        background: 'transparent'\n    },\n    paperRoot: {\n        width: 344\n    },\n    dialogTitleRoot: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    shareButtonRoot: {\n        margin: '-24px -12px -24px 0'\n    },\n    typographyRoot: {\n        flexGrow: 1,\n        flexShrink: 1\n    },\n    disablePointerEvents: {\n        pointerEvents: 'none'\n    }\n});\n\nclass StickerSetDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            stickerSet: StickerStore.stickerSet,\n            stickerId: 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { stickerSet, stickerId } = this.state;\n\n        return stickerSet !== nextState.stickerSet || stickerId !== nextState.stickerId;\n    }\n\n    componentDidMount() {\n        StickerStore.on('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.on('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    componentWillUnmount() {\n        StickerStore.removeListener('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.removeListener('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    handleUpdateInstalledStickerSets = update => {\n        const { stickerSet } = StickerStore;\n\n        this.setState({ stickerSet });\n    };\n\n    handleClientUpdateStickerSet = update => {\n        const { stickerSet } = update;\n\n        this.setState({ stickerSet });\n\n        if (stickerSet) {\n            const store = FileStore.getStore();\n            loadStickerSetContent(store, stickerSet);\n        }\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n    };\n\n    handleDone = () => {\n        const { stickerSet } = this.state;\n        if (!stickerSet) return;\n\n        const { is_installed } = stickerSet;\n\n        TdLibController.send({\n            '@type': 'changeStickerSet',\n            set_id: stickerSet.id,\n            is_installed: !is_installed\n        });\n\n        this.handleClose();\n    };\n\n    loadPreviewContent = stickerId => {\n        const { stickerSet } = this.state;\n        const { stickers } = stickerSet;\n        const sticker = stickers.find(x => x.sticker.id === stickerId);\n        if (!sticker) return;\n\n        const store = FileStore.getStore();\n        loadStickerContent(store, sticker, null);\n\n        const preloadStickers = this.getNeighborStickers(stickerId);\n        preloadStickers.forEach(x => {\n            loadStickerContent(store, x, null);\n        });\n    };\n\n    getNeighborStickers = stickerId => {\n        const { stickerSet } = this.state;\n        if (!stickerSet) return [];\n\n        const { stickers } = stickerSet;\n        if (!stickers) return [];\n\n        const indexes = [];\n        const index = stickers.findIndex(x => x.sticker.id === stickerId);\n        if (index === -1) return [];\n\n        const STICKERS_PER_ROW = 4;\n        const row = Math.floor(index / STICKERS_PER_ROW);\n        const column = index % STICKERS_PER_ROW;\n\n        const prevRow = row - 1;\n        const nextRow = row + 1;\n        const prevColumn = column - 1;\n        const nextColumn = column + 1;\n\n        if (prevRow >= 0) {\n            if (prevColumn >= 0) {\n                indexes.push(STICKERS_PER_ROW * prevRow + prevColumn);\n            }\n            indexes.push(STICKERS_PER_ROW * prevRow + column);\n            if (nextColumn < STICKERS_PER_ROW) {\n                indexes.push(STICKERS_PER_ROW * prevRow + nextColumn);\n            }\n        }\n\n        if (prevColumn >= 0) {\n            indexes.push(STICKERS_PER_ROW * row + prevColumn);\n        }\n        if (nextColumn < STICKERS_PER_ROW) {\n            indexes.push(STICKERS_PER_ROW * row + nextColumn);\n        }\n\n        if (nextRow < Math.ceil(stickers.length / STICKERS_PER_ROW)) {\n            if (prevColumn >= 0) {\n                indexes.push(STICKERS_PER_ROW * nextRow + prevColumn);\n            }\n            indexes.push(STICKERS_PER_ROW * nextRow + column);\n            if (nextColumn < STICKERS_PER_ROW) {\n                indexes.push(STICKERS_PER_ROW * nextRow + nextColumn);\n            }\n        }\n\n        return indexes.map(i => stickers[i]);\n    };\n\n    handleMouseOver = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        if (!this.mouseDown) return;\n\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n    };\n\n    handleMouseDown = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n\n        this.mouseDown = true;\n        document.addEventListener('mouseup', this.handleMouseUp);\n\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    };\n\n    handleMouseUp = () => {\n        this.setState({ stickerId: 0 });\n        this.mouseDown = false;\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    render() {\n        const { t, classes } = this.props;\n        const { stickerSet, stickerId } = this.state;\n        if (!stickerSet) return null;\n\n        const { title, stickers, emojis, is_installed } = stickerSet;\n\n        const items = stickers.map(x => (\n            <div\n                className='sticker-set-dialog-item'\n                key={x.sticker.id}\n                data-sticker-id={x.sticker.id}\n                style={{ width: 76, height: 76 }}>\n                <Sticker\n                    key={x.sticker.id}\n                    className='sticker-set-dialog-item-sticker'\n                    sticker={x}\n                    displaySize={STICKER_SMALL_DISPLAY_SIZE}\n                    blur={false}\n                />\n                <div className='sticker-set-dialog-item-emoji'>{x.emoji}</div>\n            </div>\n        ));\n\n        const stickerIndex = stickers.findIndex(x => x.sticker.id === stickerId);\n        const sticker = stickerIndex !== -1 ? stickers[stickerIndex] : null;\n        const emoji = stickerIndex !== -1 ? emojis[stickerIndex].emojis.join(' ') : null;\n\n        return (\n            <Dialog\n                className={classes.dialogRoot}\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                aria-labelledby='sticker-set-dialog-title-text'\n                classes={{ paper: classes.paperRoot }}>\n                <DialogTitle\n                    id='sticker-set-dialog-title-text'\n                    className={classNames(classes.dialogTitleRoot, {\n                        [classes.disablePointerEvents]: Boolean(sticker)\n                    })}\n                    disableTypography>\n                    <Typography variant='h6' className={classes.typographyRoot} noWrap>\n                        {title}\n                    </Typography>\n                    <ShareStickerSetButton className={classes.shareButtonRoot} />\n                </DialogTitle>\n                <DialogContent\n                    classes={{ root: classes.contentRoot }}\n                    onMouseOver={this.handleMouseOver}\n                    onMouseOut={this.handleMouseOut}\n                    onMouseDown={this.handleMouseDown}>\n                    {items}\n                </DialogContent>\n                <DialogActions className={classNames({ [classes.disablePointerEvents]: Boolean(sticker) })}>\n                    <Button color='primary' onClick={this.handleClose}>\n                        {t('Cancel')}\n                    </Button>\n                    <Button color='primary' onClick={this.handleDone}>\n                        {is_installed ? t('Remove') : t('Add')}\n                    </Button>\n                </DialogActions>\n                {Boolean(sticker) && (\n                    <div className='sticker-set-dialog-preview'>\n                        <div className='sticker-set-dialog-preview-emoji'>{emoji}</div>\n                        <Sticker sticker={sticker} displaySize={STICKER_PREVIEW_DISPLAY_SIZE} />\n                    </div>\n                )}\n            </Dialog>\n        );\n    }\n}\n\nStickerSetDialog.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles),\n    withTranslation()\n);\n\nexport default enhance(StickerSetDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Sticker from '../Message/Media/Sticker';\nimport { borderStyle } from '../Theme';\nimport { loadStickerContent, loadStickersContent } from '../../Utils/File';\nimport { STICKER_PREVIEW_DISPLAY_SIZE, STICKER_SMALL_DISPLAY_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickersHint.css';\nimport DialogContent from '../Dialog/StickerSetDialog';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    ...borderStyle(theme)\n});\n\nclass StickersHint extends React.Component {\n    state = {\n        hint: null,\n        stickerId: 0\n    };\n\n    componentDidMount() {\n        StickerStore.on('clientUpdateStickersHint', this.onClientUpdateStickersHint);\n    }\n\n    componentWillUnmount() {\n        StickerStore.removeListener('clientUpdateStickersHint', this.onClientUpdateStickersHint);\n    }\n\n    onClientUpdateStickersHint = update => {\n        const { hint } = update;\n\n        this.setState({ hint, stickerId: 0 });\n\n        if (!hint) return;\n\n        const store = FileStore.getStore();\n        const { stickers } = hint;\n        loadStickersContent(store, stickers.stickers);\n    };\n\n    handleSend = sticker => {\n        if (!sticker) return;\n        if (this.mouseDownStickerId !== sticker.sticker.id) return;\n        console.log('Match.sendSticker', sticker);\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSend',\n            sticker\n        });\n    };\n\n    loadPreviewContent = stickerId => {\n        const { hint } = this.state;\n        const { stickers: result } = hint;\n        const { stickers } = result;\n\n        const sticker = stickers.find(x => x.sticker.id === stickerId);\n        if (!sticker) return;\n\n        const store = FileStore.getStore();\n        loadStickerContent(store, sticker, null);\n\n        const preloadStickers = this.getNeighborStickers(stickerId, stickers, 8);\n        preloadStickers.forEach(x => {\n            loadStickerContent(store, x, null);\n        });\n    };\n\n    getNeighborStickers = (stickerId, stickers, stickersPerRow) => {\n        if (!stickers) return [];\n\n        const indexes = [];\n        const index = stickers.findIndex(x => x.sticker.id === stickerId);\n        if (index === -1) return [];\n\n        const row = Math.floor(index / stickersPerRow);\n        const column = index % stickersPerRow;\n\n        const prevRow = row - 1;\n        const nextRow = row + 1;\n        const prevColumn = column - 1;\n        const nextColumn = column + 1;\n\n        if (prevRow >= 0) {\n            if (prevColumn >= 0) {\n                indexes.push(stickersPerRow * prevRow + prevColumn);\n            }\n            indexes.push(stickersPerRow * prevRow + column);\n            if (nextColumn < stickersPerRow) {\n                indexes.push(stickersPerRow * prevRow + nextColumn);\n            }\n        }\n\n        if (prevColumn >= 0) {\n            indexes.push(stickersPerRow * row + prevColumn);\n        }\n        if (nextColumn < stickersPerRow) {\n            indexes.push(stickersPerRow * row + nextColumn);\n        }\n\n        if (nextRow < Math.ceil(stickers.length / stickersPerRow)) {\n            if (prevColumn >= 0) {\n                indexes.push(stickersPerRow * nextRow + prevColumn);\n            }\n            indexes.push(stickersPerRow * nextRow + column);\n            if (nextColumn < stickersPerRow) {\n                indexes.push(stickersPerRow * nextRow + nextColumn);\n            }\n        }\n\n        return indexes.map(i => stickers[i]);\n    };\n\n    handleMouseOver = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        if (!this.mouseDown) return;\n\n        if (this.mouseDownStickerId !== stickerId) {\n            this.mouseDownStickerId = null;\n        }\n        this.setState({ stickerId });\n        this.loadPreviewContent(stickerId);\n    };\n\n    handleMouseDown = event => {\n        const stickerId = Number(event.target.dataset.stickerId);\n        if (!stickerId) return;\n\n        this.mouseDownStickerId = stickerId;\n        const now = Date.now();\n\n        this.setState({ stickerId, timestamp: now, showPreview: false });\n        setTimeout(() => {\n            const { timestamp } = this.state;\n            if (timestamp === now) {\n                this.setState({ showPreview: true });\n            }\n        }, 500);\n\n        this.loadPreviewContent(stickerId);\n\n        this.mouseDown = true;\n        document.addEventListener('mouseup', this.handleMouseUp);\n\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    };\n\n    handleMouseUp = () => {\n        this.setState({ stickerId: 0, timestamp: 0, showPreview: false });\n        this.mouseDown = false;\n        document.removeEventListener('mouseup', this.handleMouseUp);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { hint, stickerId, showPreview } = this.state;\n        if (!hint) return null;\n\n        const { stickers } = hint;\n        if (!stickers) return null;\n\n        const { stickers: items } = stickers;\n        if (!items.length) return null;\n\n        const controls = items.map(x => (\n            <div\n                className='sticker-set-dialog-item'\n                key={x.sticker.id}\n                data-sticker-id={x.sticker.id}\n                style={{ width: 76, height: 76 }}\n                onClick={() => this.handleSend(x)}>\n                <Sticker\n                    key={x.sticker.id}\n                    className='sticker-set-dialog-item-sticker'\n                    sticker={x}\n                    displaySize={STICKER_SMALL_DISPLAY_SIZE}\n                    blur={false}\n                />\n                {/*<div className='sticker-set-dialog-item-emoji'>{x.emoji}</div>*/}\n            </div>\n        ));\n\n        const stickerIndex = items.findIndex(x => x.sticker.id === stickerId);\n        const sticker = stickerIndex !== -1 ? items[stickerIndex] : null;\n        const emoji = stickerIndex !== -1 ? sticker.emoji : null;\n\n        return (\n            <div\n                className={classNames('stickers-hint', classes.borderColor, classes.root)}\n                onMouseOver={this.handleMouseOver}\n                onMouseOut={this.handleMouseOut}\n                onMouseDown={this.handleMouseDown}>\n                {controls}\n                {Boolean(sticker) && showPreview && (\n                    <div className='sticker-set-dialog-preview'>\n                        {/*<div className='sticker-set-dialog-preview-emoji'>{emoji}</div>*/}\n                        <Sticker sticker={sticker} displaySize={STICKER_PREVIEW_DISPLAY_SIZE} />\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(StickersHint);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classNames from 'classnames';\nimport FilesDropTarget from './FilesDropTarget';\nimport Message from '../Message/Message';\nimport ServiceMessage from '../Message/ServiceMessage';\nimport StickersHint from './StickersHint';\nimport { debounce, throttle, getPhotoSize, itemsInView } from '../../Utils/Common';\nimport { loadChatsContent, loadDraftContent, loadMessageContents } from '../../Utils/File';\nimport { filterMessages } from '../../Utils/Message';\nimport { isServiceMessage } from '../../Utils/ServiceMessage';\nimport { canSendFiles, getChatFullInfo, getSupergroupId, isSupergroup } from '../../Utils/Chat';\nimport { highlightMessage } from '../../Actions/Client';\nimport { MESSAGE_SLICE_LIMIT } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MessagesList.css';\n\nconst ScrollBehaviorEnum = Object.freeze({\n    NONE: 'NONE',\n    SCROLL_TO_BOTTOM: 'SCROLL_TO_BOTTOM',\n    SCROLL_TO_UNREAD: 'SCROLL_TO_UNREAD',\n    SCROLL_TO_MESSAGE: 'SCROLL_TO_MESSAGE',\n    KEEP_SCROLL_POSITION: 'KEEP_SCROLL_POSITION'\n});\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[900] : 'transparent'\n    }\n});\n\nclass MessagesList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`MessagesList.ctor chat_id=${props.chatId} message_id=${props.messageId}`);\n\n        this.sessionId = Date.now();\n        this.state = {\n            prevChatId: 0,\n            prevMessageId: null,\n            playerOpened: false,\n            history: [],\n            clearHistory: false,\n            selectionActive: false,\n            scrollBehavior: ScrollBehaviorEnum.NONE,\n            separatorMessageId: 0\n        };\n\n        this.listRef = React.createRef();\n        this.itemsRef = React.createRef();\n\n        this.itemsMap = new Map();\n\n        this.updateItemsInView = throttle(this.updateItemsInView, 500);\n        //debounce(this.updateItemsInView, 250);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId || props.messageId !== state.prevMessageId) {\n            return {\n                prevChatId: props.chatId,\n                prevMessageId: props.messageId,\n                clearHistory: false,\n                selectionActive: false,\n                scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                separatorMessageId: 0\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.listRef.current;\n        const snapshot = {\n            scrollTop: list.scrollTop,\n            scrollHeight: list.scrollHeight,\n            offsetHeight: list.offsetHeight\n        };\n\n        console.log(\n            `SCROLL GETSNAPSHOTBEFOREUPDATE \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        return snapshot;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        const list = this.listRef.current;\n        console.log(\n            `MessagesList.componentDidUpdate chat_id=${chatId} message_id=${messageId} \\\\\n            prev_chat_id=${prevProps.chatId} prev_message_id=${prevProps.messageId} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight}`\n        );\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.handleSelectChat(chatId, prevProps.chatId, messageId, prevProps.messageId);\n        } else {\n            this.handleScrollBehavior(snapshot);\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n        const { playerOpened, history, dragging, clearHistory, selectionActive } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.playerOpened !== playerOpened) {\n            return true;\n        }\n\n        if (nextState.history !== history) {\n            return true;\n        }\n\n        if (nextState.dragging !== dragging) {\n            return true;\n        }\n\n        if (nextState.clearHistory !== clearHistory) {\n            return true;\n        }\n\n        if (nextState.selectionActive !== selectionActive) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        this.handleSelectChat(chatId, 0);\n\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.on('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaActive = update => {\n        const list = this.listRef.current;\n\n        const prevOffsetHeight = list.offsetHeight;\n        const prevScrollTop = list.scrollTop;\n        this.setState({ playerOpened: true }, () => {\n            if (list.scrollTop === prevScrollTop) {\n                list.scrollTop += Math.abs(prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateMediaEnding = udpate => {\n        const list = this.listRef.current;\n\n        this.prevOffsetHeight = list.offsetHeight;\n        this.prevScrollTop = list.scrollTop;\n    };\n\n    onClientUpdateMediaEnd = udpate => {\n        const list = this.listRef.current;\n\n        //const prevOffsetHeight = list.offsetHeight;\n        //const prevScrollTop = list.scrollTop;\n\n        this.setState({ playerOpened: false }, () => {\n            if (list.scrollTop === this.prevScrollTop) {\n                list.scrollTop -= Math.abs(this.prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateSelection = update => {\n        this.setState({\n            selectionActive: MessageStore.selectedItems.size > 0,\n            scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION\n        });\n    };\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.setState({ clearHistory: update.inProgress });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId } = this.props;\n        const { history } = this.state;\n        const { chat_id, message_id } = update;\n\n        if (chatId !== chat_id) return;\n\n        if (history.findIndex(x => x.id === message_id) !== -1) {\n            const message = MessageStore.get(chat_id, message_id);\n            if (!message) return;\n\n            const store = FileStore.getStore();\n            loadMessageContents(store, [message]);\n        }\n    };\n\n    onUpdateChatLastMessage = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n    };\n\n    onUpdateMessageSendSucceeded = update => {\n        const { message, old_message_id } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let handleSendSucceeded = false;\n        const { content } = message;\n        switch (content['@type']) {\n            case 'messagePoll': {\n                handleSendSucceeded = true;\n                break;\n            }\n        }\n\n        if (!handleSendSucceeded) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        console.log('SCROLL MessagesList.onUpdateMessageSendSucceeded scrollBehavior=' + scrollBehavior);\n        this.replaceMessage(old_message_id, message, scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, [message]);\n        MessagesList.viewMessages([message]);\n    };\n\n    onUpdateNewMessage = update => {\n        if (!this.completed) return;\n\n        const { message } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        const history = [message];\n\n        console.log('SCROLL MessagesList.onUpdateNewMessage scrollBehavior=' + scrollBehavior);\n        this.insertAfter(this.filterMessages(history), scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, history);\n        MessagesList.viewMessages(history);\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n\n        if (!update.is_permanent) return;\n\n        this.deleteHistory(update.message_ids);\n    };\n\n    updateItemsInView = () => {\n        if (!this.messages) return;\n\n        const messages = new Map();\n        const items = itemsInView(this.listRef, this.itemsRef);\n        for (let i = 0; i < items.length; i++) {\n            const message = this.messages[items[i]];\n            if (message) {\n                const { chatId, messageId } = message.props;\n                const key = `${chatId}_${messageId}`;\n                messages.set(key, key);\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMessagesInView',\n            messages: messages\n        });\n        return;\n\n        if (!messages.length) return;\n\n        /*let ids = messages.map(x => x.id);\n        console.log('[perf] load_messages_contents ids=[' + ids + ']');\n\n                let messagesMap = new Map(messages.map((i) => [i.id, i]));\n\n                if (this.previousMessages){\n                    let cancelMessages = [];\n                    for (let i = 0; i < this.previousMessages.length; i++){\n                        if (!messagesMap.has(this.previousMessages[i].id)){\n                            cancelMessages.push(this.previousMessages[i]);\n                        }\n                    }\n                    if (cancelMessages.length > 0) {\n                        this.cancelLoadMessageContents(cancelMessages);\n                    }\n                }\n                this.previousMessages = messages;*/\n\n        const store = FileStore.getStore();\n        loadMessageContents(store, messages);\n    };\n\n    async handleSelectChat(chatId, previousChatId, messageId, previousMessageId) {\n        const chat = ChatStore.get(chatId);\n        const previousChat = ChatStore.get(previousChatId);\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n        this.loadMigratedHistory = false;\n\n        this.suppressHandleScrollOnSelectChat = true;\n        if (chat) {\n            TdLibController.send({\n                '@type': 'openChat',\n                chat_id: chat.id\n            });\n\n            const unread = !messageId && chat.unread_count > 0;\n            const fromMessageId =\n                unread && chat.unread_count > 1 ? chat.last_read_inbox_message_id : messageId ? messageId : 0;\n            const offset = (unread && chat.unread_count > 1) || messageId ? -1 - MESSAGE_SLICE_LIMIT : 0;\n            const limit =\n                (unread && chat.unread_count > 1) || messageId ? 2 * MESSAGE_SLICE_LIMIT : MESSAGE_SLICE_LIMIT;\n\n            const sessionId = this.sessionId;\n            const result = await TdLibController.send({\n                '@type': 'getChatHistory',\n                chat_id: chat.id,\n                from_message_id: fromMessageId,\n                offset: offset,\n                limit: limit\n            });\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            //TODO: replace result with one-way data flow\n\n            if (chat.last_message) {\n                this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n            } else {\n                this.completed = true;\n            }\n\n            MessageStore.setItems(result.messages);\n            result.messages.reverse();\n\n            // calculate separator\n            let separatorMessageId = Number.MAX_VALUE;\n            if (chat && chat.unread_count > 1) {\n                for (let i = result.messages.length - 1; i >= 0; i--) {\n                    const { id } = result.messages[i];\n                    if (\n                        !result.messages[i].is_outgoing &&\n                        id > chat.last_read_inbox_message_id &&\n                        id < separatorMessageId\n                    ) {\n                        separatorMessageId = id;\n                    } else {\n                        break;\n                    }\n                }\n            }\n            separatorMessageId = separatorMessageId === Number.MAX_VALUE ? 0 : separatorMessageId;\n            console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n            let scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n            if (messageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_MESSAGE;\n            } else if (unread && separatorMessageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_UNREAD;\n            }\n\n            this.replace(separatorMessageId, result.messages, scrollBehavior, () => {\n                this.suppressHandleScrollOnSelectChat = false;\n                if (messageId) {\n                    highlightMessage(chatId, messageId);\n                }\n            });\n\n            // load files\n            const store = FileStore.getStore();\n            loadMessageContents(store, result.messages);\n            loadChatsContent(store, [chatId]);\n            loadDraftContent(store, chatId);\n\n            MessagesList.viewMessages(result.messages);\n\n            this.loadIncompleteHistory(result);\n\n            // load full info\n            getChatFullInfo(chat.id);\n        } else {\n            this.replace(\n                0,\n                [],\n                ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                () => (this.suppressHandleScrollOnSelectChat = false)\n            );\n        }\n\n        if (previousChat) {\n            TdLibController.send({\n                '@type': 'closeChat',\n                chat_id: previousChat.id\n            });\n        }\n    }\n\n    static viewMessages(messages) {\n        if (!messages) return;\n        if (messages.length === 0) return;\n        if (!messages[0].chat_id) return;\n\n        TdLibController.send({\n            '@type': 'viewMessages',\n            chat_id: messages[0].chat_id,\n            message_ids: messages.map(x => x.id)\n        });\n    }\n\n    cancelLoadMessageContents(messages) {\n        //return;\n        for (let i = messages.length - 1; i >= 0; i--) {\n            let message = messages[i];\n            if (message && message.content) {\n                switch (message.content['@type']) {\n                    case 'messagePhoto': {\n                        let [id, pid] = this.getMessagePhoto(message);\n                        if (pid) {\n                            let obj = getPhotoSize(message.content.photo.sizes);\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    case 'messageSticker': {\n                        let [id, pid] = this.getMessageSticker(message);\n                        if (pid) {\n                            let obj = message.content.sticker.sticker;\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            }\n        }\n    }\n\n    loadIncompleteHistory = async result => {\n        const MAX_ITERATIONS = 5;\n        let incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n\n        for (let i = 0; i < MAX_ITERATIONS && incomplete; i++) {\n            result = await this.onLoadNext();\n            incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n        }\n    };\n\n    onLoadNext = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        if (this.loadMigratedHistory) {\n            this.onLoadMigratedHistory();\n            return;\n        }\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages), () => {\n            if (!result.messages.length) {\n                this.onLoadMigratedHistory();\n            }\n        });\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    filterMessages = messages => {\n        return messages.filter(x => x.content['@type'] !== 'messageChatUpgradeTo');\n    };\n\n    onLoadMigratedHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        const supergroupId = getSupergroupId(chatId);\n        if (!supergroupId) return;\n\n        const fullInfo = SupergroupStore.getFullInfo(supergroupId);\n        if (!fullInfo) return;\n        if (!fullInfo.upgraded_from_basic_group_id) return;\n\n        this.loadMigratedHistory = true;\n\n        const basicGroupChat = await TdLibController.send({\n            '@type': 'createBasicGroupChat',\n            basic_group_id: fullInfo.upgraded_from_basic_group_id\n        });\n\n        if (!basicGroupChat) return;\n\n        let fromMessageId = 0;\n        if (\n            this.state.history &&\n            this.state.history.length > 0 &&\n            this.state.history[0].chat_id === basicGroupChat.id\n        ) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: basicGroupChat.id,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages));\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n    };\n\n    onLoadPrevious = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n\n        if (!chat) return;\n        if (this.loading) return;\n        if (this.completed) return;\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[this.state.history.length - 1].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: -MESSAGE_SLICE_LIMIT - 1,\n            limit: MESSAGE_SLICE_LIMIT + 1\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        filterMessages(result, this.state.history);\n\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        console.log('SCROLL MessagesList.onLoadPrevious scrollBehavior=NONE');\n        this.insertAfter(this.filterMessages(result.messages), ScrollBehaviorEnum.NONE);\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    replace(separatorMessageId, history, scrollBehavior, callback) {\n        this.setState(\n            { separatorMessageId: separatorMessageId, history: history, scrollBehavior: scrollBehavior },\n            callback\n        );\n    }\n\n    insertBefore(history, callback) {\n        if (history.length === 0) {\n            if (callback) callback();\n            return;\n        }\n\n        this.setState(\n            { history: history.concat(this.state.history), scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION },\n            callback\n        );\n    }\n\n    replaceMessage(oldMessageId, message, scrollBehavior, callback) {\n        if (!message) return;\n\n        this.setState(\n            {\n                history: this.state.history.filter(x => x.id !== oldMessageId).concat([message]),\n                scrollBehavior: scrollBehavior\n            },\n            callback\n        );\n    }\n\n    insertAfter(history, scrollBehavior, callback) {\n        if (history.length === 0) return;\n\n        this.setState({ history: this.state.history.concat(history), scrollBehavior: scrollBehavior }, callback);\n    }\n\n    deleteHistory(message_ids, callback) {\n        const { history } = this.state;\n        if (history.length === 0) return;\n\n        let map = new Map(message_ids.map(x => [x, x]));\n\n        this.setState(\n            { history: history.filter(x => !map.has(x.id)), scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM },\n            callback\n        );\n    }\n\n    handleScroll = () => {\n        this.updateItemsInView();\n\n        const list = this.listRef.current;\n        //console.log(`SCROLL HANDLESCROLL list.scrollTop=${list.scrollTop} list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight} chatId=${this.props.chatId}`);\n\n        if (this.suppressHandleScroll) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScroll');\n            this.suppressHandleScroll = false;\n            return;\n        }\n\n        if (this.suppressHandleScrollOnSelectChat) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScrollOnSelectChat');\n            return;\n        }\n\n        if (list.scrollTop <= 0) {\n            console.log('SCROLL HANDLESCROLL onLoadNext');\n            this.onLoadNext();\n        } else if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            console.log('SCROLL HANDLESCROLL onLoadPrevious');\n            this.onLoadPrevious();\n        } else {\n            //console.log('SCROLL HANDLESCROLL updateItemsInView');\n        }\n    };\n\n    handleScrollBehavior = snapshot => {\n        const { chatId, messageId } = this.props;\n        const { scrollBehavior, history } = this.state;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n\n        console.log(\n            `SCROLL HANDLESCROLLBEHAVIOR \\\\\n            scrollBehavior=${scrollBehavior} \\\\\n            previousScrollTop=${scrollTop} \\\\\n            previousScrollHeight=${scrollHeight} \\\\\n            previousOffsetHeight=${offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n        if (scrollBehavior === ScrollBehaviorEnum.NONE) {\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_BOTTOM) {\n            this.scrollToBottom();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_MESSAGE) {\n            this.scrollToMessage();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_UNREAD) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n\n            let scrolled = false;\n            for (let i = 0; i < history.length; i++) {\n                let itemComponent = this.itemsMap.get(i);\n                let item = ReactDOM.findDOMNode(itemComponent);\n                if (item) {\n                    // console.log(`SCROLL SCROLL_TO_UNREAD item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                    if (itemComponent.props.showUnreadSeparator) {\n                        list.scrollTop = item.offsetTop; // + unread messages margin-top\n                        scrolled = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!scrolled) {\n                this.scrollToBottom();\n            }\n\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        } else if (scrollBehavior === ScrollBehaviorEnum.KEEP_SCROLL_POSITION) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n            list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        }\n    };\n\n    scrollToMessage = () => {\n        const { chatId, messageId } = this.props;\n        const { history } = this.state;\n\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} before \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        let scrolled = false;\n        for (let i = 0; i < history.length; i++) {\n            let itemComponent = this.itemsMap.get(i);\n            let item = ReactDOM.findDOMNode(itemComponent);\n            if (item) {\n                // console.log(`SCROLL SCROLL_TO_MESSAGE message_id=${messageId} item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                if (itemComponent.props.messageId === messageId) {\n                    list.scrollTop = item.offsetTop - list.offsetHeight / 2.0;\n                    scrolled = true;\n                    break;\n                }\n            }\n        }\n\n        if (!scrolled) {\n            this.scrollToBottom();\n        }\n\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} after \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n    };\n\n    scrollToBottom = () => {\n        this.suppressHandleScroll = true;\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_BOTTOM before \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            chatId=${this.props.chatId}`\n        );\n\n        const nextScrollTop = list.scrollHeight - list.offsetHeight;\n        if (nextScrollTop !== list.scrollTop) {\n            list.scrollTop = list.scrollHeight - list.offsetHeight;\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        } else {\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after(already bottom) \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        }\n    };\n\n    scrollToStart = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n\n        const fromMessageId = 0;\n        const offset = 0;\n        const limit = MESSAGE_SLICE_LIMIT;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chat.id,\n            from_message_id: fromMessageId,\n            offset: offset,\n            limit: limit\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        //TODO: replace result with one-way data flow\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n\n        // calculate separator\n        let separatorMessageId = 0;\n        console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n        this.replace(separatorMessageId, result.messages, ScrollBehaviorEnum.SCROLL_TO_BOTTOM);\n\n        // load files\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        loadChatsContent(store, [chatId]);\n\n        MessagesList.viewMessages(result.messages);\n\n        this.loadIncompleteHistory(result);\n    };\n\n    handleListDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const { chatId } = this.props;\n        if (!canSendFiles(chatId)) return;\n\n        ApplicationStore.setDragging(true);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { history, separatorMessageId, clearHistory, selectionActive } = this.state;\n\n        console.log(`MessagesList.render clearHistory=${clearHistory}`, history);\n\n        this.itemsMap.clear();\n        this.messages = clearHistory\n            ? null\n            : history.map((x, i) =>\n                  isServiceMessage(x) ? (\n                      <ServiceMessage\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  ) : (\n                      <Message\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showTitle\n                          sendingState={x.sending_state}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  )\n              );\n\n        return (\n            <div\n                className={classNames(classes.background, 'messages-list', {\n                    'messages-list-selection-active': selectionActive\n                })}\n                onDragEnter={this.handleListDragEnter}>\n                <div ref={this.listRef} className='messages-list-wrapper' onScroll={this.handleScroll}>\n                    <div className='messages-list-top' />\n                    <div ref={this.itemsRef} className='messages-list-items'>\n                        {this.messages}\n                    </div>\n                </div>\n                <FilesDropTarget />\n                <StickersHint />\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(MessagesList);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Dialog from '@material-ui/core/Dialog';\nimport ChatInfo from '../ColumnRight/ChatInfo';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfoDialog.css';\n\nconst styles = theme => ({\n    chatInfoRoot: {\n        width: 336\n    },\n    containerRoot: {\n        alignItems: 'start'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary,\n        zIndex: 1\n    },\n    paperRoot: {\n        width: 336\n    }\n});\n\nclass ChatInfoDialog extends React.Component {\n    state = {\n        chatId: ApplicationStore.dialogChatId\n    };\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { chatId } = this.state;\n\n        return nextState.chatId !== chatId;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    handleClientUpdateDialogChatId = update => {\n        const { chatId } = update;\n\n        this.setState({ chatId });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDialogChatId',\n            chatId: 0\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { chatId } = this.state;\n        if (!chatId) return null;\n\n        return (\n            <Dialog\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                classes={{ root: classes.dialogRoot, container: classes.containerRoot, paper: classes.paperRoot }}>\n                <ChatInfo className={classes.chatInfoRoot} chatId={chatId} popup />\n            </Dialog>\n        );\n    }\n}\n\nChatInfoDialog.propTypes = {};\n\nexport default withStyles(styles)(ChatInfoDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Footer from './Footer';\nimport Header from './Header';\nimport HeaderPlayer from '../Player/HeaderPlayer';\nimport MessagesList from './MessagesList';\nimport ChatInfoDialog from '../Dialog/ChatInfoDialog';\nimport StickerSetDialog from '../Dialog/StickerSetDialog';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogDetails.css';\n\nclass DialogDetails extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatId: ApplicationStore.getChatId(),\n            messageId: ApplicationStore.getMessageId(),\n            selectedCount: 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chatId !== this.state.chatId) {\n            return true;\n        }\n        if (nextState.messageId !== this.state.messageId) {\n            return true;\n        }\n        if (nextState.selectedCount !== this.state.selectedItems) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onUpdateChatDetailsVisibility = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            chatId: update.nextChatId,\n            messageId: update.nextMessageId\n        });\n    };\n\n    scrollToBottom = () => {\n        this.messagesList.scrollToBottom();\n    };\n\n    scrollToStart = () => {\n        this.messagesList.scrollToStart();\n    };\n\n    scrollToMessage = () => {\n        this.messagesList.scrollToMessage();\n    };\n\n    render() {\n        /*let groups = [];\n        if (this.props.history.length > 0){\n            let currentGroup = {\n                key: this.props.history[0].id,\n                date: this.props.history[0].date,\n                senderUserId: this.props.history[0].sender_user_id,\n                messages: [this.props.history[0]]\n            };\n\n            for (let i = 1; i < this.props.history.length; i++){\n                if (this.props.history[i].sender_user_id === currentGroup.senderUserId\n                    && Math.abs(this.props.history[i].date - currentGroup.date) <= 10 * 60\n                    && i % 20 !== 0){\n                    currentGroup.key += '_' + this.props.history[i].id;\n                    currentGroup.messages.push(this.props.history[i]);\n                }\n                else {\n                    groups.push(currentGroup);\n                    currentGroup = {\n                        key: this.props.history[i].id,\n                        date: this.props.history[i].date,\n                        senderUserId: this.props.history[i].sender_user_id,\n                        messages: [this.props.history[i]]\n                    };\n                }\n            }\n            groups.push(currentGroup);\n        }\n\n        this.groups = groups.map(x => {\n            return (<MessageGroup key={x.key} senderUserId={x.senderUserId} messages={x.messages} onSelectChat={this.props.onSelectChat}/>);\n        });*/\n        const { chatId, messageId, selectedCount } = this.state;\n        const { isChatDetailsVisible } = ApplicationStore;\n\n        return (\n            <div className={classNames('dialog-details', { 'dialog-details-third-column': isChatDetailsVisible })}>\n                <HeaderPlayer />\n                <Header chatId={chatId} />\n                <MessagesList innerRef={ref => (this.messagesList = ref)} chatId={chatId} messageId={messageId} />\n                <Footer chatId={chatId} />\n                <StickerSetDialog />\n                <ChatInfoDialog />\n            </div>\n        );\n    }\n}\n\nexport default DialogDetails;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { isValidPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport OptionStore from '../../Stores/OptionStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './SignInControl.css';\n\nconst styles = {\n    button: {\n        margin: '16px 0 0 0'\n    },\n    phone: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n    },\n    continueAtLanguage: {\n        transform: 'translateY(100px)',\n        textAlign: 'center'\n    }\n};\n\nclass SignInControl extends React.Component {\n    state = {\n        error: null,\n        loading: false\n    };\n\n    componentDidMount() {\n        this.handleSuggestedLanguagePackId();\n\n        OptionStore.on('updateOption', this.handleUpdateOption);\n    }\n\n    componentWillUnmount() {\n        OptionStore.removeListener('updateOption', this.handleUpdateOption);\n    }\n\n    handleUpdateOption = update => {\n        const { name } = update;\n\n        if (name === 'suggested_language_pack_id') {\n            this.handleSuggestedLanguagePackId();\n        }\n    };\n\n    handleSuggestedLanguagePackId = () => {\n        const { i18n } = this.props;\n        if (!i18n) return;\n\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\n        if (!languagePackId) return;\n\n        const { value } = languagePackId;\n        if (value === i18n.language) {\n            this.setState({ suggestedLanguage: null });\n            return;\n        }\n\n        LocalizationStore.loadLanguage(value).then(() => {\n            this.setState({ suggestedLanguage: value });\n        });\n    };\n\n    handleNext = () => {\n        const { phone } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n\n        if (isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: null, openConfirmation: true });\n        } else {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n        }\n    };\n\n    handleChange = event => {\n        this.phoneNumber = event.target.value;\n    };\n\n    handleKeyPress = event => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    handleDone = () => {\n        const { phone, onPhoneEnter } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n        if (!isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n            return;\n        }\n\n        onPhoneEnter(phoneNumber);\n        this.setState({ error: null, loading: true });\n        TdLibController.send({\n            '@type': 'setAuthenticationPhoneNumber',\n            phone_number: phoneNumber\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: { string: errorString } });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleChangeLanguage = () => {\n        const { i18n } = this.props;\n        const { suggestedLanguage } = this.state;\n\n        if (!i18n) return;\n        if (!suggestedLanguage) return;\n\n        this.setState({ suggestedLanguage: i18n.language });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\n    };\n\n    render() {\n        const { phone, classes, t } = this.props;\n        const { loading, error, suggestedLanguage } = this.state;\n\n        let errorString = '';\n        if (error) {\n            const { code, string } = error;\n            if (code) {\n                errorString = t(code);\n            } else {\n                errorString = string;\n            }\n        }\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{t('YourPhone')}</span>\n                </div>\n                <div>{t('StartText')}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(errorString)}\n                    fullWidth\n                    autoFocus\n                    id='phoneNumber'\n                    label=''\n                    margin='normal'\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                    defaultValue={phone}\n                />\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\n                <div className='sign-in-actions'>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        disabled={loading}\n                        className={classes.button}\n                        onClick={this.handleDone}>\n                        {t('Next')}\n                    </Button>\n                    <Typography className={classes.continueAtLanguage}>\n                        <Link onClick={this.handleChangeLanguage}>\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\n                        </Link>\n                    </Typography>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(SignInControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport './ConfirmCodeControl.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n};\n\nclass ConfirmCodeControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            loading: false\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n    }\n\n    handleNext() {\n        if (this.code && this.isValid(this.code)) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid code. Please try again.' });\n        }\n    }\n\n    handleDone() {\n        const code = this.code;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationCode',\n            code: code,\n            first_name: 'A',\n            last_name: 'B'\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleBack() {\n        this.props.onChangePhone();\n    }\n\n    isValid(code) {\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\n        if (!isBad) {\n            code = code.replace(/\\D/g, '');\n            if (code.length !== 5) {\n                isBad = true;\n            }\n        }\n\n        return !isBad;\n    }\n\n    handleChange(e) {\n        this.code = e.target.value;\n\n        if (this.code && this.codeLength > 0 && this.code.length === this.codeLength) {\n            this.handleNext();\n        }\n    }\n\n    handleKeyPress(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    getPhoneNumber(codeInfo) {\n        if (!codeInfo) return null;\n        return codeInfo.phone_number;\n    }\n\n    getCodeLength(codeInfo) {\n        if (!codeInfo) return 0;\n        if (!codeInfo.type) return 0;\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 0;\n            }\n            case 'authenticationCodeTypeSms': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return codeInfo.type.length;\n            }\n        }\n\n        return 0;\n    }\n\n    getSubtitle(codeInfo) {\n        if (!codeInfo) return 'Subtitle';\n        if (!codeInfo.type) return 'Subtitle';\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeSms': {\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return \"Please enter the code you've just received in your previous Telegram app.\";\n            }\n        }\n\n        return 'Subtitle';\n    }\n\n    render() {\n        const { loading, error } = this.state;\n        const { classes, codeInfo } = this.props;\n\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\n        this.codeLength = this.getCodeLength(codeInfo);\n        const subtitle = this.getSubtitle(codeInfo);\n\n        const title = this.phoneNumber ? formatPhoneNumber(this.phoneNumber) : 'Your Code';\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                </div>\n                <div>{subtitle}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(error)}\n                    fullWidth\n                    autoFocus\n                    label='Your code'\n                    margin='normal'\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                />\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nexport default withStyles(styles)(ConfirmCodeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './PasswordControl.css';\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    margin: {\n        margin: '16px 0 8px 0'\n    },\n    withoutLabel: {\n        marginTop: theme.spacing.unit * 3\n    },\n    textField: {\n        flexBasis: 200\n    },\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n});\n\nclass PasswordControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            password: '',\n            showPassword: false,\n            error: ''\n        };\n\n        this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\n        this.handleMouseDownPassword = this.handleMouseDownPassword.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n    }\n\n    handleNext() {\n        if (this.password) {\n            this.setState({ error: '' });\n            this.handleDone();\n        } else {\n            this.setState({ error: 'Invalid password. Please try again.' });\n        }\n    }\n\n    handleBack() {\n        this.props.onChangePhone();\n    }\n\n    handleDone() {\n        const password = this.password;\n\n        this.setState({ loading: true });\n        TdLibController.send({\n            '@type': 'checkAuthenticationPassword',\n            password: password\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleMouseDownPassword = event => {\n        event.preventDefault();\n    };\n\n    handleClickShowPassword = () => {\n        this.setState({ showPassword: !this.state.showPassword });\n    };\n\n    handleChange(e) {\n        this.password = e.target.value;\n    }\n\n    handleKeyPress(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    render() {\n        const { loading, error, showPassword } = this.state;\n        const { passwordHint, classes } = this.props;\n\n        return (\n            <div>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>Cloud Password Check</span>\n                </div>\n                <div>Please enter your cloud password.</div>\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\n                    <InputLabel htmlFor='adornment-password' error={error}>\n                        Your cloud password\n                    </InputLabel>\n                    <Input\n                        fullWidth\n                        autoFocus\n                        id='adornment-password'\n                        type={showPassword ? 'text' : 'password'}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                        endAdornment={\n                            <InputAdornment position='end'>\n                                <IconButton\n                                    aria-label='Toggle password visibility'\n                                    onClick={this.handleClickShowPassword}\n                                    onMouseDown={this.handleMouseDownPassword}>\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n                {passwordHint && (\n                    <FormHelperText id='password-hint-text'>\n                        <span className='password-hint-label'>Hint: </span>\n                        {passwordHint}\n                    </FormHelperText>\n                )}\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button fullWidth className={classes.buttonLeft} onClick={this.handleBack} disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(PasswordControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass AuthErrorDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            error: null\n        };\n\n        this.handleAuthError = this.handleAuthError.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentDidMount() {\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\n    }\n\n    handleAuthError(error) {\n        this.setState({\n            open: true,\n            error: error\n        });\n    }\n\n    handleClose() {\n        this.setState({\n            open: false\n        });\n    }\n\n    handleKeyDown(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleClose();\n        }\n    }\n\n    render() {\n        let errorString = null;\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\n            errorString = this.state.error.message;\n        } else {\n            errorString = JSON.stringify(this.state.error);\n        }\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onKeyDown={this.handleKeyDown}\n                onClose={this.handleClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{errorString}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default AuthErrorDialog;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport classNames from 'classnames';\nimport SignInControl from './SignInControl';\nimport ConfirmCodeControl from './ConfirmCodeControl';\nimport PasswordControl from './PasswordControl';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport './AuthFormControl.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '20px'\n    },\n    authorizationFormContent: {\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary\n    }\n});\n\nclass AuthFormControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.phone = null;\n\n        this.handlePhoneEnter = this.handlePhoneEnter.bind(this);\n    }\n\n    handlePhoneEnter(phone) {\n        this.phone = phone;\n    }\n\n    render() {\n        const { classes, authorizationState } = this.props;\n\n        let control = null;\n        switch (authorizationState['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n                // control = (\n                //     <>\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\n                //         <SignUpControl/>\n                //     </>);\n                control = <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter} />;\n                break;\n            case 'authorizationStateWaitCode':\n                control = (\n                    <ConfirmCodeControl\n                        termsOfService={authorizationState.terms_of_service}\n                        codeInfo={authorizationState.code_info}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            case 'authorizationStateWaitPassword':\n                control = (\n                    <PasswordControl\n                        passwordHint={authorizationState.password_hint}\n                        hasRecoveryEmailAddress={authorizationState.has_recovery_email_address}\n                        recoveryEmailAddressPattern={authorizationState.recovery_email_address_pattern}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <div className='sign-in-wrap'>\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default withStyles(styles)(AuthFormControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport packageJson from '../../package.json';\nimport './Footer.css'\n\nclass Footer extends React.PureComponent {\n\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className='footer-wrapper'>\n                <span>\n                    {packageJson.version}\n                </span>\n            </div>\n        );\n    }\n}\n\nexport default Footer;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateHint, getSenderUserId } from '../../Utils/Message';\nimport UserTileControl from './UserTileControl';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaViewerControl.css';\n\nclass MediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const userId = getSenderUserId(message);\n        const dateHint = getDateHint(message);\n\n        const tileControl = userId ? (\n            <UserTileControl userId={userId} />\n        ) : (\n            <ChatTileControl chatId={chatId} />\n        );\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    {tileControl}\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} userId={userId} />\n                        </div>\n                        <div className='media-viewer-row message-meta'>\n                            <span className='message-date'>{dateHint}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default MediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport lottie from 'lottie-web';\nimport './Lottie.css';\n\nclass Lottie extends React.Component {\n    componentDidMount() {\n        const { options, eventListeners } = this.props;\n\n        const {\n            loop,\n            autoplay,\n            animationData,\n            //path,\n            rendererSettings,\n            segments\n        } = options;\n\n        this.options = {\n            container: this.el,\n            renderer: 'svg',\n            loop: Boolean(loop),\n            autoplay: Boolean(autoplay),\n            segments: Boolean(segments),\n            animationData,\n            //path,\n            rendererSettings\n        };\n\n        this.options = { ...this.options, ...options };\n\n        this.anim = lottie.loadAnimation(this.options);\n        this.registerEvents(eventListeners);\n    }\n\n    componentWillUpdate(nextProps, nextState, nextContext) {\n        /* Recreate the animation handle if the data is changed */\n        if (\n            this.options.animationData !== nextProps.options.animationData ||\n            this.options.path !== nextProps.options.path\n        ) {\n            this.deRegisterEvents(this.props.eventListeners);\n            this.destroy();\n            this.options = { ...this.options, ...nextProps.options };\n            this.anim = lottie.loadAnimation(this.options);\n            this.registerEvents(nextProps.eventListeners);\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.isStopped) {\n            this.stop();\n        } else if (this.props.segments) {\n            this.playSegments();\n        } else {\n            this.play();\n        }\n\n        this.pause();\n        this.setSpeed();\n        this.setDirection();\n    }\n\n    componentWillUnmount() {\n        this.deRegisterEvents(this.props.eventListeners);\n        this.destroy();\n        this.options.animationData = null;\n        this.options.path = null;\n        this.anim = null;\n    }\n\n    setSpeed() {\n        this.anim.setSpeed(this.props.speed);\n    }\n\n    setDirection() {\n        this.anim.setDirection(this.props.direction);\n    }\n\n    play() {\n        this.anim.play();\n    }\n\n    playSegments() {\n        this.anim.playSegments(this.props.segments);\n    }\n\n    stop() {\n        this.anim.stop();\n    }\n\n    pause() {\n        if (this.props.isPaused && !this.anim.isPaused) {\n            this.anim.pause();\n        } else if (!this.props.isPaused && this.anim.isPaused) {\n            this.anim.pause();\n        }\n    }\n\n    destroy() {\n        this.anim.destroy();\n    }\n\n    registerEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.addEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    deRegisterEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.removeEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    handleClickToPause = () => {\n        // The pause() method is for handling pausing by passing a prop isPaused\n        // This method is for handling the ability to pause by clicking on the animation\n        if (this.anim.isPaused) {\n            this.anim.play();\n        } else {\n            this.anim.pause();\n        }\n    };\n\n    render() {\n        const { width, height, ariaRole, ariaLabel, isClickToPauseDisabled, title } = this.props;\n\n        const getSize = initial => {\n            let size;\n\n            if (typeof initial === 'number') {\n                size = `${initial}px`;\n            } else {\n                size = initial || '100%';\n            }\n\n            return size;\n        };\n\n        const lottieStyles = {\n            width: getSize(width),\n            height: getSize(height),\n            overflow: 'hidden',\n            margin: '0 auto',\n            outline: 'none',\n            ...this.props.style\n        };\n\n        const onClickHandler = isClickToPauseDisabled ? () => null : this.handleClickToPause;\n\n        return (\n            // Bug with eslint rules https://github.com/airbnb/javascript/issues/1374\n            // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n            <div\n                ref={c => {\n                    this.el = c;\n                }}\n                style={lottieStyles}\n                onClick={onClickHandler}\n                title={title}\n                role={ariaRole}\n                aria-label={ariaLabel}\n                tabIndex='0'\n            />\n        );\n    }\n}\n\nLottie.propTypes = {\n    eventListeners: PropTypes.arrayOf(PropTypes.object),\n    options: PropTypes.object.isRequired,\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    isStopped: PropTypes.bool,\n    isPaused: PropTypes.bool,\n    speed: PropTypes.number,\n    segments: PropTypes.arrayOf(PropTypes.number),\n    direction: PropTypes.number,\n    ariaRole: PropTypes.string,\n    ariaLabel: PropTypes.string,\n    isClickToPauseDisabled: PropTypes.bool,\n    title: PropTypes.string,\n    style: PropTypes.string\n};\n\nLottie.defaultProps = {\n    eventListeners: [],\n    isStopped: false,\n    isPaused: false,\n    speed: 1,\n    ariaRole: 'button',\n    ariaLabel: 'animation',\n    isClickToPauseDisabled: false,\n    title: ''\n};\n\nexport default Lottie;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getText } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaCaption.css';\n\nclass MediaCaption extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    render() {\n        const { text } = this.props;\n\n        return (\n            <div className='media-caption' onClick={this.handleClick}>\n                <div className='media-caption-text'>{text}</div>\n            </div>\n        );\n    }\n}\n\nMediaCaption.propTypes = {\n    text: PropTypes.array\n};\n\nMediaCaption.defaultProps = {};\n\nexport default MediaCaption;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from './FileProgress';\nimport Lottie from './Lottie';\nimport MediaCaption from './MediaCaption';\nimport { getMediaFile, getMediaPreviewFile } from '../../Utils/File';\nimport { getText, isAnimationMessage, isLottieMessage, isVideoMessage } from '../../Utils/Message';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewerContent.css';\n\nclass MediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n        this.lottieRef = React.createRef();\n\n        const { chatId, messageId, size } = this.props;\n\n        let [width, height, file] = getMediaFile(chatId, messageId, size);\n        file = FileStore.get(file.id) || file;\n\n        let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n        thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n        const message = MessageStore.get(chatId, messageId);\n        const text = getText(message);\n\n        //console.log('mediaViewer file', file);\n        //console.log('mediaViewer thumbnail', thumbnail);\n\n        this.state = {\n            speed: 1,\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            isPlaying: false,\n            width: width,\n            height: height,\n            file: file,\n            text: text,\n            thumbnailWidth: thumbnailWidth,\n            thumbnailHeight: thumbnailHeight,\n            thumbnail: thumbnail\n        };\n\n        this.updateAnimationData();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, messageId, size } = props;\n\n        if (chatId !== state.prevChatId || messageId !== state.prevMessageId) {\n            let [width, height, file] = getMediaFile(chatId, messageId, size);\n            file = FileStore.get(file.id) || file;\n\n            let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n            thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n\n            return {\n                speed: 1,\n                prevChatId: chatId,\n                prevMessageId: messageId,\n                isPlaying: false,\n                width: width,\n                height: height,\n                file: file,\n                text: text,\n                thumbnailWidth: thumbnailWidth,\n                thumbnailHeight: thumbnailHeight,\n                thumbnail: thumbnail\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.updateAnimationData();\n        }\n    }\n\n    onClientUpdateDocumentBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.updateAnimationData();\n        }\n    };\n\n    updateAnimationData = async () => {\n        const { chatId, messageId, size } = this.props;\n\n        if (!isLottieMessage(chatId, messageId)) {\n            return;\n        }\n\n        const [width, height, file] = getMediaFile(chatId, messageId, size);\n        const animationData = await this.getAnimationData(file);\n\n        this.setState({ animationData });\n    };\n\n    getAnimationData = file => {\n        return new Promise(resolve => {\n            if (!file) {\n                resolve(null);\n                return;\n            }\n\n            const blob = FileStore.getBlob(file.id);\n            if (!blob) {\n                resolve(null);\n                return;\n            }\n\n            const fileReader = new FileReader();\n            fileReader.onload = event => resolve(JSON.parse(event.target.result));\n            fileReader.onerror = () => resolve(null);\n            fileReader.onabort = () => resolve(null);\n            fileReader.readAsText(blob);\n        });\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId, size } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            this.setState({\n                width,\n                height,\n                file\n            });\n        }\n    };\n\n    onClientUpdateMediaThumbnailBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaPreviewFile(chatId, messageId);\n            this.setState({\n                thumbnailWidth: width,\n                thumbnailHeight: height,\n                thumbnail: file\n            });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId, messageId, size } = this.props;\n        const { chat_id, message_id } = update;\n\n        if (chatId === chat_id && messageId === message_id) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n            this.setState({\n                width: width,\n                height: height,\n                file: file,\n                text: text\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n    };\n\n    changeSpeed = speed => {\n        this.setState({\n            speed\n        });\n    };\n\n    render() {\n        const { chatId, messageId } = this.props;\n        const {\n            animationData,\n            width,\n            height,\n            thumbnailWidth,\n            thumbnailHeight,\n            file,\n            text,\n            thumbnail,\n            isPlaying\n        } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob) || '';\n\n        const thumbnailBlob = thumbnail ? FileStore.getBlob(thumbnail.id) || thumbnail.blob : null;\n        const thumbnailSrc = FileStore.getBlobUrl(thumbnailBlob);\n        const isBlurred = isBlurredThumbnail({ width: thumbnailWidth, height: thumbnailHeight });\n\n        const isVideo = isVideoMessage(chatId, messageId);\n        const isAnimation = isAnimationMessage(chatId, messageId);\n        const isLottie = isLottieMessage(chatId, messageId);\n        let videoWidth = width;\n        let videoHeight = height;\n        if (Math.max(videoWidth, videoHeight) > 640) {\n            const scale = 640 / Math.max(videoWidth, videoHeight);\n            videoWidth = videoWidth > videoHeight ? 640 : Math.floor(videoWidth * scale);\n            videoHeight = videoHeight > videoWidth ? 640 : Math.floor(videoHeight * scale);\n        }\n\n        let content = null;\n        if (isVideo) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        ref={this.videoRef}\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        controls\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPlay'\n                            });\n                        }}\n                        onCanPlay={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                player.volume = PlayerStore.volume;\n                            }\n                        }}\n                        onPause={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPause'\n                            });\n                        }}\n                        onEnded={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerEnded'\n                            });\n                        }}\n                        onVolumeChange={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                TdLibController.clientUpdate({\n                                    '@type': 'clientUpdateMediaVolume',\n                                    volume: player.volume\n                                });\n                            }\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isAnimation) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        loop\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isLottie) {\n            const defaultOptions = {\n                loop: true,\n                autoplay: true,\n                //path: src,\n                animationData: animationData,\n                rendererSettings: {\n                    preserveAspectRatio: 'xMidYMid slice'\n                }\n            };\n            const { speed } = this.state;\n\n            content = (\n                <Lottie\n                    ref={this.lottieRef}\n                    speed={speed}\n                    options={defaultOptions}\n                    height='auto'\n                    width={400}\n                    isStopped={false}\n                    isPaused={false}\n                />\n            );\n        } else {\n            content = <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />;\n        }\n\n        return (\n            <div className='media-viewer-content'>\n                {content}\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} zIndex={2} />\n                {text && text.length > 0 && <MediaCaption text={text} />}\n            </div>\n        );\n    }\n}\n\nMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired\n};\n\nexport default MediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport './MediaViewerButton.css';\n\nclass MediaViewerButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { disabled, onClick } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { disabled, grow, children } = this.props;\n\n        const className = classNames(\n            disabled ? 'media-viewer-button-disabled' : 'media-viewer-button',\n            { grow: grow }\n        );\n\n        return (\n            <div className={className} onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default MediaViewerButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './MediaViewerFooterText.css';\n\nclass MediaViewerFooterText extends React.Component {\n    render() {\n        const { title, subtitle } = this.props;\n\n        return (\n            <div className=\"media-viewer-footer-text\">\n                <div className=\"media-viewer-footer-text-wrapper\">\n                    <span>{title}</span>\n                    {\n                        Boolean(subtitle) && (\n                            <span>\n                                &nbsp;\n                                {subtitle}\n                            </span>\n                        )}\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterText.propTypes = {\n    title: PropTypes.string,\n    subtitle: PropTypes.string\n};\n\nexport default MediaViewerFooterText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './MediaViewerFooterButton.css';\n\nconst styles = theme => ({\n    checked: {\n        color: theme.palette.primary.main\n    }\n});\n\nclass MediaViewerFooterButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick, disabled } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { checked, children, classes, disabled, title } = this.props;\n\n        return (\n            <div\n                className={classNames(disabled ? 'media-viewer-footer-button-disabled' : 'media-viewer-footer-button', {\n                    [classes.checked]: checked\n                })}\n                title={title}\n                onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterButton.propTypes = {\n    title: PropTypes.string,\n    disabled: PropTypes.bool,\n    checked: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles)(MediaViewerFooterButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport SlowMotionVideoIcon from '@material-ui/icons/SlowMotionVideo';\nimport MediaViewerControl from '../Tile/MediaViewerControl';\nimport MediaViewerContent from './MediaViewerContent';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport { getSize } from '../../Utils/Common';\nimport {\n    cancelPreloadMediaViewerContent,\n    getMediaFile,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    saveOrDownload\n} from '../../Utils/File';\nimport {\n    filterMessages,\n    isAnimationMessage,\n    isLottieMessage,\n    isMediaContent,\n    isVideoMessage\n} from '../../Utils/Message';\nimport { between } from '../../Utils/Common';\nimport { PHOTO_SIZE, PHOTO_BIG_SIZE, MEDIA_SLICE_LIMIT } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    transform: 'scaleX(-1)'\n};\n\nconst iconStyle = {\n    padding: 20\n};\n\nconst navigationIconStyle = {\n    padding: 35\n};\n\nclass MediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.contentRef = React.createRef();\n        this.history = [];\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            speed: 1,\n            background: 'media-viewer-default',\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            currentMessageId: messageId,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false,\n            deleteForAll: true\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        if (nextState.background !== background) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentMessageId !== currentMessageId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        if (nextState.speed !== speed) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handleNext();\n        } else if (event.keyCode === 37) {\n            this.handlePrevious();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id, new_content, old_content } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (chatId !== chat_id) return;\n\n        const message = MessageStore.get(chat_id, message_id);\n        if (!message) return;\n\n        loadMediaViewerContent([message]);\n\n        const addMessage = isMediaContent(new_content) && !isMediaContent(old_content);\n        if (addMessage) {\n            if (\n                this.history.length >= 2 &&\n                (this.firstSliceLoaded ||\n                    between(message_id, this.history[0].id, this.history[this.history.length - 1].id))\n            ) {\n                let inserted = false;\n                let history = [];\n                for (let i = 0; i < this.history.length; i++) {\n                    if (this.history[i].id > message_id) {\n                        history.push(this.history[i]);\n                    } else {\n                        if (!inserted) {\n                            inserted = true;\n                            history.push(message);\n                        }\n                        history.push(this.history[i]);\n                    }\n                }\n                this.history = history;\n            }\n\n            const index = this.history.findIndex(x => x.id === currentMessageId);\n            this.setState({\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index),\n                totalCount: totalCount + 1\n            });\n        }\n\n        const removeMessage = !isMediaContent(new_content) && isMediaContent(old_content);\n        if (removeMessage) {\n            let oldHistory = this.history;\n            this.history = this.history.filter(x => x.id !== message_id);\n\n            if (currentMessageId === message_id) {\n                const filterMap = new Map();\n                filterMap.set(message_id, message_id);\n\n                this.moveToNextMedia(oldHistory, filterMap);\n                this.setState({\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            } else {\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            }\n        }\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chat_id, message_ids, is_permanent } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (!is_permanent) return;\n        if (chatId !== chat_id) return;\n\n        const filterMap = message_ids.reduce((accumulator, currentId) => {\n            accumulator.set(currentId, currentId);\n            return accumulator;\n        }, new Map());\n\n        const oldHistory = this.history;\n        let deletedCount = oldHistory.length;\n\n        this.history = this.history.filter(x => !filterMap.has(x.id));\n        deletedCount -= this.history.length;\n\n        this.setState({ totalCount: Math.max(totalCount - deletedCount, 0) });\n\n        if (!this.history.length) {\n            ApplicationStore.setMediaViewerContent(null);\n            return;\n        }\n\n        if (filterMap.has(currentMessageId)) {\n            this.moveToNextMedia(oldHistory, filterMap);\n        }\n    };\n\n    onUpdateNewMessage = update => {\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        const { message } = update;\n        if (!message) return;\n        if (!isMediaContent(message.content)) return;\n\n        if (message.chat_id !== chatId) return;\n        if (!this.firstSliceLoaded) return;\n\n        this.history = [message].concat(this.history);\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: totalCount + 1\n        });\n    };\n\n    getFilter = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterChatPhoto'\n                };\n            }\n            case 'messagePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            case 'messageVideo': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            default: {\n                return null;\n            }\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId, messageId } = this.props;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: messageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: 2 * MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = result.messages;\n        this.firstSliceLoaded = result.messages.length === 0;\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index)\n        });\n\n        if (index === -1) {\n            this.history = [MessageStore.get(chatId, currentMessageId)];\n            preloadMediaViewerContent(0, this.history);\n        } else {\n            preloadMediaViewerContent(index, this.history);\n\n            const filter = this.getFilter(chatId, messageId);\n            if (!filter) return;\n\n            const maxCount = 1500;\n            let count = 0;\n            while (!this.firstSliceLoaded && count < maxCount) {\n                const result = await TdLibController.send({\n                    '@type': 'searchChatMessages',\n                    chat_id: chatId,\n                    query: '',\n                    sender_user_id: 0,\n                    from_message_id: this.history.length > 0 ? this.history[0].id : 0,\n                    offset: -99,\n                    limit: 99 + 1,\n                    filter: filter\n                });\n                count += result.messages.length;\n\n                filterMessages(result, this.history);\n                MessageStore.setItems(result.messages);\n\n                this.history = result.messages.concat(this.history);\n                this.firstSliceLoaded = result.messages.length === 0;\n\n                const { currentMessageId } = this.state;\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    firstSliceLoaded: this.firstSliceLoaded,\n                    totalCount: result.total_count\n                });\n            }\n        }\n    };\n\n    handleClose = () => {\n        ApplicationStore.setMediaViewerContent(null);\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        if (index !== -1) {\n            cancelPreloadMediaViewerContent(index, this.history);\n        }\n    };\n\n    saveAnimation = (animation, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!animation) return;\n\n        const { animation: file, file_name } = animation;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateAnimationBlob(chat_id, id, fileId));\n    };\n\n    saveDocument = (document, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!document) return;\n\n        const { document: file, file_name } = document;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateDocumentBlob(chat_id, id, fileId));\n    };\n\n    saveVideo = (video, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!video) return;\n\n        const { video: file, file_name } = video;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateVideoBlob(chat_id, id, fileId));\n    };\n\n    savePhoto = (photo, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!photo) return;\n\n        const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n        if (!photoSize) return;\n\n        const { photo: file } = photoSize;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file.id + '.jpg', message, () => FileStore.updatePhotoBlob(chat_id, id, fileId));\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.saveAnimation(animation, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.saveDocument(document, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) return;\n\n                const { animation, document, photo, video } = web_page;\n\n                if (animation) {\n                    this.saveAnimation(animation, message);\n                    return;\n                }\n\n                if (document) {\n                    this.saveDocument(document, message);\n                    return;\n                }\n\n                if (photo) {\n                    this.savePhoto(photo, message);\n                    return;\n                }\n\n                if (video) {\n                    this.saveVideo(video, message);\n                    return;\n                }\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.saveVideo(video, message);\n                break;\n            }\n        }\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: chatId,\n                messageIds: [currentMessageId]\n            }\n        });\n    };\n\n    handleDelete = () => {\n        this.handleDialogOpen();\n        return;\n\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n        if (!message.content) return;\n\n        const { photo } = message.content;\n        if (photo) {\n            const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n            if (photoSize) {\n                let file = photoSize.photo;\n                file = FileStore.get(file.id) || file;\n                if (file) {\n                    const store = FileStore.getReadWriteStore();\n\n                    FileStore.deleteLocalFile(store, file);\n                }\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: 0,\n                limit: MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = this.history.concat(result.messages);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: MEDIA_SLICE_LIMIT + 1,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.firstSliceLoaded = result.messages.length === 0;\n        this.history = result.messages.concat(this.history);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            firstSliceLoaded: this.firstSliceLoaded,\n            totalCount: result.total_count\n        });\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentMessageId: this.history[index].id,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        preloadMediaViewerContent(index, this.history);\n        return true;\n    };\n\n    moveToNextMedia = (oldHistory, filterMap) => {\n        const { currentMessageId } = this.state;\n\n        const index = oldHistory.findIndex(x => x.id === currentMessageId);\n        let nextId = 0;\n        for (let i = index - 1; i >= 0; i--) {\n            if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                nextId = oldHistory[i].id;\n                break;\n            }\n        }\n        if (!nextId) {\n            for (let i = index + 1; i < oldHistory.length; i++) {\n                if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                    nextId = oldHistory[i].id;\n                    break;\n                }\n            }\n        }\n\n        if (!nextId) return;\n\n        const nextIndex = this.history.findIndex(x => x.id === nextId);\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            } else if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    handleDialogOpen = () => {\n        this.setState({ deleteConfirmationOpened: true });\n    };\n\n    handleDialogClose = () => {\n        this.setState({ deleteConfirmationOpened: false });\n    };\n\n    handleDone = () => {\n        this.setState({ deleteConfirmationOpened: false });\n\n        const { chatId } = this.props;\n        const { currentMessageId, deleteForAll } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n        const canBeDeleted = can_be_deleted_only_for_self || can_be_deleted_for_all_users;\n        if (!canBeDeleted) return;\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: chatId,\n            message_ids: [currentMessageId],\n            revoke: can_be_deleted_for_all_users && deleteForAll\n        });\n    };\n\n    handleChangeDeleteForAll = event => {\n        this.setState({ deleteForAll: event.target.checked });\n    };\n\n    handleInvertColors = () => {\n        const { background } = this.state;\n\n        let nextBackground = 'media-viewer-default';\n        switch (background) {\n            case 'media-viewer-default': {\n                nextBackground = 'media-viewer-dark';\n                break;\n            }\n            case 'media-viewer-dark': {\n                nextBackground = 'media-viewer-light';\n                break;\n            }\n            case 'media-viewer-light': {\n                nextBackground = 'media-viewer-default';\n                break;\n            }\n        }\n\n        this.setState({\n            background: nextBackground\n        });\n    };\n\n    handleChangeSpeed = () => {\n        if (!this.contentRef) return;\n\n        const { current } = this.contentRef;\n        if (!current) return;\n\n        const { speed } = this.state;\n        const nextSpeed = speed < 1 ? 1 : 0.1;\n\n        this.setState({ speed: nextSpeed });\n\n        current.changeSpeed(nextSpeed);\n    };\n\n    canBeForwarded = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return false;\n\n        const { can_be_forwarded, content } = message;\n        if (!content) return false;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return true;\n            }\n            default: {\n                return can_be_forwarded;\n            }\n        }\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            deleteForAll,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        let index = -1;\n        if (totalCount && firstSliceLoaded) {\n            index = this.history.findIndex(x => x.id === currentMessageId);\n        }\n        const maxCount = Math.max(this.history.length, totalCount);\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        const { can_be_deleted_for_all_users, can_be_deleted_only_for_self } = message;\n\n        const canBeDeleted = can_be_deleted_for_all_users || can_be_deleted_only_for_self;\n        const canBeForwarded = this.canBeForwarded(chatId, currentMessageId);\n\n        let deleteConfirmationContent = '';\n        if (isVideoMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteGIF');\n        } else {\n            deleteConfirmationContent = t('AreYouSureDeletePhoto');\n        }\n        const deleteConfirmation = deleteConfirmationOpened ? (\n            <Dialog\n                transitionDuration={0}\n                open={deleteConfirmationOpened}\n                onClose={this.handleDialogClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{deleteConfirmationContent}</DialogContentText>\n                    {can_be_deleted_for_all_users && (\n                        <FormControlLabel\n                            label={t('DeleteForAll')}\n                            control={\n                                <Checkbox color='primary' value='deleteAll' onChange={this.handleChangeDeleteForAll} />\n                            }\n                            checked={deleteForAll}\n                        />\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleDialogClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        const [width, height, file] = getMediaFile(chatId, currentMessageId, PHOTO_BIG_SIZE);\n\n        const fileId = file ? file.id : 0;\n        let title = t('AttachPhoto');\n        if (isVideoMessage(chatId, currentMessageId)) {\n            title = t('AttachVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            title = t('AttachGif');\n        } else if (isLottieMessage(chatId, currentMessageId)) {\n            title = '';\n        }\n\n        return (\n            <div className={classNames('media-viewer', background)}>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <MediaViewerContent\n                            ref={this.contentRef}\n                            chatId={chatId}\n                            messageId={currentMessageId}\n                            size={PHOTO_BIG_SIZE}\n                            onClick={this.handlePrevious}\n                        />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <MediaViewerControl chatId={chatId} messageId={currentMessageId} />\n                    <MediaViewerFooterText\n                        title={title}\n                        subtitle={maxCount && index >= 0 ? `${maxCount - index} of ${maxCount}` : null}\n                    />\n                    {isLottieMessage(chatId, currentMessageId) && (\n                        <>\n                            <MediaViewerFooterButton\n                                title={t('ChangeSpeed')}\n                                checked={speed < 1}\n                                onClick={this.handleChangeSpeed}>\n                                <SlowMotionVideoIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                            <MediaViewerFooterButton\n                                title={t('InvertBackgroundColor')}\n                                onClick={this.handleInvertColors}>\n                                <InvertColorsIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                        </>\n                    )}\n                    <MediaViewerDownloadButton title={t('Save')} fileId={fileId} onClick={this.handleSave} />\n                    <MediaViewerFooterButton\n                        title={t('Forward')}\n                        disabled={!canBeForwarded}\n                        onClick={this.handleForward}>\n                        <ReplyIcon style={forwardIconStyle} />\n                    </MediaViewerFooterButton>\n                    <MediaViewerFooterButton title={t('Delete')} disabled={!canBeDeleted} onClick={this.handleDelete}>\n                        <DeleteIcon style={iconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(MediaViewer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FileProgress from './FileProgress';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { PROFILE_PHOTO_BIG_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './ProfileMediaViewer.css';\n\nclass ProfileMediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, photo } = this.props;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n\n        this.state = {\n            prevChatId: chatId,\n            prevPhoto: photo,\n            width: PROFILE_PHOTO_BIG_SIZE,\n            height: PROFILE_PHOTO_BIG_SIZE,\n            file: file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, photo } = props;\n\n        if (chatId !== state.prevChatId || photo !== state.prevPhoto) {\n            return {\n                prevChatId: chatId,\n                prevPhoto: photo,\n                width: PROFILE_PHOTO_BIG_SIZE,\n                height: PROFILE_PHOTO_BIG_SIZE,\n                file: photo.big\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    onClientUpdateChatBlob = update => {\n        const { chatId, photo } = this.props;\n\n        if (chatId === update.chatId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    onClientUpdateUserBlob = update => {\n        const { chatId, photo } = this.props;\n        const userId = getChatUserId(chatId);\n\n        if (userId === update.userId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n\n        this.props.onClick(event);\n    };\n\n    render() {\n        const { width, height, file } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob);\n\n        return (\n            <div className='media-viewer-content'>\n                <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} />\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired\n};\n\nexport default ProfileMediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport './MediaViewerControl.css';\n\nclass ProfileMediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, date } = this.props;\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    <ChatTileControl chatId={chatId} showSavedMessages={false} />\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} />\n                        </div>\n                        {date && (\n                            <div className='media-viewer-row message-meta'>\n                                <span className='message-date'>{date}</span>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    date: PropTypes.string\n};\n\nexport default ProfileMediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport ProfileMediaViewerContent from './ProfileMediaViewerContent';\nimport ProfileMediaViewerControl from '../Tile/ProfileMediaViewerControl';\nimport { getPhotoFromChat, getChatUserId, isPrivateChat } from '../../Utils/Chat';\nimport { getProfilePhotoDateHint, getProfilePhoto } from '../../Utils/User';\nimport { loadProfileMediaViewerContent, preloadProfileMediaViewerContent, saveOrDownload } from '../../Utils/File';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ProfileMediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    color: 'white',\n    transform: 'scaleX(-1)'\n};\n\nconst deleteIconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nconst navigationIconStyle = {\n    padding: 35,\n    color: 'white'\n};\n\nclass ProfileMediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.history = [];\n\n        const { chatId, fileId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            prevFileId: fileId,\n            currentIndex: 0,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            currentFileId,\n            hasPreviousMedia,\n            hasNextMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened\n        } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentFileId !== currentFileId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        const photo = getPhotoFromChat(chatId);\n        loadProfileMediaViewerContent(chatId, [photo]);\n\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handlePrevious();\n        } else if (event.keyCode === 37) {\n            this.handleNext();\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!isPrivateChat(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getUserProfilePhotos',\n            user_id: getChatUserId(chatId),\n            offset: 0,\n            limit: 100\n        });\n\n        this.history = result.photos;\n        this.firstSliceLoaded = result.photos.length === 0;\n\n        const index = 0;\n\n        this.setState({\n            currentIndex: index,\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n    };\n\n    handleClose = () => {\n        ApplicationStore.setProfileMediaViewerContent(null);\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        if (!photo) return;\n        if (!photo.big) return;\n\n        const file = FileStore.get(photo.big.id) || photo.big;\n        if (!file) return;\n\n        saveOrDownload(file, file.id + '.jpg', chat, () => FileStore.updateChatPhotoBlob(chatId, file.id));\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        if (!isPrivateChat(chatId)) return;\n\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        if (index < 0 || index >= this.history.length) return;\n        const photo = getProfilePhoto(this.history[index]);\n        if (!photo) return;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n        if (!file) return;\n\n        const photoSize = {\n            '@type': 'photoSize',\n            type: 'c',\n            photo: file,\n            width: 640,\n            height: 640\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { photoSize }\n        });\n    };\n\n    handleDelete = () => {\n        const { chatId, messageId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n\n        if (photo) {\n            let file = photo.big;\n            file = FileStore.get(file.id) || file;\n            if (file) {\n                const store = FileStore.getReadWriteStore();\n\n                FileStore.deleteLocalFile(store, file);\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        return;\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        return;\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentIndex: index,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        const { chatId } = this.props;\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n        return true;\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            currentIndex,\n            hasNextMedia,\n            hasPreviousMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened,\n            deleteForAll\n        } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const deleteConfirmation = null;\n        const inHistory = index >= 0 && index < this.history.length;\n        const photo = inHistory ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        const userProfilePhoto = inHistory ? this.history[index] : null;\n        const { big: file } = photo;\n\n        return (\n            <div className='media-viewer'>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <ProfileMediaViewerContent chatId={chatId} photo={photo} onClick={this.handlePrevious} />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <ProfileMediaViewerControl chatId={chatId} date={getProfilePhotoDateHint(userProfilePhoto)} />\n                    <MediaViewerFooterText\n                        title={t('AttachPhoto')}\n                        subtitle={totalCount && index >= 0 ? `${index + 1} of ${totalCount}` : null}\n                    />\n                    <MediaViewerDownloadButton title={t('Save')} fileId={file.id} onClick={this.handleSave} />\n                    {isPrivateChat(chatId) && (\n                        <MediaViewerFooterButton\n                            title={t('Forward')}\n                            disabled={!inHistory}\n                            onClick={this.handleForward}>\n                            <ReplyIcon style={forwardIconStyle} />\n                        </MediaViewerFooterButton>\n                    )}\n                    <MediaViewerFooterButton title={t('Delete')} disabled onClick={this.handleDelete}>\n                        <DeleteIcon style={deleteIconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(ProfileMediaViewer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport './AppInactiveControl.css';\n\nclass AppInactiveControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static handleReload() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div className='app-inactive'>\n                <div className='app-inactive-wrapper'>\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\n                    <div className='app-inactive-description'>\n                        Telegram supports only one active tab with the app.\n                        <br />\n                        Please reload this page to continue using this tab or close it.\n                    </div>\n                    <div className='app-inactive-actions'>\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\n                            Reload app\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AppInactiveControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Cookies from 'universal-cookie';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport localForage from 'localforage';\nimport LocalForageWithGetItems from 'localforage-getitems';\nimport packageJson from '../package.json';\nimport withLanguage from './Language';\nimport withTheme from './Theme';\nimport withSnackbarNotifications from './Notifications';\nimport ForwardDialog from './Components/Dialog/ForwardDialog';\nimport ChatInfo from './Components/ColumnRight/ChatInfo';\nimport Dialogs from './Components/ColumnLeft/Dialogs';\nimport DialogDetails from './Components/ColumnMiddle/DialogDetails';\nimport AuthFormControl from './Components/Auth/AuthFormControl';\nimport Footer from './Components/Footer';\nimport MediaViewer from './Components/Viewer/MediaViewer';\nimport ProfileMediaViewer from './Components/Viewer/ProfileMediaViewer';\nimport AppInactiveControl from './Components/Additional/AppInactiveControl';\nimport registerServiceWorker from './registerServiceWorker';\nimport { highlightMessage } from './Actions/Client';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ChatStore from './Stores/ChatStore';\nimport UserStore from './Stores/UserStore';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\nimport './TelegramApp.css';\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    },\n    '@global': {\n        a: {\n            color: theme.palette.primary.main\n        },\n        code: {\n            color: theme.palette.primary.dark\n        }\n    }\n});\n\nclass TelegramApp extends Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`Start Telegram Web ${packageJson.version}`);\n\n        this.dialogDetailsRef = React.createRef();\n\n        this.state = {\n            authorizationState: null,\n            inactive: false,\n            mediaViewerContent: ApplicationStore.mediaViewerContent,\n            fatalError: false,\n            forwardInfo: null\n        };\n\n        /*this.store = localForage.createInstance({\n                    name: 'tdlib'\n                });*/\n\n        //this.initDB();\n    }\n\n    componentWillMount() {\n        const { location } = this.props;\n\n        TdLibController.init(location);\n    }\n\n    componentDidMount() {\n        TdLibController.addListener('update', this.onUpdate);\n\n        UserStore.on('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.on('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.on('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('update', this.onUpdate);\n\n        UserStore.removeListener('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.removeListener('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.removeListener('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    onClientUpdateOpenChat = update => {\n        const { chatId, messageId, popup } = update;\n\n        this.handleSelectChat(chatId, messageId, popup);\n    };\n\n    onClientUpdateOpenUser = update => {\n        const { userId, popup } = update;\n\n        this.handleSelectUser(userId, popup);\n    };\n\n    onUpdate = update => {\n        if (FIRST_START_OPTIMIZATIONS) {\n            if (!this.checkServiceWorker) {\n                this.checkServiceWorker = true;\n\n                const cookieEnabled = navigator.cookieEnabled;\n                if (cookieEnabled) {\n                    const cookies = new Cookies();\n                    const register = cookies.get('register');\n                    if (!register) {\n                        registerServiceWorker();\n                    }\n                }\n            }\n        }\n    };\n\n    onClientUpdateForward = update => {\n        const { info } = update;\n\n        this.setState({ forwardInfo: info });\n    };\n\n    onUpdateFatalError = update => {\n        this.setState({ fatalError: true });\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state });\n\n        if (!window.hasFocus) return;\n        if (!authorization_state) return;\n        if (authorization_state['@type'] !== 'authorizationStateReady') return;\n\n        TdLibController.send({\n            '@type': 'setOption',\n            name: 'online',\n            value: { '@type': 'optionValueBoolean', value: true }\n        });\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.setState({ mediaViewerContent: ApplicationStore.mediaViewerContent });\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.setState({\n            profileMediaViewerContent: ApplicationStore.profileMediaViewerContent\n        });\n    };\n\n    onClientUpdateAppInactive = update => {\n        this.setState({ inactive: true });\n    };\n\n    handleSelectChat = (chatId, messageId = null, popup = false) => {\n        const currentChatId = ApplicationStore.getChatId();\n        const currentDialogChatId = ApplicationStore.dialogChatId;\n        const currentMessageId = ApplicationStore.getMessageId();\n\n        if (popup) {\n            if (currentDialogChatId !== chatId) {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateDialogChatId',\n                    chatId\n                });\n            }\n\n            return;\n        }\n\n        if (currentChatId === chatId && messageId && currentMessageId === messageId) {\n            this.dialogDetailsRef.current.scrollToMessage();\n            if (messageId) {\n                highlightMessage(chatId, messageId);\n            }\n        } else if (currentChatId === chatId && !messageId) {\n            const chat = ChatStore.get(chatId);\n            if (chat && chat.unread_count > 0) {\n                this.dialogDetailsRef.current.scrollToStart();\n            } else {\n                this.dialogDetailsRef.current.scrollToBottom();\n            }\n        } else {\n            TdLibController.setChatId(chatId, messageId);\n        }\n    };\n\n    handleSelectUser = async (userId, popup) => {\n        if (!userId) return;\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: userId,\n            force: true\n        });\n\n        this.handleSelectChat(chat.id, null, popup);\n    };\n\n    handleChangePhone = () => {\n        this.setState({\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\n        });\n    };\n\n    handleDragOver = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleRefresh = () => {\n        this.setState({ fatalError: false });\n        window.location.reload();\n    };\n\n    handleDestroy = () => {\n        this.setState({ fatalError: false });\n        TdLibController.send({ '@type': 'destroy' });\n    };\n\n    handleKeyDown = event => {\n        //console.log('KeyDown', event);\n    };\n\n    render() {\n        const {\n            inactive,\n            authorizationState,\n            isChatDetailsVisible,\n            mediaViewerContent,\n            profileMediaViewerContent,\n            fatalError,\n            forwardInfo\n        } = this.state;\n        const { classes } = this.props;\n\n        let page = (\n            <>\n                <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\n                    <Dialogs onClearCache={this.clearCache} onSelectChat={this.handleSelectChat} />\n                    <DialogDetails ref={this.dialogDetailsRef} />\n                    {isChatDetailsVisible && <ChatInfo />}\n                </div>\n                <Footer />\n            </>\n        );\n\n        if (inactive) {\n            page = (\n                <>\n                    <div className='header-wrapper' />\n                    <div className={classNames(classes.page, 'page')}>\n                        <AppInactiveControl />\n                    </div>\n                    <Footer />\n                </>\n            );\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed': {\n                    break;\n                }\n                case 'authorizationStateClosing': {\n                    break;\n                }\n                case 'authorizationStateLoggingOut': {\n                    break;\n                }\n                case 'authorizationStateReady': {\n                    break;\n                }\n                case 'authorizationStateWaitCode':\n                case 'authorizationStateWaitPassword':\n                case 'authorizationStateWaitPhoneNumber':\n                    page = (\n                        <AuthFormControl\n                            authorizationState={authorizationState}\n                            onChangePhone={this.handleChangePhone}\n                        />\n                    );\n                    break;\n                case 'authorizationStateWaitEncryptionKey': {\n                    break;\n                }\n                case 'authorizationStateWaitTdlibParameters': {\n                    break;\n                }\n            }\n        }\n\n        return (\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\n                {page}\n                {mediaViewerContent && <MediaViewer {...mediaViewerContent} />}\n                {profileMediaViewerContent && <ProfileMediaViewer {...profileMediaViewerContent} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={fatalError}\n                    onClose={this.handleRefresh}\n                    aria-labelledby='fatal-error-dialog-title'\n                    aria-describedby='fatal-error-dialog-description'>\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id='fatal-error-dialog-description'>\n                            Oops! Something went wrong. We need to refresh this page.\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleDestroy} color='primary'>\n                            Log out\n                        </Button>\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\n                            Refresh\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n                {forwardInfo && <ForwardDialog {...forwardInfo} />}\n            </div>\n        );\n    }\n}\n\nconst keyMap = new Map();\nwindow.keyMap = keyMap;\n\nasync function openPinnedChat(index) {\n    const chats = await TdLibController.send({\n        '@type': 'getChats',\n        offset_order: '9223372036854775807',\n        offset_chat_id: 0,\n        limit: 10\n    });\n\n    if (chats) {\n        let pinnedIndex = -1;\n        for (let i = 0; i < chats.chat_ids.length; i++) {\n            const chat = ChatStore.get(chats.chat_ids[i]);\n            if (chat && chat.is_pinned) {\n                pinnedIndex++;\n            }\n\n            if (pinnedIndex === index) {\n                TdLibController.setChatId(chat.id);\n                return;\n            }\n        }\n    }\n}\n\ndocument.addEventListener('keyup', event => {\n    keyMap.delete(event.key);\n    //console.log('keyup key=' + event.key, keyMap);\n});\n\ndocument.addEventListener('keydown', async event => {\n    keyMap.set(event.key, event.key);\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\n\n    const { authorizationState } = ApplicationStore;\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n    if (keyMap.size > 3) return;\n\n    if (event.altKey && event.ctrlKey) {\n        switch (event.key) {\n            case '0': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                const chat = await TdLibController.send({\n                    '@type': 'createPrivateChat',\n                    user_id: UserStore.getMyId(),\n                    force: true\n                });\n\n                if (chat) {\n                    TdLibController.setChatId(chat.id);\n                }\n                break;\n            }\n            case '1': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(0);\n                break;\n            }\n            case '2': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(1);\n                break;\n            }\n            case '3': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(2);\n                break;\n            }\n            case '4': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(3);\n                break;\n            }\n            case '5': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(4);\n                break;\n            }\n        }\n    }\n});\n\nwindow.hasFocus = true;\n\n// set offline on page lost focus\nwindow.onblur = function() {\n    keyMap.clear();\n    //console.log('window.blur key', keyMap);\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = false;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: false\n    });\n};\n\n// set online on page get focus\nwindow.onfocus = function() {\n    keyMap.clear();\n    //console.log('window.focus key', keyMap);\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = true;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: true\n    });\n};\n\n// disable back navigation\nwindow.history.pushState(null, null, window.location.href);\nwindow.onpopstate = function() {\n    window.history.go(1);\n};\n\nconst enhance = compose(\n    withLanguage,\n    withTheme,\n    withStyles(styles),\n    withSnackbarNotifications\n);\n\nexport default enhance(TelegramApp);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport TelegramApp from './TelegramApp';\nimport registerServiceWorker from './registerServiceWorker';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport './index.css';\n\nReactDOM.render(\n    <Router>\n        <Route path='' component={TelegramApp} />\n    </Router>,\n    document.getElementById('root')\n);\n\nif (FIRST_START_OPTIMIZATIONS) {\n    const cookieEnabled = navigator.cookieEnabled;\n    if (cookieEnabled) {\n        const cookies = new Cookies();\n        const register = cookies.get('register');\n        if (register) {\n            registerServiceWorker();\n        }\n    } else {\n        registerServiceWorker();\n    }\n} else {\n    registerServiceWorker();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const ANIMATION_FRAME_DURATION_MS = 40;\nexport const ANIMATION_DURATION_200MS = 200;\nexport const ANIMATION_DURATION_300MS = 300;\nexport const CHAT_SLICE_LIMIT = 25;\nexport const LOCATION_HEIGHT = 150;\nexport const LOCATION_SCALE = 2;\nexport const LOCATION_WIDTH = 300;\nexport const LOCATION_ZOOM = 16;\nexport const MEDIA_SLICE_LIMIT = 20;\nexport const MESSAGE_SLICE_LIMIT = 20;\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\nexport const MUTED_VALUE_MIN = 0;\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\nexport const PHOTO_BIG_SIZE = 1280;\nexport const PHOTO_DISPLAY_SIZE = 260;\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\nexport const PHOTO_SIZE = 320;\nexport const PHOTO_THUMBNAIL_SIZE = 90;\nexport const POLL_QUESTION_LENGTH = 255;\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\nexport const POLL_OPTION_LENGTH = 100;\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\nexport const POLL_OPTIONS_MAX_COUNT = 10;\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\nexport const STICKER_DISPLAY_SIZE = 192;\nexport const STICKER_PREVIEW_DISPLAY_SIZE = 256;\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\nexport const TYPING_INPUT_INTERVAL_S = 8;\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\nexport const VERBOSITY_JS_MAX = 20;\nexport const VERBOSITY_JS_MIN = 0;\nexport const VERBOSITY_MAX = 20;\nexport const VERBOSITY_MIN = 0;\nexport const USERNAME_LENGTH_MIN = 5;\nexport const MAX_SNACK = 10;\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\nexport const THUMBNAIL_BLURRED_SIZE = 320;\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const THUMBNAIL_PRIORITY = 32;\nexport const FILE_PRIORITY = 1;\nexport const FIRST_START_OPTIMIZATIONS = true;\nexport const PLAYER_VOLUME_NORMAL = 0.25;\nexport const PLAYER_STARTTIME = 0.0;\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass ActionScheduler {\n    constructor(actionCallback, cancelCallback) {\n        this.actions = new Map();\n        this.actionCallback = actionCallback;\n        this.cancelCallback = cancelCallback;\n    }\n\n    add = (key, timeout, action, cancel) => {\n        if (this.actions.has(key)) {\n            return false;\n        }\n\n        let expire = new Date();\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\n\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n\n        return true;\n    };\n\n    invoke = async key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.action) await item.action();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    remove = key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.cancel) item.cancel();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    setTimeout = () => {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    };\n\n    handleTimer = () => {\n        let now = new Date();\n        let expired = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\n        }\n\n        for (let item of expired) {\n            this.actions.delete(item.key);\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\n            if (item.value.action) item.value.action();\n        }\n\n        this.setTimeout();\n    };\n}\n\nexport default ActionScheduler;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport ActionScheduler from '../Utils/ActionScheduler';\n\nclass ApplicationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.chatId = 0;\n        this.dialogChatId = 0;\n        this.messageId = null;\n        this.statistics = new Map();\n        this.scopeNotificationSettings = new Map();\n        this.authorizationState = null;\n        this.connectionState = null;\n        this.isChatDetailsVisible = false;\n        this.mediaViewerContent = null;\n        this.profileMediaViewerContent = null;\n        this.dragging = false;\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\n\n        this.addTdLibListener();\n        this.addStatistics();\n        this.setMaxListeners(Infinity);\n    }\n\n    addScheduledAction = (key, timeout, action, cancel) => {\n        return this.actionScheduler.add(key, timeout, action, cancel);\n    };\n\n    invokeScheduledAction = async key => {\n        await this.actionScheduler.invoke(key);\n    };\n\n    removeScheduledAction = key => {\n        this.actionScheduler.remove(key);\n    };\n\n    handleScheduledAction = item => {\n        console.log('Invoked scheduled action key=', item.key);\n    };\n\n    handleCancelScheduledAction = item => {\n        console.log('Cancel scheduled action key=', item.key);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                this.authorizationState = update.authorization_state;\n\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateLoggingOut':\n                        this.loggingOut = true;\n                        break;\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.sendTdParameters();\n                        break;\n                    case 'authorizationStateWaitEncryptionKey':\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\n                        break;\n                    case 'authorizationStateWaitPhoneNumber':\n                        break;\n                    case 'authorizationStateWaitCode':\n                        break;\n                    case 'authorizationStateWaitPassword':\n                        break;\n                    case 'authorizationStateReady':\n                        this.loggingOut = false;\n                        break;\n                    case 'authorizationStateClosing':\n                        break;\n                    case 'authorizationStateClosed':\n                        if (!this.loggingOut) {\n                            document.title += ': Zzz';\n                            this.emit('clientUpdateAppInactive');\n                        } else {\n                            TdLibController.init();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateConnectionState': {\n                this.connectionState = update.state;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateScopeNotificationSettings': {\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateFatalError': {\n                this.emit(update['@type'], update);\n\n                break;\n            }\n            case 'updateServiceNotification': {\n                const { type, content } = update;\n\n                if (!content) return;\n                if (content['@type'] === 'messageText') {\n                    const { text } = content;\n                    if (!text) return;\n\n                    if (text['@type'] === 'formattedText' && text.text) {\n                        switch (type) {\n                            case 'AUTH_KEY_DROP_DUPLICATE':\n                                let result = window.confirm(text.text);\n                                if (result) {\n                                    TdLibController.logOut();\n                                }\n                                break;\n                            default:\n                                alert(text.text);\n                                break;\n                        }\n                    }\n                }\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateChatId': {\n                const extendedUpdate = {\n                    '@type': 'clientUpdateChatId',\n                    nextChatId: update.chatId,\n                    nextMessageId: update.messageId,\n                    previousChatId: this.chatId,\n                    previousMessageId: this.messageId\n                };\n\n                this.chatId = update.chatId;\n                this.messageId = update.messageId;\n\n                this.emit('clientUpdateChatId', extendedUpdate);\n                break;\n            }\n            case 'clientUpdateDialogChatId': {\n                const { chatId } = update;\n                this.dialogChatId = chatId;\n\n                this.emit('clientUpdateDialogChatId', update);\n                break;\n            }\n            case 'clientUpdateFocusWindow': {\n                TdLibController.send({\n                    '@type': 'setOption',\n                    name: 'online',\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\n                });\n\n                this.emit('clientUpdateFocusWindow', update);\n                break;\n            }\n            case 'clientUpdateForward': {\n                this.emit('clientUpdateForward', update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                if (update.inProgress && this.chatId === update.chatId) {\n                    TdLibController.setChatId(0);\n                }\n\n                break;\n            }\n        }\n    };\n\n    onUpdateStatistics = update => {\n        if (!update) return;\n\n        if (this.statistics.has(update['@type'])) {\n            const count = this.statistics.get(update['@type']);\n\n            this.statistics.set(update['@type'], count + 1);\n        } else {\n            this.statistics.set(update['@type'], 1);\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    addStatistics = () => {\n        TdLibController.addListener('update', this.onUpdateStatistics);\n    };\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            nextChatId: chatId,\n            nextMessageId: messageId,\n            previousChatId: this.chatId,\n            previousMessageId: this.messageId\n        };\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n        this.emit(update['@type'], update);\n    };\n\n    getChatId() {\n        return this.chatId;\n    }\n\n    getMessageId() {\n        return this.messageId;\n    }\n\n    searchChat(chatId) {\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\n    }\n\n    changeChatDetailsVisibility(visibility) {\n        this.isChatDetailsVisible = visibility;\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\n    }\n\n    setMediaViewerContent(content) {\n        this.mediaViewerContent = content;\n        this.emit('clientUpdateMediaViewerContent', content);\n    }\n\n    setProfileMediaViewerContent(content) {\n        this.profileMediaViewerContent = content;\n        this.emit('clientUpdateProfileMediaViewerContent', content);\n    }\n\n    getConnectionState() {\n        return this.connectionState;\n    }\n\n    getAuthorizationState() {\n        return this.authorizationState;\n    }\n\n    getNotificationSettings(scope) {\n        return this.scopeNotificationSettings.get(scope);\n    }\n\n    setNotificationSettings(scope, notificationSettings) {\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\n    }\n\n    getDragging = () => {\n        return this.dragging;\n    };\n\n    setDragging = value => {\n        this.dragging = value;\n        this.emit('clientUpdateDragging', value);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new ApplicationStore();\nwindow.application = store;\nexport default store;\n"],"sourceRoot":""}